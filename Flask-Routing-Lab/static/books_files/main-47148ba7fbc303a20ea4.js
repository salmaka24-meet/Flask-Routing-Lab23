(()=>{var e={185:(e,t)=>{"use strict";var r=function(e){return e instanceof Uint8Array?e:new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0)};t.lx=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.reduce((function(e,t){return e+=t&&(t.byteLength||t.length)||0}),0),o=new Uint8Array(i),s=0;return t.forEach((function(e){e=r(e),o.set(e,s),s+=e.byteLength})),o},t.qX=function(e,t){void 0===t&&(t=!1);return"string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e?[]:(t||(e=unescape(encodeURIComponent(e))),e.split("").map((function(e){return 255&e.charCodeAt(0)})))},t.Ki=r},8044:(e,t,r)=>{"use strict";var n,i=(n=r(8908))&&"object"==typeof n&&"default"in n?n.default:n,o={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},s=["video","audio","text"],a=["Video","Audio","Text"],c=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,r){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(r).toString(16)).slice(-2)})):e},u=function(e){return e.map(c)},l=function(e){void 0===e&&(e="");var t=e.split(","),r={},n=[];return t.forEach((function(e){var t;e=e.trim(),s.forEach((function(n){var i=o[n].exec(e.toLowerCase());if(i&&!(i.length<=1)){t=n;var s=e.substring(0,i[1].length),a=e.replace(s,"");r[n]={type:s,details:a}}})),t||n.push(e)})),n.length&&(r.unknown=n),r},d=function(e){return void 0===e&&(e=""),o.audio.test(e.trim().toLowerCase())},h=function(e){return void 0===e&&(e=""),o.text.test(e.trim().toLowerCase())},p=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase().split(",").map((function(e){return c(e.trim())})),r="video";1===t.length&&d(t[0])?r="audio":1===t.length&&h(t[0])&&(r="application");var n="mp4";return t.every((function(e){return o.mp4.test(e)}))?n="mp4":t.every((function(e){return o.webm.test(e)}))?n="webm":t.every((function(e){return o.ogg.test(e)}))&&(n="ogg"),r+"/"+n+';codecs="'+e+'"'}};t.lA="mp4a.40.2",t.xz="avc1.4d400d",t.p7=function(e){return void 0===e&&(e=""),i.MediaSource&&i.MediaSource.isTypeSupported&&i.MediaSource.isTypeSupported(p(e))||!1},t.Jg=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var r=e.mediaGroups.AUDIO[t];if(!r)return null;for(var n in r){var i=r[n];if(i.default&&i.playlists)return l(i.playlists[0].attributes.CODECS)}return null},t._5=p,t.KL=d,t.tf=function(e){return void 0===e&&(e=""),o.video.test(e.trim().toLowerCase())},t.Hi=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every((function(e){e=e.trim();for(var t=0;t<a.length;t++){if(o["muxer"+a[t]].test(e))return!0}return!1}))},t.kS=l,t.ws=c},9352:(e,t)=>{"use strict";var r=function(e){return e instanceof Uint8Array?e:new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0)},n=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,r(e));try{return decodeURIComponent(escape(t))}catch(e){}return t},i=function(e,t){void 0===t&&(t=0);var n=(e=r(e))[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},o=function e(t,o){return void 0===o&&(o=0),(t=r(t)).length-o<10||"ID3"!==n(t.subarray(o,o+3))?o:e(t,o+=i(t,o))},s={aac:function(e){var t=o(e);return e.length>=t+2&&255==(255&e[t])&&224==(224&e[t+1])&&16==(22&e[t+1])},mp3:function(e){var t=o(e);return e.length>=t+2&&255==(255&e[t])&&224==(224&e[t+1])&&2==(6&e[t+1])},webm:function(e){return e.length>=4&&26==(255&e[0])&&69==(255&e[1])&&223==(255&e[2])&&163==(255&e[3])},mp4:function(e){return e.length>=8&&/^(f|s)typ$/.test(n(e.subarray(4,8)))&&!/^ftyp3g$/.test(n(e.subarray(4,10)))},"3gp":function(e){return e.length>=10&&/^ftyp3g$/.test(n(e.subarray(4,10)))},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){return e.length>=4&&/^fLaC$/.test(n(e.subarray(0,4)))},ogg:function(e){return e.length>=4&&/^OggS$/.test(n(e.subarray(0,4)))}},a=Object.keys(s).filter((function(e){return"ts"!==e})).concat("ts");a.forEach((function(e){var t=s[e];s[e]=function(e){return t(r(e))}}));t.Xm=function(e){e=r(e);for(var t=0;t<a.length;t++){var n=a[t];if(s[n](e))return n}return""},t.cc=o,t.cz=function(e){e=r(e);for(var t=0;t<e.length;){var i=(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0;if("moof"===n(e.subarray(t+4,t+8)))return!0;0===i||i+t>e.length?t=e.length:t+=i}return!1}},7927:(e,t,r)=>{"use strict";
/*! @name @videojs/vhs-utils @version 2.3.0 @license MIT */var n,i=(n=r(8908))&&"object"==typeof n&&"default"in n?n.default:n;e.exports=function(e){for(var t,r=(t=e,i.atob?i.atob(t):Buffer.from(t,"base64").toString("binary")),n=new Uint8Array(r.length),o=0;o<r.length;o++)n[o]=r.charCodeAt(o);return n}},4810:(e,t)=>{"use strict";var r=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,n=/^application\/dash\+xml/i;t.t=function(e){return r.test(e)?"hls":n.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null}},9972:(e,t,r)=>{"use strict";
/*! @name @videojs/vhs-utils @version 2.3.0 @license MIT */function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=n(r(9945)),o=n(r(8908));e.exports=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=i.buildAbsoluteURL(o.location&&o.location.href||"",e)),i.buildAbsoluteURL(e,t))}},7388:e=>{"use strict";
/*! @name @videojs/vhs-utils @version 2.3.0 @license MIT */var t=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var r=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(r,1),r>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var r=t.length,n=0;n<r;++n)t[n].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),o=t.length,s=0;s<o;++s)t[s].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}();e.exports=t},8236:(e,t,r)=>{"use strict";var n=r(5387),i=r.n(n),o=r(8908),s=r.n(o),a=r(9144),c=r.n(a),u="6.9.0";var l=function(e,t){t.isImmediatePropagationStopped=function(){return!0},t.cancelBubble=!0,t.isPropagationStopped=function(){return!0}},d=function(e,t,r){l(0,r),e.trigger({type:t+r.type,originalEvent:r})};function h(e){"playing"===e.type?function(e,t){e.ads.isInAdMode()&&(e.ads.isContentResuming()?e.ads._contentEnding&&d(e,"content",t):d(e,"ad",t))}(this,e):"ended"===e.type?function(e,t){e.ads.isInAdMode()?e.ads.isContentResuming()?(l(0,t),e.trigger("resumeended")):d(e,"ad",t):e.ads._contentHasEnded||e.ads.stitchedAds()||(d(e,"content",t),e.trigger("readyforpostroll"))}(this,e):"loadstart"===e.type||"loadeddata"===e.type||"loadedmetadata"===e.type?function(e,t){if(!("loadstart"===t.type&&!e.ads._hasThereBeenALoadStartDuringPlayerLife||"loadeddata"===t.type&&!e.ads._hasThereBeenALoadedData||"loadedmetadata"===t.type&&!e.ads._hasThereBeenALoadedMetaData))if(e.ads.inAdBreak())d(e,"ad",t);else{if(e.currentSrc()!==e.ads.contentSrc)return;d(e,"content",t)}}(this,e):"play"===e.type?function(e,t){e.ads.inAdBreak()?d(e,"ad",t):e.ads.isContentResuming()&&d(e,"content",t)}(this,e):this.ads.isInAdMode()&&(this.ads.isContentResuming()?d(this,"content",e):d(this,"ad",e))}var p={},f=function(){!function(e){if(i().dom.isInFrame()&&"function"!=typeof s().__tcfapi){for(var t,r=s(),n={};r;){try{if(r.frames.__tcfapiLocator){t=r;break}}catch(e){}if(r===s().top)break;r=r.parent}if(!t)return;s().__tcfapi=function(e,r,i,o){var s=Math.random()+"",a={__tcfapiCall:{command:e,parameter:o,version:r,callId:s}};n[s]=i,t.postMessage(a,"*")},s().addEventListener("message",(function(e){var t={};try{t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){}var r=t.__tcfapiReturn;r&&"function"==typeof n[r.callId]&&(n[r.callId](r.returnValue,r.success),n[r.callId]=null)}),!1)}}(),"function"==typeof s().__tcfapi&&s().__tcfapi("addEventListener",2,(function(e,t){t&&(p=e)}))},m=function(e,t){return t?encodeURIComponent(e):e},v=function(e,t,r){if(e&&e[r])for(var n=e[r],i=Object.keys(n),o=0;o<i.length;o++){t["{mediainfo."+r+"."+i[o]+"}"]=n[i[o]]}};function g(e,t,r){var n=this,o={};e=e.replace(/{([^}=]+)=([^}]+)}/g,(function(e,t,r){return o["{"+t+"}"]=r,"{"+t+"}"})),void 0===t&&(t=!1);var a={};for(var u in void 0!==r&&(a=r),a["{player.id}"]=this.options_["data-player"]||this.id_,a["{player.height}"]=this.currentHeight(),a["{player.width}"]=this.currentWidth(),a["{mediainfo.id}"]=this.mediainfo?this.mediainfo.id:"",a["{mediainfo.name}"]=this.mediainfo?this.mediainfo.name:"",a["{mediainfo.duration}"]=this.mediainfo?this.mediainfo.duration:"",a["{player.duration}"]=this.duration(),a["{player.pageUrl}"]=i().dom.isInFrame()?c().referrer:s().location.href,a["{playlistinfo.id}"]=this.playlistinfo?this.playlistinfo.id:"",a["{playlistinfo.name}"]=this.playlistinfo?this.playlistinfo.name:"",a["{timestamp}"]=(new Date).getTime(),a["{document.referrer}"]=c().referrer,a["{window.location.href}"]=s().location.href,a["{random}"]=Math.floor(1e12*Math.random()),["description","tags","reference_id","ad_keys"].forEach((function(e){n.mediainfo&&n.mediainfo[e]?a["{mediainfo."+e+"}"]=n.mediainfo[e]:o["{mediainfo."+e+"}"]?a["{mediainfo."+e+"}"]=o["{mediainfo."+e+"}"]:a["{mediainfo."+e+"}"]=""})),v(this.mediainfo,a,"custom_fields"),v(this.mediainfo,a,"customFields"),Object.keys(p).forEach((function(e){a["{tcf."+e+"}"]=p[e]})),a["{tcf.gdprAppliesInt}"]=p.gdprApplies?1:0,a)e=e.split(u).join(m(a[u],t));for(var l in e=e.replace(/{pageVariable\.([^}]+)}/g,(function(e,r){for(var n,a=s(),c=r.split("."),u=0;u<c.length;u++)u===c.length-1?n=a[c[u]]:a=a[c[u]];var l=typeof n;return null===n?"null":void 0===n?o["{pageVariable."+r+"}"]?o["{pageVariable."+r+"}"]:(i().log.warn('Page variable "'+r+'" not found'),""):"string"!==l&&"number"!==l&&"boolean"!==l?(i().log.warn('Page variable "'+r+'" is not a supported type'),""):m(String(n),t)})),o)e=e.replace(l,o[l]);return e}var y={processMetadataTracks:function(e,t){for(var r=e.textTracks(),n=function(r){"metadata"===r.kind&&(e.ads.cueTextTracks.setMetadataTrackMode(r),t(e,r))},i=0;i<r.length;i++)n(r[i]);r.addEventListener("addtrack",(function(e){n(e.track)}))},setMetadataTrackMode:function(e){},getSupportedAdCue:function(e,t){return t},isSupportedAdCue:function(e,t){return!0},getCueId:function(e,t){return t.id}},b=function(e,t){return void 0!==t&&e.ads.includedCues[t]},_=function(e,t){void 0!==t&&""!==t&&(e.ads.includedCues[t]=!0)};function T(){!1!==this.ads._shouldBlockPlay&&(this.paused()||(this.ads.debug("Playback was canceled by cancelContentPlay"),this.pause()),this.ads._cancelledPlay=!0)}y.processAdTrack=function(e,t,r,n){e.ads.includedCues={};for(var o=0;o<t.length;o++){var s=t[o],a=this.getSupportedAdCue(e,s);if(!this.isSupportedAdCue(e,s))return void i().log.warn("Skipping as this is not a supported ad cue.",s);var c=this.getCueId(e,s),u=s.startTime;if(b(e,c))return void i().log("Skipping ad already seen with ID "+c);n&&n(e,a,c,u),r(e,a,c,u),_(e,c)}};var w={},S=i();w.isMiddlewareMediatorSupported=function(){return!S.browser.IS_IOS&&!S.browser.IS_ANDROID&&!!(S.use&&S.middleware&&S.middleware.TERMINATOR)},w.playMiddleware=function(e){return{setSource:function(e,t){t(null,e)},callPlay:function(){if(e.ads&&!0===e.ads._shouldBlockPlay)return e.ads.debug("Using playMiddleware to block content playback"),e.ads._playBlocked=!0,S.middleware.TERMINATOR},play:function(t,r){e.ads&&e.ads._playBlocked&&t?(e.ads.debug("Play call to Tech was terminated."),e.trigger("play"),e.addClass("vjs-has-started"),e.ads._playBlocked=!1):r&&r.catch&&r.catch((function(t){"NotAllowedError"!==t.name||i().browser.IS_SAFARI||e.trigger("pause")}))}}},w.testHook=function(e){S=e};var C=w.playMiddleware,E=w.isMiddlewareMediatorSupported;var O=function(){function e(){}return e.getState=function(t){if(t)return e.states_&&e.states_[t]?e.states_[t]:void 0},e.registerState=function(t,r){if("string"!=typeof t||!t)throw new Error('Illegal state name, "'+t+'"; must be a non-empty string.');return e.states_||(e.states_={}),e.states_[t]=r,r},e}(),k=function(){function e(e){this.player=e}e._getName=function(){return"Anonymous State"};var t=e.prototype;return t.transitionTo=function(e){var t=this.player;this.cleanup(t);var r=new e(t);t.ads._state=r,t.ads.debug(this.constructor._getName()+" -> "+r.constructor._getName());for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];r.init.apply(r,[t].concat(i))},t.init=function(){},t.cleanup=function(){},t.onPlay=function(){},t.onPlaying=function(){},t.onEnded=function(){},t.onAdEnded=function(){},t.onAdsReady=function(){i().log.warn("Unexpected adsready event")},t.onAdsError=function(){},t.onAdsCanceled=function(){},t.onAdTimeout=function(){},t.onAdStarted=function(){},t.onContentChanged=function(){},t.onContentResumed=function(){},t.onReadyForPostroll=function(){i().log.warn("Unexpected readyforpostroll event")},t.onNoPreroll=function(){},t.onNoPostroll=function(){},t.startLinearAdMode=function(){i().log.warn("Unexpected startLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.endLinearAdMode=function(){i().log.warn("Unexpected endLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.skipLinearAdMode=function(){i().log.warn("Unexpected skipLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.isAdState=function(){throw new Error("isAdState unimplemented for "+this.constructor._getName())},t.isWaitingForAdBreak=function(){return!1},t.isContentResuming=function(){return!1},t.inAdBreak=function(){return!1},t.handleEvent=function(e){var t=this.player;"play"===e?this.onPlay(t):"adsready"===e?this.onAdsReady(t):"adserror"===e?this.onAdsError(t):"adscanceled"===e?this.onAdsCanceled(t):"adtimeout"===e?this.onAdTimeout(t):"ads-ad-started"===e?this.onAdStarted(t):"contentchanged"===e?this.onContentChanged(t):"contentresumed"===e?this.onContentResumed(t):"readyforpostroll"===e?this.onReadyForPostroll(t):"playing"===e?this.onPlaying(t):"ended"===e?this.onEnded(t):"nopreroll"===e?this.onNoPreroll(t):"nopostroll"===e?this.onNoPostroll(t):"adended"===e&&this.onAdEnded(t)},e}();function x(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}O.registerState("State",k);var A=function(e){function t(t){var r;return(r=e.call(this,t)||this).contentResuming=!1,r.waitingForAdBreak=!1,r}x(t,e);var r=t.prototype;return r.isAdState=function(){return!0},r.onPlaying=function(){var e=O.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},r.onContentResumed=function(){var e=O.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},r.isWaitingForAdBreak=function(){return this.waitingForAdBreak},r.isContentResuming=function(){return this.contentResuming},r.inAdBreak=function(){return!0===this.player.ads._inLinearAdMode},t}(k);O.registerState("AdState",A);var P=function(e){function t(){return e.apply(this,arguments)||this}x(t,e);var r=t.prototype;return r.isAdState=function(){return!1},r.onContentChanged=function(e){var t=O.getState("BeforePreroll"),r=O.getState("Preroll");e.ads.debug("Received contentchanged event (ContentState)"),e.paused()?this.transitionTo(t):(this.transitionTo(r,!1),e.pause(),e.ads._pausedOnContentupdate=!0)},t}(k);O.registerState("ContentState",P);var I,M=function(e){function t(){return e.apply(this,arguments)||this}x(t,e),t._getName=function(){return"AdsDone"};var r=t.prototype;return r.init=function(e){e.ads._contentHasEnded=!0,e.trigger("ended")},r.startLinearAdMode=function(){i().log.warn("Unexpected startLinearAdMode invocation (AdsDone)")},t}(O.getState("ContentState"));O.registerState("AdsDone",M);var L={start:function(e){e.ads.debug("Starting ad break"),e.ads._inLinearAdMode=!0,e.trigger("adstart"),e.ads.shouldTakeSnapshots()&&(e.ads.snapshot=function(e){var t;t=i().browser.IS_IOS&&e.ads.isLive(e)&&e.seekable().length>0?e.currentTime()-e.seekable().end(0):e.currentTime();var r=e.$(".vjs-tech"),n=e.textTracks?e.textTracks():[],o=[],s={ended:e.ended(),currentSrc:e.currentSrc(),sources:e.currentSources(),src:e.tech_.src(),currentTime:t,type:e.currentType()};r&&(s.style=r.getAttribute("style"));for(var a=0;a<n.length;a++){var c=n[a];o.push({track:c,mode:c.mode}),c.mode="disabled"}return s.suppressedTracks=o,s}(e)),e.ads.shouldPlayContentBehindAd(e)&&(e.ads.preAdVolume_=e.volume(),e.volume(0)),e.addClass("vjs-ad-playing"),e.hasClass("vjs-live")&&e.removeClass("vjs-live"),e.ads.removeNativePoster()},end:function(e,t){e.ads.debug("Ending ad break"),void 0===t&&(t=function(){}),e.ads.adType=null,e.ads._inLinearAdMode=!1,e.trigger("adend"),e.removeClass("vjs-ad-playing"),e.ads.isLive(e)&&e.addClass("vjs-live"),e.ads.shouldTakeSnapshots()?function(e,t){var r=e.ads.snapshot;if(void 0===t&&(t=function(){}),!0===e.ads.disableNextSnapshotRestore)return e.ads.disableNextSnapshotRestore=!1,delete e.ads.snapshot,void t();var n,o=e.$(".vjs-tech"),s=20,a=r.suppressedTracks,c=function(){for(var e=0;e<a.length;e++)(n=a[e]).track.mode=n.mode},u=function(){var t;if(i().browser.IS_IOS&&e.ads.isLive(e)){if(r.currentTime<0&&(t=e.seekable().length>0?e.seekable().end(0)+r.currentTime:e.currentTime(),e.currentTime(t)),e.paused()){var n=e.play();n&&n.catch&&n.catch((function(e){i().log.warn("Play promise rejected in IOS snapshot resume",e)}))}}else if(r.ended)e.currentTime(e.duration());else{e.currentTime(r.currentTime);var o=e.play();o&&o.catch&&o.catch((function(e){i().log.warn("Play promise rejected in snapshot resume",e)}))}e.ads.shouldRemoveAutoplay_&&(e.autoplay(!1),e.ads.shouldRemoveAutoplay_=!1)},l=function t(){if(e.off("contentcanplay",t),I&&e.clearTimeout(I),(o=e.el().querySelector(".vjs-tech")).readyState>1)return u();if(void 0===o.seekable)return u();if(o.seekable.length>0)return u();if(s--)e.setTimeout(t,50);else try{u()}catch(e){i().log.warn("Failed to resume the content after an advertisement",e)}};if("style"in r&&o.setAttribute("style",r.style||""),e.ads.videoElementRecycled())e.one("resumeended",(function(){delete e.ads.snapshot,t()})),e.one("contentloadedmetadata",c),i().browser.IS_IOS&&!e.autoplay()&&(e.autoplay(!0),e.ads.shouldRemoveAutoplay_=!0),e.src(r.sources),e.one("contentcanplay",l),I=e.setTimeout(l,2e3);else{if(c(),!e.ended()){var d=e.play();d&&d.catch&&d.catch((function(e){i().log.warn("Play promise rejected in snapshot restore",e)}))}delete e.ads.snapshot,t()}}(e,t):(e.volume(e.ads.preAdVolume_),t())}},D=function(e){function t(){return e.apply(this,arguments)||this}x(t,e),t._getName=function(){return"Preroll"};var r=t.prototype;return r.init=function(e,t,r){if(this.waitingForAdBreak=!0,e.addClass("vjs-ad-loading"),r||e.ads.nopreroll_)return this.resumeAfterNoPreroll(e);var n=e.ads.settings.timeout;"number"==typeof e.ads.settings.prerollTimeout&&(n=e.ads.settings.prerollTimeout),this._timeout=e.setTimeout((function(){e.trigger("adtimeout")}),n),t?this.handleAdsReady():this.adsReady=!1},r.onAdsReady=function(e){e.ads.inAdBreak()?i().log.warn("Unexpected adsready event (Preroll)"):(e.ads.debug("Received adsready event (Preroll)"),this.handleAdsReady())},r.handleAdsReady=function(){this.adsReady=!0,this.readyForPreroll()},r.afterLoadStart=function(e){var t=this.player;t.ads._hasThereBeenALoadStartDuringPlayerLife?e():(t.ads.debug("Waiting for loadstart..."),t.one("loadstart",(function(){t.ads.debug("Received loadstart event"),e()})))},r.noPreroll=function(){var e=this;this.afterLoadStart((function(){e.player.ads.debug("Skipping prerolls due to nopreroll event (Preroll)"),e.resumeAfterNoPreroll(e.player)}))},r.readyForPreroll=function(){var e=this.player;this.afterLoadStart((function(){e.ads.debug("Triggered readyforpreroll event (Preroll)"),e.trigger("readyforpreroll")}))},r.onAdsCanceled=function(e){var t=this;e.ads.debug("adscanceled (Preroll)"),this.afterLoadStart((function(){t.resumeAfterNoPreroll(e)}))},r.onAdsError=function(e){var t=this;i().log("adserror (Preroll)"),this.inAdBreak()?e.ads.endLinearAdMode():this.afterLoadStart((function(){t.resumeAfterNoPreroll(e)}))},r.startLinearAdMode=function(){var e=this.player;!this.adsReady||e.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected startLinearAdMode invocation (Preroll)"):(this.clearTimeout(e),e.ads.adType="preroll",this.waitingForAdBreak=!1,L.start(e),e.ads._shouldBlockPlay=!1)},r.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},r.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(e.removeClass("vjs-ad-loading"),e.addClass("vjs-ad-content-resuming"),this.contentResuming=!0,L.end(e))},r.skipLinearAdMode=function(){var e=this,t=this.player;t.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected skipLinearAdMode invocation"):this.afterLoadStart((function(){t.trigger("adskip"),t.ads.debug("skipLinearAdMode (Preroll)"),e.resumeAfterNoPreroll(t)}))},r.onAdTimeout=function(e){var t=this;this.afterLoadStart((function(){e.ads.debug("adtimeout (Preroll)"),t.resumeAfterNoPreroll(e)}))},r.onNoPreroll=function(e){e.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected nopreroll event (Preroll)"):this.noPreroll()},r.resumeAfterNoPreroll=function(e){if(this.contentResuming=!0,e.ads._shouldBlockPlay=!1,this.cleanupPartial(e),e.ads._playRequested||e.ads._pausedOnContentupdate)if(e.paused()){e.ads.debug("resumeAfterNoPreroll: attempting to resume playback (Preroll)");var t=e.play();t&&t.then&&t.then(null,(function(e){}))}else e.ads.debug("resumeAfterNoPreroll: already playing (Preroll)"),e.trigger("play"),e.trigger("playing")},r.cleanup=function(e){e.ads._hasThereBeenALoadStartDuringPlayerLife||i().log.warn("Leaving Preroll state before loadstart event can cause issues."),this.cleanupPartial(e)},r.cleanupPartial=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming"),this.clearTimeout(e)},r.clearTimeout=function(e){e.clearTimeout(this._timeout),this._timeout=null},t}(O.getState("AdState"));O.registerState("Preroll",D);var R=function(e){function t(){return e.apply(this,arguments)||this}x(t,e),t._getName=function(){return"BeforePreroll"};var r=t.prototype;return r.init=function(e){this.adsReady=!1,this.shouldResumeToContent=!1,e.ads._shouldBlockPlay=!e.ads.settings.allowVjsAutoplay||!e.autoplay()},r.onAdsReady=function(e){e.ads.debug("Received adsready event (BeforePreroll)"),this.adsReady=!0},r.onPlay=function(e){var t=O.getState("Preroll");e.ads.debug("Received play event (BeforePreroll)"),this.transitionTo(t,this.adsReady,this.shouldResumeToContent)},r.onAdsCanceled=function(e){e.ads.debug("adscanceled (BeforePreroll)"),this.shouldResumeToContent=!0},r.onAdsError=function(){this.player.ads.debug("adserror (BeforePreroll)"),this.shouldResumeToContent=!0},r.onNoPreroll=function(){this.player.ads.debug("Skipping prerolls due to nopreroll event (BeforePreroll)"),this.shouldResumeToContent=!0},r.skipLinearAdMode=function(){var e=this.player;e.trigger("adskip"),e.ads.debug("skipLinearAdMode (BeforePreroll)"),this.shouldResumeToContent=!0},r.onContentChanged=function(){this.init(this.player)},t}(O.getState("ContentState"));O.registerState("BeforePreroll",R);var N=function(e){function t(){return e.apply(this,arguments)||this}x(t,e),t._getName=function(){return"Midroll"};var r=t.prototype;return r.init=function(e){e.ads.adType="midroll",L.start(e),e.addClass("vjs-ad-loading")},r.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},r.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(this.contentResuming=!0,e.addClass("vjs-ad-content-resuming"),e.removeClass("vjs-ad-loading"),L.end(e))},r.onAdsError=function(e){this.inAdBreak()&&e.ads.endLinearAdMode()},r.cleanup=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming")},t}(O.getState("AdState"));O.registerState("Midroll",N);var j=function(e){function t(){return e.apply(this,arguments)||this}x(t,e),t._getName=function(){return"Postroll"};var r=t.prototype;return r.init=function(e){if(this.waitingForAdBreak=!0,e.ads._contentEnding=!0,e.ads.nopostroll_){this.resumeContent(e);var t=O.getState("AdsDone");this.transitionTo(t)}else{e.addClass("vjs-ad-loading");var r=e.ads.settings.timeout;"number"==typeof e.ads.settings.postrollTimeout&&(r=e.ads.settings.postrollTimeout),this._postrollTimeout=e.setTimeout((function(){e.trigger("adtimeout")}),r)}},r.startLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected startLinearAdMode invocation (Postroll)"):(e.ads.adType="postroll",e.clearTimeout(this._postrollTimeout),this.waitingForAdBreak=!1,L.start(e))},r.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},r.endLinearAdMode=function(){var e=this,t=this.player,r=O.getState("AdsDone");this.inAdBreak()&&(t.removeClass("vjs-ad-loading"),this.resumeContent(t),L.end(t,(function(){e.transitionTo(r)})))},r.skipLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected skipLinearAdMode invocation"):(e.ads.debug("Postroll abort (skipLinearAdMode)"),e.trigger("adskip"),this.abort(e))},r.onAdTimeout=function(e){e.ads.debug("Postroll abort (adtimeout)"),this.abort(e)},r.onAdsError=function(e){e.ads.debug("Postroll abort (adserror)"),e.ads.inAdBreak()?e.ads.endLinearAdMode():this.abort(e)},r.onContentChanged=function(e){if(this.isContentResuming()){var t=O.getState("BeforePreroll");this.transitionTo(t)}else if(!this.inAdBreak()){var r=O.getState("Preroll");this.transitionTo(r)}},r.onNoPostroll=function(e){this.isContentResuming()||this.inAdBreak()?i().log.warn("Unexpected nopostroll event (Postroll)"):this.abort(e)},r.resumeContent=function(e){this.contentResuming=!0,e.addClass("vjs-ad-content-resuming")},r.abort=function(e){var t=O.getState("AdsDone");this.resumeContent(e),e.removeClass("vjs-ad-loading"),this.transitionTo(t)},r.cleanup=function(e){e.removeClass("vjs-ad-content-resuming"),e.clearTimeout(this._postrollTimeout),e.ads._contentEnding=!1},t}(O.getState("AdState"));O.registerState("Postroll",j);var U=function(e){function t(){return e.apply(this,arguments)||this}x(t,e),t._getName=function(){return"ContentPlayback"};var r=t.prototype;return r.init=function(e){e.ads._shouldBlockPlay=!1},r.onAdsReady=function(e){e.ads.debug("Received adsready event (ContentPlayback)"),e.ads.nopreroll_||(e.ads.debug("Triggered readyforpreroll event (ContentPlayback)"),e.trigger("readyforpreroll"))},r.onReadyForPostroll=function(e){var t=O.getState("Postroll");e.ads.debug("Received readyforpostroll event"),this.transitionTo(t)},r.startLinearAdMode=function(){var e=O.getState("Midroll");this.transitionTo(e)},t}(O.getState("ContentState"));O.registerState("ContentPlayback",U);var F=function(e){function t(){return e.apply(this,arguments)||this}x(t,e),t._getName=function(){return"StitchedContentPlayback"};var r=t.prototype;return r.init=function(){this.player.ads._shouldBlockPlay=!1},r.onContentChanged=function(){this.player.ads.debug("Received contentchanged event ("+this.constructor._getName()+")")},r.startLinearAdMode=function(){var e=O.getState("StitchedAdRoll");this.transitionTo(e)},t}(O.getState("ContentState"));O.registerState("StitchedContentPlayback",F);var $=function(e){function t(){return e.apply(this,arguments)||this}x(t,e),t._getName=function(){return"StitchedAdRoll"};var r=t.prototype;return r.init=function(){this.waitingForAdBreak=!1,this.contentResuming=!1,this.player.ads.adType="stitched",L.start(this.player)},r.onPlaying=function(){},r.onContentResumed=function(){},r.onAdEnded=function(){this.endLinearAdMode(),this.player.trigger("ended")},r.endLinearAdMode=function(){var e=O.getState("StitchedContentPlayback");L.end(this.player),this.transitionTo(e)},t}(O.getState("AdState"));O.registerState("StitchedAdRoll",$);var B=w.isMiddlewareMediatorSupported,V=i().getTech("Html5").Events,q={timeout:5e3,prerollTimeout:void 0,postrollTimeout:void 0,debug:!1,stitchedAds:!1,contentIsLive:void 0,liveCuePoints:!0,allowVjsAutoplay:i().options.normalizeAutoplay||!1},H=function(e){var t=this,r=i().mergeOptions(q,e),n=[];V.concat(["firstplay","loadedalldata"]).forEach((function(e){-1===n.indexOf(e)&&n.push(e)})),t.on(n,h),B()||function(e,t){t&&i().log("Using cancelContentPlay to block content playback"),e.on("play",T)}(t,r.debug),t.setTimeout((function(){t.ads._hasThereBeenALoadStartDuringPlayerLife||""===t.src()||i().log.error("videojs-contrib-ads has not seen a loadstart event 5 seconds after being initialized, but a source is present. This indicates that videojs-contrib-ads was initialized too late. It must be initialized immediately after video.js in the same tick. As a result, some ads will not play and some media events will be incorrect. For more information, see http://videojs.github.io/videojs-contrib-ads/integrator/getting-started.html")}),5e3),t.on("ended",(function(){t.hasClass("vjs-has-started")||t.addClass("vjs-has-started")})),t.on("contenttimeupdate",(function(){t.removeClass("vjs-waiting")})),t.on(["addurationchange","adcanplay"],(function(){if(!t.ads.settings.stitchedAds&&!t.hasStarted()&&(!t.ads.snapshot||t.currentSrc()!==t.ads.snapshot.currentSrc)&&t.ads.inAdBreak()){var e=t.play();e&&e.catch&&e.catch((function(e){i().log.warn("Play promise rejected when playing ad",e)}))}})),t.on("nopreroll",(function(){t.ads.debug("Received nopreroll event"),t.ads.nopreroll_=!0})),t.on("nopostroll",(function(){t.ads.debug("Received nopostroll event"),t.ads.nopostroll_=!0})),t.on("playing",(function(){t.ads._cancelledPlay=!1,t.ads._pausedOnContentupdate=!1})),t.on("play",(function(){t.ads._playRequested=!0})),t.one("loadstart",(function(){t.ads._hasThereBeenALoadStartDuringPlayerLife=!0})),t.on("loadeddata",(function(){t.ads._hasThereBeenALoadedData=!0})),t.on("loadedmetadata",(function(){t.ads._hasThereBeenALoadedMetaData=!0})),t.ads=function(e){return{disableNextSnapshotRestore:!1,_contentEnding:!1,_contentHasEnded:!1,_hasThereBeenALoadStartDuringPlayerLife:!1,_hasThereBeenALoadedData:!1,_hasThereBeenALoadedMetaData:!1,_inLinearAdMode:!1,_shouldBlockPlay:!1,_playBlocked:!1,_playRequested:!1,adType:null,VERSION:u,reset:function(){e.ads.disableNextSnapshotRestore=!1,e.ads._contentEnding=!1,e.ads._contentHasEnded=!1,e.ads.snapshot=null,e.ads.adType=null,e.ads._hasThereBeenALoadedData=!1,e.ads._hasThereBeenALoadedMetaData=!1,e.ads._cancelledPlay=!1,e.ads._shouldBlockPlay=!1,e.ads._playBlocked=!1,e.ads.nopreroll_=!1,e.ads.nopostroll_=!1,e.ads._playRequested=!1},startLinearAdMode:function(){e.ads._state.startLinearAdMode()},endLinearAdMode:function(){e.ads._state.endLinearAdMode()},skipLinearAdMode:function(){e.ads._state.skipLinearAdMode()},stitchedAds:function(e){return void 0!==e&&(i().log.warn("Using player.ads.stitchedAds() as a setter is deprecated, it should be set as an option upon initialization of contrib-ads."),this.settings.stitchedAds=!!e),this.settings.stitchedAds},videoElementRecycled:function(){if(e.ads.shouldPlayContentBehindAd(e))return!1;if(!this.snapshot)throw new Error("You cannot use videoElementRecycled while there is no snapshot.");var t=e.tech_.src()!==this.snapshot.src,r=e.currentSrc()!==this.snapshot.currentSrc;return t||r},isLive:function(t){return void 0===t&&(t=e),"boolean"==typeof t.ads.settings.contentIsLive?t.ads.settings.contentIsLive:t.duration()===1/0||"8"===i().browser.IOS_VERSION&&0===t.duration()},shouldPlayContentBehindAd:function(t){if(void 0===t&&(t=e),t)return!!t.ads.settings.liveCuePoints&&!i().browser.IS_IOS&&!i().browser.IS_ANDROID&&t.duration()===1/0;throw new Error("shouldPlayContentBehindAd requires a player as a param")},shouldTakeSnapshots:function(t){return void 0===t&&(t=e),!this.shouldPlayContentBehindAd(t)&&!this.stitchedAds()},isInAdMode:function(){return this._state.isAdState()},isWaitingForAdBreak:function(){return this._state.isWaitingForAdBreak()},isContentResuming:function(){return this._state.isContentResuming()},isAdPlaying:function(){return this._state.inAdBreak()},inAdBreak:function(){return this._state.inAdBreak()},removeNativePoster:function(){var t=e.$(".vjs-tech");t&&t.removeAttribute("poster")},debug:function(){if(this.settings.debug){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];1===t.length&&"string"==typeof t[0]?i().log("ADS: "+t[0]):i().log.apply(i(),["ADS:"].concat(t))}}}}(t),t.ads.settings=r,r.stitchedAds=!!r.stitchedAds,r.stitchedAds?t.ads._state=new(O.getState("StitchedContentPlayback"))(t):t.ads._state=new(O.getState("BeforePreroll"))(t),t.ads._state.init(t),t.ads.cueTextTracks=y,t.ads.adMacroReplacement=g.bind(t),function(e){e.ads.contentSrc=e.currentSrc(),e.ads._seenInitialLoadstart=!1,e.on("loadstart",(function(){if(!e.ads.inAdBreak()){var t=e.currentSrc();t!==e.ads.contentSrc&&(e.ads._seenInitialLoadstart&&e.trigger({type:"contentchanged"}),e.trigger({type:"contentupdate",oldValue:e.ads.contentSrc,newValue:t}),e.ads.contentSrc=t),e.ads._seenInitialLoadstart=!0}}))}(t),t.on("contentchanged",t.ads.reset);var o=function(){var e=t.textTracks();if(!t.ads.shouldPlayContentBehindAd(t)&&t.ads.inAdBreak()&&t.tech_.featuresNativeTextTracks&&i().browser.IS_IOS&&!Array.isArray(t.textTracks()))for(var r=0;r<e.length;r++){var n=e[r];"showing"===n.mode&&(n.mode="disabled")}};t.ready((function(){t.textTracks().addEventListener("change",o)})),t.on(["play","playing","ended","adsready","adscanceled","adskip","adserror","adtimeout","adended","ads-ad-started","contentchanged","dispose","contentresumed","readyforpostroll","nopreroll","nopostroll"],(function(e){t.ads._state.handleEvent(e.type)})),t.on("dispose",(function(){t.ads.reset(),t.textTracks().removeEventListener("change",o)})),f(),t.ads.listenToTcf=f};H.VERSION=u,function(e){!function(){if(i().getPlugin)return Boolean(i().getPlugin("ads"));var e=i().getComponent("Player");return Boolean(e&&e.prototype.ads)}(i())&&((i().registerPlugin||i().plugin)("ads",e),E()&&!i().usingContribAdsMiddleware_&&(i().use("*",C),i().usingContribAdsMiddleware_=!0,i().log.debug("Play middleware has been registered with videojs")))}(H);function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},z(e,t)}function G(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,z(e,t)}var K=r(9972),X=r.n(K),Y=r(7388),Q=r.n(Y);function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J.apply(this,arguments)}var Z,ee=r(7927),te=r.n(ee),re=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return G(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(Q()),ne=function(e){for(var t,r=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},i=r.length;i--;)""!==r[i]&&((t=/([^=]*)=(.*)/.exec(r[i]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),n[t[0]]=t[1]);return n},ie=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}G(t,e);var r=t.prototype;return r.push=function(e){var t,r,n=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((function(t,r){var n=r(e);return n===e?t:t.concat([n])}),[e]).forEach((function(e){for(var i=0;i<n.customParsers.length;i++)if(n.customParsers[i].call(n,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))n.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return r={type:"tag",tagType:"inf"},t[1]&&(r.duration=parseFloat(t[1])),t[2]&&(r.title=t[2]),void n.trigger("data",r);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"targetduration"},t[1]&&(r.duration=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"totalduration"},t[1]&&(r.duration=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"version"},t[1]&&(r.version=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return r={type:"tag",tagType:"media-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return r={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return r={type:"tag",tagType:"playlist-type"},t[1]&&(r.playlistType=t[1]),void n.trigger("data",r);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"byterange"},t[1]&&(r.length=parseInt(t[1],10)),t[2]&&(r.offset=parseInt(t[2],10)),void n.trigger("data",r);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return r={type:"tag",tagType:"allow-cache"},t[1]&&(r.allowed=!/NO/.test(t[1])),void n.trigger("data",r);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(r={type:"tag",tagType:"map"},t[1]){var o=ne(t[1]);if(o.URI&&(r.uri=o.URI),o.BYTERANGE){var s=o.BYTERANGE.split("@"),a=s[0],c=s[1];r.byterange={},a&&(r.byterange.length=parseInt(a,10)),c&&(r.byterange.offset=parseInt(c,10))}}n.trigger("data",r)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(r={type:"tag",tagType:"stream-inf"},t[1]){if(r.attributes=ne(t[1]),r.attributes.RESOLUTION){var u=r.attributes.RESOLUTION.split("x"),l={};u[0]&&(l.width=parseInt(u[0],10)),u[1]&&(l.height=parseInt(u[1],10)),r.attributes.RESOLUTION=l}r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))}n.trigger("data",r)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return r={type:"tag",tagType:"media"},t[1]&&(r.attributes=ne(t[1])),void n.trigger("data",r);if(t=/^#EXT-X-ENDLIST/.exec(e))n.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))n.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return r={type:"tag",tagType:"program-date-time"},t[1]&&(r.dateTimeString=t[1],r.dateTimeObject=new Date(t[1])),void n.trigger("data",r);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return r={type:"tag",tagType:"key"},t[1]&&(r.attributes=ne(t[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2).toLowerCase()&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void n.trigger("data",r);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return r={type:"tag",tagType:"start"},t[1]&&(r.attributes=ne(t[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),void n.trigger("data",r);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-out-cont"},t[1]?r.data=t[1]:r.data="",void n.trigger("data",r);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-out"},t[1]?r.data=t[1]:r.data="",void n.trigger("data",r);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-in"},t[1]?r.data=t[1]:r.data="",void n.trigger("data",r);n.trigger("data",{type:"tag",data:e.slice(4)})}}}else n.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))},r.addParser=function(e){var t=this,r=e.expression,n=e.customType,i=e.dataParser,o=e.segment;"function"!=typeof i&&(i=function(e){return e}),this.customParsers.push((function(e){if(r.exec(e))return t.trigger("data",{type:"custom",data:i(e),customType:n,segment:o}),!0}))},r.addTagMapper=function(e){var t=e.expression,r=e.map;this.tagMappers.push((function(e){return t.test(e)?r(e):e}))},t}(Q()),oe=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new re,t.parseStream=new ie,t.lineStream.pipe(t.parseStream);var r,n,i=W(t),o=[],s={},a=function(){},c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},u=0;t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var l=0;return t.parseStream.on("data",(function(e){var t,d;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(s.byterange=t,t.length=e.length,"offset"in e||(e.offset=l)),"offset"in e&&(s.byterange=t,t.offset=e.offset),l=t.offset+t.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(s.duration=e.duration),0===e.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:te()(e.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(n.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else n=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,u=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){r={},e.uri&&(r.uri=e.uri),e.byterange&&(r.byterange=e.byterange)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||c,e.attributes?(s.attributes||(s.attributes={}),J(s.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||c,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var r=this.manifest.mediaGroups[e.attributes.TYPE];r[e.attributes["GROUP-ID"]]=r[e.attributes["GROUP-ID"]]||{},t=r[e.attributes["GROUP-ID"]],(d={default:/yes/i.test(e.attributes.DEFAULT)}).default?d.autoselect=!0:d.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(d.language=e.attributes.LANGUAGE),e.attributes.URI&&(d.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(d.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(d.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(d.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=d}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){u+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),s.dateTimeString=e.dateTimeString,s.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):this.manifest.targetDuration=e.duration},totalduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):this.manifest.totalDuration=e.duration},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=e.data},"cue-out-cont":function(){s.cueOutCont=e.data},"cue-in":function(){s.cueIn=e.data}}[e.tagType]||a).call(i)},uri:function(){s.uri=e.uri,o.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),n&&(s.key=n),s.timeline=u,r&&(s.map=r),s={}},comment:function(){},custom:function(){e.segment?(s.custom=s.custom||{},s.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(i)})),t}G(t,e);var r=t.prototype;return r.push=function(e){this.lineStream.push(e)},r.end=function(){this.lineStream.push("\n")},r.addParser=function(e){this.parseStream.addParser(e)},r.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(Q()),se=r(4810),ae=r(6150),ce=function(e){return!!e&&"object"==typeof e},ue=function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.reduce((function(t,r){return Object.keys(r).forEach((function(n){Array.isArray(t[n])&&Array.isArray(r[n])?t[n]=t[n].concat(r[n]):ce(t[n])&&ce(r[n])?t[n]=e(t[n],r[n]):t[n]=r[n]})),t}),{})},le=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])},de=function(e){if(!e.length)return[];for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t},he="INVALID_NUMBER_OF_PERIOD",pe="DASH_EMPTY_MANIFEST",fe="DASH_INVALID_XML",me="NO_BASE_URL",ve="SEGMENT_TIME_UNSPECIFIED",ge="UNSUPPORTED_UTC_TIMING_SCHEME",ye=function(e){var t=e.baseUrl,r=void 0===t?"":t,n=e.source,i=void 0===n?"":n,o=e.range,s=void 0===o?"":o,a=e.indexRange,c=void 0===a?"":a,u={uri:i,resolvedUri:X()(r||"",i)};if(s||c){var l=(s||c).split("-"),d=parseInt(l[0],10),h=parseInt(l[1],10);u.byterange={length:h-d+1,offset:d}}return u},be={static:function(e){var t=e.duration,r=e.timescale,n=void 0===r?1:r,i=e.sourceDuration;return{start:0,end:Math.ceil(i/(t/n))}},dynamic:function(e){var t=e.NOW,r=e.clientOffset,n=e.availabilityStartTime,i=e.timescale,o=void 0===i?1:i,s=e.duration,a=e.start,c=void 0===a?0:a,u=e.minimumUpdatePeriod,l=void 0===u?0:u,d=e.timeShiftBufferDepth,h=void 0===d?1/0:d,p=(t+r)/1e3,f=n+c,m=p+l-f,v=Math.ceil(m*o/s),g=Math.floor((p-f-h)*o/s),y=Math.floor((p-f)*o/s);return{start:Math.max(0,g),end:Math.min(v,y)}}},_e=function(e){var t=e.type,r=void 0===t?"static":t,n=e.duration,i=e.timescale,o=void 0===i?1:i,s=e.sourceDuration,a=be[r](e),c=function(e,t){for(var r=[],n=e;n<t;n++)r.push(n);return r}(a.start,a.end).map(function(e){return function(t,r){var n=e.duration,i=e.timescale,o=void 0===i?1:i,s=e.periodIndex,a=e.startNumber;return{number:(void 0===a?1:a)+t,duration:n/o,timeline:s,time:r*n}}}(e));if("static"===r){var u=c.length-1;c[u].duration=s-n/o*u}return c},Te=function(e){var t=e.baseUrl,r=e.initialization,n=void 0===r?{}:r,i=e.sourceDuration,o=e.indexRange,s=void 0===o?"":o,a=e.duration;if(!t)throw new Error(me);var c=ye({baseUrl:t,source:n.sourceURL,range:n.range}),u=ye({baseUrl:t,source:t,indexRange:s});if(u.map=c,a){var l=_e(e);l.length&&(u.duration=l[0].duration,u.timeline=l[0].timeline)}else i&&(u.duration=i,u.timeline=0);return u.number=0,[u]},we=function(e,t,r){for(var n=e.sidx.map?e.sidx.map:null,i=e.sidx.duration,o=e.timeline||0,s=e.sidx.byterange,a=s.offset+s.length,c=t.timescale,u=t.references.filter((function(e){return 1!==e.referenceType})),l=[],d=a+t.firstOffset,h=0;h<u.length;h++){var p=t.references[h],f=p.referencedSize,m=p.subsegmentDuration,v=Te({baseUrl:r,timescale:c,timeline:o,periodIndex:o,duration:m,sourceDuration:i,indexRange:d+"-"+(d+f-1)})[0];n&&(v.map=n),l.push(v),d+=f}return e.segments=l,e},Se=function(e){var t;return(t=e.reduce((function(e,t){var r,n=t.attributes.id+(t.attributes.lang||"");return e[n]?(t.segments[0]&&(t.segments[0].discontinuity=!0),(r=e[n].segments).push.apply(r,t.segments),t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)):e[n]=t,e}),{}),Object.keys(t).map((function(e){return t[e]}))).map((function(e){var t,r;return e.discontinuityStarts=(t=e.segments,r="discontinuity",t.reduce((function(e,t,n){return t[r]&&e.push(n),e}),[])),e}))},Ce=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var r in e){var n=e[r];if(n.sidx){var i=n.sidx.uri+"-"+(s=n.sidx.byterange,a=void 0,a=s.offset+s.length-1,s.offset+"-"+a),o=t[i]&&t[i].sidx;n.sidx&&o&&we(n,o,n.sidx.resolvedUri)}}var s,a;return e},Ee=function(e){var t,r=e.attributes,n=e.segments,i=e.sidx,o={attributes:(t={NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(r.type||"static"),timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:n,mediaSequence:n.length?n[0].number:1};return r.contentProtection&&(o.contentProtection=r.contentProtection),i&&(o.sidx=i),o},Oe=function(e){var t,r=e.attributes,n=e.segments;void 0===n&&(n=[{uri:r.baseUrl,timeline:r.periodIndex,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}],r.duration=r.sourceDuration);var i=((t={NAME:r.id,BANDWIDTH:r.bandwidth})["PROGRAM-ID"]=1,t);return r.codecs&&(i.CODECS=r.codecs),{attributes:i,uri:"",endList:"static"===(r.type||"static"),timeline:r.periodIndex,resolvedUri:r.baseUrl||"",targetDuration:r.duration,segments:n,mediaSequence:n.length?n[0].number:1}},ke=function(e){var t,r=e.attributes,n=e.segments,i=e.sidx,o={attributes:(t={NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(r.type||"static"),timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:n,mediaSequence:n.length?n[0].number:1};return r.contentProtection&&(o.contentProtection=r.contentProtection),i&&(o.sidx=i),o},xe=function(e,t,r){var n;if(void 0===r&&(r={}),!e.length)return{};var i=e[0].attributes,o=i.sourceDuration,s=i.type,a=void 0===s?"static":s,c=i.suggestedPresentationDelay,u=i.minimumUpdatePeriod,l=Se(e.filter((function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType}))).map(ke),d=Se(e.filter((function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType}))),h=e.filter((function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType})),p={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(n={AUDIO:{},VIDEO:{}},n["CLOSED-CAPTIONS"]={},n.SUBTITLES={},n),uri:"",duration:o,playlists:Ce(l,r)};return u>=0&&(p.minimumUpdatePeriod=1e3*u),t&&(p.locations=t),"dynamic"===a&&(p.suggestedPresentationDelay=c),d.length&&(p.mediaGroups.AUDIO.audio=function(e,t){var r;void 0===t&&(t={});var n=e.reduce((function(e,n){var i=n.attributes.role&&n.attributes.role.value||"",o=n.attributes.lang||"",s="main";if(o){var a=i?" ("+i+")":"";s=""+n.attributes.lang+a}return e[s]&&e[s].playlists[0].attributes.BANDWIDTH>n.attributes.bandwidth||(e[s]={language:o,autoselect:!0,default:"main"===i,playlists:Ce([Ee(n)],t),uri:""},void 0===r&&"main"===i&&((r=n).default=!0)),e}),{});return r||(n[Object.keys(n)[0]].default=!0),n}(d,r)),h.length&&(p.mediaGroups.SUBTITLES.subs=function(e,t){return void 0===t&&(t={}),e.reduce((function(e,r){var n=r.attributes.lang||"text";return e[n]||(e[n]={language:n,default:!1,autoselect:!1,playlists:Ce([Oe(r)],t),uri:""}),e}),{})}(h,r)),p},Ae=function(e,t,r){var n=e.NOW,i=e.clientOffset,o=e.availabilityStartTime,s=e.timescale,a=void 0===s?1:s,c=e.start,u=void 0===c?0:c,l=e.minimumUpdatePeriod,d=(n+i)/1e3+(void 0===l?0:l)-(o+u);return Math.ceil((d*a-t)/r)},Pe=function(e,t){for(var r=e.type,n=void 0===r?"static":r,i=e.minimumUpdatePeriod,o=void 0===i?0:i,s=e.media,a=void 0===s?"":s,c=e.sourceDuration,u=e.timescale,l=void 0===u?1:u,d=e.startNumber,h=void 0===d?1:d,p=e.periodIndex,f=[],m=-1,v=0;v<t.length;v++){var g=t[v],y=g.d,b=g.r||0,_=g.t||0;m<0&&(m=_),_&&_>m&&(m=_);var T=void 0;if(b<0){var w=v+1;T=w===t.length?"dynamic"===n&&o>0&&a.indexOf("$Number$")>0?Ae(e,m,y):(c*l-m)/y:(t[w].t-m)/y}else T=b+1;for(var S=h+f.length+T,C=h+f.length;C<S;)f.push({number:C,duration:y/l,time:m,timeline:p}),m+=y,C++}return f},Ie=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Me=function(e,t){return e.replace(Ie,function(e){return function(t,r,n,i){if("$$"===t)return"$";if(void 0===e[r])return t;var o=""+e[r];return"RepresentationID"===r?o:(i=n?parseInt(i,10):1,o.length>=i?o:""+new Array(i-o.length+1).join("0")+o)}}(t))},Le=function(e,t){var r={RepresentationID:e.id,Bandwidth:e.bandwidth||0},n=e.initialization,i=void 0===n?{sourceURL:"",range:""}:n,o=ye({baseUrl:e.baseUrl,source:Me(i.sourceURL,r),range:i.range}),s=function(e,t){return e.duration||t?e.duration?_e(e):Pe(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]}(e,t);return s.map((function(t){r.Number=t.number,r.Time=t.time;var n=Me(e.media||"",r);return{uri:n,timeline:t.timeline,duration:t.duration,resolvedUri:X()(e.baseUrl||"",n),map:o,number:t.number}}))},De=function(e,t){var r=e.duration,n=e.segmentUrls,i=void 0===n?[]:n;if(!r&&!t||r&&t)throw new Error(ve);var o,s=i.map((function(t){return function(e,t){var r=e.baseUrl,n=e.initialization,i=void 0===n?{}:n,o=ye({baseUrl:r,source:i.sourceURL,range:i.range}),s=ye({baseUrl:r,source:t.media,range:t.mediaRange});return s.map=o,s}(e,t)}));return r&&(o=_e(e)),t&&(o=Pe(e,t)),o.map((function(e,t){if(s[t]){var r=s[t];return r.timeline=e.timeline,r.duration=e.duration,r.number=e.number,r}})).filter((function(e){return e}))},Re=function(e){var t,r,n=e.attributes,i=e.segmentInfo;i.template?(r=Le,t=ue(n,i.template)):i.base?(r=Te,t=ue(n,i.base)):i.list&&(r=De,t=ue(n,i.list));var o={attributes:n};if(!r)return o;var s=r(t,i.timeline);if(t.duration){var a=t,c=a.duration,u=a.timescale,l=void 0===u?1:u;t.duration=c/l}else s.length?t.duration=s.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0):t.duration=0;return o.attributes=t,o.segments=s,i.base&&t.indexRange&&(o.sidx=s[0],o.segments=[]),o},Ne=function(e,t){return de(e.childNodes).filter((function(e){return e.tagName===t}))},je=function(e){return e.textContent.trim()},Ue=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var r=t.slice(1),n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],c=r[5];return 31536e3*parseFloat(n||0)+2592e3*parseFloat(i||0)+86400*parseFloat(o||0)+3600*parseFloat(s||0)+60*parseFloat(a||0)+parseFloat(c||0)},Fe={mediaPresentationDuration:function(e){return Ue(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return Ue(e)},suggestedPresentationDelay:function(e){return Ue(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return Ue(e)},start:function(e){return Ue(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?Ue(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},$e=function(e){return e&&e.attributes?de(e.attributes).reduce((function(e,t){var r=Fe[t.name]||Fe.DEFAULT;return e[t.name]=r(t.value),e}),{}):{}},Be={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Ve=function(e,t){return t.length?le(e.map((function(e){return t.map((function(t){return X()(e,je(t))}))}))):e},qe=function(e){var t=Ne(e,"SegmentTemplate")[0],r=Ne(e,"SegmentList")[0],n=r&&Ne(r,"SegmentURL").map((function(e){return ue({tag:"SegmentURL"},$e(e))})),i=Ne(e,"SegmentBase")[0],o=r||t,s=o&&Ne(o,"SegmentTimeline")[0],a=r||i||t,c=a&&Ne(a,"Initialization")[0],u=t&&$e(t);u&&c?u.initialization=c&&$e(c):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});var l={template:u,timeline:s&&Ne(s,"S").map((function(e){return $e(e)})),list:r&&ue($e(r),{segmentUrls:n,initialization:$e(c)}),base:i&&ue($e(i),{initialization:$e(c)})};return Object.keys(l).forEach((function(e){l[e]||delete l[e]})),l},He=function(e,t,r){return function(n){var i=$e(n),o=Ve(t,Ne(n,"BaseURL")),s=Ne(n,"Role")[0],a={role:$e(s)},c=ue(e,i,a),u=Ne(n,"ContentProtection").reduce((function(e,t){var r=$e(t),n=Be[r.schemeIdUri];if(n){e[n]={attributes:r};var i=Ne(t,"cenc:pssh")[0];if(i){var o=je(i),s=o&&te()(o);e[n].pssh=s}}return e}),{});Object.keys(u).length&&(c=ue(c,{contentProtection:u}));var l=qe(n),d=Ne(n,"Representation"),h=ue(r,l);return le(d.map(function(e,t,r){return function(n){var i=Ne(n,"BaseURL"),o=Ve(t,i),s=ue(e,$e(n)),a=qe(n);return o.map((function(e){return{segmentInfo:ue(r,a),attributes:ue(s,{baseUrl:e})}}))}}(c,o,h)))}},We=function(e,t){return function(r,n){var i=Ve(t,Ne(r,"BaseURL")),o=$e(r),a=parseInt(o.id,10),c=s().isNaN(a)?n:a,u=ue(e,{periodIndex:c}),l=Ne(r,"AdaptationSet"),d=qe(r);return le(l.map(He(u,i,d)))}},ze=function(e){if(""===e)throw new Error(pe);var t=(new ae.a).parseFromString(e,"application/xml"),r=t&&"MPD"===t.documentElement.tagName?t.documentElement:null;if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw new Error(fe);return r},Ge=function(e,t){void 0===t&&(t={});var r=function(e,t){void 0===t&&(t={});var r=t,n=r.manifestUri,i=void 0===n?"":n,o=r.NOW,s=void 0===o?Date.now():o,a=r.clientOffset,c=void 0===a?0:a,u=Ne(e,"Period");if(!u.length)throw new Error(he);var l=Ne(e,"Location"),d=$e(e),h=Ve([i],Ne(e,"BaseURL"));return d.sourceDuration=d.mediaPresentationDuration||0,d.NOW=s,d.clientOffset=c,l.length&&(d.locations=l.map(je)),{locations:d.locations,representationInfo:le(u.map(We(d,h)))}}(ze(e),t),n=r.representationInfo.map(Re);return xe(n,r.locations,t.sidxMapping)},Ke=function(e){return function(e){var t=Ne(e,"UTCTiming")[0];if(!t)return null;var r=$e(t);switch(r.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":r.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":r.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":r.method="DIRECT",r.value=Date.parse(r.value);break;default:throw new Error(ge)}return r}(ze(e))},Xe=r(4221),Ye=r.n(Xe),Qe=r(9352),Je=r(185),Ze=r(5547),et=r.n(Ze),tt=r(1489),rt=r(7661),nt=r.n(rt),it=r(8044),ot=X(),st=function(e,t,r){return e&&r&&r.responseURL&&t!==r.responseURL?r.responseURL:t},at=i().log,ct=function(e,t){return e+"-"+t},ut=function(e){var t=e.manifestString,r=e.customTagParsers,n=void 0===r?[]:r,i=e.customTagMappers,o=void 0===i?[]:i,s=new oe;return n.forEach((function(e){return s.addParser(e)})),o.forEach((function(e){return s.addTagMapper(e)})),s.push(t),s.end(),s.manifest},lt=function(e,t){["AUDIO","SUBTITLES"].forEach((function(r){for(var n in e.mediaGroups[r])for(var i in e.mediaGroups[r][n]){var o=e.mediaGroups[r][n][i];t(o,r,n,i)}}))},dt=function(e){var t=e.playlist,r=e.uri,n=e.id;t.id=n,r&&(t.uri=r),t.attributes=t.attributes||{}},ht=function(e,t){e.uri=t;for(var r=0;r<e.playlists.length;r++)if(!e.playlists[r].uri){var n="placeholder-uri-"+r;e.playlists[r].uri=n}lt(e,(function(t,r,n,i){if(t.playlists&&t.playlists.length&&!t.playlists[0].uri){var o="placeholder-uri-"+r+"-"+n+"-"+i,s=ct(0,o);t.playlists[0].uri=o,t.playlists[0].id=s,e.playlists[s]=t.playlists[0],e.playlists[o]=t.playlists[0]}})),function(e){for(var t=e.playlists.length;t--;){var r=e.playlists[t];dt({playlist:r,id:ct(t,r.uri)}),r.resolvedUri=ot(e.uri,r.uri),e.playlists[r.id]=r,e.playlists[r.uri]=r,r.attributes.BANDWIDTH||at.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(e),function(e){lt(e,(function(t){t.uri&&(t.resolvedUri=ot(e.uri,t.uri))}))}(e)},pt=i().mergeOptions,ft=i().EventTarget,mt=function(e,t){e.resolvedUri||(e.resolvedUri=ot(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=ot(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=ot(t,e.map.uri))},vt=function(e,t){var r=pt(e,{}),n=r.playlists[t.id];if(!n)return null;if(n.segments&&t.segments&&n.segments.length===t.segments.length&&n.endList===t.endList&&n.mediaSequence===t.mediaSequence)return null;var i=pt(n,t);n.segments&&(i.segments=function(e,t,r){var n=t.slice();r=r||0;for(var i=Math.min(e.length,t.length+r),o=r;o<i;o++)n[o-r]=pt(e[o],n[o-r]);return n}(n.segments,t.segments,t.mediaSequence-n.mediaSequence)),i.segments.forEach((function(e){mt(e,i.resolvedUri)}));for(var o=0;o<r.playlists.length;o++)r.playlists[o].id===t.id&&(r.playlists[o]=i);return r.playlists[t.id]=i,r.playlists[t.uri]=i,r},gt=function(e,t){var r=e.segments[e.segments.length-1];return t&&r&&r.duration?1e3*r.duration:500*(e.targetDuration||10)},yt=function(e){function t(t,r,n){var i;if(void 0===n&&(n={}),i=e.call(this)||this,!t)throw new Error("A non-empty playlist URL or object is required");var o=n,s=o.withCredentials,a=void 0!==s&&s,c=o.handleManifestRedirects,u=void 0!==c&&c;i.src=t,i.vhs_=r,i.withCredentials=a,i.handleManifestRedirects=u;var l=r.options_;return i.customTagParsers=l&&l.customTagParsers||[],i.customTagMappers=l&&l.customTagMappers||[],i.state="HAVE_NOTHING",i.on("mediaupdatetimeout",(function(){"HAVE_METADATA"===i.state&&(i.state="HAVE_CURRENT_METADATA",i.request=i.vhs_.xhr({uri:ot(i.master.uri,i.media().uri),withCredentials:i.withCredentials},(function(e,t){if(i.request)return e?i.playlistRequestError(i.request,i.media(),"HAVE_METADATA"):void i.haveMetadata({playlistString:i.request.responseText,url:i.media().uri,id:i.media().id})})))})),i}G(t,e);var r=t.prototype;return r.playlistRequestError=function(e,t,r){var n=t.uri,i=t.id;this.request=null,r&&(this.state=r),this.error={playlist:this.master.playlists[i],status:e.status,message:"HLS playlist request error at URL: "+n+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},r.haveMetadata=function(e){var t=this,r=e.playlistString,n=e.playlistObject,i=e.url,o=e.id;this.request=null,this.state="HAVE_METADATA";var a=n||ut({manifestString:r,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers});dt({playlist:a,uri:i,id:o});var c=vt(this.master,a);this.targetDuration=a.targetDuration,c?(this.master=c,this.media_=this.master.playlists[o]):this.trigger("playlistunchanged"),this.media().endList||(s().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=s().setTimeout((function(){t.trigger("mediaupdatetimeout")}),gt(this.media(),!!c))),this.trigger("loadedplaylist")},r.dispose=function(){this.trigger("dispose"),this.stopRequest(),s().clearTimeout(this.mediaUpdateTimeout),s().clearTimeout(this.finalRenditionTimeout),this.off()},r.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},r.media=function(e,t){var r=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(s().clearTimeout(this.finalRenditionTimeout),t){var n=e.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=s().setTimeout(this.media.bind(this,e,!1),n)}else{var i=this.state,o=!this.media_||e.id!==this.media_.id;if(this.master.playlists[e.id].endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(o&&(this.trigger("mediachanging"),"HAVE_MASTER"===i?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(o){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(function(t,n){if(r.request){if(e.resolvedUri=st(r.handleManifestRedirects,e.resolvedUri,n),t)return r.playlistRequestError(r.request,e,i);r.haveMetadata({playlistString:n.responseText,url:e.uri,id:e.id}),"HAVE_MASTER"===i?r.trigger("loadedmetadata"):r.trigger("mediachange")}}))}}},r.pause=function(){this.stopRequest(),s().clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},r.load=function(e){var t=this;s().clearTimeout(this.mediaUpdateTimeout);var r=this.media();if(e){var n=r?r.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=s().setTimeout((function(){return t.load()}),n)}else this.started?r&&!r.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},r.start=function(){var e=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=s().location.href),this.src.resolvedUri=this.src.uri,void setTimeout((function(){e.setupInitialPlaylist(e.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(function(t,r){if(e.request){if(e.request=null,t)return e.error={status:r.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:r.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=st(e.handleManifestRedirects,e.src,r);var n=ut({manifestString:r.responseText,customTagParsers:e.customTagParsers,customTagMappers:e.customTagMappers});e.setupInitialPlaylist(n)}}))},r.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},r.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,ht(this.master,this.srcUri()),e.playlists.forEach((function(e){e.segments&&e.segments.forEach((function(t){mt(t,e.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var t=this.srcUri()||s().location.href;this.master=function(e,t){var r=ct(0,t),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:s().location.href,resolvedUri:s().location.href,playlists:[{uri:t,id:r,resolvedUri:t,attributes:{}}]};return n.playlists[r]=n.playlists[0],n.playlists[t]=n.playlists[0],n}(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(ft),bt=1/30,_t=.1,Tt=function(e,t){var r,n=[];if(e&&e.length)for(r=0;r<e.length;r++)t(e.start(r),e.end(r))&&n.push([e.start(r),e.end(r)]);return i().createTimeRanges(n)},wt=function(e,t){return Tt(e,(function(e,r){return e-_t<=t&&r+_t>=t}))},St=function(e,t){return Tt(e,(function(e){return e-bt>=t}))},Ct=function(e){var t=[];if(!e||!e.length)return"";for(var r=0;r<e.length;r++)t.push(e.start(r)+" => "+e.end(r));return t.join(", ")},Et=function(e){for(var t=[],r=0;r<e.length;r++)t.push({start:e.start(r),end:e.end(r)});return t},Ot=i().createTimeRange,kt=function(e,t,r){if(void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var n=function(e,t){var r=0,n=t-e.mediaSequence,i=e.segments[n];if(i){if(void 0!==i.start)return{result:i.start,precise:!0};if(void 0!==i.end)return{result:i.end-i.duration,precise:!0}}for(;n--;){if(void 0!==(i=e.segments[n]).end)return{result:r+i.end,precise:!0};if(r+=i.duration,void 0!==i.start)return{result:r+i.start,precise:!0}}return{result:r,precise:!1}}(e,t);if(n.precise)return n.result;var i=function(e,t){for(var r,n=0,i=t-e.mediaSequence;i<e.segments.length;i++){if(void 0!==(r=e.segments[i]).start)return{result:r.start-n,precise:!0};if(n+=r.duration,void 0!==r.end)return{result:r.end-n,precise:!0}}return{result:-1,precise:!1}}(e,t);return i.precise?i.result:n.result+r},xt=function(e,t,r){if(!e)return 0;if("number"!=typeof r&&(r=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return s()[1/0]}return kt(e,t,r)},At=function(e,t,r){var n=0;if(t>r){var i=[r,t];t=i[0],r=i[1]}if(t<0){for(var o=t;o<Math.min(0,r);o++)n+=e.targetDuration;t=0}for(var s=t;s<r;s++)n+=e.segments[s].duration;return n},Pt=function(e,t){if(!e.segments.length)return 0;var r=e.segments.length,n=e.segments[r-1].duration||e.targetDuration,i="number"==typeof t?t:n+2*e.targetDuration;if(0===i)return r;for(var o=0;r--&&!((o+=e.segments[r].duration)>=i););return Math.max(0,r)},It=function(e,t,r,n){if(!e||!e.segments)return null;if(e.endList)return xt(e);if(null===t)return null;t=t||0;var i=r?Pt(e,n):e.segments.length;return kt(e,e.mediaSequence+i,t)},Mt=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Lt=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Dt=function(e){var t=Mt(e);return!e.disabled&&!t},Rt=function(e,t){return t.attributes&&t.attributes[e]},Nt=function(e,t){if(1===e.playlists.length)return!0;var r=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((function(e){return!!Dt(e)&&(e.attributes.BANDWIDTH||0)<r})).length},jt={duration:xt,seekable:function(e,t,r){var n=t||0,i=It(e,t,!0,r);return null===i?Ot():Ot(n,i)},safeLiveIndex:Pt,getMediaInfoForTime:function(e,t,r,n){var i,o=e.segments.length,s=t-n;if(s<0){if(r>0)for(i=r-1;i>=0;i--)if((s+=e.segments[i].duration+bt)>0)return{mediaIndex:i,startTime:n-At(e,r,i)};return{mediaIndex:0,startTime:t}}if(r<0){for(i=r;i<0;i++)if((s-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};r=0}for(i=r;i<o;i++)if((s-=e.segments[i].duration+bt)<0)return{mediaIndex:i,startTime:n+At(e,r,i)};return{mediaIndex:o-1,startTime:t}},isEnabled:Dt,isDisabled:function(e){return e.disabled},isBlacklisted:Mt,isIncompatible:Lt,playlistEnd:It,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:Rt,estimateSegmentRequestTime:function(e,t,r,n){return void 0===n&&(n=0),Rt("BANDWIDTH",r)?(e*r.attributes.BANDWIDTH-8*n)/t:NaN},isLowestEnabledRendition:Nt},Ut=i().xhr,Ft=i().mergeOptions,$t=function(e,t,r,n){var i="arraybuffer"===e.responseType?e.response:e.responseText;!t&&i&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=i.byteLength||i.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),r.headers&&(e.responseHeaders=r.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===r.statusCode||206===r.statusCode||0===r.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(i||e.responseText)))),n(t,e)},Bt=function(){return function e(t,r){t=Ft({timeout:45e3},t);var n=e.beforeRequest||i().Vhs.xhr.beforeRequest;if(n&&"function"==typeof n){var o=n(t);o&&(t=o)}var s=Ut(t,(function(e,t){return $t(s,e,t,r)})),a=s.abort;return s.abort=function(){return s.aborted=!0,a.apply(s,arguments)},s.uri=t.uri,s.requestTime=Date.now(),s}},Vt=function(e){var t,r,n={};return e.byterange&&(n.Range=(t=e.byterange,r=t.offset+t.length-1,"bytes="+t.offset+"-"+r)),n},qt=function(e,t){return e.start(t)+"-"+e.end(t)},Ht=function(e,t){var r=e.toString(16);return"00".substring(0,2-r.length)+r+(t%2?" ":"")},Wt=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},zt=function(e){var t={};return Object.keys(e).forEach((function(r){var n=e[r];ArrayBuffer.isView(n)?t[r]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:t[r]=n})),t},Gt=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Kt=function(e){return e.resolvedUri},Xt=function(e){for(var t=Array.prototype.slice.call(e),r=16,n="",i=0;i<t.length/r;i++)n+=t.slice(i*r,i*r+r).map(Ht).join("")+" "+t.slice(i*r,i*r+r).map(Wt).join("")+"\n";return n},Yt=Object.freeze({__proto__:null,createTransferableMessage:zt,initSegmentId:Gt,segmentKeyId:Kt,hexDump:Xt,tagDump:function(e){var t=e.bytes;return Xt(t)},textRanges:function(e){var t,r="";for(t=0;t<e.length;t++)r+=qt(e,t)+" ";return r}}),Qt=function(e){var t=e.playlist,r=e.time,n=void 0===r?void 0:r,i=e.callback;if(!i)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===n)return i({message:"getProgramTime: playlist and time must be provided"});var o=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var r,n=0,i=0;i<t.segments.length&&!(e<=(n=(r=t.segments[i]).videoTimingInfo?r.videoTimingInfo.transmuxedPresentationEnd:n+r.duration));i++);var o=t.segments[t.segments.length-1];if(o.videoTimingInfo&&o.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>n){if(e>n+.25*o.duration)return null;r=o}return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:n-r.duration,type:r.videoTimingInfo?"accurate":"estimate"}}(n,t);if(!o)return i({message:"valid programTime was not found"});if("estimate"===o.type)return i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:o.estimatedStart});var s={mediaSeconds:n},a=function(e,t){if(!t.dateTimeObject)return null;var r=t.videoTimingInfo.transmuxerPrependedSeconds,n=e-(t.videoTimingInfo.transmuxedPresentationStart+r);return new Date(t.dateTimeObject.getTime()+1e3*n)}(n,o.segment);return a&&(s.programDateTime=a.toISOString()),i(null,s)},Jt=function e(t){var r=t.programTime,n=t.playlist,i=t.retryCount,o=void 0===i?2:i,s=t.seekTo,a=t.pauseAfterSeek,c=void 0===a||a,u=t.tech,l=t.callback;if(!l)throw new Error("seekToProgramTime: callback must be provided");if(void 0===r||!n||!s)return l({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!u.hasStarted_)return l({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(n))return l({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var d=function(e,t){var r;try{r=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;var n=t.segments[0];if(r<n.dateTimeObject)return null;for(var i=0;i<t.segments.length-1&&(n=t.segments[i],!(r<t.segments[i+1].dateTimeObject));i++);var o,s=t.segments[t.segments.length-1],a=s.dateTimeObject,c=s.videoTimingInfo?(o=s.videoTimingInfo).transmuxedPresentationEnd-o.transmuxedPresentationStart-o.transmuxerPrependedSeconds:s.duration+.25*s.duration;return r>new Date(a.getTime()+1e3*c)?null:(r>a&&(n=s),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:jt.duration(t,t.mediaSequence+t.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})}(r,n);if(!d)return l({message:r+" was not found in the stream"});var h=d.segment,p=function(e,t){var r,n;try{r=new Date(e),n=new Date(t)}catch(e){}var i=r.getTime();return(n.getTime()-i)/1e3}(h.dateTimeObject,r);if("estimate"===d.type)return 0===o?l({message:r+" is not buffered yet. Try again"}):(s(d.estimatedStart+p),void u.one("seeked",(function(){e({programTime:r,playlist:n,retryCount:o-1,seekTo:s,pauseAfterSeek:c,tech:u,callback:l})})));var f=h.start+p;u.one("seeked",(function(){return l(null,u.currentTime())})),c&&u.pause(),s(f)},Zt=function(e,t){if(4===e.readyState)return t()},er=i().EventTarget,tr=i().mergeOptions,rr=function(e){var t=e.masterXml,r=e.srcUrl,n=e.clientOffset,i=e.sidxMapping,o=Ge(t,{manifestUri:r,clientOffset:n,sidxMapping:i});return ht(o,r),o},nr=function(e,t){for(var r=!0,n=tr(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),i=0;i<t.playlists.length;i++){var o=vt(n,t.playlists[i]);o&&(n=o,r=!1)}return lt(t,(function(e,t,i,o){if(e.playlists&&e.playlists.length){var s=e.playlists[0].id,a=vt(n,e.playlists[0]);a&&((n=a).mediaGroups[t][i][o].playlists[0]=n.playlists[s],r=!1)}})),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(r=!1),r?null:n},ir=function(e){var t=e.byterange.offset+e.byterange.length-1;return e.uri+"-"+e.byterange.offset+"-"+t},or=function(e,t){var r,n,i={};for(var o in e){var s=e[o].sidx;if(s){var a=ir(s);if(!t[a])break;var c=t[a].sidxInfo;r=c,n=s,(Boolean(!r.map&&!n.map)||Boolean(r.map&&n.map&&r.map.byterange.offset===n.map.byterange.offset&&r.map.byterange.length===n.map.byterange.length))&&r.uri===n.uri&&r.byterange.offset===n.byterange.offset&&r.byterange.length===n.byterange.length&&(i[a]=t[a])}}return i},sr=function(e,t,r,n,o,s){var a={uri:st(o.handleManifestRedirects,t.resolvedUri),byterange:t.byterange,playlist:r},c=i().mergeOptions(a,{responseType:"arraybuffer",headers:Vt(a)});return function(e,t,r){var n,i=[],o=!1,s=function(e,t,n,i){return t.abort(),o=!0,r(e,t,n,i)},a=function(e,t){if(!o){if(e)return s(e,t,"",i);var r=t.responseText.substring(i&&i.byteLength||0,t.responseText.length);if(i=(0,Je.lx)(i,(0,Je.qX)(r,!0)),n=n||(0,Qe.cc)(i),i.length<10||n&&i.length<n+2)return Zt(t,(function(){return s(e,t,"",i)}));var a=(0,Qe.Xm)(i);return"ts"===a&&i.length<188||!a&&i.length<376?Zt(t,(function(){return s(e,t,"",i)})):s(null,t,a,i)}},c={uri:e,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",(function(t){return t.total,t.loaded,$t(e,null,{statusCode:e.status},a)}))}},u=t(c,(function(e,t){return $t(u,e,t,a)}));return u}(a.uri,n,(function(t,i,o,u){if(t)return s(t,i);if(!o||"mp4"!==o)return s({status:i.status,message:"Unsupported "+(o||"unknown")+" container type for sidx segment at URL: "+a.uri,response:"",playlist:r,internal:!0,blacklistDuration:1/0,code:2},i);var l=a.byterange,d=l.offset,h=l.length;if(u.length>=h+d)return s(t,{response:u.subarray(d,d+h),status:i.status,uri:i.uri});e.request=n(c,s)}))},ar=function(e){function t(t,r,n,i){var o;void 0===n&&(n={}),o=e.call(this)||this;var s=n,a=s.withCredentials,c=void 0!==a&&a,u=s.handleManifestRedirects,l=void 0!==u&&u;if(o.vhs_=r,o.withCredentials=c,o.handleManifestRedirects=l,!t)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",(function(){o.refreshXml_()})),o.on("mediaupdatetimeout",(function(){o.refreshMedia_(o.media().id)})),o.state="HAVE_NOTHING",o.loadedPlaylists_={},"string"==typeof t?(o.srcUrl=t,o.sidxMapping_={},W(o)):(o.setupChildLoader(i,t),o)}G(t,e);var r=t.prototype;return r.setupChildLoader=function(e,t){this.masterPlaylistLoader_=e,this.childPlaylist_=t},r.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},s().clearTimeout(this.minimumUpdatePeriodTimeout_),s().clearTimeout(this.mediaRequest_),s().clearTimeout(this.mediaUpdateTimeout),this.off()},r.hasPendingRequest=function(){return this.request||this.mediaRequest_},r.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},r.sidxRequestFinished_=function(e,t,r,n){var i=this;return function(o,s){if(i.request){if(i.request=null,o)return i.error="object"==typeof o?o:{status:s.status,message:"DASH playlist request error at URL: "+e.uri,response:s.response,code:2},r&&(i.state=r),void i.trigger("error");var a=(0,Je.Ki)(s.response),c=Ye()(a.subarray(8));return n(t,c)}}},r.media=function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var r=this.state;if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}var n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(n&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(n)if(this.media_&&this.trigger("mediachanging"),e.sidx){var i,o;this.masterPlaylistLoader_?(i=this.masterPlaylistLoader_.master,o=this.masterPlaylistLoader_.sidxMapping_):(i=this.master,o=this.sidxMapping_);var a=ir(e.sidx);o[a]={sidxInfo:e.sidx},this.request=sr(this,e.sidx,e,this.vhs_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(e,i,r,(function(n,i){if(!n||!i)throw new Error("failed to request sidx");o[a].sidx=i,t.haveMetadata({startingState:r,playlist:n.playlists[e.id]})})))}else this.mediaRequest_=s().setTimeout(this.haveMetadata.bind(this,{startingState:r,playlist:e}),0)},r.haveMetadata=function(e){var t=e.startingState,r=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[r.id]=r,this.mediaRequest_=null,this.refreshMedia_(r.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")},r.pause=function(){this.stopRequest(),s().clearTimeout(this.mediaUpdateTimeout),s().clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)},r.load=function(e){var t=this;s().clearTimeout(this.mediaUpdateTimeout),s().clearTimeout(this.minimumUpdatePeriodTimeout_);var r=this.media();if(e){var n=r?r.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=s().setTimeout((function(){return t.load()}),n)}else this.started?r&&!r.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},r.start=function(){var e=this;this.started=!0,this.masterPlaylistLoader_?this.mediaRequest_=s().setTimeout(this.haveMaster_.bind(this),0):this.request=this.vhs_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(t,r){if(e.request){if(e.request=null,t)return e.error={status:r.status,message:"DASH playlist request error at URL: "+e.srcUrl,responseText:r.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.masterXml_=r.responseText,r.responseHeaders&&r.responseHeaders.date?e.masterLoaded_=Date.parse(r.responseHeaders.date):e.masterLoaded_=Date.now(),e.srcUrl=st(e.handleManifestRedirects,e.srcUrl,r),e.syncClientServerClock_(e.onClientServerClockSync_.bind(e))}}))},r.syncClientServerClock_=function(e){var t=this,r=Ke(this.masterXml_);return null===r?(this.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===r.method?(this.clientOffset_=r.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:ot(this.srcUrl,r.value),method:r.method,withCredentials:this.withCredentials},(function(n,i){if(t.request){if(n)return t.clientOffset_=t.masterLoaded_-Date.now(),e();var o;o="HEAD"===r.method?i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):t.masterLoaded_:Date.parse(i.responseText),t.clientOffset_=o-Date.now(),e()}})))},r.haveMaster_=function(){this.state="HAVE_MASTER",this.mediaRequest_=null,this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.updateMainManifest_(rr({masterXml:this.masterXml_,srcUrl:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_})),this.trigger("loadedplaylist"))},r.updateMinimumUpdatePeriodTimeout_=function(){var e=this;s().clearTimeout(this.minimumUpdatePeriodTimeout_);var t=function(t){e.minimumUpdatePeriodTimeout_=s().setTimeout((function(){e.trigger("minimumUpdatePeriod")}),t)},r=this.master&&this.master.minimumUpdatePeriod;r>0?t(r):0===r&&(this.media()?t(1e3*this.media().targetDuration):this.one("loadedplaylist",(function(){t(1e3*e.media().targetDuration)})))},r.onClientServerClockSync_=function(){this.haveMaster_(),this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]),this.updateMinimumUpdatePeriodTimeout_()},r.updateMainManifest_=function(e){if(this.master=e,this.master.locations&&this.master.locations.length){var t=this.master.locations[0];t!==this.srcUrl&&(this.srcUrl=t)}},r.refreshXml_=function(){var e=this;this.request=this.vhs_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(t,r){if(e.request){if(e.request=null,t)return e.error={status:r.status,message:"DASH playlist request error at URL: "+e.srcUrl,responseText:r.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.masterXml_=r.responseText,e.sidxMapping_=function(e,t,r,n){var i=Ge(e,{manifestUri:t,clientOffset:r}),o=or(i.playlists,n);return lt(i,(function(e,t,r,i){if(e.playlists&&e.playlists.length){var s=e.playlists;o=tr(o,or(s,n))}})),o}(e.masterXml_,e.srcUrl,e.clientOffset_,e.sidxMapping_);var n=rr({masterXml:e.masterXml_,srcUrl:e.srcUrl,clientOffset:e.clientOffset_,sidxMapping:e.sidxMapping_}),i=nr(e.master,n),o=e.media().sidx;if(i)if(o){var s=ir(o);if(!e.sidxMapping_[s]){var a=e.media();e.request=sr(e,a.sidx,a,e.vhs_.xhr,{handleManifestRedirects:e.handleManifestRedirects},e.sidxRequestFinished_(a,n,e.state,(function(t,r){if(!t||!r)throw new Error("failed to request sidx on minimumUpdatePeriod");e.sidxMapping_[s].sidx=r,e.updateMinimumUpdatePeriodTimeout_(),e.refreshMedia_(e.media().id)})))}}else e.updateMainManifest_(i),e.media_&&(e.media_=e.master.playlists[e.media_.id]);e.updateMinimumUpdatePeriodTimeout_()}}))},r.refreshMedia_=function(e){var t,r,n=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.masterPlaylistLoader_?(t=this.masterPlaylistLoader_.master,r=rr({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_})):(t=this.master,r=rr({masterXml:this.masterXml_,srcUrl:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_}));var i=nr(t,r);i?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=i:this.master=i,this.media_=i.playlists[e]):(this.media_=t.playlists[e],this.trigger("playlistunchanged")),this.media().endList||(this.mediaUpdateTimeout=s().setTimeout((function(){n.trigger("mediaupdatetimeout")}),gt(this.media(),!!i))),this.trigger("loadedplaylist")},t}(er),cr={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},ur=function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t.buffer},lr=[],dr=function(e){var t=e.transmuxer,r=e.bytes,n=e.audioAppendStart,i=e.gopsToAlignWith,o=e.isPartial,s=e.remux,a=e.onData,c=e.onTrackInfo,u=e.onAudioTimingInfo,l=e.onVideoTimingInfo,d=e.onVideoSegmentTimingInfo,h=e.onId3,p=e.onCaptions,f=e.onDone,m={isPartial:o,buffer:[]};if(t.onmessage=function(e){Z&&("data"===e.data.action&&function(e,t,r){var n=e.data.segment,i=n.type,o=n.initSegment,s=n.captions,a=n.captionStreams,c=n.metadata,u=n.videoFrameDtsTime,l=n.videoFramePtsTime;t.buffer.push({captions:s,captionStreams:a,metadata:c});var d=e.data.segment.boxes||{data:e.data.segment.data},h={type:i,data:new Uint8Array(d.data,d.data.byteOffset,d.data.byteLength),initSegment:new Uint8Array(o.data,o.byteOffset,o.byteLength)};void 0!==u&&(h.videoFrameDtsTime=u),void 0!==l&&(h.videoFramePtsTime=l),r(h)}(e,m,a),"trackinfo"===e.data.action&&c(e.data.trackInfo),"gopInfo"===e.data.action&&function(e,t){t.gopInfo=e.data.gopInfo}(e,m),"audioTimingInfo"===e.data.action&&u(e.data.audioTimingInfo),"videoTimingInfo"===e.data.action&&l(e.data.videoTimingInfo),"videoSegmentTimingInfo"===e.data.action&&d(e.data.videoSegmentTimingInfo),"id3Frame"===e.data.action&&h([e.data.id3Frame],e.data.id3Frame.dispatchType),"caption"===e.data.action&&p(e.data.caption),"transmuxed"===e.data.type&&(t.onmessage=null,function(e){var t=e.transmuxedData,r=e.callback;t.buffer=[],r(t)}({transmuxedData:m,callback:f}),hr()))},n&&t.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(i)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),void 0!==s&&t.postMessage({action:"setRemux",remux:s}),r.byteLength){var v=r instanceof ArrayBuffer?r:r.buffer,g=r instanceof ArrayBuffer?0:r.byteOffset;t.postMessage({action:"push",data:v,byteOffset:g,byteLength:r.byteLength},[v])}t.postMessage({action:o?"partialFlush":"flush"})},hr=function(){Z=null,lr.length&&("function"==typeof(Z=lr.shift())?Z():dr(Z))},pr=function(e,t){e.postMessage({action:t}),hr()},fr=function(e,t){if(!Z)return Z=e,void pr(t,e);lr.push(pr.bind(null,t,e))},mr=function(e){if(!Z)return Z=e,void dr(e);lr.push(e)},vr=function(e){fr("reset",e)},gr=function(){Z=null,lr.length=0},yr=function(e){fr("endTimeline",e)},br=2,_r=-101,Tr=-102,wr=function(e){e.forEach((function(e){e.abort()}))},Sr=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:_r,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Tr,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:br,xhr:t}:null},Cr=function(e){var t=e.segment,r=e.bytes,n=e.isPartial,i=e.trackInfoFn,o=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,a=e.id3Fn,c=e.captionsFn,u=e.dataFn,l=e.doneFn,d=t.map&&t.map.tracks||{},h=Boolean(d.audio&&d.video),p=o.bind(null,t,"audio","start"),f=o.bind(null,t,"audio","end"),m=o.bind(null,t,"video","start"),v=o.bind(null,t,"video","end");if(!n&&!t.lastReachedChar){var g=function(e,t){var r=et().inspect(e,t*tt.ONE_SECOND_IN_TS);if(!r)return null;var n={hasVideo:r.video&&2===r.video.length||!1,hasAudio:r.audio&&2===r.audio.length||!1};return n.hasVideo&&(n.videoStart=r.video[0].ptsTime),n.hasAudio&&(n.audioStart=r.audio[0].ptsTime),n}(r,t.baseStartTime);g&&(i(t,{hasAudio:g.hasAudio,hasVideo:g.hasVideo,isMuxed:h}),i=null,g.hasAudio&&!h&&p(g.audioStart),g.hasVideo&&m(g.videoStart),p=null,m=null)}mr({bytes:r,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,isPartial:n,remux:h,onData:function(e){e.type="combined"===e.type?"video":e.type,u(t,e)},onTrackInfo:function(e){i&&(h&&(e.isMuxed=!0),i(t,e))},onAudioTimingInfo:function(e){p&&void 0!==e.start&&(p(e.start),p=null),f&&void 0!==e.end&&f(e.end)},onVideoTimingInfo:function(e){m&&void 0!==e.start&&(m(e.start),m=null),v&&void 0!==e.end&&v(e.end)},onVideoSegmentTimingInfo:function(e){s(e)},onId3:function(e,r){a(t,e,r)},onCaptions:function(e){c(t,[e])},onDone:function(e){l&&!n&&(e.type="combined"===e.type?"video":e.type,l(null,t,e))}})},Er=function(e){var t=e.segment,r=e.bytes,n=e.isPartial,i=e.trackInfoFn,o=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,a=e.id3Fn,c=e.captionsFn,u=e.dataFn,l=e.doneFn,d=new Uint8Array(r);if((0,Qe.cz)(d)){t.isFmp4=!0;var h=t.map.tracks,p={isFmp4:!0,hasVideo:!!h.video,hasAudio:!!h.audio};h.audio&&h.audio.codec&&"enca"!==h.audio.codec&&(p.audioCodec=h.audio.codec),h.video&&h.video.codec&&"encv"!==h.video.codec&&(p.videoCodec=h.video.codec),h.video&&h.audio&&(p.isMuxed=!0),i(t,p);var f=nt().startTime(t.map.timescales,d);p.hasAudio&&!p.isMuxed&&o(t,"audio","start",f),p.hasVideo&&o(t,"video","start",f);var m=function(e){u(t,{data:r,type:p.hasAudio&&!p.isMuxed?"audio":"video"}),e&&e.length&&c(t,e),l(null,t,{})};if(!h.video||!r.byteLength||!t.transmuxer)return void m();var v=r instanceof ArrayBuffer?r:r.buffer,g=r instanceof ArrayBuffer?0:r.byteOffset;return t.transmuxer.addEventListener("message",(function e(n){if("mp4Captions"===n.data.action){t.transmuxer.removeEventListener("message",e);var i=n.data.data;t.bytes=r=new Uint8Array(i,i.byteOffset||0,i.byteLength),m(n.data.captions)}})),void t.transmuxer.postMessage({action:"pushMp4Captions",timescales:t.map.timescales,trackIds:[h.video.id],data:v,byteOffset:g,byteLength:r.byteLength},[v])}if(t.transmuxer){if(void 0===t.container&&(t.container=(0,Qe.Xm)(d)),"ts"!==t.container&&"aac"!==t.container)return i(t,{hasAudio:!1,hasVideo:!1}),void l(null,t,{});Cr({segment:t,bytes:r,isPartial:n,trackInfoFn:i,timingInfoFn:o,videoSegmentTimingInfoFn:s,id3Fn:a,captionsFn:c,dataFn:u,doneFn:l})}else l(null,t,{})},Or=function(e){var t=e.activeXhrs,r=e.decryptionWorker,n=e.trackInfoFn,i=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,s=e.id3Fn,a=e.captionsFn,c=e.dataFn,u=e.doneFn,l=0,d=!1;return function(e,h){if(!d){if(e)return d=!0,wr(t),u(e,h);if((l+=1)===t.length){if(h.endOfAllRequests=Date.now(),h.encryptedBytes)return function(e){var t,r=e.decryptionWorker,n=e.segment,i=e.trackInfoFn,o=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,a=e.id3Fn,c=e.captionsFn,u=e.dataFn,l=e.doneFn;r.addEventListener("message",(function e(t){if(t.data.source===n.requestId){r.removeEventListener("message",e);var d=t.data.decrypted;n.bytes=new Uint8Array(d.bytes,d.byteOffset,d.byteLength),Er({segment:n,bytes:n.bytes,isPartial:!1,trackInfoFn:i,timingInfoFn:o,videoSegmentTimingInfoFn:s,id3Fn:a,captionsFn:c,dataFn:u,doneFn:l})}})),t=n.key.bytes.slice?n.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(n.key.bytes)),r.postMessage(zt({source:n.requestId,encrypted:n.encryptedBytes,key:t,iv:n.key.iv}),[n.encryptedBytes.buffer,t.buffer])}({decryptionWorker:r,segment:h,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:o,id3Fn:s,captionsFn:a,dataFn:c,doneFn:u});Er({segment:h,bytes:h.bytes,isPartial:!1,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:o,id3Fn:s,captionsFn:a,dataFn:c,doneFn:u})}}}},kr=function(e){var t=e.segment,r=e.progressFn,n=e.trackInfoFn,o=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,a=e.id3Fn,c=e.captionsFn,u=e.dataFn,l=e.handlePartialData;return function(e){var d=e.target;if(!d.aborted){if(l&&!t.key&&d.responseText&&d.responseText.length>=8){var h=ur(d.responseText.substring(t.lastReachedChar||0));!t.lastReachedChar&&(0,Qe.cz)(new Uint8Array(h))||(t.lastReachedChar=d.responseText.length,Er({segment:t,bytes:h,isPartial:!0,trackInfoFn:n,timingInfoFn:o,videoSegmentTimingInfoFn:s,id3Fn:a,captionsFn:c,dataFn:u}))}return t.stats=i().mergeOptions(t.stats,function(e){var t=e.target,r={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return r.bytesReceived=e.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r}(e)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),r(e,t)}}},xr=function(e){var t=e.xhr,r=e.xhrOptions,n=e.decryptionWorker,o=e.segment,s=e.abortFn,a=e.progressFn,c=e.trackInfoFn,u=e.timingInfoFn,l=e.videoSegmentTimingInfoFn,d=e.id3Fn,h=e.captionsFn,p=e.dataFn,f=e.doneFn,m=e.handlePartialData,v=[],g=Or({activeXhrs:v,decryptionWorker:n,trackInfoFn:c,timingInfoFn:u,videoSegmentTimingInfoFn:l,id3Fn:d,captionsFn:h,dataFn:p,doneFn:f});if(o.key&&!o.key.bytes){var y=i().mergeOptions(r,{uri:o.key.resolvedUri,responseType:"arraybuffer"}),b=function(e,t){return function(r,n){var i=n.response,o=Sr(r,n);if(o)return t(o,e);if(16!==i.byteLength)return t({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:br,xhr:n},e);var s=new DataView(i);return e.key.bytes=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),t(null,e)}}(o,g),_=t(y,b);v.push(_)}if(o.map&&!o.map.bytes){var T=i().mergeOptions(r,{uri:o.map.resolvedUri,responseType:"arraybuffer",headers:Vt(o.map)}),w=function(e){var t=e.segment,r=e.finishProcessingFn;return function(e,n){var i=n.response,o=Sr(e,n);if(o)return r(o,t);if(0===i.byteLength)return r({status:n.status,message:"Empty HLS segment content at URL: "+n.uri,code:br,xhr:n},t);t.map.bytes=new Uint8Array(n.response);var s=(0,Qe.Xm)(t.map.bytes);return"mp4"!==s?r({status:n.status,message:"Found unsupported "+(s||"unknown")+" container for initialization segment at URL: "+n.uri,code:br,internal:!0,xhr:n},t):(nt().tracks(t.map.bytes).forEach((function(e){t.map.tracks=t.map.tracks||{},t.map.tracks[e.type]||(t.map.tracks[e.type]=e,e.id&&e.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[e.id]=e.timescale))})),r(null,t))}}({segment:o,finishProcessingFn:g}),S=t(T,w);v.push(S)}var C=i().mergeOptions(r,{uri:o.resolvedUri,responseType:"arraybuffer",headers:Vt(o)});m&&(C.responseType="text",C.beforeSend=function(e){e.overrideMimeType("text/plain; charset=x-user-defined")});var E=function(e){var t=e.segment,r=e.finishProcessingFn,n=e.responseType;return function(e,i){var o=i.response,s=Sr(e,i);if(s)return r(s,t);var a="arraybuffer"!==n&&i.responseText?ur(i.responseText.substring(t.lastReachedChar||0)):i.response;return 0===o.byteLength?r({status:i.status,message:"Empty HLS segment content at URL: "+i.uri,code:br,xhr:i},t):(t.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(i),t.key?t.encryptedBytes=new Uint8Array(a):t.bytes=new Uint8Array(a),r(null,t))}}({segment:o,finishProcessingFn:g,responseType:C.responseType}),O=t(C,E);O.addEventListener("progress",kr({segment:o,progressFn:a,trackInfoFn:c,timingInfoFn:u,videoSegmentTimingInfoFn:l,id3Fn:d,captionsFn:h,dataFn:p,handlePartialData:m})),v.push(O);var k={};return v.forEach((function(e){e.addEventListener("loadend",function(e){var t=e.loadendState,r=e.abortFn;return function(e){e.target.aborted&&r&&!t.calledAbortFn&&(r(),t.calledAbortFn=!0)}}({loadendState:k,abortFn:s}))})),function(){return wr(v)}},Ar="undefined"!=typeof window?window:{},Pr="undefined"==typeof Symbol?"__target":Symbol(),Ir=Ar.BlobBuilder||Ar.WebKitBlobBuilder||Ar.MozBlobBuilder||Ar.MSBlobBuilder,Mr=Ar.URL||Ar.webkitURL||Mr&&Mr.msURL,Lr=Ar.Worker;function Dr(e,t){return function(r){var n=this;if(!t)return new Lr(e);if(Lr&&!r){var i=Ur(t.toString().replace(/^function.+?{/,"").slice(0,-1));return this[Pr]=new Lr(i),function(e,t){if(!e||!t)return;var r=e.terminate;e.objURL=t,e.terminate=function(){e.objURL&&Mr.revokeObjectURL(e.objURL),r.call(e)}}(this[Pr],i),this[Pr]}var o={postMessage:function(e){n.onmessage&&setTimeout((function(){n.onmessage({data:e,target:o})}))}};t.call(o),this.postMessage=function(e){setTimeout((function(){o.onmessage({data:e,target:n})}))},this.isThisThread=!0}}if(Lr){var Rr,Nr=Ur("self.onmessage = function () {}"),jr=new Uint8Array(1);try{(Rr=new Lr(Nr)).postMessage(jr,[jr.buffer])}catch(e){Lr=null}finally{Mr.revokeObjectURL(Nr),Rr&&Rr.terminate()}}function Ur(e){try{return Mr.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(r){var t=new Ir;return t.append(e),Mr.createObjectURL(t.getBlob(type))}}var Fr=new Dr("./transmuxer-worker.worker.js",(function(e,t){var r=this;
/*! @name @videojs/http-streaming @version 2.2.4 @license Apache-2.0 */!function(){var e=function(){this.init=function(){var e={};this.on=function(t,r){e[t]||(e[t]=[]),e[t]=e[t].concat(r)},this.off=function(t,r){var n;return!!e[t]&&(n=e[t].indexOf(r),e[t]=e[t].slice(),e[t].splice(n,1),n>-1)},this.trigger=function(t){var r,n,i,o;if(r=e[t])if(2===arguments.length)for(i=r.length,n=0;n<i;++n)r[n].call(this,arguments[1]);else{for(o=[],n=arguments.length,n=1;n<arguments.length;++n)o.push(arguments[n]);for(i=r.length,n=0;n<i;++n)r[n].apply(this,o)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,n,i,o,s,a,c,u,l,d,h,p,f,m,v,g,y,b,_,T,w,S,C,E,O,k,x,A,P,I,M,L,D,R,N,j,U,F,$,B,V=e,q=Math.pow(2,32)-1;!function(){var e;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in S)S.hasOwnProperty(e)&&(S[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);C=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),O=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),E=new Uint8Array([0,0,0,1]),k=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),x=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),A={video:k,audio:x},M=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),I=new Uint8Array([0,0,0,0,0,0,0,0]),L=new Uint8Array([0,0,0,0,0,0,0,0]),D=L,R=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),N=L,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){var t,r,n=[],i=0;for(t=1;t<arguments.length;t++)n.push(arguments[t]);for(t=n.length;t--;)i+=n[t].byteLength;for(r=new Uint8Array(i+8),new DataView(r.buffer,r.byteOffset,r.byteLength).setUint32(0,r.byteLength),r.set(e,4),t=0,i=8;t<n.length;t++)r.set(n[t],i),i+=n[t].byteLength;return r},n=function(){return t(S.dinf,t(S.dref,M))},i=function(e){return t(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},v=function(e){return t(S.hdlr,A[e])},m=function(e){var r=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(r[12]=e.samplerate>>>24&255,r[13]=e.samplerate>>>16&255,r[14]=e.samplerate>>>8&255,r[15]=255&e.samplerate),t(S.mdhd,r)},f=function(e){return t(S.mdia,m(e),v(e.type),a(e))},s=function(e){return t(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},a=function(e){return t(S.minf,"video"===e.type?t(S.vmhd,P):t(S.smhd,I),n(),y(e))},c=function(e,r){for(var n=[],i=r.length;i--;)n[i]=_(r[i]);return t.apply(null,[S.moof,s(e)].concat(n))},u=function(e){for(var r=e.length,n=[];r--;)n[r]=h(e[r]);return t.apply(null,[S.moov,d(4294967295)].concat(n).concat(l(e)))},l=function(e){for(var r=e.length,n=[];r--;)n[r]=T(e[r]);return t.apply(null,[S.mvex].concat(n))},d=function(e){var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(S.mvhd,r)},g=function(e){var r,n,i=e.samples||[],o=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,o[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return t(S.sdtp,o)},y=function(e){return t(S.stbl,b(e),t(S.stts,N),t(S.stsc,D),t(S.stsz,R),t(S.stco,L))},b=function(e){return t(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?j(e):U(e))},j=function(e){var r,n,i=e.sps||[],o=e.pps||[],s=[],a=[];for(r=0;r<i.length;r++)s.push((65280&i[r].byteLength)>>>8),s.push(255&i[r].byteLength),s=s.concat(Array.prototype.slice.call(i[r]));for(r=0;r<o.length;r++)a.push((65280&o[r].byteLength)>>>8),a.push(255&o[r].byteLength),a=a.concat(Array.prototype.slice.call(o[r]));if(n=[S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(S.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length],s,[o.length],a))),t(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var c=e.sarRatio[0],u=e.sarRatio[1];n.push(t(S.pasp,new Uint8Array([(4278190080&c)>>24,(16711680&c)>>16,(65280&c)>>8,255&c,(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u])))}return t.apply(null,n)},U=function(e){return t(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),i(e))},p=function(e){var r=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(S.tkhd,r)},_=function(e){var r,n,i,o,s,a;return r=t(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/(q+1)),a=Math.floor(e.baseMediaDecodeTime%(q+1)),n=t(S.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,a>>>24&255,a>>>16&255,a>>>8&255,255&a])),92,"audio"===e.type?(i=w(e,92),t(S.traf,r,n,i)):(o=g(e),i=w(e,o.length+92),t(S.traf,r,n,i,o))},h=function(e){return e.duration=e.duration||4294967295,t(S.trak,p(e),f(e))},T=function(e){var r=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(r[r.length-1]=0),t(S.trex,r)},B=function(e,t){var r=0,n=0,i=0,o=0;return e.length&&(void 0!==e[0].duration&&(r=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(o=8)),[0,0,r|n|i|o,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},$=function(e,r){var n,i,o,s,a,c;for(r+=20+16*(s=e.samples||[]).length,o=B(s,r),(i=new Uint8Array(o.length+16*s.length)).set(o),n=o.length,c=0;c<s.length;c++)a=s[c],i[n++]=(4278190080&a.duration)>>>24,i[n++]=(16711680&a.duration)>>>16,i[n++]=(65280&a.duration)>>>8,i[n++]=255&a.duration,i[n++]=(4278190080&a.size)>>>24,i[n++]=(16711680&a.size)>>>16,i[n++]=(65280&a.size)>>>8,i[n++]=255&a.size,i[n++]=a.flags.isLeading<<2|a.flags.dependsOn,i[n++]=a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,i[n++]=61440&a.flags.degradationPriority,i[n++]=15&a.flags.degradationPriority,i[n++]=(4278190080&a.compositionTimeOffset)>>>24,i[n++]=(16711680&a.compositionTimeOffset)>>>16,i[n++]=(65280&a.compositionTimeOffset)>>>8,i[n++]=255&a.compositionTimeOffset;return t(S.trun,i)},F=function(e,r){var n,i,o,s,a,c;for(r+=20+8*(s=e.samples||[]).length,o=B(s,r),(n=new Uint8Array(o.length+8*s.length)).set(o),i=o.length,c=0;c<s.length;c++)a=s[c],n[i++]=(4278190080&a.duration)>>>24,n[i++]=(16711680&a.duration)>>>16,n[i++]=(65280&a.duration)>>>8,n[i++]=255&a.duration,n[i++]=(4278190080&a.size)>>>24,n[i++]=(16711680&a.size)>>>16,n[i++]=(65280&a.size)>>>8,n[i++]=255&a.size;return t(S.trun,n)},w=function(e,t){return"audio"===e.type?F(e,t):$(e,t)};o=function(){return t(S.ftyp,C,E,C,O)};var H,W,z,G,K,X,Y,Q,J=function(e){return t(S.mdat,e)},Z=c,ee=function(e){var t,r=o(),n=u(e);return(t=new Uint8Array(r.byteLength+n.byteLength)).set(r),t.set(n,r.byteLength),t},te=function(e,t){var r={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return r.dataOffset=t,r.compositionTimeOffset=e.pts-e.dts,r.duration=e.duration,r.size=4*e.length,r.size+=e.byteLength,e.keyFrame&&(r.flags.dependsOn=2,r.flags.isNonSyncSample=0),r},re=function(e){var t,r,n=[],i=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,n.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(r=e[t]).nalUnitType?(n.length&&(n.duration=r.dts-n.dts,i.byteLength+=n.byteLength,i.nalCount+=n.length,i.duration+=n.duration,i.push(n)),(n=[r]).byteLength=r.data.byteLength,n.pts=r.pts,n.dts=r.dts):("slice_layer_without_partitioning_rbsp_idr"===r.nalUnitType&&(n.keyFrame=!0),n.duration=r.dts-n.dts,n.byteLength+=r.data.byteLength,n.push(r));return i.length&&(!n.duration||n.duration<=0)&&(n.duration=i[i.length-1].duration),i.byteLength+=n.byteLength,i.nalCount+=n.length,i.duration+=n.duration,i.push(n),i},ne=function(e){var t,r,n=[],i=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)(r=e[t]).keyFrame?(n.length&&(i.push(n),i.byteLength+=n.byteLength,i.nalCount+=n.nalCount,i.duration+=n.duration),(n=[r]).nalCount=r.length,n.byteLength=r.byteLength,n.pts=r.pts,n.dts=r.dts,n.duration=r.duration):(n.duration+=r.duration,n.nalCount+=r.length,n.byteLength+=r.byteLength,n.push(r));return i.length&&n.duration<=0&&(n.duration=i[i.length-1].duration),i.byteLength+=n.byteLength,i.nalCount+=n.nalCount,i.duration+=n.duration,i.push(n),i},ie=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},oe=function(e,t){var r,n,i,o,s,a=t||0,c=[];for(r=0;r<e.length;r++)for(o=e[r],n=0;n<o.length;n++)s=o[n],a+=(i=te(s,a)).size,c.push(i);return c},se=function(e){var t,r,n,i,o,s,a=0,c=e.byteLength,u=e.nalCount,l=new Uint8Array(c+4*u),d=new DataView(l.buffer);for(t=0;t<e.length;t++)for(i=e[t],r=0;r<i.length;r++)for(o=i[r],n=0;n<o.length;n++)s=o[n],d.setUint32(a,s.data.byteLength),a+=4,l.set(s.data,a),a+=s.data.byteLength;return l},ae=function(e,t){var r,n=[];return r=te(e,t||0),n.push(r),n},ce=function(e){var t,r,n=0,i=e.byteLength,o=e.length,s=new Uint8Array(i+4*o),a=new DataView(s.buffer);for(t=0;t<e.length;t++)r=e[t],a.setUint32(n,r.data.byteLength),n+=4,s.set(r.data,n),n+=r.data.byteLength;return s},ue=[33,16,5,32,164,27],le=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],de=function(e){for(var t=[];e--;)t.push(0);return t},he=function(){if(!H){var e={96e3:[ue,[227,64],de(154),[56]],88200:[ue,[231],de(170),[56]],64e3:[ue,[248,192],de(240),[56]],48e3:[ue,[255,192],de(268),[55,148,128],de(54),[112]],44100:[ue,[255,192],de(268),[55,163,128],de(84),[112]],32e3:[ue,[255,192],de(268),[55,234],de(226),[112]],24e3:[ue,[255,192],de(268),[55,255,128],de(268),[111,112],de(126),[224]],16e3:[ue,[255,192],de(268),[55,255,128],de(268),[111,255],de(269),[223,108],de(195),[1,192]],12e3:[le,de(268),[3,127,248],de(268),[6,255,240],de(268),[13,255,224],de(268),[27,253,128],de(259),[56]],11025:[le,de(268),[3,127,248],de(268),[6,255,240],de(268),[13,255,224],de(268),[27,255,192],de(268),[55,175,128],de(108),[112]],8e3:[le,de(268),[3,121,16],de(47),[7]]};t=e,H=Object.keys(t).reduce((function(e,r){return e[r]=new Uint8Array(t[r].reduce((function(e,t){return e.concat(t)}),[])),e}),{})}var t;return H},pe=9e4;X=function(e,t){return W(K(e,t))},Y=function(e,t){return z(G(e),t)},Q=function(e,t,r){return G(r?e:e-t)};var fe=pe,me=(z=function(e,t){return e*t},G=function(e){return e/pe}),ve=(K=function(e,t){return e/t},X),ge=Y,ye=Q,be=W=function(e){return e*pe},_e=me,Te=function(e,t,r,n){var i,o,s,a,c,u=0,l=0,d=0;if(t.length&&(i=ve(e.baseMediaDecodeTime,e.samplerate),o=Math.ceil(fe/(e.samplerate/1024)),r&&n&&(u=i-Math.max(r,n),d=(l=Math.floor(u/o))*o),!(l<1||d>fe/2))){for((s=he()[e.samplerate])||(s=t[0].data),a=0;a<l;a++)c=t[0],t.splice(0,0,{data:s,dts:c.dts-o,pts:c.pts-o});e.baseMediaDecodeTime-=Math.floor(ge(d,e.samplerate))}},we=function(e,t,r){return t.minSegmentDts>=r?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=r&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))},Se=function(e){var t,r,n=[];for(t=0;t<e.length;t++)r=e[t],n.push({size:r.data.byteLength,duration:1024});return n},Ce=function(e){var t,r,n=0,i=new Uint8Array(function(e){var t,r=0;for(t=0;t<e.length;t++)r+=e[t].data.byteLength;return r}(e));for(t=0;t<e.length;t++)r=e[t],i.set(r.data,n),n+=r.data.byteLength;return i},Ee=fe,Oe=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},ke=function(e,t){var r,n=e.minSegmentDts;return t||(n-=e.timelineStartInfo.dts),r=e.timelineStartInfo.baseMediaDecodeTime,r+=n,r=Math.max(0,r),"audio"===e.type&&(r*=e.samplerate/Ee,r=Math.floor(r)),r},xe=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},Ae=function(e){for(var t=0,r={payloadType:-1,payloadSize:0},n=0,i=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!r.payload&&4===n){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){r.payloadType=n,r.payloadSize=i,r.payload=e.subarray(t,t+i);break}r.payload=void 0}t+=i,n=0,i=0}return r},Pe=function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},Ie=function(e,t){var r,n,i,o,s=[];if(!(64&t[0]))return s;for(n=31&t[0],r=0;r<n;r++)o={type:3&t[(i=3*r)+2],pts:e},4&t[i+2]&&(o.ccData=t[i+3]<<8|t[i+4],s.push(o));return s},Me=function(e){for(var t,r,n=e.byteLength,i=[],o=1;o<n-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var s=0;for(o=0;o<t;s++,o++)s===i[0]&&(s++,i.shift()),r[o]=e[s];return r},Le=4,De=function e(){e.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new Fe(0,0),new Fe(0,1),new Fe(1,0),new Fe(1,1)],this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this)};(De.prototype=new V).push=function(e){var t,r,n;if("sei_rbsp"===e.nalUnitType&&(t=Ae(e.escapedRBSP)).payloadType===Le&&(r=Pe(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=Ie(e.pts,r),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},De.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},De.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2&&this.dispatchCea608Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},De.prototype.flush=function(){return this.flushStream("flush")},De.prototype.partialFlush=function(){return this.flushStream("partialFlush")},De.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},De.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},De.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},De.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},De.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var Re={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ne=function(e){return null===e?"":(e=Re[e]||e,String.fromCharCode(e))},je=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ue=function(){for(var e=[],t=15;t--;)e.push("");return e},Fe=function e(t,r){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=r||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,r,n,i,o;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,i=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),r=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=r,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Ue();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ue();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Ue()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(n,i))o=Ne((n=(3&n)<<8)|i),this[this.mode_](e.pts,o),this.column_++;else if(this.isExtCharacter(n,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),o=Ne((n=(3&n)<<8)|i),this[this.mode_](e.pts,o),this.column_++;else if(this.isMidRowCode(n,i))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(n,i))this.column_+=3&i;else if(this.isPAC(n,i)){var s=je.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(n)&&(0===i&&(i=null),o=Ne(n),o+=Ne(i),this[this.mode_](e.pts,o),this.column_+=o.length)}else this.lastControlCode_=null}};Fe.prototype=new V,Fe.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e){try{return e.trim()}catch(e){return console.error("Skipping malformed caption."),""}})).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Fe.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ue(),this.nonDisplayed_=Ue(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Fe.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Fe.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},Fe.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},Fe.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},Fe.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},Fe.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},Fe.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},Fe.prototype.isNormalChar=function(e){return e>=32&&e<=127},Fe.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Ue(),this.displayed_=Ue()),void 0!==t&&t!==this.row_)for(var r=0;r<this.rollUpRows_;r++)this.displayed_[t-r]=this.displayed_[this.row_-r],this.displayed_[this.row_-r]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Fe.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var r=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,r)},Fe.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},Fe.prototype.popOn=function(e,t){var r=this.nonDisplayed_[this.row_];r+=t,this.nonDisplayed_[this.row_]=r},Fe.prototype.rollUp=function(e,t){var r=this.displayed_[this.row_];r+=t,this.displayed_[this.row_]=r},Fe.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Fe.prototype.paintOn=function(e,t){var r=this.displayed_[this.row_];r+=t,this.displayed_[this.row_]=r};var $e={CaptionStream:De,Cea608Stream:Fe},Be={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ve="shared",qe=function(e,t){var r=1;for(e>t&&(r=-1);Math.abs(t-e)>4294967296;)e+=8589934592*r;return e},He=function e(t){var r,n;e.prototype.init.call(this),this.type_=t||Ve,this.push=function(e){this.type_!==Ve&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=qe(e.dts,n),e.pts=qe(e.pts,n),r=e.dts,this.trigger("data",e))},this.flush=function(){n=r,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,r=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};He.prototype=new V;var We,ze=He,Ge=function(e,t,r){var n,i="";for(n=t;n<r;n++)i+="%"+("00"+e[n].toString(16)).slice(-2);return i},Ke=function(e,t,r){return decodeURIComponent(Ge(e,t,r))},Xe=function(e,t,r){return unescape(Ge(e,t,r))},Ye=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Qe={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Ke(e.data,1,t),e.value=Ke(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Ke(e.data,1,t),e.url=Ke(e.data,t+1,e.data.length);break}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=Xe(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};We=function(e){var t,r={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},n=0,i=[],o=0;if(We.prototype.init.call(this),this.dispatchType=Be.METADATA_STREAM_TYPE.toString(16),r.descriptor)for(t=0;t<r.descriptor.length;t++)this.dispatchType+=("00"+r.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,s,a,c,u;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(o=0,i.length=0),0===i.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))r.debug;else if(i.push(e),o+=e.data.byteLength,1===i.length&&(n=Ye(e.data.subarray(6,10)),n+=10),!(o<n)){for(t={data:new Uint8Array(n),frames:[],pts:i[0].pts,dts:i[0].dts},u=0;u<n;)t.data.set(i[0].data.subarray(0,n-u),u),u+=i[0].data.byteLength,o-=i[0].data.byteLength,i.shift();s=10,64&t.data[5]&&(s+=4,s+=Ye(t.data.subarray(10,14)),n-=Ye(t.data.subarray(16,20)));do{if((a=Ye(t.data.subarray(s+4,s+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((c={id:String.fromCharCode(t.data[s],t.data[s+1],t.data[s+2],t.data[s+3]),data:t.data.subarray(s+10,s+a+10)}).key=c.id,Qe[c.id]&&(Qe[c.id](c),"com.apple.streaming.transportStreamTimestamp"===c.owner)){var l=c.data,d=(1&l[3])<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;d*=4,d+=3&l[7],c.timeStamp=d,void 0===t.pts&&void 0===t.dts&&(t.pts=c.timeStamp,t.dts=c.timeStamp),this.trigger("timestamp",c)}t.frames.push(c),s+=10,s+=a}while(s<n);this.trigger("data",t)}}},We.prototype=new V;var Je,Ze,et,tt=We,rt=ze,nt=188;Je=function(){var e=new Uint8Array(nt),t=0;Je.prototype.init.call(this),this.push=function(r){var n,i=0,o=nt;for(t?((n=new Uint8Array(r.byteLength+t)).set(e.subarray(0,t)),n.set(r,t),t=0):n=r;o<n.byteLength;)71!==n[i]||71!==n[o]?(i++,o++):(this.trigger("data",n.subarray(i,o)),i+=nt,o+=nt);i<n.byteLength&&(e.set(n.subarray(i),0),t=n.byteLength-i)},this.flush=function(){t===nt&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}},Je.prototype=new V,Ze=function(){var e,t,r,n;Ze.prototype.init.call(this),n=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,n){var i=0;n.payloadUnitStartIndicator&&(i+=e[i]+1),"pat"===n.type?t(e.subarray(i),n):r(e.subarray(i),n)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],n.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=n.pmtPid},r=function(e,t){var r,i;if(1&e[5]){for(n.programMapTable={video:null,audio:null,"timed-metadata":{}},r=3+((15&e[1])<<8|e[2])-4,i=12+((15&e[10])<<8|e[11]);i<r;){var o=e[i],s=(31&e[i+1])<<8|e[i+2];o===Be.H264_STREAM_TYPE&&null===n.programMapTable.video?n.programMapTable.video=s:o===Be.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio=s:o===Be.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][s]=o),i+=5+((15&e[i+3])<<8|e[i+4])}t.programMapTable=n.programMapTable}},this.push=function(t){var r={},n=4;if(r.payloadUnitStartIndicator=!!(64&t[1]),r.pid=31&t[1],r.pid<<=8,r.pid|=t[2],(48&t[3])>>>4>1&&(n+=t[n]+1),0===r.pid)r.type="pat",e(t.subarray(n),r),this.trigger("data",r);else if(r.pid===this.pmtPid)for(r.type="pmt",e(t.subarray(n),r),this.trigger("data",r);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,r]):this.processPes_(t,n,r)},this.processPes_=function(e,t,r){r.pid===this.programMapTable.video?r.streamType=Be.H264_STREAM_TYPE:r.pid===this.programMapTable.audio?r.streamType=Be.ADTS_STREAM_TYPE:r.streamType=this.programMapTable["timed-metadata"][r.pid],r.type="pes",r.data=e.subarray(t),this.trigger("data",r)}},Ze.prototype=new V,Ze.STREAM_TYPES={h264:27,adts:15},et=function(){var e,t=this,r={data:[],size:0},n={data:[],size:0},i={data:[],size:0},o=function(e,r,n){var i,o,s=new Uint8Array(e.size),a={type:r},c=0,u=0;if(e.data.length&&!(e.size<9)){for(a.trackId=e.data[0].pid,c=0;c<e.data.length;c++)o=e.data[c],s.set(o.data,u),u+=o.data.byteLength;var l,d,h;l=s,(d=a).packetLength=6+(l[4]<<8|l[5]),d.dataAlignmentIndicator=0!=(4&l[6]),192&(h=l[7])&&(d.pts=(14&l[9])<<27|(255&l[10])<<20|(254&l[11])<<12|(255&l[12])<<5|(254&l[13])>>>3,d.pts*=4,d.pts+=(6&l[13])>>>1,d.dts=d.pts,64&h&&(d.dts=(14&l[14])<<27|(255&l[15])<<20|(254&l[16])<<12|(255&l[17])<<5|(254&l[18])>>>3,d.dts*=4,d.dts+=(6&l[18])>>>1)),d.data=l.subarray(9+l[8]),i="video"===r||a.packetLength<=e.size,(n||i)&&(e.size=0,e.data.length=0),i&&t.trigger("data",a)}};et.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var e,t;switch(s.streamType){case Be.H264_STREAM_TYPE:e=r,t="video";break;case Be.ADTS_STREAM_TYPE:e=n,t="audio";break;case Be.METADATA_STREAM_TYPE:e=i,t="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&o(e,t,!0),e.data.push(s),e.size+=s.data.byteLength},pmt:function(){var r={type:"metadata",tracks:[]};null!==(e=s.programMapTable).video&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",r)}})[s.type]()},this.reset=function(){r.size=0,r.data.length=0,n.size=0,n.data.length=0,this.trigger("reset")},this.flushStreams_=function(){o(r,"video"),o(n,"audio"),o(i,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}},et.prototype=new V;var it={PAT_PID:0,MP2T_PACKET_LENGTH:nt,TransportPacketStream:Je,TransportParseStream:Ze,ElementaryStream:et,TimestampRolloverStream:rt,CaptionStream:$e.CaptionStream,Cea608Stream:$e.Cea608Stream,MetadataStream:tt};for(var ot in Be)Be.hasOwnProperty(ot)&&(it[ot]=Be[ot]);var st,at=it,ct=fe,ut=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];st=function(e){var t,r=0;st.prototype.init.call(this),this.push=function(n){var i,o,s,a,c,u,l=0;if(e||(r=0),"audio"===n.type)for(t?(a=t,(t=new Uint8Array(a.byteLength+n.data.byteLength)).set(a),t.set(n.data,a.byteLength)):t=n.data;l+5<t.length;)if(255===t[l]&&240==(246&t[l+1])){if(o=2*(1&~t[l+1]),i=(3&t[l+3])<<11|t[l+4]<<3|(224&t[l+5])>>5,u=(c=1024*(1+(3&t[l+6])))*ct/ut[(60&t[l+2])>>>2],s=l+i,t.byteLength<s)return;if(this.trigger("data",{pts:n.pts+r*u,dts:n.dts+r*u,sampleCount:c,audioobjecttype:1+(t[l+2]>>>6&3),channelcount:(1&t[l+2])<<2|(192&t[l+3])>>>6,samplerate:ut[(60&t[l+2])>>>2],samplingfrequencyindex:(60&t[l+2])>>>2,samplesize:16,data:t.subarray(l+7+o,s)}),r++,t.byteLength===s)return void(t=void 0);t=t.subarray(s)}else l++},this.flush=function(){r=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}},st.prototype=new V;var lt,dt,ht,pt=st,ft=function(e){var t=e.byteLength,r=0,n=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+n},this.loadWord=function(){var i=e.byteLength-t,o=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error("no bytes available");o.set(e.subarray(i,i+s)),r=new DataView(o.buffer).getUint32(0),n=8*s,t-=s},this.skipBits=function(e){var i;n>e?(r<<=e,n-=e):(e-=n,e-=8*(i=Math.floor(e/8)),t-=i,this.loadWord(),r<<=e,n-=e)},this.readBits=function(e){var i=Math.min(n,e),o=r>>>32-i;return(n-=i)>0?r<<=i:t>0&&this.loadWord(),(i=e-i)>0?o<<i|this.readBits(i):o},this.skipLeadingZeros=function(){var e;for(e=0;e<n;++e)if(0!=(r&2147483648>>>e))return r<<=e,n-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};dt=function(){var e,t,r=0;dt.prototype.init.call(this),this.push=function(n){var i;t?((i=new Uint8Array(t.byteLength+n.data.byteLength)).set(t),i.set(n.data,t.byteLength),t=i):t=n.data;for(var o=t.byteLength;r<o-3;r++)if(1===t[r+2]){e=r+5;break}for(;e<o;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}r+3!==e-2&&this.trigger("data",t.subarray(r+3,e-2));do{e++}while(1!==t[e]&&e<o);r=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(r+3,e-2)),r=e-2,e+=3;break;default:e+=3}t=t.subarray(r),e-=r,r=0},this.reset=function(){t=null,r=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(r+3)),t=null,r=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},dt.prototype=new V,ht={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},lt=function(){var e,t,r,n,i,o,s,a=new dt;lt.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,r=e.pts,n=e.dts,a.push(e))},a.on("data",(function(s){var a={trackId:t,pts:r,dts:n,data:s};switch(31&s[0]){case 5:a.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:a.nalUnitType="sei_rbsp",a.escapedRBSP=i(s.subarray(1));break;case 7:a.nalUnitType="seq_parameter_set_rbsp",a.escapedRBSP=i(s.subarray(1)),a.config=o(a.escapedRBSP);break;case 8:a.nalUnitType="pic_parameter_set_rbsp";break;case 9:a.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",a)})),a.on("done",(function(){e.trigger("done")})),a.on("partialdone",(function(){e.trigger("partialdone")})),a.on("reset",(function(){e.trigger("reset")})),a.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){a.flush()},this.partialFlush=function(){a.partialFlush()},this.reset=function(){a.reset()},this.endTimeline=function(){a.endTimeline()},s=function(e,t){var r,n=8,i=8;for(r=0;r<e;r++)0!==i&&(i=(n+t.readExpGolomb()+256)%256),n=0===i?n:i},i=function(e){for(var t,r,n=e.byteLength,i=[],o=1;o<n-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var s=0;for(o=0;o<t;s++,o++)s===i[0]&&(s++,i.shift()),r[o]=e[s];return r},o=function(e){var t,r,n,i,o,a,c,u,l,d,h,p,f,m=0,v=0,g=0,y=0,b=1;if(r=(t=new ft(e)).readUnsignedByte(),i=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),ht[r]&&(3===(o=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(h=3!==o?8:12,f=0;f<h;f++)t.readBoolean()&&s(f<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(a=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===a)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),c=t.readUnsignedExpGolomb(),f=0;f<c;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),l=t.readUnsignedExpGolomb(),0===(d=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(m=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}p&&(b=p[0]/p[1])}return{profileIdc:r,levelIdc:n,profileCompatibility:i,width:Math.ceil((16*(u+1)-2*m-2*v)*b),height:(2-d)*(l+1)*16-2*g-2*y,sarRatio:p}}},lt.prototype=new V;var mt,vt={H264Stream:lt,NalByteStream:dt},gt=function(e,t){var r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return r=r>=0?r:0,(16&e[t+5])>>4?r+20:r+10},yt=function e(t,r){return t.length-r<10||t[r]!=="I".charCodeAt(0)||t[r+1]!=="D".charCodeAt(0)||t[r+2]!=="3".charCodeAt(0)?r:e(t,r+=gt(t,r))},bt=function(e){var t=yt(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},_t=gt,Tt=function(e,t){var r=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|r};(mt=function(){var e=new Uint8Array,t=0;mt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(r){var n,i,o,s,a=0,c=0;for(e.length?(s=e.length,(e=new Uint8Array(r.byteLength+s)).set(e.subarray(0,s)),e.set(r,s)):e=r;e.length-c>=3;)if(e[c]!=="I".charCodeAt(0)||e[c+1]!=="D".charCodeAt(0)||e[c+2]!=="3".charCodeAt(0))if(255!=(255&e[c])||240!=(240&e[c+1]))c++;else{if(e.length-c<7)break;if(c+(a=Tt(e,c))>e.length)break;o={type:"audio",data:e.subarray(c,c+a),pts:t,dts:t},this.trigger("data",o),c+=a}else{if(e.length-c<10)break;if(c+(a=_t(e,c))>e.length)break;i={type:"timed-metadata",data:e.subarray(c,c+a)},this.trigger("data",i),c+=a}n=e.length-c,e=n>0?e.subarray(c):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new V;var wt,St,Ct,Et,Ot=mt,kt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],xt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],At=vt.H264Stream,Pt=bt,It=fe,Mt=function(e,t){var r;if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},Lt=function(e,t,r,n,i,o){return{start:{dts:e,pts:e+(r-t)},end:{dts:e+(n-t),pts:e+(i-r)},prependedContentDuration:o,baseMediaDecodeTime:e}};St=function(e,t){var r=[],n=0,i=0,o=0,s=1/0;t=t||{},St.prototype.init.call(this),this.push=function(t){xe(e,t),e&&kt.forEach((function(r){e[r]=t[r]})),r.push(t)},this.setEarliestDts=function(e){i=e},this.setVideoBaseMediaDecodeTime=function(e){s=e},this.setAudioAppendStart=function(e){o=e},this.flush=function(){var a,c,u,l,d;0!==r.length?(a=we(r,e,i),e.baseMediaDecodeTime=ke(e,t.keepOriginalTimestamps),Te(e,a,o,s),e.samples=Se(a),u=J(Ce(a)),r=[],c=Z(n,[e]),l=new Uint8Array(c.byteLength+u.byteLength),n++,l.set(c),l.set(u,c.byteLength),Oe(e),d=Math.ceil(1024*It/e.samplerate),a.length&&this.trigger("timingInfo",{start:a[0].pts,end:a[0].pts+a.length*d}),this.trigger("data",{track:e,boxes:l}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Oe(e),r=[],this.trigger("reset")}},St.prototype=new V,wt=function(e,t){var r,n,i=0,o=[],s=[];t=t||{},wt.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){xe(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.config,e.sps=[t.data],xt.forEach((function(t){e[t]=r[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.data,e.pps=[t.data]),o.push(t)},this.flush=function(){for(var r,n,a,c,u,l,d,h,p=0;o.length&&"access_unit_delimiter_rbsp"!==o[0].nalUnitType;)o.shift();if(0===o.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(r=re(o),(a=ne(r))[0][0].keyFrame||((n=this.getGopForFusion_(o[0],e))?(p=n.duration,a.unshift(n),a.byteLength+=n.byteLength,a.nalCount+=n.nalCount,a.pts=n.pts,a.dts=n.dts,a.duration+=n.duration):a=ie(a)),s.length){var f;if(!(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(a):this.alignGopsAtStart_(a)))return this.gopCache_.unshift({gop:a.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Oe(e),a=f}xe(e,a),e.samples=oe(a),u=J(se(a)),e.baseMediaDecodeTime=ke(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",a.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),d=a[0],h=a[a.length-1],this.trigger("segmentTimingInfo",Lt(e.baseMediaDecodeTime,d.dts,d.pts,h.dts+h.duration,h.pts+h.duration,p)),this.trigger("timingInfo",{start:a[0].pts,end:a[a.length-1].pts+a[a.length-1].duration}),this.gopCache_.unshift({gop:a.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),c=Z(i,[e]),l=new Uint8Array(c.byteLength+u.byteLength),i++,l.set(c),l.set(u,c.byteLength),this.trigger("data",{track:e,boxes:l}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),o=[],this.gopCache_.length=0,s.length=0,this.trigger("reset")},this.resetStream_=function(){Oe(e),r=void 0,n=void 0},this.getGopForFusion_=function(t){var r,n,i,o,s,a=1/0;for(s=0;s<this.gopCache_.length;s++)i=(o=this.gopCache_[s]).gop,e.pps&&Mt(e.pps[0],o.pps[0])&&e.sps&&Mt(e.sps[0],o.sps[0])&&(i.dts<e.timelineStartInfo.dts||(r=t.dts-i.dts-i.duration)>=-1e4&&r<=45e3&&(!n||a>r)&&(n=o,a=r));return n?n.gop:null},this.alignGopsAtStart_=function(e){var t,r,n,i,o,a,c,u;for(o=e.byteLength,a=e.nalCount,c=e.duration,t=r=0;t<s.length&&r<e.length&&(n=s[t],i=e[r],n.pts!==i.pts);)i.pts>n.pts?t++:(r++,o-=i.byteLength,a-=i.nalCount,c-=i.duration);return 0===r?e:r===e.length?null:((u=e.slice(r)).byteLength=o,u.duration=c,u.nalCount=a,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,r,n,i,o,a,c;for(t=s.length-1,r=e.length-1,o=null,a=!1;t>=0&&r>=0;){if(n=s[t],i=e[r],n.pts===i.pts){a=!0;break}n.pts>i.pts?t--:(t===s.length-1&&(o=r),r--)}if(!a&&null===o)return null;if(0===(c=a?r:o))return e;var u=e.slice(c),l=u.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return u.byteLength=l.byteLength,u.duration=l.duration,u.nalCount=l.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){s=e}},wt.prototype=new V,Et=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Et.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},Et.prototype=new V,Et.prototype.flush=function(e){var t,r,n,i,o=0,s={captions:[],captionStreams:{},metadata:[],info:{}},a=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(a=this.videoTrack.timelineStartInfo.pts,xt.forEach((function(e){s.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts,kt.forEach((function(e){s.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,n=ee(this.pendingTracks),s.initSegment=new Uint8Array(n.byteLength),s.initSegment.set(n),s.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)s.data.set(this.pendingBoxes[i],o),o+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(t=this.pendingCaptions[i]).startTime=ye(t.startPts,a,this.keepOriginalTimestamps),t.endTime=ye(t.endPts,a,this.keepOriginalTimestamps),s.captionStreams[t.stream]=!0,s.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)(r=this.pendingMetadata[i]).cueTime=ye(r.pts,a,this.keepOriginalTimestamps),s.metadata.push(r);for(s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),i=0;i<s.captions.length;i++)t=s.captions[i],this.trigger("caption",t);for(i=0;i<s.metadata.length;i++)r=s.metadata[i],this.trigger("id3Frame",r)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Et.prototype.setRemux=function(e){this.remuxTracks=e},Ct=function(e){var t,r,n=this,i=!0;Ct.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="aac",i.metadataStream=new at.MetadataStream,i.aacStream=new Ot,i.audioTimestampRolloverStream=new at.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new at.TimestampRolloverStream("timed-metadata"),i.adtsStream=new pt,i.coalesceStream=new Et(e,i.metadataStream),i.headOfPipeline=i.aacStream,i.aacStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.aacStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.metadataStream.on("timestamp",(function(e){i.aacStream.setTimestamp(e.timeStamp)})),i.aacStream.on("data",(function(o){"timed-metadata"!==o.type&&"audio"!==o.type||i.audioSegmentStream||(r=r||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"},i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new St(r,e),i.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream),n.trigger("trackinfo",{hasAudio:!!r,hasVideo:!!t}))})),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="ts",i.metadataStream=new at.MetadataStream,i.packetStream=new at.TransportPacketStream,i.parseStream=new at.TransportParseStream,i.elementaryStream=new at.ElementaryStream,i.timestampRolloverStream=new at.TimestampRolloverStream,i.adtsStream=new pt,i.h264Stream=new At,i.captionStream=new at.CaptionStream,i.coalesceStream=new Et(e,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream).pipe(i.timestampRolloverStream),i.timestampRolloverStream.pipe(i.h264Stream),i.timestampRolloverStream.pipe(i.adtsStream),i.timestampRolloverStream.pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",(function(o){var s;if("metadata"===o.type){for(s=o.tracks.length;s--;)t||"video"!==o.tracks[s].type?r||"audio"!==o.tracks[s].type||((r=o.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(t=o.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;t&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new wt(t,e),i.videoSegmentStream.on("timelineStartInfo",(function(t){r&&!e.keepOriginalTimestamps&&(r.timelineStartInfo=t,i.audioSegmentStream.setEarliestDts(t.dts-n.baseMediaDecodeTime))})),i.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo")),i.videoSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"videoSegmentTimingInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",(function(e){r&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),i.videoSegmentStream.on("timingInfo",n.trigger.bind(n,"videoTimingInfo")),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),r&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new St(r,e),i.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream)),n.trigger("trackinfo",{hasAudio:!!r,hasVideo:!!t})}})),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("id3Frame",(function(e){e.dispatchType=i.metadataStream.dispatchType,n.trigger("id3Frame",e)})),i.coalesceStream.on("caption",this.trigger.bind(this,"caption")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(n){var i=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=n),r&&(r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,Oe(r),i.audioTimestampRolloverStream&&i.audioTimestampRolloverStream.discontinuity()),t&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,Oe(t),i.captionStream.reset()),i.timestampRolloverStream&&i.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){r&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var r=this.transmuxPipeline_;e.remux=t,r&&r.coalesceStream&&r.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(i){var t=Pt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Ct.prototype=new V;var Dt={Transmuxer:Ct,VideoSegmentStream:wt,AudioSegmentStream:St,AUDIO_PROPERTIES:kt,VIDEO_PROPERTIES:xt,generateVideoSegmentTimingInfo:Lt}.Transmuxer,Rt={Adts:pt,h264:vt},Nt=fe,jt=function e(t,r){var n=[],i=0,o=0,s=0,a=1/0,c=null,u=null;r=r||{},e.prototype.init.call(this),this.push=function(e){xe(t,e),t&&kt.forEach((function(r){t[r]=e[r]})),n.push(e)},this.setEarliestDts=function(e){o=e},this.setVideoBaseMediaDecodeTime=function(e){a=e},this.setAudioAppendStart=function(e){s=e},this.processFrames_=function(){var e,l,d,h,p;0!==n.length&&0!==(e=we(n,t,o)).length&&(t.baseMediaDecodeTime=ke(t,r.keepOriginalTimestamps),Te(t,e,s,a),t.samples=Se(e),d=J(Ce(e)),n=[],l=Z(i,[t]),i++,t.initSegment=ee([t]),(h=new Uint8Array(l.byteLength+d.byteLength)).set(l),h.set(d,l.byteLength),Oe(t),null===c&&(u=c=e[0].pts),u+=e.length*(1024*Nt/t.samplerate),p={start:c},this.trigger("timingInfo",p),this.trigger("data",{track:t,boxes:h}))},this.flush=function(){this.processFrames_(),this.trigger("timingInfo",{start:c,end:u}),this.resetTiming_(),this.trigger("done","AudioSegmentStream")},this.partialFlush=function(){this.processFrames_(),this.trigger("partialdone","AudioSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","AudioSegmentStream")},this.resetTiming_=function(){Oe(t),c=null,u=null},this.reset=function(){this.resetTiming_(),n=[],this.trigger("reset")}};jt.prototype=new V;var Ut=jt,Ft=function e(t,r){var n,i,o,s=0,a=[],c=[],u=null,l=null,d=!0;r=r||{},e.prototype.init.call(this),this.push=function(e){xe(t,e),void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),"seq_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.config,t.sps=[e.data],xt.forEach((function(e){t[e]=n[e]}),this)),"pic_parameter_set_rbsp"!==e.nalUnitType||i||(i=e.data,t.pps=[e.data]),a.push(e)},this.processNals_=function(e){var n;for(a=c.concat(a);a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0!==a.length){var i=re(a);if(i.length)if(c=i[i.length-1],e&&(i.pop(),i.duration-=c.duration,i.nalCount-=c.length,i.byteLength-=c.byteLength),i.length){if(this.trigger("timelineStartInfo",t.timelineStartInfo),d){if(!(o=ne(i))[0][0].keyFrame){if(!(o=ie(o))[0][0].keyFrame)return a=[].concat.apply([],i).concat(c),void(c=[]);(i=[].concat.apply([],o)).duration=o.duration}d=!1}for(null===u&&(u=i[0].pts,l=u),l+=i.duration,this.trigger("timingInfo",{start:u,end:l}),n=0;n<i.length;n++){var h=i[n];t.samples=ae(h);var p=J(ce(h));Oe(t),xe(t,h),t.baseMediaDecodeTime=ke(t,r.keepOriginalTimestamps);var f=Z(s,[t]);s++,t.initSegment=ee([t]);var m=new Uint8Array(f.byteLength+p.byteLength);m.set(f),m.set(p,f.byteLength),this.trigger("data",{track:t,boxes:m,sequence:s,videoFrameDts:h.dts,videoFramePts:h.pts})}a=[]}else a=[]}},this.resetTimingAndConfig_=function(){n=void 0,i=void 0,u=null,l=null},this.partialFlush=function(){this.processNals_(!0),this.trigger("partialdone","VideoSegmentStream")},this.flush=function(){this.processNals_(!1),this.resetTimingAndConfig_(),this.trigger("done","VideoSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","VideoSegmentStream")},this.reset=function(){this.resetTimingAndConfig_(),c=[],a=[],d=!0,this.trigger("reset")}};Ft.prototype=new V;var $t=Ft,Bt=bt,Vt=function(e){return e.prototype=new V,e.prototype.init.call(e),e},qt=function(e,t){e.on("data",t.trigger.bind(t,"data")),e.on("done",t.trigger.bind(t,"done")),e.on("partialdone",t.trigger.bind(t,"partialdone")),e.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),e.on("audioTimingInfo",t.trigger.bind(t,"audioTimingInfo")),e.on("videoTimingInfo",t.trigger.bind(t,"videoTimingInfo")),e.on("trackinfo",t.trigger.bind(t,"trackinfo")),e.on("id3Frame",(function(r){r.dispatchType=e.metadataStream.dispatchType,r.cueTime=me(r.pts),t.trigger("id3Frame",r)})),e.on("caption",(function(e){t.trigger("caption",e)}))},Ht=function e(t){var r=null,n=!0;t=t||{},e.prototype.init.call(this),t.baseMediaDecodeTime=t.baseMediaDecodeTime||0,this.push=function(e){if(n){var i=Bt(e);!i||r&&"aac"===r.type?i||r&&"ts"===r.type||(r=function(e){var t={type:"ts",tracks:{audio:null,video:null},packet:new at.TransportPacketStream,parse:new at.TransportParseStream,elementary:new at.ElementaryStream,timestampRollover:new at.TimestampRolloverStream,adts:new Rt.Adts,h264:new Rt.h264.H264Stream,captionStream:new at.CaptionStream,metadataStream:new at.MetadataStream};return t.headOfPipeline=t.packet,t.packet.pipe(t.parse).pipe(t.elementary).pipe(t.timestampRollover),t.timestampRollover.pipe(t.h264),t.h264.pipe(t.captionStream),t.timestampRollover.pipe(t.metadataStream),t.timestampRollover.pipe(t.adts),t.elementary.on("data",(function(r){if("metadata"===r.type){for(var n=0;n<r.tracks.length;n++)t.tracks[r.tracks[n].type]||(t.tracks[r.tracks[n].type]=r.tracks[n],t.tracks[r.tracks[n].type].timelineStartInfo.baseMediaDecodeTime=e.baseMediaDecodeTime);t.tracks.video&&!t.videoSegmentStream&&(t.videoSegmentStream=new $t(t.tracks.video,e),t.videoSegmentStream.on("timelineStartInfo",(function(r){t.tracks.audio&&!e.keepOriginalTimestamps&&t.audioSegmentStream.setEarliestDts(r.dts-e.baseMediaDecodeTime)})),t.videoSegmentStream.on("timingInfo",t.trigger.bind(t,"videoTimingInfo")),t.videoSegmentStream.on("data",(function(e){t.trigger("data",{type:"video",data:e})})),t.videoSegmentStream.on("done",t.trigger.bind(t,"done")),t.videoSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.videoSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.h264.pipe(t.videoSegmentStream)),t.tracks.audio&&!t.audioSegmentStream&&(t.audioSegmentStream=new Ut(t.tracks.audio,e),t.audioSegmentStream.on("data",(function(e){t.trigger("data",{type:"audio",data:e})})),t.audioSegmentStream.on("done",t.trigger.bind(t,"done")),t.audioSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.audioSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.audioSegmentStream.on("timingInfo",t.trigger.bind(t,"audioTimingInfo")),t.adts.pipe(t.audioSegmentStream)),t.trigger("trackinfo",{hasAudio:!!t.tracks.audio,hasVideo:!!t.tracks.video})}})),t.captionStream.on("data",(function(r){var n;n=t.tracks.video&&t.tracks.video.timelineStartInfo.pts||0,r.startTime=ye(r.startPts,n,e.keepOriginalTimestamps),r.endTime=ye(r.endPts,n,e.keepOriginalTimestamps),t.trigger("caption",r)})),(t=Vt(t)).metadataStream.on("data",t.trigger.bind(t,"id3Frame")),t}(t),qt(r,this)):(r=function(e){var t={type:"aac",tracks:{audio:null},metadataStream:new at.MetadataStream,aacStream:new Ot,audioRollover:new at.TimestampRolloverStream("audio"),timedMetadataRollover:new at.TimestampRolloverStream("timed-metadata"),adtsStream:new pt(!0)};return t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioRollover).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataRollover).pipe(t.metadataStream),t.metadataStream.on("timestamp",(function(e){t.aacStream.setTimestamp(e.timeStamp)})),t.aacStream.on("data",(function(r){"timed-metadata"!==r.type&&"audio"!==r.type||t.audioSegmentStream||(t.tracks.audio=t.tracks.audio||{timelineStartInfo:{baseMediaDecodeTime:e.baseMediaDecodeTime},codec:"adts",type:"audio"},t.audioSegmentStream=new Ut(t.tracks.audio,e),t.audioSegmentStream.on("data",(function(e){t.trigger("data",{type:"audio",data:e})})),t.audioSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.audioSegmentStream.on("done",t.trigger.bind(t,"done")),t.audioSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.audioSegmentStream.on("timingInfo",t.trigger.bind(t,"audioTimingInfo")),t.adtsStream.pipe(t.audioSegmentStream),t.trigger("trackinfo",{hasAudio:!!t.tracks.audio,hasVideo:!!t.tracks.video}))})),(t=Vt(t)).metadataStream.on("data",t.trigger.bind(t,"id3Frame")),t}(t),qt(r,this)),n=!1}r.headOfPipeline.push(e)},this.flush=function(){r&&(n=!0,r.headOfPipeline.flush())},this.partialFlush=function(){r&&r.headOfPipeline.partialFlush()},this.endTimeline=function(){r&&r.headOfPipeline.endTimeline()},this.reset=function(){r&&r.headOfPipeline.reset()},this.setBaseMediaDecodeTime=function(e){t.keepOriginalTimestamps||(t.baseMediaDecodeTime=e),r&&(r.tracks.audio&&(r.tracks.audio.timelineStartInfo.dts=void 0,r.tracks.audio.timelineStartInfo.pts=void 0,Oe(r.tracks.audio),r.audioRollover&&r.audioRollover.discontinuity()),r.tracks.video&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),r.tracks.video.timelineStartInfo.dts=void 0,r.tracks.video.timelineStartInfo.pts=void 0,Oe(r.tracks.video)),r.timestampRollover&&r.timestampRollover.discontinuity())},this.setRemux=function(e){t.remux=e,r&&r.coalesceStream&&r.coalesceStream.setRemux(e)},this.setAudioAppendStart=function(e){r&&r.tracks.audio&&r.audioSegmentStream&&r.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){}};Ht.prototype=new V;var Wt=Ht,zt=function(e){return e>>>0},Gt=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},Kt=zt,Xt=function e(t,r){var n,i,o,s,a,c=[];if(!r.length)return null;for(n=0;n<t.byteLength;)i=Kt(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]),o=Gt(t.subarray(n+4,n+8)),s=i>1?n+i:t.byteLength,o===r[0]&&(1===r.length?c.push(t.subarray(n+8,s)):(a=e(t.subarray(n+8,s),r.slice(1))).length&&(c=c.concat(a))),n=s;return c},Yt=zt,Qt=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:Yt(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=Yt(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),t},Jt=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Zt=function(e){var t,r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=1&r.flags[2],o=4&r.flags[2],s=1&r.flags[1],a=2&r.flags[1],c=4&r.flags[1],u=8&r.flags[1],l=n.getUint32(4),d=8;for(i&&(r.dataOffset=n.getInt32(d),d+=4),o&&l&&(t={flags:Jt(e.subarray(d,d+4))},d+=4,s&&(t.duration=n.getUint32(d),d+=4),a&&(t.size=n.getUint32(d),d+=4),u&&(1===r.version?t.compositionTimeOffset=n.getInt32(d):t.compositionTimeOffset=n.getUint32(d),d+=4),r.samples.push(t),l--);l--;)t={},s&&(t.duration=n.getUint32(d),d+=4),a&&(t.size=n.getUint32(d),d+=4),c&&(t.flags=Jt(e.subarray(d,d+4)),d+=4),u&&(1===r.version?t.compositionTimeOffset=n.getInt32(d):t.compositionTimeOffset=n.getUint32(d),d+=4),r.samples.push(t);return r},er=function(e){var t,r=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:r.getUint32(4)},i=1&n.flags[2],o=2&n.flags[2],s=8&n.flags[2],a=16&n.flags[2],c=32&n.flags[2],u=65536&n.flags[0],l=131072&n.flags[0];return t=8,i&&(t+=4,n.baseDataOffset=r.getUint32(12),t+=4),o&&(n.sampleDescriptionIndex=r.getUint32(t),t+=4),s&&(n.defaultSampleDuration=r.getUint32(t),t+=4),a&&(n.defaultSampleSize=r.getUint32(t),t+=4),c&&(n.defaultSampleFlags=r.getUint32(t)),u&&(n.durationIsEmpty=!0),!i&&l&&(n.baseDataOffsetIsMoof=!0),n},tr=Me,rr=$e.CaptionStream,nr=function(e,t){for(var r=e,n=0;n<t.length;n++){var i=t[n];if(r<i.size)return i;r-=i.size}return null},ir=function(e,t){var r=Xt(e,["moof","traf"]),n=Xt(e,["mdat"]),i={},o=[];return n.forEach((function(e,t){var n=r[t];o.push({mdat:e,traf:n})})),o.forEach((function(e){var r,n,o=e.mdat,s=e.traf,a=Xt(s,["tfhd"]),c=er(a[0]),u=c.trackId,l=Xt(s,["tfdt"]),d=l.length>0?Qt(l[0]).baseMediaDecodeTime:0,h=Xt(s,["trun"]);t===u&&h.length>0&&(r=function(e,t,r){var n=t,i=r.defaultSampleDuration||0,o=r.defaultSampleSize||0,s=r.trackId,a=[];return e.forEach((function(e){var t=Zt(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=i),void 0===e.size&&(e.size=o),e.trackId=s,e.dts=n,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=n+e.compositionTimeOffset,n+=e.duration})),a=a.concat(t)})),a}(h,d,c),n=function(e,t,r){var n,i,o,s,a=new DataView(e.buffer,e.byteOffset,e.byteLength),c=[];for(i=0;i+4<e.length;i+=o)if(o=a.getUint32(i),i+=4,!(o<=0))switch(31&e[i]){case 6:var u=e.subarray(i+1,i+1+o),l=nr(i,t);if(n={nalUnitType:"sei_rbsp",size:o,data:u,escapedRBSP:tr(u),trackId:r},l)n.pts=l.pts,n.dts=l.dts,s=l;else{if(!s)break;n.pts=s.pts,n.dts=s.dts}c.push(n)}return c}(o,r,u),i[u]||(i[u]=[]),i[u]=i[u].concat(n))})),i},or=function(){var e,t,r,n,i,o,s=!1;this.isInitialized=function(){return s},this.init=function(t){e=new rr,s=!0,o=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/n,e.endTime=e.endPts/n,i.captions.push(e),i.captionStreams[e.stream]=!0}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length)&&(r!==e[0]||n!==t[r])},this.parse=function(e,o,s){var a;if(!this.isInitialized())return null;if(!o||!s)return null;if(this.isNewInit(o,s))r=o[0],n=s[r];else if(null===r||!n)return t.push(e),null;for(;t.length>0;){var c=t.shift();this.parse(c,o,s)}return a=function(e,t,r){return null===t?null:{seiNals:ir(e,t)[t],timescale:r}}(e,r,n),null!==a&&a.seiNals?(this.pushNals(a.seiNals),this.flushStream(),i):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;o?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){i.captions=[],i.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],r=null,n=null,i?this.clearParsedCaptions():i={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()},sr=function(e){return"AudioSegmentStream"===e?"audio":"VideoSegmentStream"===e?"video":""},ar=function(){function e(e,t){this.options=t||{},this.self=e,this.init()}var t=e.prototype;return t.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=this.options.handlePartialData?new Wt(this.options):new Dt(this.options),this.options.handlePartialData?function(e,t){t.on("data",(function(t){var r={data:t.data.track.initSegment.buffer,byteOffset:t.data.track.initSegment.byteOffset,byteLength:t.data.track.initSegment.byteLength},n={boxes:{data:t.data.boxes.buffer,byteOffset:t.data.boxes.byteOffset,byteLength:t.data.boxes.byteLength},initSegment:r,type:t.type,sequence:t.data.sequence};void 0!==t.data.videoFrameDts&&(n.videoFrameDtsTime=_e(t.data.videoFrameDts)),void 0!==t.data.videoFramePts&&(n.videoFramePtsTime=_e(t.data.videoFramePts)),e.postMessage({action:"data",segment:n},[n.boxes.data,n.initSegment.data])})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("done",(function(t){e.postMessage({action:"done",type:sr(t)})})),t.on("partialdone",(function(t){e.postMessage({action:"partialdone",type:sr(t)})})),t.on("endedsegment",(function(t){e.postMessage({action:"endedSegment",type:sr(t)})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){if(null!==t.start){var r={start:_e(t.start)};t.end&&(r.end=_e(t.end)),e.postMessage({action:"audioTimingInfo",audioTimingInfo:r})}else e.postMessage({action:"audioTimingInfo",audioTimingInfo:t})})),t.on("videoTimingInfo",(function(t){var r={start:_e(t.start)};t.end&&(r.end=_e(t.end)),e.postMessage({action:"videoTimingInfo",videoTimingInfo:r})}))}(this.self,this.transmuxer):function(e,t){t.on("data",(function(t){var r=t.initSegment;t.initSegment={data:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength};var n=t.data;t.data=n.buffer,e.postMessage({action:"data",segment:t,byteOffset:n.byteOffset,byteLength:n.byteLength},[t.data])})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){var r={start:{decode:_e(t.start.dts),presentation:_e(t.start.pts)},end:{decode:_e(t.end.dts),presentation:_e(t.end.pts)},baseMediaDecodeTime:_e(t.baseMediaDecodeTime)};t.prependedContentDuration&&(r.prependedContentDuration=_e(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:r})})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:_e(t.start),end:_e(t.end)}})})),t.on("videoTimingInfo",(function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:_e(t.start),end:_e(t.end)}})}))}(this.self,this.transmuxer)},t.pushMp4Captions=function(e){this.captionParser||(this.captionParser=new or,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength),r=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:r&&r.captions||[],data:t.buffer},[t.buffer])},t.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},t.push=function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)},t.reset=function(){this.transmuxer.reset()},t.setTimestampOffset=function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(be(t)))},t.setAudioAppendStart=function(e){this.transmuxer.setAudioAppendStart(Math.ceil(be(e.appendStart)))},t.setRemux=function(e){this.transmuxer.setRemux(e.remux)},t.flush=function(e){this.transmuxer.flush(),r.postMessage({action:"done",type:"transmuxed"})},t.partialFlush=function(e){this.transmuxer.partialFlush(),r.postMessage({action:"partialdone",type:"transmuxed"})},t.endTimeline=function(){this.transmuxer.endTimeline(),r.postMessage({action:"endedtimeline",type:"transmuxed"})},t.alignGopsWith=function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}(),cr=new function(e){e.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new ar(e,t.data.options):(this.messageHandlers||(this.messageHandlers=new ar(e)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}(r)}()})),$r=function(e,t){var r=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&r.AUDIO&&e.mediaGroups.AUDIO[r.AUDIO]},Br=function(e,t){var r=t.attributes||{},n=function(e){var t=e.attributes||{};if(t.CODECS)return(0,it.kS)(t.CODECS)}(t)||{};if($r(e,t)&&!n.audio&&!function(e,t){if(!$r(e,t))return!0;var r=t.attributes||{},n=e.mediaGroups.AUDIO[r.AUDIO];for(var i in n)if(!n[i].uri&&!n[i].playlists)return!0;return!1}(e,t)){var i=(0,it.Jg)(e,r.AUDIO);i&&(n.audio=i.audio)}var o={};return n.video&&(o.video=(0,it.ws)(""+n.video.type+n.video.details)),n.audio&&(o.audio=(0,it.ws)(""+n.audio.type+n.audio.details)),o},Vr=function(e){return i().log.debug?i().log.debug.bind(i(),"VHS:",e+" >"):function(){}},qr=Vr("PlaylistSelector"),Hr=function(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},Wr=function(e,t){if(!e)return"";var r=s().getComputedStyle(e);return r?r[t]:""},zr=function(e,t){var r=e.slice();e.sort((function(e,n){var i=t(e,n);return 0===i?r.indexOf(e)-r.indexOf(n):i}))},Gr=function(e,t){var r,n;return e.attributes.BANDWIDTH&&(r=e.attributes.BANDWIDTH),r=r||s().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),r-(n=n||s().Number.MAX_VALUE)},Kr=function(e){var t=e.inbandTextTracks,r=e.metadataArray,n=e.timestampOffset,o=e.videoDuration;if(r){var a=s().WebKitDataCue||s().VTTCue,c=t.metadataTrack_;if(c&&(r.forEach((function(e){var t=e.cueTime+n;!("number"!=typeof t||s().isNaN(t)||t<0)&&t<1/0&&e.frames.forEach((function(e){var r=new a(t,t,e.value||e.url||e.data||"");r.frame=e,r.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return i().log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return i().log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return i().log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(r),c.addCue(r)}))})),c.cues&&c.cues.length)){for(var u=c.cues,l=[],d=0;d<u.length;d++)u[d]&&l.push(u[d]);var h=l.reduce((function(e,t){var r=e[t.startTime]||[];return r.push(t),e[t.startTime]=r,e}),{}),p=Object.keys(h).sort((function(e,t){return Number(e)-Number(t)}));p.forEach((function(e,t){var r=h[e],n=Number(p[t+1])||o;r.forEach((function(e){e.endTime=n}))}))}}},Xr=function(e,t,r){var n,i;if(r&&r.cues)for(n=r.cues.length;n--;)(i=r.cues[n]).startTime>=e&&i.endTime<=t&&r.removeCue(i)},Yr=function(e){return"number"==typeof e&&isFinite(e)},Qr=function(e){return e+"TimingInfo"},Jr=function(e){var t=e.segmentTimeline,r=e.currentTimeline,n=e.startOfSegment,i=e.buffered;return e.overrideCheck||t!==r?i.length?i.end(i.length-1):n:null},Zr=function(e){var t=e.timelineChangeController,r=e.currentTimeline,n=e.segmentTimeline,i=e.loaderType,o=e.audioDisabled;if(r===n)return!1;if("audio"===i){var s=t.lastTimelineChange({type:"main"});return!s||s.to!==n}if("main"===i&&o){var a=t.pendingTimelineChange({type:"audio"});return!a||a.to!==n}return!1},en=function(e){function t(t,r){var n;if(n=e.call(this)||this,!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return n.bandwidth=t.bandwidth,n.throughput={rate:0,count:0},n.roundTrip=NaN,n.resetStats_(),n.mediaIndex=null,n.hasPlayed_=t.hasPlayed,n.currentTime_=t.currentTime,n.seekable_=t.seekable,n.seeking_=t.seeking,n.duration_=t.duration,n.mediaSource_=t.mediaSource,n.vhs_=t.vhs,n.loaderType_=t.loaderType,n.currentMediaInfo_=void 0,n.startingMediaInfo_=void 0,n.segmentMetadataTrack_=t.segmentMetadataTrack,n.goalBufferLength_=t.goalBufferLength,n.sourceType_=t.sourceType,n.sourceUpdater_=t.sourceUpdater,n.inbandTextTracks_=t.inbandTextTracks,n.state_="INIT",n.handlePartialData_=t.handlePartialData,n.timelineChangeController_=t.timelineChangeController,n.shouldSaveSegmentTimingInfo_=!0,n.checkBufferTimeout_=null,n.error_=void 0,n.currentTimeline_=-1,n.pendingSegment_=null,n.xhrOptions_=null,n.pendingSegments_=[],n.audioDisabled_=!1,n.isPendingTimestampOffset_=!1,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=i().browser.IE_VERSION>=11,n.appendInitSegment_={audio:!0,video:!0},n.playlistOfLastInitSegment_={audio:null,video:null},n.callQueue_=[],n.loadQueue_=[],n.metadataQueue_={id3:[],caption:[]},n.activeInitSegmentId_=null,n.initSegments_={},n.cacheEncryptionKeys_=t.cacheEncryptionKeys,n.keyCache_={},n.decrypter_=t.decrypter,n.syncController_=t.syncController,n.syncPoint_={segmentIndex:0,time:0},n.transmuxer_=n.createTransmuxer_(),n.triggerSyncInfoUpdate_=function(){return n.trigger("syncinfoupdate")},n.syncController_.on("syncinfoupdate",n.triggerSyncInfoUpdate_),n.mediaSource_.addEventListener("sourceopen",(function(){n.isEndOfStream_()||(n.ended_=!1)})),n.fetchAtBuffer_=!1,n.logger_=Vr("SegmentLoader["+n.loaderType_+"]"),Object.defineProperty(W(n),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e,this.trigger("statechange"))}}),n.sourceUpdater_.on("ready",(function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()})),"main"===n.loaderType_&&n.timelineChangeController_.on("pendingtimelinechange",(function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()})),"audio"===n.loaderType_&&n.timelineChangeController_.on("timelinechange",(function(){n.hasEnoughInfoToLoad_()&&n.processLoadQueue_(),n.hasEnoughInfoToAppend_()&&n.processCallQueue_()})),n}G(t,e);var r=t.prototype;return r.createTransmuxer_=function(){var e=new Fr;return e.postMessage({action:"init",options:{remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,handlePartialData:this.handlePartialData_}}),e},r.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0},r.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&(this.transmuxer_.terminate(),gr()),this.resetStats_(),this.checkBufferTimeout_&&s().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},r.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},r.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},r.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_)},r.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},r.error=function(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},r.endOfStream=function(){this.ended_=!0,this.transmuxer_&&vr(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},r.buffered_=function(){if(!this.sourceUpdater_||!this.startingMediaInfo_)return i().createTimeRanges();if("main"===this.loaderType_){var e=this.startingMediaInfo_,t=e.hasAudio,r=e.hasVideo,n=e.isMuxed;if(r&&t&&!this.audioDisabled_&&!n)return this.sourceUpdater_.buffered();if(r)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},r.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var r=Gt(e),n=this.initSegments_[r];return t&&!n&&e.bytes&&(this.initSegments_[r]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),n||e},r.segmentKey=function(e,t){if(void 0===t&&(t=!1),!e)return null;var r=Kt(e),n=this.keyCache_[r];this.cacheEncryptionKeys_&&t&&!n&&e.bytes&&(this.keyCache_[r]=n={resolvedUri:e.resolvedUri,bytes:e.bytes});var i={resolvedUri:(n||e).resolvedUri};return n&&(i.bytes=n.bytes),i},r.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},r.load=function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},r.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},r.playlist=function(e,t){if(void 0===t&&(t={}),e){var r=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var i=null;if(r&&(r.id?i=r.id:r.uri&&(i=r.uri)),this.logger_("playlist update ["+i+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!r||r.uri!==e.uri)return(null!==this.mediaIndex||this.handlePartialData_)&&this.resyncLoader(),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var o=e.mediaSequence-r.mediaSequence;this.logger_("live window shift ["+o+"]"),null!==this.mediaIndex&&(this.mediaIndex-=o),n&&(n.mediaIndex-=o,n.mediaIndex>=0&&(n.segment=e.segments[n.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(r,e)}},r.pause=function(){this.checkBufferTimeout_&&(s().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},r.paused=function(){return null===this.checkBufferTimeout_},r.resetEverything=function(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"})},r.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},r.resyncLoader=function(){this.transmuxer_&&vr(this.transmuxer_),this.mediaIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},r.remove=function(e,t,r){if(void 0===r&&(r=function(){}),t===1/0&&(t=this.duration_()),this.sourceUpdater_&&this.currentMediaInfo_){var n=1,i=function(){0===--n&&r()};for(var o in this.audioDisabled_||(n++,this.sourceUpdater_.removeAudio(e,t,i)),"main"===this.loaderType_&&this.currentMediaInfo_&&this.currentMediaInfo_.hasVideo&&(this.gopBuffer_=function(e,t,r,n){for(var i=Math.ceil((t-n)*tt.ONE_SECOND_IN_TS),o=Math.ceil((r-n)*tt.ONE_SECOND_IN_TS),s=e.slice(),a=e.length;a--&&!(e[a].pts<=o););if(-1===a)return s;for(var c=a+1;c--&&!(e[c].pts<=i););return c=Math.max(c,0),s.splice(c,a-c+1),s}(this.gopBuffer_,e,t,this.timeMapping_),n++,this.sourceUpdater_.removeVideo(e,t,i)),this.inbandTextTracks_)Xr(e,t,this.inbandTextTracks_[o]);Xr(e,t,this.segmentMetadataTrack_),i()}},r.monitorBuffer_=function(){this.checkBufferTimeout_&&s().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=s().setTimeout(this.monitorBufferTick_.bind(this),1)},r.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&s().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=s().setTimeout(this.monitorBufferTick_.bind(this),500)},r.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.buffered_(),t=this.checkBuffer_(e,this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);t&&(t.timestampOffset=Jr({segmentTimeline:t.timeline,currentTimeline:this.currentTimeline_,startOfSegment:t.startOfSegment,buffered:e,overrideCheck:this.isPendingTimestampOffset_}),this.isPendingTimestampOffset_=!1,"number"==typeof t.timestampOffset&&this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),this.loadSegment_(t))}},r.isEndOfStream_=function(e,t){if(void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),!t||!this.mediaSource_)return!1;var r=e+1===t.segments.length;return t.endList&&"open"===this.mediaSource_.readyState&&r},r.checkBuffer_=function(e,t,r,n,i,o){var s=0;e.length&&(s=e.end(e.length-1));var a=Math.max(0,s-i);if(!t.segments.length)return null;if(a>=this.goalBufferLength_())return null;if(!n&&a>=1)return null;var c,u=null,l=!1;if(null===o)u=this.getSyncSegmentCandidate_(t),l=!0;else if(null!==r){var d=t.segments[r];c=d&&d.end?d.end:s,u=r+1}else if(this.fetchAtBuffer_){var h=jt.getMediaInfoForTime(t,s,o.segmentIndex,o.time);u=h.mediaIndex,c=h.startTime}else{var p=jt.getMediaInfoForTime(t,i,o.segmentIndex,o.time);u=p.mediaIndex,c=p.startTime}var f=this.generateSegmentInfo_(t,u,c,l);return!f||this.mediaSource_&&this.playlist_&&f.mediaIndex===this.playlist_.segments.length-1&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?void 0:(this.logger_("checkBuffer_ returning "+f.uri,{segmentInfo:f,playlist:t,currentMediaIndex:r,nextMediaIndex:u,startOfSegment:c,isSyncRequest:l}),f)},r.getSyncSegmentCandidate_=function(e){var t=this;if(-1===this.currentTimeline_)return 0;var r=e.segments.map((function(e,t){return{timeline:e.timeline,segmentIndex:t}})).filter((function(e){return e.timeline===t.currentTimeline_}));return r.length?r[Math.min(r.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)},r.generateSegmentInfo_=function(e,t,r,n){if(t<0||t>=e.segments.length)return null;var i,o,s=e.segments[t],a=this.sourceUpdater_.audioBuffered(),c=this.sourceUpdater_.videoBuffered();return a.length&&(i=a.end(a.length-1)-this.sourceUpdater_.audioTimestampOffset()),c.length&&(o=function(e,t,r){if(null==t||!e.length)return[];var n,i=Math.ceil((t-r+3)*tt.ONE_SECOND_IN_TS);for(n=0;n<e.length&&!(e[n].pts>i);n++);return e.slice(n)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),{requestId:"segment-loader-"+Math.random(),uri:s.resolvedUri,mediaIndex:t,isSyncRequest:n,startOfSegment:r,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:s.timeline,duration:s.duration,segment:s,byteLength:0,transmuxer:this.transmuxer_,audioAppendStart:i,gopsToAlignWith:o}},r.abortRequestEarly_=function(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),r=e.bandwidth,n=this.pendingSegment_.duration,i=jt.estimateSegmentRequestTime(n,r,this.playlist_,e.bytesReceived),o=function(e,t,r){return void 0===r&&(r=1),((e.length?e.end(e.length-1):0)-t)/r}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(i<=o)return!1;var s=function(e){var t=e.master,r=e.currentTime,n=e.bandwidth,i=e.duration,o=e.segmentDuration,s=e.timeUntilRebuffer,a=e.currentTimeline,c=e.syncController,u=t.playlists.filter((function(e){return!jt.isIncompatible(e)})),l=u.filter(jt.isEnabled);l.length||(l=u.filter((function(e){return!jt.isDisabled(e)})));var d=l.filter(jt.hasAttribute.bind(null,"BANDWIDTH")).map((function(e){var t=c.getSyncPoint(e,i,a,r)?1:2;return{playlist:e,rebufferingImpact:jt.estimateSegmentRequestTime(o,n,e)*t-s}})),h=d.filter((function(e){return e.rebufferingImpact<=0}));return zr(h,(function(e,t){return Gr(t.playlist,e.playlist)})),h.length?h[0]:(zr(d,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact})),d[0]||null)}({master:this.vhs_.playlists.master,currentTime:t,bandwidth:r,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:o,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var a=i-o-s.rebufferingImpact,c=.5;return o<=bt&&(c=1),!s.playlist||s.playlist.uri===this.playlist_.uri||a<c?!1:(this.bandwidth=s.playlist.attributes.BANDWIDTH*cr.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}},r.handleAbort_=function(){this.mediaRequestsAborted+=1},r.handleProgress_=function(e,t){this.checkForAbort_(t.requestId)||this.abortRequestEarly_(t.stats)||this.trigger("progress")},r.handleTrackInfo_=function(e,t){this.checkForAbort_(e.requestId)||this.abortRequestEarly_(e.stats)||this.checkForIllegalMediaSwitch(t)||(t=t||{},function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var r=Object.keys(e).sort(),n=Object.keys(t).sort();if(r.length!==n.length)return!1;for(var i=0;i<r.length;i++){var o=r[i];if(o!==n[i])return!1;if(e[o]!==t[o])return!1}return!0}(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||this.abortRequestEarly_(e.stats)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},r.handleTimingInfo_=function(e,t,r,n){if(!this.checkForAbort_(e.requestId)&&!this.abortRequestEarly_(e.stats)){var i=this.pendingSegment_,o=Qr(t);i[o]=i[o]||{},i[o][r]=n,this.logger_("timinginfo: "+t+" - "+r+" - "+n),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},r.handleCaptions_=function(e,t){var r=this;if(!this.checkForAbort_(e.requestId)&&!this.abortRequestEarly_(e.stats))if(0!==t.length)if(this.pendingSegment_.hasAppendedData_){var n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),i={};t.forEach((function(e){i[e.stream]=i[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=i[e.stream];t.startTime=Math.min(t.startTime,e.startTime+n),t.endTime=Math.max(t.endTime,e.endTime+n),t.captions.push(e)})),Object.keys(i).forEach((function(e){var t=i[e],o=t.startTime,a=t.endTime,c=t.captions,u=r.inbandTextTracks_;r.logger_("adding cues from "+o+" -> "+a+" for "+e),function(e,t,r){if(!e[r]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var n=t.textTracks().getTrackById(r);e[r]=n||t.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track}}(u,r.vhs_.tech_,e),Xr(o,a,u[e]),function(e){var t=e.inbandTextTracks,r=e.captionArray,n=e.timestampOffset;if(r){var i=s().WebKitDataCue||s().VTTCue;r.forEach((function(e){var r=e.stream;t[r].addCue(new i(e.startTime+n,e.endTime+n,e.text))}))}}({captionArray:c,inbandTextTracks:u,timestampOffset:n})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));else this.logger_("SegmentLoader received no captions from a caption event")},r.handleId3_=function(e,t,r){if(!this.checkForAbort_(e.requestId)&&!this.abortRequestEarly_(e.stats))if(this.pendingSegment_.hasAppendedData_){var n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(e,t,r){e.metadataTrack_||(e.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)}(this.inbandTextTracks_,r,this.vhs_.tech_),Kr({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:n,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,r))},r.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach((function(e){return e()})),this.metadataQueue_.caption.forEach((function(e){return e()})),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},r.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach((function(e){return e()}))},r.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach((function(e){return e()}))},r.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!!e&&(!this.currentMediaInfo_||!Zr({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},r.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;var e=this.pendingSegment_;if(!e||!e.trackInfo)return!1;if(!this.handlePartialData_){var t=this.currentMediaInfo_,r=t.hasAudio,n=t.hasVideo,i=t.isMuxed;if(n&&!e.videoTimingInfo)return!1;if(r&&!this.audioDisabled_&&!i&&!e.audioTimingInfo)return!1}return!Zr({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})},r.handleData_=function(e,t){if(!this.checkForAbort_(e.requestId)&&!this.abortRequestEarly_(e.stats))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var r=this.pendingSegment_;if(this.setTimeMapping_(r.timeline),this.updateMediaSecondsLoaded_(r.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),r.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),r.isFmp4=e.isFmp4,r.timingInfo=r.timingInfo||{},r.isFmp4)this.trigger("fmp4"),r.timingInfo.start=r[Qr(t.type)].start;else{var n,i="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo;i&&(n=this.handlePartialData_?t.videoFramePtsTime:r.videoTimingInfo.start),r.timingInfo.start=this.trueSegmentStart_({currentStart:r.timingInfo.start,playlist:r.playlist,mediaIndex:r.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:i,firstVideoFrameTimeForData:n,videoTimingInfo:r.videoTimingInfo,audioTimingInfo:r.audioTimingInfo})}this.updateAppendInitSegmentStatus(r,t.type),this.updateSourceBufferTimestampOffset_(r),r.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(r,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))},r.updateAppendInitSegmentStatus=function(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},r.getInitSegmentAndUpdateState_=function(e){var t=e.type,r=e.initSegment,n=e.map,i=e.playlist;if(n){var o=Gt(n);if(this.activeInitSegmentId_===o)return null;r=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=o}return r&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=i,this.appendInitSegment_[t]=!!n,this.activeInitSegmentId_=null,r):null},r.appendToSourceBuffer_=function(e){var t=this,r=e.segmentInfo,n=e.type,i=e.initSegment,o=e.data,s=[o],a=o.byteLength;i&&(s.unshift(i),a+=i.byteLength);var c,u,l,d=(l=0,(c={bytes:a,segments:s}).bytes&&(u=new Uint8Array(c.bytes),c.segments.forEach((function(e){u.set(e,l),l+=e.byteLength}))),u);this.sourceUpdater_.appendBuffer({segmentInfo:r,type:n,bytes:d},(function(e){e&&(t.error(n+" append of "+d.length+"b failed for segment #"+r.mediaIndex+" in playlist "+r.playlist.id),t.trigger("appenderror"))}))},r.handleVideoSegmentTimingInfo_=function(e,t){if(this.pendingSegment_&&e===this.pendingSegment_.requestId){var r=this.pendingSegment_.segment;r.videoTimingInfo||(r.videoTimingInfo={}),r.videoTimingInfo.transmuxerPrependedSeconds=t.prependedContentDuration||0,r.videoTimingInfo.transmuxedPresentationStart=t.start.presentation,r.videoTimingInfo.transmuxedPresentationEnd=t.end.presentation,r.videoTimingInfo.baseMediaDecodeTime=t.baseMediaDecodeTime}},r.appendData_=function(e,t){var r=t.type,n=t.data;if(n&&n.byteLength&&("audio"!==r||!this.audioDisabled_)){var i=this.getInitSegmentAndUpdateState_({type:r,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:r,initSegment:i,data:n})}},r.loadSegment_=function(e){var t=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push((function(){var r=t.buffered_();"number"==typeof e.timestampOffset&&(e.timestampOffset=Jr({segmentTimeline:e.timeline,currentTimeline:t.currentTimeline_,startOfSegment:e.startOfSegment,buffered:r,overrideCheck:!0})),delete e.audioAppendStart;var n=t.sourceUpdater_.audioBuffered();n.length&&(e.audioAppendStart=n.end(n.length-1)-t.sourceUpdater_.audioTimestampOffset()),t.updateTransmuxerAndRequestSegment_(e)}))},r.updateTransmuxerAndRequestSegment_=function(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var t=this.createSimplifiedSegmentObj_(e);e.abortRequests=xr({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,handlePartialData:this.handlePartialData_,abortFn:this.handleAbort_.bind(this),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleVideoSegmentTimingInfo_.bind(this,e.requestId),captionsFn:this.handleCaptions_.bind(this),id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this)})},r.trimBackBuffer_=function(e){var t=function(e,t,r){var n=t-cr.BACK_BUFFER_LENGTH;e.length&&(n=Math.max(n,e.start(0)));var i=t-r;return Math.min(i,n)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)},r.createSimplifiedSegmentObj_=function(e){var t=e.segment,r={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith},n=e.playlist.segments[e.mediaIndex];if(n&&n.end&&n.timeline===t.timeline&&(r.baseStartTime=n.end+e.timestampOffset),t.key){var i=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);r.key=this.segmentKey(t.key),r.key.iv=i}return t.map&&(r.map=this.initSegmentForMap(t.map)),r},r.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},r.saveBandwidthRelatedStats_=function(e){this.bandwidth=e.bandwidth,this.roundTrip=e.roundTripTime,this.pendingSegment_.byteLength=e.bytesReceived},r.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},r.segmentRequestFinished_=function(e,t,r){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,r));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===Tr)return;return this.pause(),e.code===_r?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}this.saveBandwidthRelatedStats_(t.stats);var n=this.pendingSegment_;n.endOfAllRequests=t.endOfAllRequests,r.gopInfo&&(this.gopBuffer_=function(e,t,r){if(!t.length)return e;if(r)return t.slice();for(var n=t[0].pts,i=0;i<e.length&&!(e[i].pts>=n);i++);return e.slice(0,i).concat(t)}(this.gopBuffer_,r.gopInfo,this.safeAppend_)),this.state="APPENDING";var i=this.isEndOfStream_(n.mediaIndex,n.playlist),o=null!==this.mediaIndex,s=n.timeline!==this.currentTimeline_&&n.timeline>0;!n.isFmp4&&(i||o&&s)&&yr(this.transmuxer_),this.trigger("appending"),this.waitForAppendsToComplete_(n)}},r.setTimeMapping_=function(e){var t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)},r.updateMediaSecondsLoaded_=function(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},r.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},r.trueSegmentStart_=function(e){var t=e.currentStart,r=e.playlist,n=e.mediaIndex,i=e.firstVideoFrameTimeForData,o=e.currentVideoTimestampOffset,s=e.useVideoTimingInfo,a=e.videoTimingInfo,c=e.audioTimingInfo;if(void 0!==t)return t;if(!s)return c.start;var u=r.segments[n-1];return 0!==n&&u&&void 0!==u.start&&u.end===i+o?a.start:i},r.waitForAppendsToComplete_=function(e){if(!this.currentMediaInfo_)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var t=this.currentMediaInfo_,r=t.hasAudio,n=t.hasVideo,i=t.isMuxed,o="main"===this.loaderType_&&n,s=!this.audioDisabled_&&r&&!i;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);o&&e.waitingOnAppends++,s&&e.waitingOnAppends++,o&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),s&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},r.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},r.checkForIllegalMediaSwitch=function(e){var t=function(e,t,r){return"main"===e&&t&&r?r.hasAudio||r.hasVideo?t.hasVideo&&!r.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&r.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.currentMediaInfo_,e);return!!t&&(this.error({message:t,blacklistDuration:1/0}),this.trigger("error"),!0)},r.updateSourceBufferTimestampOffset_=function(e){if(null!==e.timestampOffset&&"number"==typeof e.timingInfo.start&&!e.changedTimestampOffset&&"main"===this.loaderType_){var t=!1;e.timestampOffset-=e.timingInfo.start,e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}},r.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;t&&(e.timingInfo.end="number"==typeof t.end?t.end:t.start+e.duration)},r.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;if(this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_}),this.logger_(function(e){var t=e.segment,r=t.start,n=t.end,i=e.playlist,o=i.mediaSequence,s=i.id,a=i.segments,c=void 0===a?[]:a,u=e.mediaIndex,l=e.timeline;return["appending ["+u+"] of ["+o+", "+(o+c.length)+"] from playlist ["+s+"]","["+r+" => "+n+"] in timeline ["+l+"]"].join(" ")}(e)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest)this.trigger("syncinfoupdate");else{this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var t=e.segment;if(t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration)this.resetEverything();else null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.isEndOfStream_(e.mediaIndex,e.playlist)&&this.endOfStream(),this.trigger("appended"),this.paused()||this.monitorBuffer_()}},r.recordThroughput_=function(e){var t=this.throughput.rate,r=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/r*8*1e3);this.throughput.rate+=(n-t)/++this.throughput.count},r.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var t=e.segment,r=t.start,n=t.end;if(Yr(r)&&Yr(n)){Xr(r,n,this.segmentMetadataTrack_);var i=s().WebKitDataCue||s().VTTCue,o={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:r,end:n},a=new i(r,n,JSON.stringify(o));a.value=o,this.segmentMetadataTrack_.addCue(a)}}},t}(i().EventTarget);function tn(){}var rn,nn=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))},on=["video","audio"],sn=function(e,t){var r=t[e+"Buffer"];return r&&r.updating||t.queuePending[e]},an=function e(t,r){if(0!==r.queue.length){var n=0,i=r.queue[n];if("mediaSource"!==i.type){if("mediaSource"!==t&&r.started_&&"closed"!==r.mediaSource.readyState&&!sn(t,r)){if(i.type!==t){if(n=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];if("mediaSource"===n.type)return null;if(n.type===e)return r}return null}(t,r.queue),null===n)return;i=r.queue[n]}r.queue.splice(n,1),i.action(t,r),i.doneFn?r.queuePending[t]=i:e(t,r)}}else r.updating()||"closed"===r.mediaSource.readyState||(r.queue.shift(),i.action(r),i.doneFn&&i.doneFn(),e("audio",r),e("video",r))}},cn=function(e,t){var r=t[e+"Buffer"],n=nn(e);r&&(r.removeEventListener("updateend",t["on"+n+"UpdateEnd_"]),r.removeEventListener("error",t["on"+n+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},un=function(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)},ln=function(e,t){return function(r,n){var i=n[r+"Buffer"];un(n.mediaSource,i)&&(n.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+r+"Buffer"),i.appendBuffer(e))}},dn=function(e,t){return function(r,n){var i=n[r+"Buffer"];un(n.mediaSource,i)&&(n.logger_("Removing "+e+" to "+t+" from "+r+"Buffer"),i.remove(e,t))}},hn=function(e){return function(t,r){var n=r[t+"Buffer"];un(r.mediaSource,n)&&(r.logger_("Setting "+t+"timestampOffset to "+e),n.timestampOffset=e)}},pn=function(e){return function(t,r){e()}},fn=function(e){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(e){i().log.warn("Failed to call media source endOfStream",e)}}}},mn=function(e){return function(t){t.logger_("Setting mediaSource duration to "+e);try{t.mediaSource.duration=e}catch(e){i().log.warn("Failed to set media source duration",e)}}},vn=function(){return function(e,t){if("open"===t.mediaSource.readyState){var r=t[e+"Buffer"];if(un(t.mediaSource,r)){t.logger_("calling abort on "+e+"Buffer");try{r.abort()}catch(t){i().log.warn("Failed to abort on "+e+"Buffer",t)}}}}},gn=function(e,t){return function(r){var n=nn(e),i=(0,it._5)(t);r.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var o=r.mediaSource.addSourceBuffer(i);o.addEventListener("updateend",r["on"+n+"UpdateEnd_"]),o.addEventListener("error",r["on"+n+"Error_"]),r.codecs[e]=t,r[e+"Buffer"]=o}},yn=function(e){return function(t){var r=t[e+"Buffer"];if(cn(e,t),un(t.mediaSource,r)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(r)}catch(t){i().log.warn("Failed to removeSourceBuffer "+e+"Buffer",t)}}}},bn=function(e){return function(t,r){var n=r[t+"Buffer"],i=(0,it._5)(e);un(r.mediaSource,n)&&r.codecs[t]!==e&&(r.logger_("changing "+t+"Buffer codec from "+r.codecs[t]+" to "+e),n.changeType(i),r.codecs[t]=e)}},_n=function(e){var t=e.type,r=e.sourceUpdater,n=e.action,i=e.doneFn,o=e.name;r.queue.push({type:t,action:n,doneFn:i,name:o}),an(t,r)},Tn=function(e,t){return function(r){if(t.queuePending[e]){var n=t.queuePending[e].doneFn;t.queuePending[e]=null,n&&n(t[e+"Error_"])}an(e,t)}},wn=function(e){function t(t){var r;return(r=e.call(this)||this).mediaSource=t,r.sourceopenListener_=function(){return an("mediaSource",W(r))},r.mediaSource.addEventListener("sourceopen",r.sourceopenListener_),r.logger_=Vr("SourceUpdater"),r.audioTimestampOffset_=0,r.videoTimestampOffset_=0,r.queue=[],r.queuePending={audio:null,video:null},r.delayedAudioAppendQueue_=[],r.videoAppendQueued_=!1,r.codecs={},r.onVideoUpdateEnd_=Tn("video",W(r)),r.onAudioUpdateEnd_=Tn("audio",W(r)),r.onVideoError_=function(e){r.videoError_=e},r.onAudioError_=function(e){r.audioError_=e},r.started_=!1,r}G(t,e);var r=t.prototype;return r.ready=function(){return this.started_},r.createSourceBuffers=function(e){this.ready()||(this.addOrChangeSourceBuffers(e),this.started_=!0,this.trigger("ready"))},r.addSourceBuffer=function(e,t){_n({type:"mediaSource",sourceUpdater:this,action:gn(e,t),name:"addSourceBuffer"})},r.abort=function(e){_n({type:e,sourceUpdater:this,action:vn(e),name:"abort"})},r.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?_n({type:"mediaSource",sourceUpdater:this,action:yn(e),name:"removeSourceBuffer"}):i().log.error("removeSourceBuffer is not supported!")},r.canRemoveSourceBuffer=function(){return!i().browser.IE_VERSION&&s().MediaSource&&s().MediaSource.prototype&&"function"==typeof s().MediaSource.prototype.removeSourceBuffer},t.canChangeType=function(){return s().SourceBuffer&&s().SourceBuffer.prototype&&"function"==typeof s().SourceBuffer.prototype.changeType},r.canChangeType=function(){return this.constructor.canChangeType()},r.changeType=function(e,t){this.canChangeType()?_n({type:e,sourceUpdater:this,action:bn(t),name:"changeType"}):i().log.error("changeType is not supported!")},r.addOrChangeSourceBuffers=function(e){var t=this;if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach((function(r){var n=e[r];if(!t.ready())return t.addSourceBuffer(r,n);t.canChangeType()&&t.changeType(r,n)}))},r.appendBuffer=function(e,t){var r=this,n=e.segmentInfo,i=e.type,o=e.bytes;if(this.processedAppend_=!0,"audio"===i&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of "+o.length+" until video append");if(_n({type:i,sourceUpdater:this,action:ln(o,n||{mediaIndex:-1}),doneFn:t,name:"appendBuffer"}),"video"===i){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var s=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+s.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,s.forEach((function(e){r.appendBuffer.apply(r,e)}))}},r.audioBuffered=function(){return un(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:i().createTimeRange()},r.videoBuffered=function(){return un(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:i().createTimeRange()},r.buffered=function(){var e=un(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=un(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){var r=null,n=null,o=0,s=[],a=[];if(!(e&&e.length&&t&&t.length))return i().createTimeRange();for(var c=e.length;c--;)s.push({time:e.start(c),type:"start"}),s.push({time:e.end(c),type:"end"});for(c=t.length;c--;)s.push({time:t.start(c),type:"start"}),s.push({time:t.end(c),type:"end"});for(s.sort((function(e,t){return e.time-t.time})),c=0;c<s.length;c++)"start"===s[c].type?2==++o&&(r=s[c].time):"end"===s[c].type&&1==--o&&(n=s[c].time),null!==r&&null!==n&&(a.push([r,n]),r=null,n=null);return i().createTimeRanges(a)}(this.audioBuffered(),this.videoBuffered())},r.setDuration=function(e,t){void 0===t&&(t=tn),_n({type:"mediaSource",sourceUpdater:this,action:mn(e),name:"duration",doneFn:t})},r.endOfStream=function(e,t){void 0===e&&(e=null),void 0===t&&(t=tn),"string"!=typeof e&&(e=void 0),_n({type:"mediaSource",sourceUpdater:this,action:fn(e),name:"endOfStream",doneFn:t})},r.removeAudio=function(e,t,r){void 0===r&&(r=tn),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?_n({type:"audio",sourceUpdater:this,action:dn(e,t),doneFn:r,name:"remove"}):r()},r.removeVideo=function(e,t,r){void 0===r&&(r=tn),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?_n({type:"video",sourceUpdater:this,action:dn(e,t),doneFn:r,name:"remove"}):r()},r.updating=function(){return!(!sn("audio",this)&&!sn("video",this))},r.audioTimestampOffset=function(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(_n({type:"audio",sourceUpdater:this,action:hn(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},r.videoTimestampOffset=function(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(_n({type:"video",sourceUpdater:this,action:hn(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},r.audioQueueCallback=function(e){this.audioBuffer&&_n({type:"audio",sourceUpdater:this,action:pn(e),name:"callback"})},r.videoQueueCallback=function(e){this.videoBuffer&&_n({type:"video",sourceUpdater:this,action:pn(e),name:"callback"})},r.dispose=function(){var e=this;this.trigger("dispose"),on.forEach((function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+"QueueCallback"]((function(){return cn(t,e)}))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(i().EventTarget),Sn=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},Cn=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)}))),En=function(e){function t(t,r){var n;return void 0===r&&(r={}),(n=e.call(this,t,r)||this).handlePartialData_=!1,n.mediaSource_=null,n.subtitlesTrack_=null,n.loaderType_="subtitle",n.featuresNativeTextTracks_=t.featuresNativeTextTracks,n.shouldSaveSegmentTimingInfo_=!1,n}G(t,e);var r=t.prototype;return r.createTransmuxer_=function(){return null},r.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return i().createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,r=e[e.length-1].startTime;return i().createTimeRanges([[t,r]])},r.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var r=Gt(e),n=this.initSegments_[r];if(t&&!n&&e.bytes){var i=Cn.byteLength+e.bytes.byteLength,o=new Uint8Array(i);o.set(e.bytes),o.set(Cn,e.bytes.byteLength),this.initSegments_[r]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:o}}return n||e},r.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},r.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},r.track=function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},r.remove=function(e,t){Xr(e,t,this.subtitlesTrack_)},r.fillBuffer_=function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline)){return this.syncController_.one("timestampoffset",(function(){e.state="READY",e.paused()||e.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(t)}},r.skipEmptySegments_=function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e},r.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},r.segmentRequestFinished_=function(e,t,r){var n=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===_r&&this.handleTimeout_(),e.code===Tr?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);this.saveBandwidthRelatedStats_(t.stats),this.state="APPENDING",this.trigger("appending");var i=this.pendingSegment_,o=i.segment;if(o.map&&(o.map.bytes=t.map.bytes),i.bytes=t.bytes,"function"!=typeof s().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var a,c=function(){n.subtitlesTrack_.tech_.off("vttjsloaded",a),n.stopForError({message:"Error loading vtt.js"})};return a=function(){n.subtitlesTrack_.tech_.off("vttjserror",c),n.segmentRequestFinished_(e,t,r)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",a),void this.subtitlesTrack_.tech_.one("vttjserror",c)}o.requested=!0;try{this.parseVTTCues_(i)}catch(e){return void this.stopForError({message:e.message})}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.cues.length?i.timingInfo={start:i.cues[0].startTime,end:i.cues[i.cues.length-1].endTime}:i.timingInfo={start:i.startOfSegment,end:i.startOfSegment+i.duration},i.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=o.duration,i.cues.forEach((function(e){n.remove(e.startTime,e.endTime),n.subtitlesTrack_.addCue(n.featuresNativeTextTracks_?new(s().VTTCue)(e.startTime,e.endTime,e.text):e)})),this.handleAppendsDone_()}else this.state="READY"},r.handleData_=function(){},r.updateTimingInfoEnd_=function(){},r.parseVTTCues_=function(e){var t,r=!1;"function"==typeof s().TextDecoder?t=new(s().TextDecoder)("utf8"):(t=s().WebVTT.StringDecoder(),r=!0);var n=new(s().WebVTT.Parser)(s(),s().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=function(t){e.timestampmap=t},n.onparsingerror=function(e){i().log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var o=e.segment.map.bytes;r&&(o=Sn(o)),n.parse(o)}var a=e.bytes;r&&(a=Sn(a)),n.parse(a),n.flush()},r.updateTimeMapping_=function(e,t,r){var n=e.segment;if(t)if(e.cues.length){var i=e.timestampmap,o=i.MPEGTS/tt.ONE_SECOND_IN_TS-i.LOCAL+t.mapping;if(e.cues.forEach((function(e){e.startTime+=o,e.endTime+=o})),!r.syncInfo){var s=e.cues[0].startTime,a=e.cues[e.cues.length-1].startTime;r.syncInfo={mediaSequence:r.mediaSequence+e.mediaIndex,time:Math.min(s,a-n.duration)}}}else n.empty=!0},t}(en),On=function(e,t){for(var r=e.cues,n=0;n<r.length;n++){var i=r[n];if(t>=i.adStartTime&&t<=i.adEndTime)return i}return null},kn=[{name:"VOD",run:function(e,t,r,n,i){if(r!==1/0){return{time:0,segmentIndex:0}}return null}},{name:"ProgramDateTime",run:function(e,t,r,n,i){if(!e.datetimeToDisplayTime)return null;var o=t.segments||[],s=null,a=null;i=i||0;for(var c=0;c<o.length;c++){var u=o[c];if(u.dateTimeObject){var l=u.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,d=Math.abs(i-l);if(null!==a&&(0===d||a<d))break;a=d,s={time:l,segmentIndex:c}}}return s}},{name:"Segment",run:function(e,t,r,n,i){var o=t.segments||[],s=null,a=null;i=i||0;for(var c=0;c<o.length;c++){var u=o[c];if(u.timeline===n&&void 0!==u.start){var l=Math.abs(i-u.start);if(null!==a&&a<l)break;(!s||null===a||a>=l)&&(a=l,s={time:u.start,segmentIndex:c})}}return s}},{name:"Discontinuity",run:function(e,t,r,n,i){var o=null;if(i=i||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,a=0;a<t.discontinuityStarts.length;a++){var c=t.discontinuityStarts[a],u=t.discontinuitySequence+a+1,l=e.discontinuities[u];if(l){var d=Math.abs(i-l.time);if(null!==s&&s<d)break;(!o||null===s||s>=d)&&(s=d,o={time:l.time,segmentIndex:c})}}return o}},{name:"Playlist",run:function(e,t,r,n,i){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],xn=function(e){function t(t){var r;return(r=e.call(this)||this).timelines=[],r.discontinuities=[],r.datetimeToDisplayTime=null,r.logger_=Vr("SyncController"),r}G(t,e);var r=t.prototype;return r.getSyncPoint=function(e,t,r,n){var i=this.runStrategies_(e,t,r,n);return i.length?this.selectSyncPoint_(i,{key:"time",value:n}):null},r.getExpiredTime=function(e,t){if(!e||!e.segments)return null;var r=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!r.length)return null;var n=this.selectSyncPoint_(r,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+At(e,n.segmentIndex,0))},r.runStrategies_=function(e,t,r,n){for(var i=[],o=0;o<kn.length;o++){var s=kn[o],a=s.run(this,e,t,r,n);a&&(a.strategy=s.name,i.push({strategy:s.name,syncPoint:a}))}return i},r.selectSyncPoint_=function(e,t){for(var r=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),i=e[0].strategy,o=1;o<e.length;o++){var s=Math.abs(e[o].syncPoint[t.key]-t.value);s<n&&(n=s,r=e[o].syncPoint,i=e[o].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+i+"]: [time:"+r.time+", segmentIndex:"+r.segmentIndex+"]"),r},r.saveExpiredSegmentInfo=function(e,t){for(var r=t.mediaSequence-e.mediaSequence-1;r>=0;r--){var n=e.segments[r];if(n&&void 0!==n.start){t.syncInfo={mediaSequence:e.mediaSequence+r,time:n.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},r.setDateTimeMapping=function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}},r.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,r=e.shouldSaveTimelineMapping;this.calculateSegmentTimeMapping_(t,t.timingInfo,r)&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:t.segment.start}))},r.timestampOffsetForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].time},r.mappingForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping},r.calculateSegmentTimeMapping_=function(e,t,r){var n=e.segment,i=this.timelines[e.timeline];if(null!==e.timestampOffset)i={time:e.startOfSegment,mapping:e.startOfSegment-t.start},r&&(this.timelines[e.timeline]=i,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+i.time+"] [mapping: "+i.mapping+"]")),n.start=e.startOfSegment,n.end=t.end+i.mapping;else{if(!i)return!1;n.start=t.start+i.mapping,n.end=t.end+i.mapping}return!0},r.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,r=e.segment;if(r.discontinuity)this.discontinuities[r.timeline]={time:r.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var n=0;n<t.discontinuityStarts.length;n++){var i=t.discontinuityStarts[n],o=t.discontinuitySequence+n+1,s=i-e.mediaIndex,a=Math.abs(s);if(!this.discontinuities[o]||this.discontinuities[o].accuracy>a){var c=void 0;c=s<0?r.start-At(t,e.mediaIndex,i):r.end+At(t,e.mediaIndex+1,i),this.discontinuities[o]={time:c,accuracy:a}}}},r.dispose=function(){this.trigger("dispose"),this.off()},t}(i().EventTarget),An=function(e){function t(){var t;return(t=e.call(this)||this).pendingTimelineChanges_={},t.lastTimelineChanges_={},t}G(t,e);var r=t.prototype;return r.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},r.pendingTimelineChange=function(e){var t=e.type,r=e.from,n=e.to;return"number"==typeof r&&"number"==typeof n&&(this.pendingTimelineChanges_[t]={type:t,from:r,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},r.lastTimelineChange=function(e){var t=e.type,r=e.from,n=e.to;return"number"==typeof r&&"number"==typeof n&&(this.lastTimelineChanges_[t]={type:t,from:r,to:n},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},r.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(i().EventTarget),Pn=new Dr("./decrypter-worker.worker.js",(function(e,t){var r=this;
/*! @name @videojs/http-streaming @version 2.2.4 @license Apache-2.0 */!function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t=function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t};var n=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t},i=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var r=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(r,1),r>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var r=t.length,n=0;n<r;++n)t[n].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),o=t.length,s=0;s<o;++s)t[s].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),o=i;
/*! @name @videojs/vhs-utils @version 2.2.1 @license MIT */
/*! @name aes-decrypter @version 3.1.0 @license Apache-2.0 */
var s=null,a=function(){function e(e){var t,r,n;s||(s=function(){var e,t,r,n,i,o,s,a,c=[[[],[],[],[],[]],[[],[],[],[],[]]],u=c[0],l=c[1],d=u[4],h=l[4],p=[],f=[];for(e=0;e<256;e++)f[(p[e]=e<<1^283*(e>>7))^e]=e;for(t=r=0;!d[t];t^=n||1,r=f[r]||1)for(o=(o=r^r<<1^r<<2^r<<3^r<<4)>>8^255&o^99,d[t]=o,h[o]=t,a=16843009*p[i=p[n=p[t]]]^65537*i^257*n^16843008*t,s=257*p[o]^16843008*o,e=0;e<4;e++)u[e][t]=s=s<<24^s>>>8,l[e][o]=a=a<<24^a>>>8;for(e=0;e<5;e++)u[e]=u[e].slice(0),l[e]=l[e].slice(0);return c}()),this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];var i=this._tables[0][4],o=this._tables[1],a=e.length,c=1;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size");var u=e.slice(0),l=[];for(this._key=[u,l],t=a;t<4*a+28;t++)n=u[t-1],(t%a==0||8===a&&t%a==4)&&(n=i[n>>>24]<<24^i[n>>16&255]<<16^i[n>>8&255]<<8^i[255&n],t%a==0&&(n=n<<8^n>>>24^c<<24,c=c<<1^283*(c>>7))),u[t]=u[t-a]^n;for(r=0;t;r++,t--)n=u[3&r?t:t-4],l[r]=t<=4||r<4?n:o[0][i[n>>>24]]^o[1][i[n>>16&255]]^o[2][i[n>>8&255]]^o[3][i[255&n]]}return e.prototype.decrypt=function(e,t,r,n,i,o){var s,a,c,u,l=this._key[1],d=e^l[0],h=n^l[1],p=r^l[2],f=t^l[3],m=l.length/4-2,v=4,g=this._tables[1],y=g[0],b=g[1],_=g[2],T=g[3],w=g[4];for(u=0;u<m;u++)s=y[d>>>24]^b[h>>16&255]^_[p>>8&255]^T[255&f]^l[v],a=y[h>>>24]^b[p>>16&255]^_[f>>8&255]^T[255&d]^l[v+1],c=y[p>>>24]^b[f>>16&255]^_[d>>8&255]^T[255&h]^l[v+2],f=y[f>>>24]^b[d>>16&255]^_[h>>8&255]^T[255&p]^l[v+3],v+=4,d=s,h=a,p=c;for(u=0;u<4;u++)i[(3&-u)+o]=w[d>>>24]<<24^w[h>>16&255]<<16^w[p>>8&255]<<8^w[255&f]^l[v++],s=d,d=h,h=p,p=f,f=s},e}(),c=function(e){function t(){var t;return(t=e.call(this,o)||this).jobs=[],t.delay=1,t.timeout_=null,t}n(t,e);var r=t.prototype;return r.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},r.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(o),u=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},l=function(){function e(t,r,n,i){var o=e.STEP,s=new Int32Array(t.buffer),a=new Uint8Array(t.byteLength),l=0;for(this.asyncStream_=new c,this.asyncStream_.push(this.decryptChunk_(s.subarray(l,l+o),r,n,a)),l=o;l<s.length;l+=o)n=new Uint32Array([u(s[l-4]),u(s[l-3]),u(s[l-2]),u(s[l-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(l,l+o),r,n,a));this.asyncStream_.push((function(){
/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */
var e;i(null,(e=a).subarray(0,e.byteLength-e[e.byteLength-1]))}))}return e.prototype.decryptChunk_=function(e,t,r,n){return function(){var i=function(e,t,r){var n,i,o,s,c,l,d,h,p,f=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),m=new a(Array.prototype.slice.call(t)),v=new Uint8Array(e.byteLength),g=new Int32Array(v.buffer);for(n=r[0],i=r[1],o=r[2],s=r[3],p=0;p<f.length;p+=4)c=u(f[p]),l=u(f[p+1]),d=u(f[p+2]),h=u(f[p+3]),m.decrypt(c,l,d,h,g,p),g[p]=u(g[p]^n),g[p+1]=u(g[p+1]^i),g[p+2]=u(g[p+2]^o),g[p+3]=u(g[p+3]^s),n=c,i=l,o=d,s=h;return v}(e,t,r);n.set(i,e.byteOffset)}},t(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}(),d=new function(e){e.onmessage=function(t){var r=t.data,n=new Uint8Array(r.encrypted.bytes,r.encrypted.byteOffset,r.encrypted.byteLength),i=new Uint32Array(r.key.bytes,r.key.byteOffset,r.key.byteLength/4),o=new Uint32Array(r.iv.bytes,r.iv.byteOffset,r.iv.byteLength/4);new l(n,i,o,(function(t,n){var i,o;e.postMessage((i={source:r.source,decrypted:n},o={},Object.keys(i).forEach((function(e){var t=i[e];ArrayBuffer.isView(t)?o[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:o[e]=t})),o),[n.buffer])}))}}(r)}()})),In=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},Mn=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},Ln=function(e,t){t.activePlaylistLoader=e,e.load()},Dn={AUDIO:function(e,t){return function(){var r=t.segmentLoaders[e],n=t.mediaTypes[e],o=t.blacklistCurrentPlaylist;Mn(r,n);var s=n.activeTrack(),a=n.activeGroup(),c=(a.filter((function(e){return e.default}))[0]||a[0]).id,u=n.tracks[c];if(s!==u){for(var l in i().log.warn("Problem encountered loading the alternate audio track.Switching back to default."),n.tracks)n.tracks[l].enabled=n.tracks[l]===u;n.onTrackChanged()}else o({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var r=t.segmentLoaders[e],n=t.mediaTypes[e];i().log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Mn(r,n);var o=n.activeTrack();o&&(o.mode="disabled"),n.onTrackChanged()}}},Rn={AUDIO:function(e,t,r){if(t){var n=r.tech,i=r.requestOptions,o=r.segmentLoaders[e];t.on("loadedmetadata",(function(){var e=t.media();o.playlist(e,i),(!n.paused()||e.endList&&"none"!==n.preload())&&o.load()})),t.on("loadedplaylist",(function(){o.playlist(t.media(),i),n.paused()||o.load()})),t.on("error",Dn[e](e,r))}},SUBTITLES:function(e,t,r){var n=r.tech,i=r.requestOptions,o=r.segmentLoaders[e],s=r.mediaTypes[e];t.on("loadedmetadata",(function(){var e=t.media();o.playlist(e,i),o.track(s.activeTrack()),(!n.paused()||e.endList&&"none"!==n.preload())&&o.load()})),t.on("loadedplaylist",(function(){o.playlist(t.media(),i),n.paused()||o.load()})),t.on("error",Dn[e](e,r))}},Nn={AUDIO:function(e,t){var r=t.vhs,n=t.sourceType,o=t.segmentLoaders[e],s=t.requestOptions,a=t.master,c=a.mediaGroups,u=a.playlists,l=t.mediaTypes[e],d=l.groups,h=l.tracks,p=t.masterPlaylistLoader;c[e]&&0!==Object.keys(c[e]).length||(c[e]={main:{default:{default:!0}}});var f=function(o){d[o]||(d[o]=[]);var a=u.filter((function(t){return t.attributes[e]===o})),l=function(u){var l=c[e][o][u];a.filter((function(e){return e.resolvedUri===l.resolvedUri})).length&&delete l.resolvedUri;var f=void 0;if(f="vhs-json"===n&&l.playlists?new yt(l.playlists[0],r,s):l.resolvedUri?new yt(l.resolvedUri,r,s):l.playlists&&"dash"===n?new ar(l.playlists[0],r,s,p):null,l=i().mergeOptions({id:u,playlistLoader:f},l),Rn[e](e,l.playlistLoader,t),d[o].push(l),void 0===h[u]){var m=new(i().AudioTrack)({id:u,kind:In(l),enabled:!1,language:l.language,default:l.default,label:u});h[u]=m}};for(var f in c[e][o])l(f)};for(var m in c[e])f(m);o.on("error",Dn[e](e,t))},SUBTITLES:function(e,t){var r=t.tech,n=t.vhs,o=t.sourceType,s=t.segmentLoaders[e],a=t.requestOptions,c=t.master.mediaGroups,u=t.mediaTypes[e],l=u.groups,d=u.tracks,h=t.masterPlaylistLoader;for(var p in c[e])for(var f in l[p]||(l[p]=[]),c[e][p])if(!c[e][p][f].forced){var m=c[e][p][f],v=void 0;if("hls"===o?v=new yt(m.resolvedUri,n,a):"dash"===o?v=new ar(m.playlists[0],n,a,h):"vhs-json"===o&&(v=new yt(m.playlists?m.playlists[0]:m.resolvedUri,n,a)),m=i().mergeOptions({id:f,playlistLoader:v},m),Rn[e](e,m.playlistLoader,t),l[p].push(m),void 0===d[f]){var g=r.addRemoteTextTrack({id:f,kind:"subtitles",default:m.default&&m.autoselect,language:m.language,label:f},!1).track;d[f]=g}}s.on("error",Dn[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var r=t.tech,n=t.master.mediaGroups,o=t.mediaTypes[e],s=o.groups,a=o.tracks;for(var c in n[e])for(var u in s[c]||(s[c]=[]),n[e][c]){var l=n[e][c][u];if(l.instreamId.match(/CC\d/)&&(s[c].push(i().mergeOptions({id:u},l)),void 0===a[u])){var d=r.addRemoteTextTrack({id:l.instreamId,kind:"captions",default:l.default&&l.autoselect,language:l.language,label:u},!1).track;a[u]=d}}}},jn={AUDIO:function(e,t){return function(){var r=t.mediaTypes[e].tracks;for(var n in r)if(r[n].enabled)return r[n];return null}},SUBTITLES:function(e,t){return function(){var r=t.mediaTypes[e].tracks;for(var n in r)if("showing"===r[n].mode||"hidden"===r[n].mode)return r[n];return null}}},Un=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){Nn[t](t,e)}));var t=e.mediaTypes,r=e.masterPlaylistLoader,n=e.tech,i=e.vhs;["AUDIO","SUBTITLES"].forEach((function(r){t[r].activeGroup=function(e,t){return function(r){var n=t.masterPlaylistLoader,i=t.mediaTypes[e].groups,o=n.media();if(!o)return null;var s=null;return o.attributes[e]&&(s=i[o.attributes[e]]),s=s||i.main,void 0===r?s:null===r?null:s.filter((function(e){return e.id===r.id}))[0]||null}}(r,e),t[r].activeTrack=jn[r](r,e),t[r].onGroupChanged=function(e,t){return function(){var r=t.segmentLoaders,n=r[e],i=r.main,o=t.mediaTypes[e],s=o.activeTrack(),a=o.activeGroup(s),c=o.activePlaylistLoader;Mn(n,o),a&&(a.playlistLoader?(n.resyncLoader(),Ln(a.playlistLoader,o)):c&&i.resetEverything())}}(r,e),t[r].onGroupChanging=function(e,t){return function(){var r=t.segmentLoaders[e];r.abort(),r.pause()}}(r,e),t[r].onTrackChanged=function(e,t){return function(){var r=t.segmentLoaders,n=r[e],i=r.main,o=t.mediaTypes[e],s=o.activeTrack(),a=o.activeGroup(s),c=o.activePlaylistLoader;if(Mn(n,o),a){if("AUDIO"===e){if(!a.playlistLoader)return i.setAudio(!0),void i.resetEverything();n.setAudio(!0),i.setAudio(!1)}c!==a.playlistLoader?(n.track&&n.track(s),n.resetEverything(),Ln(a.playlistLoader,o)):Ln(a.playlistLoader,o)}}}(r,e)}));var o=t.AUDIO.activeGroup();if(o){var s=(o.filter((function(e){return e.default}))[0]||o[0]).id;t.AUDIO.tracks[s].enabled=!0,t.AUDIO.onTrackChanged()}r.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanged()}))})),r.on("mediachanging",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanging()}))}));var a=function(){t.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"}),n.trigger({type:"usage",name:"hls-audio-change"})};for(var c in n.audioTracks().addEventListener("change",a),n.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),i.on("dispose",(function(){n.audioTracks().removeEventListener("change",a),n.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),n.clearTracks("audio"),t.AUDIO.tracks)n.audioTracks().addTrack(t.AUDIO.tracks[c])},Fn=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],$n=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Bn=function(e){function t(t){var r;r=e.call(this)||this;var n,o=t.src,a=t.handleManifestRedirects,c=t.withCredentials,u=t.tech,l=t.bandwidth,d=t.externVhs,h=t.useCueTags,p=t.blacklistDuration,f=t.enableLowInitialPlaylist,m=t.sourceType,v=t.cacheEncryptionKeys,g=t.handlePartialData;if(!o)throw new Error("A non-empty playlist URL or JSON manifest string is required");rn=d,r.withCredentials=c,r.tech_=u,r.vhs_=u.vhs,r.sourceType_=m,r.useCueTags_=h,r.blacklistDuration=p,r.enableLowInitialPlaylist=f,r.useCueTags_&&(r.cueTagsTrack_=r.tech_.addTextTrack("metadata","ad-cues"),r.cueTagsTrack_.inBandMetadataTrackDispatchType=""),r.requestOptions_={withCredentials:c,handleManifestRedirects:a,timeout:null},r.on("error",r.pauseLoading),r.mediaTypes_=(n={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(e){n[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:tn,activeTrack:tn,onGroupChanged:tn,onTrackChanged:tn}})),n),r.mediaSource=new(s().MediaSource),r.handleDurationChange_=r.handleDurationChange_.bind(W(r)),r.handleSourceOpen_=r.handleSourceOpen_.bind(W(r)),r.handleSourceEnded_=r.handleSourceEnded_.bind(W(r)),r.mediaSource.addEventListener("durationchange",r.handleDurationChange_),r.mediaSource.addEventListener("sourceopen",r.handleSourceOpen_),r.mediaSource.addEventListener("sourceended",r.handleSourceEnded_),r.seekable_=i().createTimeRanges(),r.hasPlayed_=!1,r.syncController_=new xn(t),r.segmentMetadataTrack_=u.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,r.decrypter_=new Pn,r.sourceUpdater_=new wn(r.mediaSource),r.inbandTextTracks_={},r.timelineChangeController_=new An;var y={vhs:r.vhs_,mediaSource:r.mediaSource,currentTime:r.tech_.currentTime.bind(r.tech_),seekable:function(){return r.seekable()},seeking:function(){return r.tech_.seeking()},duration:function(){return r.duration()},hasPlayed:function(){return r.hasPlayed_},goalBufferLength:function(){return r.goalBufferLength()},bandwidth:l,syncController:r.syncController_,decrypter:r.decrypter_,sourceType:r.sourceType_,inbandTextTracks:r.inbandTextTracks_,cacheEncryptionKeys:v,handlePartialData:g,sourceUpdater:r.sourceUpdater_,timelineChangeController:r.timelineChangeController_};return r.masterPlaylistLoader_="dash"===r.sourceType_?new ar(o,r.vhs_,r.requestOptions_):new yt(o,r.vhs_,r.requestOptions_),r.setupMasterPlaylistLoaderListeners_(),r.mainSegmentLoader_=new en(i().mergeOptions(y,{segmentMetadataTrack:r.segmentMetadataTrack_,loaderType:"main"}),t),r.audioSegmentLoader_=new en(i().mergeOptions(y,{loaderType:"audio"}),t),r.subtitleSegmentLoader_=new En(i().mergeOptions(y,{loaderType:"vtt",featuresNativeTextTracks:r.tech_.featuresNativeTextTracks}),t),r.setupSegmentLoaderListeners_(),Fn.forEach((function(e){r[e+"_"]=$n.bind(W(r),e)})),r.logger_=Vr("MPC"),r.triggeredFmp4Usage=!1,r.masterPlaylistLoader_.load(),r}G(t,e);var r=t.prototype;return r.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var t=e.masterPlaylistLoader_.media(),r=1.5*t.targetDuration*1e3;Nt(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=r,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),Un({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){e.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){var t=e.masterPlaylistLoader_.media();if(!t){var r;if(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(r=e.selectInitialPlaylist()),r||(r=e.selectPlaylist()),e.initialMedia_=r,e.masterPlaylistLoader_.media(e.initialMedia_),!("vhs-json"===e.sourceType_&&e.initialMedia_.segments))return;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)})),this.masterPlaylistLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var t=e.masterPlaylistLoader_.media(),r=1.5*t.targetDuration*1e3;Nt(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=r,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var t=e.masterPlaylistLoader_.media();e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),e.tech_.trigger("playliststuck"))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))},r.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},r.triggerPresenceUsage_=function(e,t){var r=e.mediaGroups||{},n=!0,i=Object.keys(r.AUDIO);for(var o in r.AUDIO)for(var s in r.AUDIO[o]){r.AUDIO[o][s].uri||(n=!1)}n&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(r.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),rn.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),i.length&&Object.keys(r.AUDIO[i[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},r.setupSegmentLoaderListeners_=function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",(function(){var t=e.selectPlaylist(),r=e.masterPlaylistLoader_.media(),n=e.tech_.buffered();(function(e){var t=e.currentPlaylist,r=e.nextPlaylist,n=e.forwardBuffer,o=e.bufferLowWaterLine,s=e.duration;return e.log,r?!t.endList||s<cr.MAX_BUFFER_LOW_WATER_LINE||r.attributes.BANDWIDTH<t.attributes.BANDWIDTH||n>=o:(i().log.warn("We received no playlist to switch to. Please check your stream."),!1)})({currentPlaylist:r,nextPlaylist:t,forwardBuffer:n.length?n.end(n.length-1)-e.tech_.currentTime():0,bufferLowWaterLine:e.bufferLowWaterLine(),duration:e.duration(),log:e.logger_})&&e.masterPlaylistLoader_.media(t),e.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("progress",(function(){e.trigger("progress")})),this.mainSegmentLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("appenderror",(function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("ended",(function(){e.logger_("main segment loader ended"),e.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(){e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)}));var t=function(){if(!e.sourceUpdater_.ready())return e.tryToCreateSourceBuffers_();var t=e.getCodecsOrExclude_();t&&e.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()}))},r.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},r.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},r.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())},r.fastQualityChange_=function(e){var t=this;void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetEverything((function(){i().browser.IE_VERSION||i().browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())})))},r.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},r.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var r=this.seekable();if(!r.length)return!1;if(i().browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){e.trigger("firstplay"),e.tech_.setCurrentTime(r.end(0)),e.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(r.end(0))}return this.hasPlayed_=!0,this.load(),!0},r.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,(function(e){}))}this.trigger("sourceopen")},r.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(e&&e.length){var t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}}},r.handleDurationChange_=function(){this.tech_.trigger("durationchange")},r.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.currentMediaInfo_||this.mainSegmentLoader_.currentMediaInfo_.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e&&this.sourceUpdater_.endOfStream()},r.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;var r=rn.Playlist.playlistEnd(e,t),n=this.tech_.currentTime(),i=this.tech_.buffered();if(!i.length)return r-n<=_t;var o=i.end(i.length-1);return o-n<=_t&&r-o<=_t},r.blacklistCurrentPlaylist=function(e,t){void 0===e&&(e={});var r=e.playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!r)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));var n=this.masterPlaylistLoader_.master.playlists,o=n.filter(Dt),s=1===o.length&&o[0]===r;if(1===n.length&&t!==1/0)return i().log.warn("Problem encountered with playlist "+r.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(s);if(s){var a=!1;n.forEach((function(e){if(e!==r){var t=e.excludeUntil;void 0!==t&&t!==1/0&&(a=!0,delete e.excludeUntil)}})),a&&(i().log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}r.excludeUntil=Date.now()+1e3*t,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var c=this.selectPlaylist();if(!c)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var u=e.internal?this.logger_:i().log.warn,l=e.message?" "+e.message:"";return u((e.internal?"Internal problem":"Problem")+" encountered with playlist "+r.id+"."+l+" Switching to playlist "+c.id+"."),c.attributes.AUDIO!==r.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),c.attributes.SUBTITLES!==r.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]),this.masterPlaylistLoader_.media(c,s)},r.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"])},r.delegateLoaders_=function(e,t){var r=this,n=[],i="all"===e;(i||"main"===e)&&n.push(this.masterPlaylistLoader_);var o=[];(i||"audio"===e)&&o.push("AUDIO"),(i||"subtitle"===e)&&(o.push("CLOSED-CAPTIONS"),o.push("SUBTITLES")),o.forEach((function(e){var t=r.mediaTypes_[e]&&r.mediaTypes_[e].activePlaylistLoader;t&&n.push(t)})),["main","audio","subtitle"].forEach((function(t){var i=r[t+"SegmentLoader_"];!i||e!==t&&"all"!==e||n.push(i)})),n.forEach((function(e){return t.forEach((function(t){"function"==typeof e[t]&&e[t]()}))}))},r.setCurrentTime=function(e){var t=wt(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},r.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:rn.Playlist.duration(e):1/0:0},r.seekable=function(){return this.seekable_},r.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var r=this.syncController_.getExpiredTime(t,this.duration());if(null!==r){var n=this.masterPlaylistLoader_.master.suggestedPresentationDelay,o=rn.Playlist.seekable(t,r,n);if(0!==o.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(r=this.syncController_.getExpiredTime(t,this.duration())))return;if(0===(e=rn.Playlist.seekable(t,r,n)).length)return}var s,a;this.seekable_&&this.seekable_.length&&(s=this.seekable_.end(0),a=this.seekable_.start(0)),e?e.start(0)>o.end(0)||o.start(0)>e.end(0)?this.seekable_=o:this.seekable_=i().createTimeRanges([[e.start(0)>o.start(0)?e.start(0):o.start(0),e.end(0)<o.end(0)?e.end(0):o.end(0)]]):this.seekable_=o,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===s&&this.seekable_.start(0)===a||(this.logger_("seekable updated ["+Ct(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},r.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();if(!t.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))}else{var r=this.tech_.buffered(),n=rn.Playlist.duration(this.masterPlaylistLoader_.media());r.length>0&&(n=Math.max(n,r.end(r.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}},r.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach((function(t){var r=e.mediaTypes_[t].groups;for(var n in r)r[n].forEach((function(e){e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},r.master=function(){return this.masterPlaylistLoader_.master},r.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},r.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader;return!(!this.mainSegmentLoader_.currentMediaInfo_||e&&!this.audioSegmentLoader_.currentMediaInfo_)},r.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.currentMediaInfo_||{},audio:this.audioSegmentLoader_.currentMediaInfo_||{}};t.video=t.main;var r=Br(this.master(),this.media()),n={},i=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(n.video=r.video||t.main.videoCodec||it.xz),t.main.isMuxed&&(n.video+=","+(r.audio||t.main.audioCodec||it.lA)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||i)&&(n.audio=r.audio||t.main.audioCodec||t.audio.audioCodec||it.lA,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),n.audio||n.video){var o,s={};if(["video","audio"].forEach((function(e){if(n.hasOwnProperty(e)&&(i=t[e].isFmp4,a=n[e],!(i?(0,it.p7)(a):(0,it.Hi)(a)))){var r=t[e].isFmp4?"browser":"muxer";s[r]=s[r]||[],s[r].push(n[e]),"audio"===e&&(o=r)}var i,a})),i&&o&&this.media().attributes.AUDIO){var a=this.media().attributes.AUDIO;this.master().playlists.forEach((function(t){(t.attributes&&t.attributes.AUDIO)===a&&t!==e.media()&&(t.excludeUntil=1/0)})),this.logger_("excluding audio group "+a+" as "+o+' does not support codec(s): "'+n.audio+'"')}if(!Object.keys(s).length){if(this.sourceUpdater_.ready()&&!this.sourceUpdater_.canChangeType()){var c=[];if(["video","audio"].forEach((function(t){var r=((0,it.kS)(e.sourceUpdater_.codecs[t]||"")[t]||{}).type,i=((0,it.kS)(n[t]||"")[t]||{}).type;r&&i&&r.toLowerCase()!==i.toLowerCase()&&c.push('"'+e.sourceUpdater_.codecs[t]+'" -> "'+n[t]+'"')})),c.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+c.join(", ")+".",blacklistDuration:1/0,internal:!0})}return n}var u=Object.keys(s).reduce((function(e,t){return e&&(e+=", "),e+=t+' does not support codec(s): "'+s[t].join(",")+'"'}),"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:u,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},r.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.ready()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}}},r.excludeUnsupportedVariants_=function(){var e=this;this.master().playlists.forEach((function(t){var r=Br(e.master,t);!r.audio||(0,it.Hi)(r.audio)||(0,it.p7)(r.audio)||(t.excludeUntil=1/0),!r.video||(0,it.Hi)(r.video)||(0,it.p7)(r.video)||(t.excludeUntil=1/0)}))},r.excludeIncompatibleVariants_=function(e){var t=this,r=(0,it.kS)(e),n=Object.keys(r).length;this.master().playlists.forEach((function(e){if(e.excludeUntil!==1/0){var i={},o=2,s=[],a=Br(t.masterPlaylistLoader_.master,e);if(a.audio||a.video){var c=[a.video,a.audio].filter(Boolean).join(",");i=(0,it.kS)(c),o=Object.keys(i).length}o!==n&&(s.push('codec count "'+o+'" !== "'+n+'"'),e.excludeUntil=1/0),t.sourceUpdater_.canChangeType()||(i.video&&r.video&&i.video.type.toLowerCase()!==r.video.type.toLowerCase()&&(s.push('video codec "'+i.video.type+'" !== "'+r.video.type+'"'),e.excludeUntil=1/0),i.audio&&r.audio&&i.audio.type.toLowerCase()!==r.audio.type.toLowerCase()&&(e.excludeUntil=1/0,s.push('audio codec "'+i.audio.type+'" !== "'+r.audio.type+'"'))),s.length&&t.logger_("blacklisting "+e.id+": "+s.join(" && "))}}))},r.updateAdCues_=function(e){var t=0,r=this.seekable();r.length&&(t=r.start(0)),function(e,t,r){if(void 0===r&&(r=0),e.segments)for(var n,i=r,o=0;o<e.segments.length;o++){var a=e.segments[o];if(n||(n=On(t,i+a.duration/2)),n){if("cueIn"in a){n.endTime=i,n.adEndTime=i,i+=a.duration,n=null;continue}if(i<n.endTime){i+=a.duration;continue}n.endTime+=a.duration}else if("cueOut"in a&&((n=new(s().VTTCue)(i,i+a.duration,a.cueOut)).adStartTime=i,n.adEndTime=i+parseFloat(a.cueOut),t.addCue(n)),"cueOutCont"in a){var c=a.cueOutCont.split("/").map(parseFloat),u=c[0],l=c[1];(n=new(s().VTTCue)(i,i+a.duration,"")).adStartTime=i-u,n.adEndTime=n.adStartTime+l,t.addCue(n)}i+=a.duration}}(e,this.cueTagsTrack_,t)},r.goalBufferLength=function(){var e=this.tech_.currentTime(),t=cr.GOAL_BUFFER_LENGTH,r=cr.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,cr.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*r,n)},r.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=cr.BUFFER_LOW_WATER_LINE,r=cr.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,cr.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*r,n)},t}(i().EventTarget),Vn=function(e,t,r){var n,i,o,s=e.masterPlaylistController_,a=s[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(s);if(t.attributes.RESOLUTION){var c=t.attributes.RESOLUTION;this.width=c.width,this.height=c.height}this.bandwidth=t.attributes.BANDWIDTH,this.codecs=Br(s.master(),t),this.playlist=t,this.id=r,this.enabled=(n=e.playlists,i=t.id,o=a,function(e){var t=n.master.playlists[i],r=Lt(t),s=Dt(t);return void 0===e?s:(e?delete t.disabled:t.disabled=!0,e===s||r||(o(),e?n.trigger("renditionenabled"):n.trigger("renditiondisabled")),e)})},qn=["seeking","seeked","pause","playing","error"],Hn=function(){function e(e){var t=this;this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Vr("PlaybackWatcher"),this.logger_("initialize");var r=function(){return t.monitorCurrentTime_()},n=function(){return t.techWaiting_()},i=function(){return t.cancelTimer_()},o=function(){return t.fixesBadSeeks_()},a=this.masterPlaylistController_,c=["main","subtitle","audio"],u={};c.forEach((function(e){u[e]={reset:function(){return t.resetSegmentDownloads_(e)},updateend:function(){return t.checkSegmentDownloads_(e)}},a[e+"SegmentLoader_"].on("appendsdone",u[e].updateend),a[e+"SegmentLoader_"].on("playlistupdate",u[e].reset),t.tech_.on(["seeked","seeking"],u[e].reset)})),this.tech_.on("seekablechanged",o),this.tech_.on("waiting",n),this.tech_.on(qn,i),this.tech_.on("canplay",r),this.dispose=function(){t.logger_("dispose"),t.tech_.off("seekablechanged",o),t.tech_.off("waiting",n),t.tech_.off(qn,i),t.tech_.off("canplay",r),c.forEach((function(e){a[e+"SegmentLoader_"].off("appendsdone",u[e].updateend),a[e+"SegmentLoader_"].off("playlistupdate",u[e].reset),t.tech_.off(["seeked","seeking"],u[e].reset)})),t.checkCurrentTimeTimeout_&&s().clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}var t=e.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&s().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=s().setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(e){var t=this.masterPlaylistController_[e+"SegmentLoader_"];this[e+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+e+" loader"),this[e+"StalledDownloads_"]=0,this[e+"Buffered_"]=t.buffered_()},t.checkSegmentDownloads_=function(e){var t=this.masterPlaylistController_,r=t[e+"SegmentLoader_"],n=r.buffered_(),i=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e.start(r)!==t.start(r)||e.end(r)!==t.end(r))return!0;return!1}(this[e+"Buffered_"],n);this[e+"Buffered_"]=n,i?this.resetSegmentDownloads_(e):(this[e+"StalledDownloads_"]++,this.logger_("found #"+this[e+"StalledDownloads_"]+" "+e+" appends that did not increase buffer (possible stalled download)",{playlistId:r.playlist_&&r.playlist_.id,buffered:Et(n)}),this[e+"StalledDownloads_"]<10||(this.logger_(e+" loader stalled download exclusion"),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-"+e+"-download-exclusion"}),"subtitle"!==e&&t.blacklistCurrentPlaylist({message:"Excessive "+e+" segment downloading detected."},1/0)))},t.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+_t>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var e,t=this.seekable(),r=this.tech_.currentTime();this.afterSeekableWindow_(t,r,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(e=t.end(t.length-1));if(this.beforeSeekableWindow_(t,r)){var n=t.start(0);e=n+(n===t.end(0)?0:_t)}if(void 0!==e)return this.logger_("Trying to seek outside of seekable at time "+r+" with seekable range "+Ct(t)+". Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0;var i=this.tech_.buffered();return!!function(e){var t=e.buffered,r=e.targetDuration,n=e.currentTime;return!(!t.length||t.end(0)-t.start(0)<2*r||n>t.start(0)||!(t.start(0)-n<r))}({buffered:i,targetDuration:this.media().targetDuration,currentTime:r})&&(e=i.start(0)+_t,this.logger_("Buffered region starts ("+i.start(0)+")  just beyond seek point ("+r+"). Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0)},t.waiting_=function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),r=wt(t,e);return r.length&&e+3<=r.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+r.start(0)+" -> "+r.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},t.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var r=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+r),this.cancelTimer_(),this.tech_.setCurrentTime(r),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var n=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:t}))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var o=St(i,t);if(o.length>0){var s=o.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+s+", seeking to "+o.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*s,t),!0}return!1},t.afterSeekableWindow_=function(e,t,r,n){if(void 0===n&&(n=!1),!e.length)return!1;var i=e.end(e.length-1)+_t;return!r.endList&&n&&(i=e.end(e.length-1)+3*r.targetDuration),t>i},t.beforeSeekableWindow_=function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-_t)},t.videoUnderflow_=function(e){var t=e.videoBuffered,r=e.audioBuffered,n=e.currentTime;if(t){var i;if(t.length&&r.length){var o=wt(t,n-3),s=wt(t,n),a=wt(r,n);a.length&&!s.length&&o.length&&(i={start:o.end(0),end:a.end(0)})}else{St(t,n).length||(i=this.gapFromVideoUnderflow_(t,n))}return!!i&&(this.logger_("Encountered a gap in video from "+i.start+" to "+i.end+". Seeking to current time "+n),!0)}},t.skipTheGap_=function(e){var t=this.tech_.buffered(),r=this.tech_.currentTime(),n=St(t,r);this.cancelTimer_(),0!==n.length&&r===e&&(this.logger_("skipTheGap_:","currentTime:",r,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+bt),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(e,t){for(var r=function(e){if(e.length<2)return i().createTimeRanges();for(var t=[],r=1;r<e.length;r++){var n=e.end(r-1),o=e.start(r);t.push([n,o])}return i().createTimeRanges(t)}(e),n=0;n<r.length;n++){var o=r.start(n),s=r.end(n);if(t-o<4&&t-o>2)return{start:o,end:s}}return null},e}(),Wn={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},zn=function e(t,r){var n=0,o=0,s=i().mergeOptions(Wn,r);t.ready((function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var a=function(){o&&t.currentTime(o)},c=function(e){null!=e&&(o=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",a),t.src(e),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},u=function(){return Date.now()-n<1e3*s.errorInterval?(t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void t.trigger({type:"usage",name:"hls-error-reload-canceled"})):s.getSource&&"function"==typeof s.getSource?(n=Date.now(),s.getSource.call(t,c)):void i().log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},l=function e(){t.off("loadedmetadata",a),t.off("error",u),t.off("dispose",e)};t.on("error",u),t.on("dispose",l),t.reloadSourceOnError=function(r){l(),e(t,r)}},Gn=function(e){zn(this,e)},Kn="2.2.4",Xn={PlaylistLoader:yt,Playlist:jt,utils:Yt,STANDARD_PLAYLIST_SELECTOR:function(){var e=this.useDevicePixelRatio&&s().devicePixelRatio||1;return function(e,t,r,n,i){var o={bandwidth:t,width:r,height:n,limitRenditionByPlayerDimensions:i},a=e.playlists.map((function(e){var t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,r=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return{bandwidth:e.attributes.BANDWIDTH||s().Number.MAX_VALUE,width:t,height:r,playlist:e}}));zr(a,(function(e,t){return e.bandwidth-t.bandwidth}));var c=(a=a.filter((function(e){return!jt.isIncompatible(e.playlist)}))).filter((function(e){return jt.isEnabled(e.playlist)}));c.length||(c=a.filter((function(e){return!jt.isDisabled(e.playlist)})));var u=c.filter((function(e){return e.bandwidth*cr.BANDWIDTH_VARIANCE<t})),l=u[u.length-1],d=u.filter((function(e){return e.bandwidth===l.bandwidth}))[0];if(!1===i){var h=d||c[0]||a[0];if(h&&h.playlist){var p="sortedPlaylistReps";return d&&(p="bandwidthBestRep"),c[0]&&(p="enabledPlaylistReps"),qr("choosing "+Hr(h)+" using "+p+" with options",o),h.playlist}return qr("could not choose a playlist with options",o),null}var f=u.filter((function(e){return e.width&&e.height}));zr(f,(function(e,t){return e.width-t.width}));var m=f.filter((function(e){return e.width===r&&e.height===n}));l=m[m.length-1];var v,g,y,b=m.filter((function(e){return e.bandwidth===l.bandwidth}))[0];b||(g=(v=f.filter((function(e){return e.width>r||e.height>n}))).filter((function(e){return e.width===v[0].width&&e.height===v[0].height})),l=g[g.length-1],y=g.filter((function(e){return e.bandwidth===l.bandwidth}))[0]);var _=y||b||d||c[0]||a[0];if(_&&_.playlist){var T="sortedPlaylistReps";return y?T="resolutionPlusOneRep":b?T="resolutionBestRep":d?T="bandwidthBestRep":c[0]&&(T="enabledPlaylistReps"),qr("choosing "+Hr(_)+" using "+T+" with options",o),_.playlist}return qr("could not choose a playlist with options",o),null}(this.playlists.master,this.systemBandwidth,parseInt(Wr(this.tech_.el(),"width"),10)*e,parseInt(Wr(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions)},INITIAL_PLAYLIST_SELECTOR:function(){var e=this,t=this.playlists.master.playlists.filter(jt.isEnabled);return zr(t,(function(e,t){return Gr(e,t)})),t.filter((function(t){return!!Br(e.playlists.master,t).video}))[0]||null},comparePlaylistBandwidth:Gr,comparePlaylistResolution:function(e,t){var r,n;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(r=e.attributes.RESOLUTION.width),r=r||s().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),r===(n=n||s().Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:r-n},xhr:Bt()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","BACK_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach((function(e){Object.defineProperty(Xn,e,{get:function(){return i().log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),cr[e]},set:function(t){i().log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?i().log.warn("value of Vhs."+e+" must be greater than or equal to 0"):cr[e]=t}})}));var Yn="videojs-vhs",Qn=function(e,t){for(var r=t.media(),n=-1,i=0;i<e.length;i++)if(e[i].id===r.id){n=i;break}e.selectedIndex_=n,e.trigger({selectedIndex:n,type:"change"})};Xn.canPlaySource=function(){return i().log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Jn=function(e){var t=e.player,r=e.sourceKeySystems,n=e.media,o=e.audioMedia,s=e.mainPlaylists,a=function(e,t,r){if(!e)return e;var n={video:t&&t.attributes&&t.attributes.CODECS,audio:r&&r.attributes&&r.attributes.CODECS};!n.audio&&n.video&&n.video.split(",").length>1&&n.video.split(",").forEach((function(e){e=e.trim(),(0,it.KL)(e)?n.audio=e:(0,it.tf)(e)&&(n.video=e)}));var o=n.video?'video/mp4;codecs="'+n.video+'"':null,s=n.audio?'audio/mp4;codecs="'+n.audio+'"':null,a={};for(var c in e)a[c]={audioContentType:s,videoContentType:o},t.contentProtection&&t.contentProtection[c]&&t.contentProtection[c].pssh&&(a[c].pssh=t.contentProtection[c].pssh),"string"==typeof e[c]&&(a[c].url=e[c]);return i().mergeOptions(e,a)}(r,n,o);if(a)if(t.currentSource().keySystems=a,!a||t.eme){if(11!==i().browser.IE_VERSION&&t.eme.initializeMediaKeys){var c=function(e,t){return e.reduce((function(e,r){if(!r.contentProtection)return e;var n=t.reduce((function(e,t){var n=r.contentProtection[t];return n&&n.pssh&&(e[t]={pssh:n.pssh}),e}),{});return Object.keys(n).length&&e.push(n),e}),[])}(o?s.concat([o]):s,Object.keys(r));c.forEach((function(e){t.eme.initializeMediaKeys({keySystems:e})}))}}else i().log.warn("DRM encrypted source cannot be decrypted without a DRM plugin")},Zn=function(){if(!s().localStorage)return null;var e=s().localStorage.getItem(Yn);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};Xn.supportsNativeHls=function(){if(!c()||!c().createElement)return!1;var e=c().createElement("video");if(!i().getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),Xn.supportsNativeDash=!!(c()&&c().createElement&&i().getTech("Html5").isSupported())&&/maybe|probably/i.test(c().createElement("video").canPlayType("application/dash+xml")),Xn.supportsTypeNatively=function(e){return"hls"===e?Xn.supportsNativeHls:"dash"===e&&Xn.supportsNativeDash},Xn.isSupported=function(){return i().log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var ei=function(e){function t(t,r,n){var o;if(o=e.call(this,r,i().mergeOptions(n.hls,n.vhs))||this,n.hls&&Object.keys(n.hls).length&&i().log.warn("Using hls options is deprecated. Use vhs instead."),r.options_&&r.options_.playerId){var s=i()(r.options_.playerId);s.hasOwnProperty("hls")||Object.defineProperty(s,"hls",{get:function(){return i().log.warn("player.hls is deprecated. Use player.tech().vhs instead."),r.trigger({type:"usage",name:"hls-player-access"}),W(o)},configurable:!0}),s.hasOwnProperty("vhs")||Object.defineProperty(s,"vhs",{get:function(){return i().log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),r.trigger({type:"usage",name:"vhs-player-access"}),W(o)},configurable:!0}),s.hasOwnProperty("dash")||Object.defineProperty(s,"dash",{get:function(){return i().log.warn("player.dash is deprecated. Use player.tech().vhs instead."),W(o)},configurable:!0}),o.player_=s}if(o.tech_=r,o.source_=t,o.stats={},o.ignoreNextSeekingEvent_=!1,o.setOptions_(),o.options_.overrideNative&&r.overrideNativeAudioTracks&&r.overrideNativeVideoTracks)r.overrideNativeAudioTracks(!0),r.overrideNativeVideoTracks(!0);else if(o.options_.overrideNative&&(r.featuresNativeVideoTracks||r.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return o.on(c(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=c().fullscreenElement||c().webkitFullscreenElement||c().mozFullScreenElement||c().msFullscreenElement;t&&t.contains(o.tech_.el())&&o.masterPlaylistController_.smoothQualityChange_()})),o.on(o.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),o.on(o.tech_,"error",(function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),o.on(o.tech_,"play",o.play),o}G(t,e);var r=t.prototype;return r.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.handlePartialData=this.options_.handlePartialData||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=Zn();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=cr.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===cr.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","handlePartialData"].forEach((function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},r.src=function(e,t){var r,n=this;e&&(this.setOptions_(),this.options_.src=0===(r=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(r.substring(r.indexOf(",")+1)):r,this.options_.tech=this.tech_,this.options_.externVhs=Xn,this.options_.sourceType=(0,se.t)(t),this.options_.seekTo=function(e){n.tech_.setCurrentTime(e)},this.masterPlaylistController_=new Bn(this.options_),this.playbackWatcher_=new Hn(i().mergeOptions(this.options_,{seekable:function(){return n.seekable()},media:function(){return n.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_})),this.masterPlaylistController_.on("error",(function(){var e=i().players[n.tech_.options_.playerId],t=n.masterPlaylistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)})),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Xn.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Xn.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e,t=1/(this.bandwidth||1);return e=this.throughput>0?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){i().log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Et(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Et(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){n.options_.useBandwidthFromLocalStorage&&function(e){if(!s().localStorage)return!1;var t=Zn();t=t?i().mergeOptions(t,e):e;try{s().localStorage.setItem(Yn,JSON.stringify(t))}catch(e){return!1}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var e,t;t=(e=n).playlists,e.representations=function(){return t&&t.master&&t.master.playlists?t.master.playlists.filter((function(e){return!Lt(e)})).map((function(t,r){return new Vn(e,t,t.id)})):[]}})),this.masterPlaylistController_.sourceUpdater_.on("ready",(function(){var e=n.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;Jn({player:n.player_,sourceKeySystems:n.source_.keySystems,media:n.playlists.media(),audioMedia:e&&e.media(),mainPlaylists:n.playlists.master.playlists})})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=s().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_)))},r.setupQualityLevels_=function(){var e=this,t=i().players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var t,r;t=e.qualityLevels_,(r=e).representations().forEach((function(e){t.addQualityLevel(e)})),Qn(t,r.playlists)})),this.playlists.on("mediachange",(function(){Qn(e.qualityLevels_,e.playlists)})))},t.version=function(){return{"@videojs/http-streaming":Kn,"mux.js":"5.6.7","mpd-parser":"0.14.0","m3u8-parser":"4.5.0","aes-decrypter":"3.1.0"}},r.version=function(){return this.constructor.version()},r.canChangeType=function(){return wn.canChangeType()},r.play=function(){this.masterPlaylistController_.play()},r.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},r.duration=function(){return this.masterPlaylistController_.duration()},r.seekable=function(){return this.masterPlaylistController_.seekable()},r.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&s().URL.revokeObjectURL&&(s().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),e.prototype.dispose.call(this)},r.convertToProgramTime=function(e,t){return Qt({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},r.seekToProgramTime=function(e,t,r,n){return void 0===r&&(r=!0),void 0===n&&(n=2),Jt({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:n,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},t}(i().getComponent("Component")),ti={name:"videojs-http-streaming",VERSION:Kn,canHandleSource:function(e,t){void 0===t&&(t={});var r=i().mergeOptions(i().options,t);return ti.canPlayType(e.type,r)},handleSource:function(e,t,r){void 0===r&&(r={});var n=i().mergeOptions(i().options,r);return t.vhs=new ei(e,t,n),i().hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return i().log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=Bt(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){void 0===t&&(t={});var r=i().mergeOptions(i().options,t).vhs.overrideNative,n=void 0===r?!i().browser.IS_ANY_SAFARI:r,o=(0,se.t)(e);return o&&(!Xn.supportsTypeNatively(o)||n)?"maybe":""}};function ri(e,t,r){var n=["hls-request-manifest","hls-request-playlist","hls-request-segment-1"],i=n.length,o=0,s={uri:"",count:0};e.xhr.beforeRequest=e=>{var a,c,u,l="requester=oo",d=e.uri.match(/(m3u8?|ts)$/g);!!r.live_metadata&&d&&(a=e.uri,c=d[0],u=".ts"===c?8:3,a===s.uri?(s.count++,s.count===u&&(t.trigger("intent:pause"),t.error({code:0,message:"unable to fetch hls segment or playlist"}))):s={uri:a,count:0}),e.uri.endsWith(l)||(e.uri=e.uri.concat("?",l)),o<i&&(t.trigger(n[o]),o++)}}(0,it.p7)("avc1.4d400d,mp4a.40.2")&&i().getTech("Html5").registerSourceHandler(ti,0),i().VhsHandler=ei,Object.defineProperty(i(),"HlsHandler",{get:function(){return i().log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),ei},configurable:!0}),i().VhsSourceHandler=ti,Object.defineProperty(i(),"HlsSourceHandler",{get:function(){return i().log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),ti},configurable:!0}),i().Vhs=Xn,Object.defineProperty(i(),"Hls",{get:function(){return i().log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Xn},configurable:!0}),i().use||(i().registerComponent("Hls",Xn),i().registerComponent("Vhs",Xn)),i().options.vhs=i().options.vhs||{},i().options.hls=i().options.hls||{},i().registerPlugin?i().registerPlugin("reloadSourceOnError",Gn):i().plugin("reloadSourceOnError",Gn);var ni=r(8314),ii=r(7376);class oi extends ni.AnonymousSubject{constructor(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;super(e,t.do((e=>{this._value=e}))),this._value=r}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ii.ObjectUnsubscribedError;return this._value}unsubscribe(){super.unsubscribe(),this._value=void 0}}const si=oi;var ai=r(5100);r(2761),r(3810),r(7492),r(4115),r(496),r(3705),r(6651),r(6514),r(757),r(4005),r(8713),r(8678),r(7049),r(3538),r(7701),r(242),r(2433),r(1354),r(9794),r(2743),r(2276),r(1639),r(6165),r(7775),r(5285),r(5251),r(6771),r(6261),r(7537),r(8788),r(3449),r(6593),r(8321),r(60),r(1082),r(6679),r(2417),r(6873),r(3502),r(4507),r(5532),r(2285),r(6095),r(2821),r(3187),r(8316),r(1544),r(7619),r(1498),r(8409),r(600),r(9739),r(279),r(8391);var ci=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t};const ui=(li={filterByLatestFrom:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.pop();return this.withLatestFrom(...t).filter((e=>n(...e))).map((e=>{var[t]=e;return t}))},bufferedWith:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ci;return ai.Observable.create((r=>{var n,i=!1,o=[],s={next:e=>{i=!0,n=e,o.forEach((e=>{r.next(t(e,n))})),o.splice(0)},error:e=>r.error(e),complete:()=>{}},a={next:e=>{if(!i)return o.push(e);r.next(t(e,n))},error:e=>r.error(e),complete:()=>r.complete()},c=this.subscribe(a),u=e.subscribe(s);return()=>{c.unsubscribe(),u.unsubscribe()}}))},withType:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(r.length){var i=new Set(r.concat(e));return this.filter((e=>i.has(e.type)))}return this.filter((t=>t.type===e))}},e=>Object.keys(li).forEach((t=>e.prototype[t]=li[t])));var li;ui(ai.Observable);const di=ai.Observable;function hi(e){var{isIframeEmbed:t,pageType:r="",ampTargeting:n}=e;return t||r.match(/^amp\-/)||!!n||window.name.includes("amp_iframe")}var pi=r(7317).Z,fi={functional:!0,performance:!0,socialMedia:!0,strictlyNecessary:!0,targeting:!0},mi={functional:!1,performance:!1,socialMedia:!1,strictlyNecessary:!0,targeting:!1},vi="functional",gi="performance",yi="socialMedia",bi="targeting";function _i(e){var{cneBeaconLibrary$:t,cneError$:r,canRunBasedOnConsent$:n}=e,i=["http://blinkinglights.cnevids.com/livestream"];return{library$:t,events$:r.filter((e=>{var{video:t}=e;return!!t.live_metadata})).throttleTime(1e3).map((e=>{var{video:t,error:r}=e;return{endpoints:i,video:t,error:r}})).withLatestFrom(n.pluck(gi),((e,t)=>({eventData:e,canRunBasedOnConsent:t}))).filter((e=>e.canRunBasedOnConsent)).map((e=>e.eventData))}}var Ti=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t.withType("loadedmetadata","dfp-ads-manager-loaded");return e.distinctUntilChanged().skip(r).switchMap((e=>n.take(1).mapTo(e)))},wi=new Map([["dfp-ad-complete","cne:videoad:end"],["dfp-ad-firstquartile","cne:ad:quartile-1"],["dfp-ad-metadata","cne:videoad:fetchsuccess"],["dfp-ad-midpoint","cne:ad:quartile-2"],["dfp-ad-requested","cne:videoad:fetch"],["dfp-ad-started","cne:ad:start"],["dfp-ad-thirdquartile","cne:ad:quartile-3"],["ended","cne:video:end"],["pause","cne:pause"],["play","cne:play"]]),Si=new Map([["ADS_REQUEST_NETWORK_ERROR","cne:videoad:fetchexited"],["UNKNOWN_AD_RESPONSE","cne:videoad:emptyresponse"]]),Ci=e=>({eventString:e}),Ei=e=>t=>({data:t,eventString:e});function Oi(e){var{analyticsMute$:t,cneEventLibrary$:r,currentVideo$:n,isPlaying$:i,loadVideoId$:o,playerEvent$:s,quartile$:a,videoStart$:c,viewportStatus$:u}=e,l=t.distinctUntilChanged().map((e=>({eventName:e?"Mute Video":"Unmute Video"}))),d=s.withType("dfp-ad-error").map((e=>{var{adError:t}=e;return Si.get(t&&t.code)})).filter(Boolean),h=Ti(n,s),p=Ti(n,s,1),f=s.map((e=>{var{type:t}=e;return wi.get(t)})).filter(Boolean),m=di.merge(u.map(Ei("cne:viewport")),u.skip(1).map((e=>{switch(e){case"FULLY_IN_VIEWPORT":return"viewport-enter";case"OUT_OF_VIEWPORT":return"viewport-exit"}return null})).filter(Boolean).map(Ci));return{library$:r,events$:di.merge(m,i.map(Ei("cne:is-playing")),f.map(Ci),d.map(Ci),l.map(Ei("cne:mute-change")),p.map(Ei("cne:video:change")),h.map(Ei("cne:video:current")),a.map((e=>Ci("cne:quartile-".concat(e)))),c.mapTo(Ci("cne:video:start")),o.mapTo(Ci("cne:load-video-id")))}}function ki(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(r),!0).forEach((function(t){Ai(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ki(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ai(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pi={type:"stop"},Ii={type:"playContent"};function Mi(e){var{comscoreLibrary$:t,currentVideo$:r,canRunBasedOnConsent$:n,isPlaying$:i,isSeeking$:o,loadVideoId$:s,playerEvent$:a,replay$:c}=e,u=e=>e.filterByLatestFrom(o,((e,t)=>!t)),l=a.withType("dfp-ad-started").map((e=>(e=>({type:"playAd",adDuration:e}))(e.ad?e.ad.duration:0))),d=a.withType("dfp-content-resume").map((()=>Ii)),h=s.filterByLatestFrom(i,((e,t)=>!0===t)).mapTo(Pi),p=u(a.withType("play")).mapTo(Ii),f=u(a.withType("pause")).mapTo(Pi),m=c.mapTo(Ii);return{library$:t,events$:di.merge(h,p,m,f,l,d).withLatestFrom(r,((e,t)=>{var{comscore_config:r}=t;return xi(xi({},e),{},{config:r})})).withLatestFrom(n.pluck(gi),((e,t)=>({eventData:e,canRunBasedOnConsent:t}))).filter((e=>e.canRunBasedOnConsent)).map((e=>e.eventData))}}function Li(e){var{config$:t,currentVideo$:r,canRunBasedOnConsent$:n,facebookLibrary$:i,playerEvent$:o,quartile$:s,videoStart$:a}=e,c=a.mapTo("Start"),u=s.map((e=>"".concat(25*e,"% Quartile"))),l=o.withType("ended").mapTo("Ended");return{library$:i,events$:c.merge(u,l).map((e=>({type:e,custom:!0}))).withLatestFrom(r,t,n.pluck(yi),((e,t,r,n)=>{var{type:i,custom:o}=e,{brand:s}=t,{location:a}=r;return{eventData:{type:i,params:{brand:s,url:a,category:"Video View"},custom:o},canRunBasedOnConsent:n}})).filter((e=>e.canRunBasedOnConsent)).map((e=>e.eventData))}}function Di(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ri(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(r),!0).forEach((function(t){Ni(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Di(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ni(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ji(e){var{brand:t,cne_produced:r,duration:n,id:i,location:o,partner:s,playerConfig:a,series_title:c,season_title:u,title:l,videoView:d}=e,{analyticsUrl:h,playlist:p,embedLocation:f,playerType:m,playlistId:v,iu:g,isRightRail:y}=a,b="".concat(c||"null","_").concat(u||"null"),_=function(e){var{brand:t,partner:r,embedLocation:n,playerType:i,playlistId:o,isRightRail:s,iu:a}=e,c="".concat(o?"_playlist":"").concat("interlude"===i?"_interlude":"").concat(s?"_rightRail":""),u="".concat(t,"_").concat(a);return"".concat(n||r||u).concat(c)}({brand:t,partner:s,embedLocation:f,playerType:m,playlistId:v,isRightRail:y,iu:g});return{pageLocation:h||o,videoBrand:t,videoId:i,videoLength:n,videoOandOFlag:!!f,videoPlayerName:_,videoPlaylist:p&&p.title||void 0,videoProducer:r,videoSeason:b,videoTitle:l,videoViewsInVisit:d}}function Ui(e){var{config$:t,currentVideo$:r,canRunBasedOnConsent$:n,seekEnd$:i,googleAnalyticsLibrary$:o,playerEvent$:s,quartile$:a,shareIntent$:c,videoStart$:u,videoStartType$:l,videoView$:d}=e,h=a.startWith(0),p=s.withType("dfp-ad-requested").mapTo({event:"video-ad-call"}),f=s.withType("dfp-ad-started").map((e=>{var t=e&&e.ad?e.ad.duration:void 0,r=function(e){switch(e){case-1:return"postroll";case 0:return"preroll";case void 0:return"undefined";default:return"midroll"}}(e&&e.ad&&e.ad.podInfo?e.ad.podInfo.getPodIndex():void 0);return{event:"video-ad-view",videoAdLength:t,videoAdPosition:r}})),m=u.withLatestFrom(l,((e,t)=>t)).map((e=>({event:"video-start",videoPlayMethod:e}))),v=s.withType("ended").withLatestFrom(r,((e,t)=>{var{duration:r}=t;return{event:"video-complete",videoSecondsWatched:r}})),g=s.withType("fullscreenchange").mapTo({event:"video-full-screen"}),y=a.withLatestFrom(r,((e,t)=>{var{duration:r}=t;return{event:"video-progress",videoPercent:25*e,videoSecondsWatched:Math.floor(r/4*e)}})),b=r.mapTo({event:"video-loaded"}),_=i.withLatestFrom(h,((e,t)=>({event:"video-scrub",videoPercent:25*t}))),T=c.withLatestFrom(h,((e,t)=>({event:"video-share",videoPercent:25*t,videoShareType:e}))),w=di.merge(t,r,d.map((e=>({videoView:e})))).scan(((e,t)=>Ri(Ri({},e),t))).map(ji);return{library$:o,events$:di.merge(p,f,m,v,g,b,y,T,_).withLatestFrom(w,n.pluck(bi),((e,t,r)=>({eventData:Ri(Ri({},e),t),canRunBasedOnConsent:r}))).filter((e=>e.canRunBasedOnConsent)).map((e=>e.eventData))}}function Fi(e){var{moatLibrary$:t}=e;return{library$:t,events$:di.never()}}var $i={1:"AdVideoFirstQuartile",2:"AdVideoMidpoint",3:"AdVideoThirdQuartile"};function Bi(e){var{analyticsVolume$:t,canRunBasedOnConsent$:r,moatContentLibrary$:n,playerEvent$:i,quartile$:o,videoStart$:s,volume$:a}=e;return{library$:n,events$:di.merge(i.withType("ended").mapTo("AdVideoComplete"),i.withType("pause").mapTo("AdVideoPaused"),i.withType("play").mapTo("AdVideoPlaying"),o.map((e=>$i[e])),s.mapTo("AdVideoStart"),a.mapTo("AdVideoVolumeChange")).withLatestFrom(t,r.pluck(bi),((e,t,r)=>({eventData:{type:e,adVolume:t},canRunBasedOnConsent:r}))).filter((e=>e.canRunBasedOnConsent)).map((e=>e.eventData))}}function Vi(e){var t=e.sources&&e.sources.filter((e=>{var{type:t}=e;return"video/mp4"===t}))[0],r=t?t.src:"";return{adLoadType:"2",airdate:e.premiere_date,assetid:e.id,isfullepisode:"y",length:e.duration,mediaUrl:r,program:e.series_title||e.title,title:e.title,type:"content"}}function qi(e){if(e)return{assetId:e.adId,type:"preroll"}}function Hi(e){var{ad$:t,analyticsPause$:r,currentVideo$:n,canRunBasedOnConsent$:i,loadVideoId$:o,nielsenLibrary$:s,playerEvent$:a}=e,c=n.map(Vi),u=t.map(qi),l=a.withType("currentTime").map((e=>{var{value:t}=e;return Math.floor(t)})).distinctUntilChanged().filter((e=>e>0)).share(),d=r.merge(a.withType("dfp-ad-paused"),o).withLatestFrom(l,((e,t)=>({type:"stop",data:t}))),h=a.withType("ended").withLatestFrom(l,((e,t)=>({type:"end",data:t}))),p=l.map((e=>({type:"setPlayheadPosition",data:e}))),f=n.switchMapTo(a.withType("playing").take(1)).withLatestFrom(c,((e,t)=>({type:"loadMetadata",data:t}))),m=a.withType("dfp-ad-loaded").withLatestFrom(u,((e,t)=>({type:"loadMetadata",data:t})));return{library$:s,events$:di.merge(h,m,f,p,d).withLatestFrom(i.pluck(gi),((e,t)=>({eventData:e,canRunBasedOnConsent:t}))).filter((e=>e.canRunBasedOnConsent)).map((e=>e.eventData))}}function Wi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wi(Object(r),!0).forEach((function(t){Gi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ki=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:di.of({});return r=>r.withLatestFrom(t,((t,r)=>({event:t,category:e,meta:zi(zi({},r),t.meta||{})})))},Xi=e=>{var{cneError$:t,currentVideo$:r,playerEvent$:n,quartile$:i,videoView$:o,videoStart$:s}=e,a=n.withType("ended").mapTo({type:"Content End"}),c=i.map((e=>({type:"".concat(25*e,"% Quartile")}))),u=s.mapTo({type:"Content Start"}),l=function(e){var{currentVideo$:t,videoStart$:r,playerEvent$:n}=e,i=n.withType("dfp-ad-started");return t.switchMapTo(di.merge(r,i).take(1)).mapTo({type:"Any Start"})}({currentVideo$:r,playerEvent$:n,videoStart$:s}),d=t.mapTo({type:"Video Error"}),h=o.map((e=>({videoViews:e}))),p=Ki("Video View",h);return di.merge(u,a,d,c,l).let(p)},Yi=e=>{var{cneOverlay$:t,playerEvent$:r}=e,n=r.withType("fullscreenchange").mapTo({type:"Full Screen"}),i=t.filter((e=>"share"===e.type)).mapTo({type:"Share Panel"}),o=Ki("Player Chrome Event");return di.merge(n,i).let(o)},Qi=e=>{var{analyticsPause$:t,analyticsResume$:r,adDisplaying$:n,currentVideo$:i,documentHidden$:o,mute$:s,muteToggle$:a,playerEvent$:c,seekEnd$:u,videoStart$:l,viewportPercentage$:d,viewportStatus$:h}=e,p=a.withLatestFrom(s,n,((e,t,r)=>({type:(t?"Mute ":"Unmute ")+(r?"Ad":"Video")}))),f=c.withType("ready").take(1).mapTo({type:"Player Loaded"}),m=h.filter((e=>"FULLY_IN_VIEWPORT"===e)).mapTo({type:"Player In Viewport"}),v=function(e){var{currentVideo$:t,documentHidden$:r,videoStart$:n,viewportPercentage$:i}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:di.timer(2e3);return t.switchMap((e=>{var{id:t}=e;return n.mapTo(t)})).switchMap((e=>i.filter((e=>e>.5)).startWith(!0).mergeMapTo(o).mapTo(e))).filterByLatestFrom(i,r,((e,t,r)=>!r&&t>.5)).distinctUntilChanged().mapTo({type:"2 Sec In-View Moat"})}({currentVideo$:i,documentHidden$:o,videoStart$:l,viewportPercentage$:d}),g=Ki("Player Event");return di.merge(t.mapTo({type:"Pause Video"}),r.mapTo({type:"Resume Video"}),m,p,f,u.mapTo({type:"Scrub"}),v).let(g)},Ji=(e,t)=>{var{playerEvent$:r,videoView$:n,documentHidden$:i,viewportPercentage$:o}=e,{adViewableTimerOverride:s}=t,a=r.withType("dfp-ad-requested").mapTo({type:"Ad Call Made"}),c=r.withType("dfp-ad-complete").mapTo({type:"Ad Complete"}),u=r.withType("dfp-ad-started"),l=u.mapTo({type:"Ad Start"}),d=s||2e3,h=di.timer(d),p=u.switchMap((()=>o.filter((e=>e>.5)).startWith(!0).take(1).mergeMapTo(h))).filterByLatestFrom(o,i,((e,t,r)=>!r&&t>.5)).mapTo({type:"Ad Viewable"}),f=r.withType("dfp-ad-metadata").mapTo({type:"Ad Metadata"}),m=r.withType("dfp-ad-loaded").mapTo({type:"Ad Loaded"}),v=r.withType("dfp-ad-error").filter((e=>e.adError)).map((e=>({type:"DFP Ad Error ".concat(e.adError.type,", ").concat(e.adError.code,", ").concat(e.adError.message,", ").concat(e.adError.innerError)}))),g=di.merge(r.withType("dfp-ad-firstquartile").mapTo({type:"Ad 1st Quartile"}),r.withType("dfp-ad-midpoint").mapTo({type:"Ad 2nd Quartile"}),r.withType("dfp-ad-thirdquartile").mapTo({type:"Ad 3rd Quartile"})),y=di.merge(r.withType("dfp-ad-paused").mapTo({type:"Ad Paused"}),r.withType("dfp-ad-resume").mapTo({type:"Ad Resumed"})),b=r.withType("dfp-ad-skipped").mapTo({type:"Ad Skipped"}),_=n.map((e=>({videoViews:e}))),T=Ki("Video Ad",_);return di.merge(a,c,v,m,f,y,g,b,l,p).let(T)},Zi=(e,t)=>{var{playerEvent$:r,isLiveVideo$:n,contentResuming$:i,adDisplaying$:o,timer$:s=di.timer(0,1e3)}=e,{heartbeatTimeIntervalOverride:a}=t,c=di.merge(r.withType("play").mapTo(!0),i.mapTo(!0),r.withType("pause").mapTo(!1),o.mapTo(!1)),u=n.switchMap((e=>{var t=a||(e?1e4:3e4);return s.takeUntil(r.withType("ended")).filterByLatestFrom(c,((e,t)=>t)).scan((e=>e+1),0).filter((r=>(e&&30===r&&(t=3e4),r%(t/1e3)==0))).map((e=>({type:e})))})),l=Ki("Video Heartbeat");return di.merge(u).let(l)};function eo(e){var{heartbeatTimeIntervalOverride:t,adViewableTimerOverride:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{ad$:n,adBlocked$:i,adUnitPath$:o,config$:s,currentVideo$:a,canRunBasedOnConsent$:c,documentHidden$:u,infinityId$:l,mute$:d,playsOnPage$:h,prerollPlayed$:p,sparrowLibrary$:f,trackSparrowIntent$:m,videoStartType$:v,viewportStatus$:g,videoView$:y,widthHeight$:b}=e;return{library$:f,events$:di.merge(Yi(e),Qi(e),m,Ji(e,{adViewableTimerOverride:r}),Xi(e),Zi(e,{heartbeatTimeIntervalOverride:t})).withLatestFrom(n,i,o,s,a,u,l.startWith(null),d,h,p,v,y,g.startWith(null),b,((e,t,r,n,i,o,s,a,c,u,l,d,h,p,f)=>{var{category:m,event:v,meta:g}=e;return{ad:t,adBlocked:r,adUnitPath:n,category:m,config:i,dimensions:f,documentHidden:s,infinityId:a,meta:g,mute:c,playsOnPage:u,prerollPlayed:l,type:v.type,video:o,videoStartType:d,videoView:h,viewportStatus:p}})).withLatestFrom(c.pluck(bi),((e,t)=>({eventData:e,canRunBasedOnConsent:t}))).filter((e=>e.canRunBasedOnConsent)).map((e=>e.eventData))}}function to(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ro(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?to(Object(r),!0).forEach((function(t){no(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):to(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function no(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var io=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:di.of({});return r=>r.withLatestFrom(t,((t,r)=>({event:t,category:e,meta:ro(ro({},r),t.meta||{})})))},oo=e=>{var{cneError$:t,currentVideo$:r,playerEvent$:n,quartile$:i,videoView$:o,videoStart$:s}=e,a=n.withType("ended").mapTo({type:"ended"}),c=i.mapTo({type:"progress_change"}),u=s.mapTo({type:"play"}),l=function(e){var{currentVideo$:t,videoStart$:r,playerEvent$:n}=e,i=n.withType("dfp-ad-started");return t.switchMapTo(di.merge(r,i).take(1)).mapTo({type:"any_play"})}({currentVideo$:r,playerEvent$:n,videoStart$:s}),d=t.mapTo({type:"load_error"}),h=o.map((e=>({videoViews:e}))),p=io("video_player_event",h);return di.merge(u,a,d,c,l).let(p)},so=e=>{var{cneOverlay$:t,playerEvent$:r}=e,n=r.withType("fullscreenchange").mapTo({type:"fullscreen_change"}),i=t.filter((e=>"share"===e.type)).mapTo({type:"share_click"}),o=io("video_player_event");return di.merge(n,i).let(o)},ao=e=>{var{analyticsPause$:t,analyticsResume$:r,currentVideo$:n,documentHidden$:i,mute$:o,muteToggle$:s,playerEvent$:a,seekEnd$:c,videoStart$:u,viewportPercentage$:l,viewportStatus$:d}=e,h=s.withLatestFrom(o).mapTo({type:"volume_change"}),p=a.withType("ready").take(1).mapTo({type:"loaded"}),f=d.filter((e=>"FULLY_IN_VIEWPORT"===e)).mapTo({type:"inview_change"}),m=function(e){var{currentVideo$:t,documentHidden$:r,videoStart$:n,viewportPercentage$:i}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:di.timer(2e3);return t.switchMap((e=>{var{id:t}=e;return n.mapTo(t)})).switchMap((e=>i.filter((e=>e>.5)).startWith(!0).mergeMapTo(o).mapTo(e))).filterByLatestFrom(i,r,((e,t,r)=>!r&&t>.5)).distinctUntilChanged().mapTo({type:"moat_viewable"})}({currentVideo$:n,documentHidden$:i,videoStart$:u,viewportPercentage$:l}),v=io("video_player_event");return di.merge(t.mapTo({type:"paused"}),r.mapTo({type:"resume"}),f,h,p,c.mapTo({type:"scrub"}),m).let(v)},co=(e,t)=>{var{playerEvent$:r,videoView$:n,documentHidden$:i,viewportPercentage$:o}=e,{adViewableTimerOverride:s}=t,a=r.withType("dfp-ad-requested").mapTo({type:"vmap_requested"}),c=r.withType("dfp-ad-complete").mapTo({type:"ended"}),u=r.withType("dfp-ad-started"),l=u.mapTo({type:"play"}),d=s||2e3,h=di.timer(d),p=u.switchMap((()=>o.filter((e=>e>.5)).startWith(!0).take(1).mergeMapTo(h))).filterByLatestFrom(o,i,((e,t,r)=>!r&&t>.5)).mapTo({type:"ad_viewable"}),f=r.withType("dfp-ad-metadata").mapTo({type:"ad_metadata"}),m=r.withType("dfp-ad-loaded").mapTo({type:"loaded"}),v=r.withType("dfp-ad-error").filter((e=>e.adError)).map((()=>({type:"ad_error"}))),g=di.merge(r.withType("dfp-ad-firstquartile").mapTo({type:"progress_change"}),r.withType("dfp-ad-midpoint").mapTo({type:"progress_change"}),r.withType("dfp-ad-thirdquartile").mapTo({type:"progress_change"})),y=di.merge(r.withType("dfp-ad-paused").mapTo({type:"paused"}),r.withType("dfp-ad-resume").mapTo({type:"resume"})),b=r.withType("dfp-ad-skipped").mapTo({type:"ad_skipped"}),_=n.map((e=>({videoViews:e}))),T=io("video_ad_player_event",_);return di.merge(a,c,v,m,f,y,g,b,l,p).let(T)},uo=(e,t)=>{var{playerEvent$:r,isLiveVideo$:n,contentResuming$:i,adDisplaying$:o,timer$:s=di.timer(0,1e3)}=e,{heartbeatTimeIntervalOverride:a}=t,c=di.merge(r.withType("play").mapTo(!0),i.mapTo(!0),r.withType("paused").mapTo(!1),o.mapTo(!1)),u=n.switchMap((()=>{var e=a||5e3;return s.takeUntil(r.withType("ended")).filterByLatestFrom(c,((e,t)=>t)).scan((e=>e+1),0).filter((t=>(10===t&&(e=1e4),t%(e/1e3)==0))).mapTo({type:"video_ping"})})),l=io("video_player_event");return di.merge(u).let(l)};function lo(e){var{heartbeatTimeIntervalOverride:t,adViewableTimerOverride:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{ad$:n,adBlocked$:i,adUnitPath$:o,analyticsVolume$:s,config$:a,currentTimeInMs$:c,currentVideo$:u,canRunBasedOnConsent$:l,documentHidden$:d,infinityId$:h,mute$:p,percentComplete$:f,playsOnPage$:m,prerollPlayed$:v,snowplowLibrary$:g,trackSnowplowIntent$:y,videoStartType$:b,viewportPercentage$:_,videoView$:T,widthHeight$:w}=e;return{library$:g,events$:di.merge(so(e),ao(e),y,co(e,{adViewableTimerOverride:r}),oo(e),uo(e,{heartbeatTimeIntervalOverride:t})).withLatestFrom(n,i,o,s,a,c,u,d,h.startWith(null),p,f,m,v,b,T,_,w,((e,t,r,n,i,o,s,a,c,u,l,d,h,p,f,m,v,g)=>{var{category:y,event:b,meta:_}=e;return{ad:t,adBlocked:r,adUnitPath:n,category:y,config:o,currentTimeInMs:s,dimensions:g,documentHidden:c,infinityId:u,meta:_,mute:l,percentComplete:d,playsOnPage:h,prerollPlayed:p,type:b.type,video:a,videoStartType:f,videoView:m,viewportPercentage:v,volume:i}})).withLatestFrom(l.pluck(bi),((e,t)=>({eventData:e,canRunBasedOnConsent:t}))).filter((e=>e.canRunBasedOnConsent)).map((e=>e.eventData))}}function ho(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function po(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ho(Object(r),!0).forEach((function(t){fo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ho(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ad||{};return{creative_id:t.creativeId?+t.creativeId:null,line_item_id:t.dfpLineItem?+t.dfpLineItem:null,is_empty:!1,slot:{ad_unit_path:e.adUnitPath}}}function vo(e){var{canRunBasedOnConsent$:t,permutiveLibrary$:r,playerEvent$:n,widthHeight$:i}=e,o=n.withType("dfp-ad-started").map((e=>po(po({},mo(e)),{},{type:"VideoAdRender"}))),s=n.withType("dfp-ad-complete").map((e=>po(po({},mo(e)),{},{type:"VideoAdView"}))),a=n.withType("dfp-ad-click").map((e=>po(po({},mo(e)),{},{type:"VideoAdClick"})));return{library$:r,events$:di.merge(o,s,a).withLatestFrom(i,t.pluck(bi),((e,t,r)=>({eventData:po(po({},e),{},{slot:po(po({},e.slot),{},{slot_element_id:t.targetDiv.id}),height:Math.round(t.height),width:Math.round(t.width)}),canRunBasedOnConsent:r}))).filter((e=>e.canRunBasedOnConsent)).map((e=>e.eventData))}}var go=e=>null!=e&&void 0!==e,yo=(e,t)=>{if(e instanceof Array&&t instanceof Array){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!yo(e[r],t[r]))return!1;return!0}return e===t};function bo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bo(Object(r),!0).forEach((function(t){To(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function To(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wo=e=>e,So=(e,t)=>e.distinctUntilChanged().map((e=>{var t="$"===e.slice(-1)?e.slice(0,-1):e;return e=>r=>_o(_o({},r),{},{[t]:e})})(t)),Co=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wo,r=r=>t(e[r],r,e);return Object.keys(e).map(r)},Eo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Co(e,So);return di.merge(...r).scan(((e,t)=>t(e)),t)},Oo=e=>t=>function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];n.every(e)&&t(...n)},ko=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var o=n;return r=>{var n=t.map((e=>r[e]));yo(n,o)||(o=n,e(...n))}}};function xo(e,t){return e.withLatestFrom(t,((e,t)=>{var{share_links:r,title:n,branded:i,branded_caption:o}=e,{playerConfig:s}=t,{hideHoverTitle:a,hidePosterTitle:c}=s;return{hideHoverTitle:a,hidePosterTitle:c,title:n,url:r?r.url:null,branded:i,branded_caption:o}}))}var Ao=e=>t=>t.withType("volumechange").map((()=>e.volume())).startWith(e.volume()),Po=e=>e.pluck("isContinuousPlay"),Io=(e,t)=>di.merge(t.mapTo(!0),e.mapTo(!1)),Mo=e=>di.merge(e.withType("dfp-ad-loaded").map((e=>{var{ad:t,adUnitPath:r}=e;return{ad:t,adUnitPath:r}})),e.withType("dfp-ad-complete").mapTo(void 0));function Lo(e,t){var{adDisplaying$:r,adFinished$:n,adBlocked$:i,adBlockedUnique$:o,adSkippable$:s,videoIfAdsNotDisabled$:a,analyticsVolume$:c,animatedClipDisplaying$:u,captionsDisplayMode$:l,config$:d,contentResuming$:h,cne360AnimationInterval$:p,cne360CanvasSource$:f,cne360LatLong$:m,cne360MouseActive$:v,cne360MouseDrag$:g,currentTimeInMs$:y,currentVideo$:b,inSyncWithLiveStream$:_,seekLatestAfterPrerollForLive$:T,isCurrentlySticky$:w,isLiveVideo$:S,isPlaying$:C,loading$:E,mute$:O,playerEvent$:k,playlist$:x,showLiveEndCard$:A,showShareDropdown$:P,showPersistentMute$:I,smallLayout$:M,updateMessageOverlay$:L,videoView$:D,videoOrAdStart$:R,videoEndedOrSwitched$:N,widthHeight$:j}=e;return{viewModel$:Eo({adDisplaying$:r,adFinished$:n,adBlocked$:i,adBlockedUnique$:o,videoIfAdsNotDisabled$:a,adSkippable$:s,adUnit$:Mo(k),animatedClipDisplaying$:u,captionsDisplayMode$:l,cne360AnimationInterval$:p,cne360CanvasSource$:f,cne360LatLong$:m,cne360MouseActive$:v,cne360ShowCompass$:Io(b,g),cneVideoTitle$:xo(b,d),contentResuming$:h,currentTime$:y,currentVideo$:b,isContinuousPlay$:Po(d),isFullscreen$:k.withType("fullscreen").pluck("value"),isInSyncWithLiveStream$:_,seekLatestAfterPrerollForLive$:T,isCurrentlySticky$:w,isLiveVideo$:S,isPlaying$:C,loading$:E,messageOverlay$:L,mute$:O,playerType$:d.pluck("playerConfig","playerType"),playlist$:x,showLiveEndCard$:A,showPersistentMute$:I,showShareDropdown$:P,smallLayout$:M,userVolume$:c,videoOrAdStart$:R,videoEndedOrSwitched$:N,viewCount$:D,volume$:Ao(t)(k),widthHeight$:j}).publishBehavior({}).refCount()}}var Do=(e,t,r)=>{var n=((e,t)=>[e._cne&&e._cne[t],e[t]])(e,t);return r?e===e.top?n:[...n,...Do(e.parent,t,r)]:n};var Ro=(e,t,r)=>e.mapTo(!0).merge(t.withType("ended").withLatestFrom(r,((e,t)=>t))).distinctUntilChanged().publishReplay(1).refCount(),No=(e,t)=>e.filterByLatestFrom(t,((e,t)=>!t));function jo(e){var{toggleUserActive$:t,adRestart$:r,captionsDisplayMode$:n,captionsUpdateTextTrackDisplay$:i,closeMessage$:o,cneOverlay$:s,config$:a,currentVideo$:c,enterFullScreen$:u,exitFullScreen$:l,facadeReady$:d,focusChanged$:h,initializeInBandCaptions$:p,infinityId$:f,isLiveVideo$:m,liveLoadingState$:v,loadVideoId$:g,loadCaptions$:y,mouseLeavePlayer$:b,mute$:_,playerEvent$:T,saveSettings$:w,scrub$:S,seekLatest$:C,posterFrame$:E,setTime$:O,settingsMenu$:k,reportUserActivity$:x,settingsSubMenu$:A,shouldPause$:P,mergedPlay$:I,shouldShareVideo$:M,volume$:L,widthHeight$:D}=e,R=function(e){var{config$:t,facadeReady$:r,ready$:n}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=t.map((e=>{var{canAccessParent:t,playerConfig:r}=e;return[r.onReady,t]})).filter((e=>{var[t]=e;return"string"==typeof t})).switchMap((e=>di.from(Do(i,...e)))).distinct().filter((e=>"function"==typeof e));return n.withLatestFrom(r).switchMap((e=>{var[,t]=e;return o.map((e=>({callback:e,facade:t})))}))}({config$:a,facadeReady$:d,ready$:T.withType("ready")});return{adRestart$:r,autoplay$:Ro(g,T,a.pluck("isContinuousPlay")),captionsDisplayMode$:n,captionsUpdateTextTrackDisplay$:i,closeMessage$:o,cneOverlay$:s,currentVideo$:c,enterFullScreen$:u,exitFullScreen$:l,focusChanged$:h,initializeInBandCaptions$:p,infinityId$:f,isLiveVideo$:m,liveLoadingState$:v,loadCaptions$:y,mouseLeavePlayer$:b,mute$:_,onReadyCallback$:R,saveSettings$:w,scrub$:S,seekLatest$:C,posterFrame$:E,setTime$:O,settingsMenu$:k,reportUserActivity$:x,settingsSubMenu$:A,shouldPause$:P,mergedPlay$:I,shouldShareVideo$:M,toggleUserActive$:t,updateScrubVideo$:No(c,a.pluck("isMobile")),volume$:L,widthHeight$:D}}function Uo(e,t){return{cneBeacon:_i(e),cneEvents:Oi(e),cookies:e,comscore:Mi(e),facebook:Li(e),googleAnalytics:Ui(e),moat:Fi(e),moatContent:Bi(e),nielsen:Hi(e),permutive:vo(e),sparrow:eo(e),snowplow:lo(e),view:Lo(e,t),vjs:jo(e)}}function Fo(e){var{library$:t,events$:r}=e;return r.bufferedWith(t,((e,t)=>({event:e,library:t}))).do((e=>{var{event:t,library:r}=e;return r(t)}))}var $o=r(4401),Bo=491;function Vo(e){var{targetDiv:t,width:r}=e,n=(e=>{switch(!0){case e<171:return"small-mini";case e>=171&&e<320:return"extra-small";case e>=320&&e<Bo:return"small";case e>=Bo&&e<800:return"medium";case e>=800&&e<1024:return"large";default:return"extra-large"}})(r);t.setAttribute("data-size",n)}var qo=r(7317).Z,Ho={},Wo=e=>e in Ho?Ho[e]:(qo("could not find localized message for key: "+e),""),zo="cne-360",Go="cne-360-has-dragged",Ko="cne-360-dragging",Xo="cne-skippable",Yo="cne-fullscreen",Qo="cne-insync-live",Jo="cne-is-live",Zo="cne-live-hide-indicator",es="cne-live-ended",ts="cne-loading",rs="cne-resuming",ns="cne-scrubbed",is="cne-scrubbing",os="cne-paused",ss="cne-playing",as=e=>{var{cnePlaylistContainer:t}=e;return(e,r)=>{t&&t.update(e,r)}},cs=e=>t=>{var r=e.el().parentNode;t?r.classList.add(Yo):r.classList.remove(Yo)},us=e=>t=>t?e.addClass(Qo):e.removeClass(Qo),ls=e=>()=>{e.trigger("intent:seek-latest")},ds=e=>(t,r)=>{var{cneMessage:n}=e;t.projection_type_360&&!r?n.showMessage({message:Wo("cne-support-360-message"),buttonText:Wo("cne-support-360-button-text"),buttonIntent:"intent:show-360-message-overlay"}):n.hideMessage()},hs=e=>t=>{e.el_&&(t?e.addClass(Jo):e.removeClass(Jo))},ps=e=>t=>{var{controlBar:{cneLiveIndicator:r}}=e;!t.live_metadata||(t.live_metadata.is_currently_broadcasting?(r.enable(),e.removeClass(Zo)):(r.disable(),e.addClass(Zo)))},fs=e=>t=>{e.el_&&(t?(e.addClass(ss),e.removeClass(os)):(e.addClass(os),e.removeClass(ss)))},ms=e=>t=>{e.el_&&e.el_.parentNode.classList[t?"add":"remove"]("cne-sticky")},vs=e=>t=>{e.el_&&[ts,is,ns].forEach((r=>{t.indexOf(r)>-1?e.addClass(r):e.removeClass(r)}))},gs=e=>t=>{e.update(t)},ys=e=>t=>{t?e.addClass(Ko):e.removeClass(Ko)},bs=e=>t=>{Vo(t),e.cne360Container.updateSize(t)},_s=e=>t=>{go(t)&&(t?e.addClass(es):e.removeClass(es))},Ts=e=>t=>{var{persistentShare:{shareDropdown:r}}=e;r.update(t)},ws=e=>t=>{t.share_links?e.show():e.hide()},Ss=e=>t=>{t||e.addClass("cne-non-continuous")},Cs=e=>()=>e.render(),Es=e=>t=>{e.updateSrc(t)},Os=e=>{var{cne360Compass:t,cne360Container:r}=e;return e=>{var{long:n,phi:i,theta:o}=e;go(t)&&go(r)&&(t.updateRotation(n),r.updatePhiTheta(i,o))}},ks=e=>t=>{e.setAdUnit(t.adUnitPath)},xs=e=>t=>{t.share_links&&e.setVideo(t)},As=e=>t=>{var{url:r}=t;r&&e.setVideo(t)},Ps=e=>t=>{var r=!!t.live_metadata;e&&r&&e.update(t)},Is=e=>t=>{var{parentNode:r}=e.el()||{};t.projection_type_360?r.classList.add(zo):r.classList.remove(zo)},Ms=e=>t=>e.update(t),Ls=e=>t=>{var{adBlocked:r}=t;return!1!==r&&e.removeCueContainer()},Ds=e=>t=>t.cue_points&&t.cue_points.length&&e.addCueIndicators(t),Rs=e=>t=>t&&e.updateCuePostMidroll(t),Ns=e=>t=>t?e.addClass(Go):e.removeClass(Go),js=e=>t=>e.update(t),Us=e=>t=>e.update(t),Fs=e=>t=>{var{adContainer:r,controlBar:{progressControl:{seekBar:n}}}=e;n.allowTabFocus(!t),r.updateFocusable(t)},$s=e=>t=>t?e.addClass(Xo):e.removeClass(Xo),Bs=e=>t=>e.update(t),Vs=e=>()=>e.addClass("cne-has-started"),qs=e=>t=>{var{controlBar:{cneVolumeAlert:r}}=e;r.update(t)},Hs=e=>t=>{e.controlBar.updateTabOrder(t)},Ws=e=>t=>{t?e.addClass(rs):e.removeClass(rs)};const zs=function(e,t){var{viewModel$:r}=e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$o.animationFrame,{cneAnimatedClip:i,cneBigPlayTitle:o,cneVideoTitle:s,controlBar:a,cneOverlay:c,cne360Container:u,persistentMute:l,persistentShare:d}=t,{cneMessageOverlay:h,cneLiveOverlay:p,shareOverlay:{shareEmbed:f,shareUrl:m}}=c,{progressControl:{seekBar:v}}=a;return r.sampleTime(0,n).do(ko("adDisplaying")(Oo(go)(Fs(t)))).do(ko("adSkippable")(Oo(go)($s(t)))).do(ko("animatedClipDisplaying")(Oo(go)(js(i)))).do(ko("adUnit")(Oo(go)(ks(f)))).do(ko("cne360AnimationInterval")(Cs(u))).do(ko("cne360CanvasSource")(Es(u))).do(ko("cne360LatLong")(Oo(go)(Os(t)))).do(ko("cne360MouseActive")(Oo(go)(ys(t)))).do(ko("cne360ShowCompass")(Oo(go)(Ns(t)))).do(ko("cneVideoTitle")(Oo(go)(Us(o)))).do(ko("cneVideoTitle")(Oo(go)(Ms(s)))).do(ko("videoIfAdsNotDisabled")(Oo(go)(Ds(v)))).do(ko("adFinished")(Oo(go)(Rs(v)))).do(ko("adBlockedUnique")(Oo(go)(Ls(v)))).do(ko("videoEndedOrSwitched")(Oo(go)(Ls(v)))).do(ko("currentVideo","is360Supported")(Oo(go)(ds(t)))).do(ko("currentVideo")(Oo(go)(Is(t)))).do(ko("currentVideo")(Oo(go)(Ps(p)))).do(ko("currentVideo")(Oo(go)(ps(t)))).do(ko("currentVideo")(Oo(go)(xs(f)))).do(ko("currentVideo")(Oo(go)(As(m)))).do(ko("currentVideo")(Oo(go)(ws(d)))).do(ko("loading")(Oo(go)(vs(t)))).do(ko("isContinuousPlay")(Ss(t))).do(ko("isFullscreen")(cs(t),!1)).do(ko("isInSyncWithLiveStream")(us(t))).do(ko("seekLatestAfterPrerollForLive")(ls(t))).do(ko("isLiveVideo")(hs(t))).do(ko("isPlaying")(Oo(go)(fs(t)))).do(ko("isCurrentlySticky")(Oo(go)(ms(t)))).do(ko("messageOverlay")(Oo(go)(gs(h)))).do(ko("currentVideo","playlist")(as(t))).do(ko("showLiveEndCard")(_s(t))).do(ko("showPersistentMute")(Bs(l))).do(ko("showShareDropdown")(Ts(t))).do(ko("videoOrAdStart")(Oo(go)(Vs(t)))).do(ko("userVolume")(Oo(go)(qs(t)))).do(ko("widthHeight")(Oo(go)(bs(t)))).do(ko("contentResuming")(Oo(go)(Ws(t)))).do(ko("smallLayout")(Oo(go)(Hs(t))))};var Gs,Ks=window.navigator&&window.navigator.userAgent||"",Xs=/Android/i.test(Ks),Ys=(/Edge/i.test(Ks),/iPad/i.test(Ks)),Qs=/iPhone/i.test(Ks)&&!Ys,Js=/iPod/i.test(Ks),Zs=Qs||Ys||Js,ea=(Gs=Ks.match(/OS (\d+)_/i))&&Gs[1]?Gs[1]:null,ta="";function ra(){return ta.length>0?ta:ta=Ks}function na(){return Zs||Xs}function ia(){var e=ra();return/safari\//i.test(e)&&!/chrom/i.test(e)}var oa=function(){var e=0;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName){var r=navigator.userAgent;null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(r)&&(e=parseFloat(RegExp.$1))}return e}();function sa(){return Zs}function aa(e){var t=e.map((e=>e?parseInt(e):0));return 1e4*t[0]+100*t[1]+t[2]}var ca,ua=!(oa||function(e){var t=/android[^\d]*(\d*)\.(\d*)\.?(\d*)?/i.exec(ra());if(!t||!t[1])return!1;var r=aa(e.split("."));return aa(t.splice([1]))<r}("4.4.4")||(ca=ra(),/android/i.test(ca)&&/aft[a-z]?\sbuild/i.test(ca)));const la=ua;var da=new Set(["application/x-mpegURL","application/vnd.apple.mpegURL","audio/x-mpegURL"]);function ha(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:la;if(!t){var r=e.filter((e=>{var{type:t}=e;return!da.has(t)}));return r}return e}var pa=r(90);function fa(e){var{escape:t=!0,removeNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t?encodeURIComponent:e=>e;return Object.keys(e).map((t=>r&&null==e[t]?null:"".concat(n(t),"=").concat(n(e[t])))).filter(Boolean).join("&")}function ma(e){var t,{live_metadata:r}=e;return r&&(t=(0,pa.Z)(r.url)),!(!t||!t.searchParams.get("start"))}function va(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ga(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?va(Object(r),!0).forEach((function(t){ya(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):va(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ya(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ba(e){return t=>{var r=fa({videoIndex:e,requester:"oo"});return e++,t.map((e=>ga(ga({},e),{},{src:e.src.includes("?")?e.src.concat("&",r):e.src.concat("?",r)})))}}function _a(e){for(var t=document.activeElement;e&&t&&"BODY"!==t.tagName;){if(t.id===e)return!0;t=t.parentNode}return!1}var Ta={facebook:"height=400,width=640,scrollbars=no",twitter:"height=450,width=550"},wa="height=400,width=600";function Sa(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{_openLink:n=Ca,_openEmail:i=Ea}=r,{share_links:o}=e,s=o[t];if("email"===t)i(s);else{var a=Ta[t]||wa;n(s,"share",a)}}function Ca(e,t,r){window.open(e,t,r)}function Ea(e){window.open(e)}var Oa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return["subtitles","captions"].includes(e.kind)&&void 0===e.track};function ka(e){var t=(e.remoteTextTracks().tracks_||[]).find((e=>Oa(e)));t&&e.trigger("cne-texttrackadded",t),e.remoteTextTracks().on("addtrack",(t=>{var{track:r}=t;Oa(r)&&e.trigger("cne-texttrackadded",r)})),e.textTracks().on("addtrack",(t=>{var{track:r}=t;e.tech_.featuresNativeTextTracks&&Oa(r)&&(e.cneTextTrackDisplay.show(),e.tech_.emulateTextTracks(),e.trigger("cne-texttrackadded",r))}))}var xa={disabled:"cne-captions-disabled",hidden:"cne-captions-off",showing:"cne-captions-on"};function Aa(e,t){e.remoteTextTracks()&&e.remoteTextTracks().tracks_.forEach((t=>{Oa(t)||e.removeRemoteTextTrack(t)}));var r=e.remoteTextTracks().tracks_.length||!!e.textTracks().tracks_.find((e=>Oa(e)));if(t&&t.vtt){var n=e.addRemoteTextTrack({id:"player-captions",src:t.vtt.src,kind:"captions",srclang:"en",label:Wo("cne-player-caption-label"),default:!0},!1);e.trigger("cne-texttrackadded",n)}else r||e.trigger("cne-texttrackadded",null)}function Pa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ia(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pa(Object(r),!0).forEach((function(t){Ma(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ma(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var La=e=>{var{callback:t,facade:r}=e;return t(r)},Da=e=>t=>{var{action:r,video:n}=t;return e(n,r)},Ra=e=>()=>e.dfp.restartAd(),Na=e=>t=>e.autoplay(t),ja=e=>t=>e.dfp.video(t),Ua=e=>t=>{var{width:r,height:n,fullscreen:i}=t,o=i?"fullscreen":"normal";e.dfp.resize(r,n,o)},Fa=e=>t=>{e.trigger("player-set-src"),e.src(t)},$a=e=>t=>{e.muted(t),e.dfp.mutedConfig(t)},Ba=e=>t=>{var{level:r}=t;return e.volume(r)},Va=e=>t=>e.currentTime(t),qa=e=>t=>!!e.el_&&e.poster(t),Ha=e=>t=>{var{isPlaying:r,hasReplayParams:n}=t,i=e.seekable();i.length&&(e.currentTime()<i.end(0)&&!n&&e.currentTime(i.end(0)),r||e.play())},Wa=e=>()=>e.requestFullscreen(),za=e=>()=>e.exitFullscreen(),Ga=e=>()=>{e.paused()&&(e.play(),e.trigger("_coordinator:play"))},Ka=e=>()=>{e.paused()||(e.pause(),e.trigger("_coordinator:pause"))},Xa=e=>t=>{var{captions:r,displayMode:n}=t;r&&(r.mode=n),e.controlBar.cneCaptionsButton.update(n),e.cneTextTrackDisplay.updateCaptionsVisibility(n)},Ya=(e,t)=>r=>{e.updateVideo(r),t.updateVideo(r)},Qa=(e,t)=>r=>{e.updatePosition(r),t.updatePosition(r)},Ja=e=>t=>{e.setVideoData&&e.setVideoData({isLive:t})},Za=e=>t=>e.update(t),ec=e=>()=>e.hideMessage(),tc=e=>()=>e.updateDisplay(),rc=e=>t=>e.dfp.infinityId(t),nc=e=>t=>e.saveSettings(t),ic=e=>t=>{e.toggleMenu(t)},oc=e=>t=>{var{menu:r,display:n}=t;e.cneSettingsMenu.toggleSubMenu(r,n)},sc=e=>t=>{t&&e.reportUserActivity()},ac=e=>()=>e.userActive(!e.userActive()),cc=e=>()=>e.userActive(!1),uc=e=>()=>{var{controlBar:{cneSettings:t}}=e,r=function(e){for(var t,r=0;r<e.length;r++)if(_a(e[r].el().id)){t=e[r].name();break}return t}([t]);e.trigger("focusedComponent",r)},lc=e=>t=>{var{loading:r,video:n}=t;r?e.trigger("intent:show-live-waiting-message-overlay",{image:n.brand_image}):e.trigger("intent:close-overlay")};function dc(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sa,{adRestart$:n,autoplay$:i,captionsDisplayMode$:o,captionsUpdateTextTrackDisplay$:s,closeMessage$:a,cneOverlay$:c,currentVideo$:u,enterFullScreen$:l,exitFullScreen$:d,focusChanged$:h,initializeInBandCaptions$:p,infinityId$:f,isLiveVideo$:m,liveLoadingState$:v,loadCaptions$:g,mouseLeavePlayer$:y,mute$:b,onReadyCallback$:_,saveSettings$:T,scrub$:w,seekLatest$:S,posterFrame$:C,setTime$:E,settingsMenu$:O,reportUserActivity$:k,settingsSubMenu$:x,shouldPause$:A,mergedPlay$:P,shouldShareVideo$:I,toggleUserActive$:M,updateScrubVideo$:L,volume$:D,widthHeight$:R}=e,{cneOverlay:N,cneMessage:j,controlBar:{cneSettings:U,progressControl:{seekBar:{cneScrubberThumb:F}}},cneTextTrackDisplay:$,cneScrubPoster:B}=t;return di.merge(n.do(Ra(t)),I.do(Da(r)),y.do(cc(t)),b.do($a(t)),D.do(Ba(t)),i.do(Na(t)),s.do(tc($)),u.do(ja(t)).map((e=>{var{sources:t}=e;return t})).map((e=>ha(e))).map(ba(0)).do(Fa(t)).withLatestFrom(b,((e,t)=>t)).do($a(t)),l.do(Wa(t)),d.do(za(t)),f.do(rc(t)),_.do(La),P.do(Ga(t)),A.do(Ka(t)),w.do(Qa(F,B)),S.withLatestFrom(u,((e,t)=>{var{live_metadata:r}=t;return{isPlaying:e,live_metadata:r}})).map((e=>Ia(Ia({},e),{},{hasReplayParams:ma(e)}))).do(Ha(t)),E.do(Va(t)),C.do(qa(t)),M.do(ac(t)),c.do(Za(N)),a.do(ec(j)),R.do(Ua(t)),v.do(lc(t)),m.do(Ja($)),g.do((e=>Aa(t,e))),p.do((()=>ka(t))),o.do(Xa(t)),T.do(nc(U)),O.do(ic(U)),x.do(oc(U)),k.do(sc(t)),L.do(Ya(F,B)),h.do(uc(t))).mapTo(t).distinctUntilChanged()}var hc="cneplayer";function pc(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,n="";if(r){var i=new Date;i.setTime(i.getTime()+24*r*60*60*1e3),n="; expires="+i.toGMTString()}document.cookie=encodeURIComponent(hc+e)+"="+encodeURIComponent(t)+n+"; path=/"}function fc(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hc,r=encodeURIComponent(t+e)+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(r))return decodeURIComponent(o.substring(r.length,o.length))}return null}var mc="count";function vc(){var e=fc(mc),t=parseInt(e)||0;return pc(mc,t+1)}var gc=e=>t=>{var{level:r}=t;e("volume",r)},yc=e=>t=>{e("muted",t?1:0)},bc=e=>t=>{"disabled"!==t.displayMode&&e("captions",t.displayMode||"hidden")};const _c=function(e){var{mute$:t,volume$:r,videoView$:n,captionsDisplayMode$:i,playerEvent$:o}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pc,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vc,c=o.withType("playing").take(1);return di.merge(t.skipUntil(c).do(yc(s)),r.skipUntil(c).do(gc(s)),n.do(a),i.skipUntil(c).do(bc(s)))};function Tc(e,t){var{cneBeacon:r,cneEvents:n,cookies:i,comscore:o,facebook:s,googleAnalytics:a,moat:c,moatContent:u,permutive:l,sparrow:d,snowplow:h,view:p,vjs:f}=e;return{cneBeacon$:Fo(r),cneEventDriver$:Fo(n),comscore$:Fo(o),cookies$:_c(i),facebookPixel$:Fo(s),gooleAnalytics$:Fo(a),moat$:Fo(c),moatContent$:Fo(u),sparrow$:Fo(d),snowplow$:Fo(h),permutive$:Fo(l),videojs$:dc(f,t),view$:zs(p,t)}}function wc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return di.fromEvent(e,"visibilitychange").share().map((()=>e.hidden)).startWith(e.hidden)}function Sc(e,t){return di.from(t).mergeMap((t=>di.fromEvent(e,t))).share()}function Cc(e,t){return di.fromEventPattern((r=>{e.on(t,r)}),(r=>{e.off(t,r)})).share()}function Ec(e){var t;return{documentHidden$:wc(),windowEvent$:di.merge((t=Sc(window.top,["scroll","resize"]),e.switchMap((e=>{var{canAccessParent:r}=e;return r?t:di.never()}))),Sc(window,["error","mousemove","mouseup"])).share()}}function Oc(e,t){return e.map((e=>{var r=t.duration();return{type:"percentComplete",value:r?e/r:0}})).startWith({type:"percentComplete",value:0})}const kc={100:"VAST_MALFORMED_RESPONSE",101:"VAST_SCHEMA_VALIDATION_ERROR",102:"VAST_UNSUPPORTED_VERSION",200:"VAST_TRAFFICKING_ERROR",201:"VAST_UNEXPECTED_LINEARITY",202:"VAST_UNEXPECTED_DURATION_ERROR",300:"VAST_WRAPPER_ERROR",301:"VAST_LOAD_TIMEOUT",302:"VAST_TOO_MANY_REDIRECTS",303:"VAST_NO_ADS_AFTER_WRAPPER",400:"VIDEO_PLAY_ERROR",402:"VAST_MEDIA_LOAD_TIMEOUT",403:"VAST_LINEAR_ASSET_MISMATCH",405:"VAST_PROBLEM_DISPLAYING_MEDIA_FILE",500:"OVERLAY_AD_PLAYING_FAILED",501:"NONLINEAR_DIMENSIONS_ERROR",502:"OVERLAY_AD_LOADING_FAILED",503:"VAST_NONLINEAR_ASSET_MISMATCH",602:"COMPANION_REQUIRED_ERROR",603:"COMPANION_AD_LOADING_FAILED",900:"UNKNOWN_ERROR",901:"VPAID_ERROR",1e3:"IMA_SDK_ERROR_CODE",1005:"FAILED_TO_REQUEST_ADS",1007:"VAST_ASSET_NOT_FOUND",1009:"VAST_EMPTY_RESPONSE",1010:"UNKNOWN_AD_RESPONSE",1011:"UNSUPPORTED_LOCALE",1012:"ADS_REQUEST_NETWORK_ERROR",1013:"INVALID_AD_TAG",1020:"STREAM_INITIALIZATION_FAILED",1021:"ASSET_FALLBACK_FAILED",1101:"INVALID_ARGUMENTS",1105:"INVALID_ADX_EXTENSION",120:"NATIVE_MESSAGE_ERROR"};function xc(e,t,r){if(!t||0==t.length||!r||0==r.length||t.length!==r.length)return e;var n=t.indexOf("GDFP");return n>=0?r[n]:e}var Ac=new Map([["AD_BREAK_READY","dfp-ad-adbreakready"],["AD_CAN_PLAY","dfp-ad-canplay"],["AD_ERROR","dfp-ad-error"],["AD_METADATA","dfp-ad-metadata"],["ALL_ADS_COMPLETED","dfp-ad-alladscompleted"],["CLICK","dfp-ad-click"],["COMPLETE","dfp-ad-complete"],["CONTENT_PAUSE_REQUESTED","dfp-content-pause"],["CONTENT_RESUME_REQUESTED","dfp-content-resume"],["DURATION_CHANGE","dfp-ad-durationchange"],["FIRST_QUARTILE","dfp-ad-firstquartile"],["IMPRESSION","dfp-ad-impression"],["LOADED","dfp-ad-loaded"],["ADS_MANAGER_LOADED","dfp-ads-manager-loaded"],["MIDPOINT","dfp-ad-midpoint"],["PAUSED","dfp-ad-paused"],["RESUMED","dfp-ad-resume"],["SKIPPED","dfp-ad-skipped"],["SKIPPABLE_STATE_CHANGED","dfp-ad-skippablestatechanged"],["STARTED","dfp-ad-started"],["THIRD_QUARTILE","dfp-ad-thirdquartile"],["VOLUME_CHANGED","dfp-ad-volumechange"],["VOLUME_MUTED","dfp-ad-muted"]]),Pc={type:"dfp-ad-requested"},Ic={type:"dfp-ad-timeout"};function Mc(e){var{adsManager$:t,dfpAdEvent$:r,dfpEventTypes$:n,requestAds$:i,adRequestData$:o,timeoutAds$:s,map:a=Ac}=e;return n.switchMap((e=>di.from(a).mergeMap((t=>{var[n,i]=t;return r.withType(e[n]).map((e=>({originalEvent:e,type:i})))})).merge(i.mapTo(Pc)).merge(s.mapTo(Ic)).withLatestFrom(o.pluck("adUnitPath").startWith(null),Dc).withLatestFrom(t.startWith(null),Lc).map(Rc).map(Nc)))}function Lc(e,t){return Object.assign(e,{adsManager:t})}function Dc(e,t){return Object.assign(e,{adUnitPath:t})}function Rc(e){if(!e.originalEvent||"function"!=typeof e.originalEvent.getAd)return e;var t=e.originalEvent.getAd();if(!t||!t.getAdId())return e;var r=t.getAdId(),n=t.getWrapperAdSystems(),i=t.getWrapperAdIds();return Object.assign(e,{ad:{adId:t.getAdId(),advertiser:t.getAdvertiserName(),apiFramework:t.getApiFramework(),contentType:t.getContentType(),creativeadId:t.getCreativeAdId(),creativeId:t.getCreativeId(),description:t.getDescription(),duration:t.getDuration(),isLinear:t.isLinear(),mediaUrl:t.getMediaUrl(),podInfo:t.getAdPodInfo(),wrapperAdIds:t.getWrapperAdIds(),wrapperAdSystems:t.getWrapperAdSystems(),dfpLineItem:xc(r,n,i)}})}function Nc(e){if(!e.originalEvent||"function"!=typeof e.originalEvent.getError)return e;var t=e.originalEvent.getError();return t?Object.assign(e,{adError:{type:t.getType(),code:kc[t.getErrorCode()],message:t.getMessage(),innerError:t.getInnerError()}}):e}function jc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Uc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jc(Object(r),!0).forEach((function(t){Fc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $c=["dispose","ended","error","keyup","fullscreenchange","loadeddata","loadedmetadata","pause","play","playing","useractive","userinactive","emptied","ended","ready","seeked","seeking","timeupdate","volumechange","click","drag","stalled","resize","player-set-src","hls-request-manifest","hls-request-playlist","hls-request-segment-1","adtimeupdate"],Bc=function(e){var t=[];if(!e.next)return t;for(var r=e.next();!1===r.done;r=e.next())t.push(r.value);return t}(Ac.values()).concat(Pc.type).concat(Ic.type);function Vc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$c,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bc,n=Cc(e,t),i=Cc(e,r);e.on("contentcanplay",(()=>{e.currentTime(e.ads.snapshot.currentTime)}));var o=Hc(e,n),s=Wc(e,n.withType("ready")),a=n.withType("error").map((()=>{var t=e.error();return{type:"errorCode",value:t?t.code:0}})),c=Oc(o.pluck("value"),e),u=n.withType("fullscreenchange").map((()=>({type:"fullscreen",value:e.isFullscreen()}))).startWith({type:"fullscreen",value:!1}),l=di.fromEvent(e,"cne-texttrackadded",((e,t)=>({type:"cne-texttrackadded",value:t})));return n.merge(i,o,a,u,c,s,l).map(qc(e)).distinctUntilChanged(((e,t)=>e.type===t.type&&"ended"===t.type))}function qc(e){return t=>{if(t.state)return t;var{state:r}=e.ads||{};return Uc(Uc({},t),{},{state:r})}}function Hc(e,t){return t.withType("timeupdate","adtimeupdate").map((()=>({type:"currentTime",value:e.currentTime()}))).share()}function Wc(e,t){return t.map((()=>e.tech?{type:"tech",value:e.tech({IWillNotUseThisInPlugins:!0})}:""))}class zc{constructor(e){this.getValue=()=>e.getValue()}get view(){return(this.getValue()||{}).view}get player(){return(this.getValue()||{}).videojs}}function Gc(e,t){var r=new zc(e);function n(e){var{[e]:t}=r.view||{};return t}var i={currentTime(t){if(void 0===t)return n("currentTime")||0;e.next({type:"setTime",time:t})},currentVideo:()=>n("currentVideo")||null,dispose(t){t&&r.player.off(),e.next({type:"dispose"})},duration:()=>r.player.duration(),getCuePoints:()=>[],getPlayCount(){return e=fc(mc),parseInt(e)||1;var e},isInterlude:()=>"interlude"===n("playerType"),isLoading:()=>n("loading")||false,isPlaying:()=>n("isPlaying")||false,isPlaylist:()=>"playlist"===n("playerType"),isMuted:()=>n("mute"),load(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){var{player:n}=r;return n.trigger("intent:load-video",{video:{id:t}})}e.next({type:"load",videoId:t})},off(e,t){var{player:n}=r;n.el_&&n.off(e,t)},on(e,t){r.player.on(e,(function(e,r){t(r,e)}))},pause(){e.next({type:"pause"})},play(){e.next({type:"play"})},setAdKeyValues(){},setNextVideo(t){var r="string"==typeof t?{id:t}:t;e.next({type:"nextVideo",video:r})},volume(t){if(void 0===t){var r=n("volume");return parseFloat(r)?r:1}e.next({type:"volume",level:t})},_overrideAutoplay(r,n){((e,t,r)=>{if(!t||t!==e)throw new Error("CNE Player: ".concat(r," is a private method"))})(t,n,"_overrideAutoplay"),e.next({type:"autoplayOverride",data:r})},_onConsentUpdated(t){e.next({type:"consentUpdated",data:t})},_markPersistent(t){e.next({type:"persistent",persistent:t})},_markCurrentlySticky(t){e.next({type:"sticky",isCurrentlySticky:t})},_requestCancelPersist(){r.player.trigger("_coordinator:cancel-persistent")},_trackPlayOnPage(){e.next({type:"play-on-page"})},_trackCNESparrow(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.next({type:"track",data:{category:r,event:{type:t},meta:n}})}};return e.next({type:"ready",facade:i}),i}function Kc(e,t,r){var n=di.fromEvent(e,"intent:show-share").map((()=>({action:"show",type:"share",source:"click"}))),i=di.fromEvent(e,"intent:show-share-keyboard").map((()=>({action:"show",type:"share",source:"keyboard"}))),o=di.fromEvent(e,"intent:show-share-embed").map((()=>({action:"show",type:"embed"}))),s=di.fromEvent(e,"intent:show-share-url").map((()=>({action:"show",type:"url"}))),a=di.fromEvent(e,"intent:show-message-overlay").merge(t,r).map((()=>({action:"show",type:"message"}))),c=[],u=n.merge(i,o,s,a).do((e=>c.push(e)));return di.fromEvent(e,"intent:close-overlay").map((()=>{var e=c.pop();if(e)return{action:"hide",type:e.type}})).filter((e=>!!e)).merge(u).share()}function Xc(e){return di.fromEvent(e,"intent:share",((e,t)=>t.action))}function Yc(e,t){var r=e.withType("dispose"),n=e.withType("ready").pluck("facade"),i=di.fromEvent(t,"intent:enter-fullscreen"),o=di.fromEvent(t,"intent:exit-fullscreen"),s=di.fromEvent(t,"intent:progress-mouse",((e,t)=>t)),a=di.fromEvent(t,"intent:seek-latest"),c=di.fromEvent(t,"intent:seek-start"),u=di.fromEvent(t,"intent:seek-end"),l=e.withType("nextVideo").pluck("video").startWith(!1),d=e.withType("consentUpdated").pluck("data").map((e=>e||{})).startWith({}),h=di.fromEvent(t,"intent:load-video",((e,t)=>t)).map((e=>e.video.id)),p=e.withType("load").pluck("videoId").merge(h),f=e=>{var t=e.target&&e.target.classList;return t&&(t.contains("vjs-tech")||t.contains("click-mask"))},m=di.fromEvent(t.el_,"touchend").filter((e=>f(e)&&"touchend"===e.type)).share(),v=di.fromEvent(t.el_,"mousedown").filter((e=>{var t=1===e.which||e.buttons&&e.buttons<2;return f(e)&&t})).share(),g=v.filter((e=>e.currentTarget.classList.contains("cne-playing"))),y=v.filter((e=>e.currentTarget.classList.contains("cne-paused"))),b=di.fromEvent(t.el_,"mouseleave"),_=t.$(".persistent-share"),T=di.fromEvent(_,"mouseenter"),w=di.fromEvent(_,"mouseleave"),S=e.withType("volume"),C=di.fromEvent(t,"intent:volume-change",((e,t)=>t)),E=S.merge(C).map((e=>{var{level:t=null}=e;return{type:"intent",level:t}})).filter((e=>null!==e)),O=di.fromEvent(t,"intent:mute-toggle",((e,t)=>t)),k=e.withType("setTime").pluck("time"),x=di.fromEvent(t,"keydown").filter((e=>32===e.keyCode&&e.preventDefault())),A=di.fromEvent(t,"keyup").filter((e=>32===e.keyCode)).map((()=>t.paused()?"play":"pause")).merge(x).share(),P=di.fromEvent(t,"keyup").filter((e=>27===e.keyCode)).share(),I=e.withType("play").merge(Cc(t,"intent:play")).merge(y).merge(A.filter((e=>"play"===e))),M=e.withType("pause").merge(Cc(t,["dfp-ad-click","dfp-ad-paused","intent:pause","intent:show-message-overlay"])).merge(g).merge(A.filter((e=>"pause"===e))),L=di.fromEvent(t,"intent:close-message"),D=di.fromEvent(t,"intent:show-360-message-overlay"),R=di.fromEvent(t,"intent:show-live-waiting-message-overlay",((e,t)=>t)).publishReplay(1).refCount(),N=di.fromEvent(t,"intent:toggle-captions"),j=e.withType("autoplayOverride").pluck("data").startWith({override:!1}),U=e.withType("sticky").pluck("isCurrentlySticky").startWith(!1),F=di.fromEvent(t,"intent:save-settings",((e,t)=>t)),$=di.fromEvent(t,"intent:close-settings").mapTo(!1).merge(di.fromEvent(t,"intent:show-settings").mapTo(!0)).merge(P.mapTo(!1)),B=di.fromEvent(t,"intent:hide-settings-submenu",((e,t)=>({menu:t,display:"hide"}))).merge(di.fromEvent(t,"intent:show-settings-submenu",((e,t)=>({menu:t,display:"show"})))),V=di.fromEvent(t,"click").merge(di.fromEvent(t,"keyup").filter((e=>"Tab"===e.key)),di.fromEvent(t,"intent:mute-toggle"),c),q=e.withType("track").map((e=>{var{data:t}=e;return t})),H=e.withType("track-snowplow").map((e=>{var{data:t}=e;return t})),W=e.withType("play-on-page");return{autoplayOverride$:j,closeMessage$:L,cneOverlayIntent$:Kc(t,D,R),dispose$:r,enterFullScreen$:i,exitFullScreen$:o,facadeReady$:n,focusChanged$:V,focusedComponent$:di.fromEvent(t,"focusedComponent",((e,t)=>t)),intentSubject:e,isCurrentlySticky$:U,keepPlaying$:di.fromEvent(t,"intent:keep-playing"),loadVideoId$:p,mouseLeavePlayer$:b,muteToggle$:O,nextVideo$:l,persistentShareEnter$:T,persistentShareLeave$:w,playOnPage$:W,progressMouse$:s,saveSettings$:F,seekStart$:c,seekEnd$:u,seekLatestIntent$:a,setTimeIntent$:k,settingsSubMenuIntent$:B,shareIntent$:Xc(t),shouldPause$:M,shouldPlay$:I,show360MessageOverlayIntent$:D,showLiveWaitingOverlayIntent$:R,toggleCaptionsIntent$:N,touchVideo$:m,toggleSettings$:$,trackSparrowIntent$:q,trackSnowplowIntent$:H,volumeIntent$:E,consentUpdateIntent$:d}}var Qc=e=>{var{adsManager:t}=e;return!!t&&"function"==typeof t.getAdSkippableState&&t.getAdSkippableState()};var Jc=250;const Zc=Number.isFinite||(e=>"number"==typeof e&&window.isFinite(e));function eu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ru(e,t){var{animated_clip_url_mp4:r,animated_clip_url_webm:n,animated_clip_url_high_mp4:i,animated_clip_url_high_webm:o,animated_clip_still:s}=e,{width:a}=t;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(r),!0).forEach((function(t){tu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({action:"show",animated_clip_still:s},a>480?{animated_clip_url_mp4:i,animated_clip_url_webm:o}:{animated_clip_url_mp4:r,animated_clip_url_webm:n})}function nu(e,t){var{animated_clip_url_mp4:r,animated_clip_url_webm:n,animated_clip_still:i,live_metadata:o,projection_type_360:s}=e,{autoplayEnabled:a,playerConfig:c}=t,{hasAnimatedThumb:u}=c;return r&&n&&i&&u&&!o&&!s&&!a}const iu=e=>{if(!/\d+x\d+/i.test(e))return 16/9;var[t,r]=e.split(/x/i),n=parseInt(t)/parseInt(r);return n<3&&n>0?n:16/9};function ou(e){return di.fromEvent(e,"load")}function su(e){var{responseType:t=null,timeout:r=0,withCredentials:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return di.create((i=>{var o=new XMLHttpRequest;o.open("GET",e),o.withCredentials=n,o.responseType=t||"",o.timeout=r,o.onload=function(){this.status>=200&&this.status<300?(i.next({body:this.response,message:this.statusText,status:this.status,success:!0}),i.complete()):i.error(au(e,this.status,this.statusText))},o.onerror=function(){i.error(au(e))},o.ontimeout=function(){i.error(au(e))},o.send()}))}var au=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ajax error";return{message:"".concat(r,". Trying to GET ").concat(e,"."),status:t,success:!1}};var cu,uu=()=>"".concat("//capture.condenastdigital.com/track","?_o=").concat("cne"),lu=/http[s]?:/g,du=/http[s]?/,hu=/&(?:redirect|cr)=http[s]?/,pu=/http[^s]/;function fu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(e){if(!mu(t))return e;if(hu.test(e)){var r=e.match(hu)[0],n=r.replace(du,"https");e=e.replace(r,n)}return e.replace(lu,"https:")}}function mu(e){return!!(e&&e.location&&e.location.protocol)&&!pu.test(e.location.protocol)}function vu(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e)return t&&(e=fu(e)),gu(e)}function gu(e){var t=document.createElement("img");return t.id="cne_"+Math.floor(1e4*Math.random()+1),t.src=e,t}function yu(){if(void 0===cu)try{cu=!!window.top.location.href&&"function"==typeof window.top.addEventListener}catch(e){cu=!1}return cu}function bu(){return yu()?window.top:window}function _u(){return yu()?window.top.location.href:document.referrer}function Tu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Su(e){var{environment:t}=e;Ou.init(t)}function Cu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="".concat(e,": ").concat(t);r=r.substring(0,350),Ou.track("error",r)}function Eu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;Ou.track(e,t,r)}var Ou={init(e){this.baseUrl=uu(),this.ssl=e.ssl,this.location=_u(),this.sessionId=fc("sID",""),this.pageId=fc("pID","")},track(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:vu,i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tu(Object(r),!0).forEach((function(t){wu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({_ts:(new Date).toISOString(),_c:t,_t:e,sID:this.sessionId,pID:this.pageId,pHr:this.location},r);n([this.baseUrl,fa(i)].join("&"),this.ssl)}};var ku=e=>e?decodeURIComponent(e.replace(/%(?![0-9][0-9a-fA-F]+)/g,"%25")):e,xu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.cookie;return e.split(/;\s*/).reduce(((e,t)=>{var[r,n]=t.split("=");try{return Object.assign(e,{[r]:decodeURIComponent(n)})}catch(t){return Object.assign(e,{[r]:ku(n)})}}),{})},Au=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xu(),{pID:t="",sID:r="",CN_sp:n="",CN_xid:i=""}=e,o={baseUrl:uu(),params:{app:"playerservice",cCh:"videos/show",pHr:window.location.href,pID:t,sID:r,uId:n,xid:i}};return()=>o}(),Pu=e=>{var t;try{t=JSON.stringify(e)}catch(e){t=""}return t},Iu=e=>{var{guid:t,canAutoplay:r,interludeFailure:n,pageTemplate:i,url:o,errorData:s}=e,{videoId:a,iu:c,playerType:u}=e.initialPlayerConfig||{};return[a,{canAutoplay:r,guid:t,iu:c,playerType:u,interludeFailure:n,pageTemplate:i,url:o,errorData:s}]};function Mu(e){var{type:t,category:r,message:n}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[o,s]=Iu(i);return{_ts:(new Date).toISOString(),_c:r,_t:t,cId:o,dim1:Pu(s),dim3:n}}var Lu=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Image;return(new t).src=e},Du=function(e){var{type:t,category:r,message:n=""}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{baseUrl:o,params:s}=Au();return Lu([o,fa(s),fa(Mu({type:t,category:r,message:n},i))].join("&"))};class Ru{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.url=t.url||"",this._bodyText=e}text(){return Promise.resolve(this._bodyText)}json(){return this.text().then(JSON.parse)}}function Nu(e){if(!e.ok)throw new Error("API responsed with status code ".concat(e.status));return e}function ju(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{timeout:r,onTimeout:n}=t;return new Promise(((t,i)=>{var o=new XMLHttpRequest,s=()=>i(new TypeError("Network request failed"));o.timeout=r||0,o.onload=()=>{var e={status:o.status,statusText:o.statusText,url:o.responseURL},r="response"in o?o.response:o.responseText;t(new Ru(r,e))},o.onerror=s,o.ontimeout=n?n(i):s,o.open("GET",e),o.send()}))}var Uu=r(7317).Z;var Fu=r(7317).Z;function $u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$u(Object(r),!0).forEach((function(t){Vu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qu(e){var{environment:t,playerConfig:r,referenceWindow:n}=e,{playlist:i}=r;return di.create((e=>{!function(e,t,r){var{fetch:n=window.fetch||ju,_track:i=Du}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.cnsInfo=e.cnsInfo||[],e.cnsInfo.push=o=>{o&&o.sponsoredVideoId&&(e.cnsInfo[0]=o,n("".concat(t,"/next_video/").concat(o.sponsoredVideoId)).then(Nu).then((e=>e.json())).then(r).catch((e=>{var{message:t}=e;Uu("error fetching cnsInfo:",t),i({type:"Fetch Error (Push)",category:"Video Injection",message:t})})))}}(n._cne,t.base_url,(t=>{var{video:r}=t;Fu("late sponsored vid injection:",i),Eu("Push Received (Player)","Video Injection");var n=i.videos.slice();n.splice(1,0,r);var o=Bu(Bu({},i),{},{videos:n});e.next(o)}))}))}var Hu=.95,Wu=.5,zu=.2;function Gu(e){return di.interval(e)}function Ku(e){return{x:void 0!==e.clientX?e.clientX:e.touches[0].clientX,y:void 0!==e.clientY?e.clientY:e.touches[0].clientY,time:Date.now()}}var Xu=300;function Yu(e,t){var r=t?"ad":"video";switch(e){case 1:return"player_".concat(r,"_error_aborted");case 2:return"player_".concat(r,"_error_network");case 3:return"player_".concat(r,"_error_decode");case 4:return"player_".concat(r,"_error_src_not_supported");case 5:return"player_".concat(r,"_error_encrypted");default:return"player_".concat(r,"_error")}}function Qu(e){return[/InvalidStateError\: Failed to execute 'endOfStream' on 'MediaSource'/].some((t=>t.test(e)))}function Ju(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ju(Object(r),!0).forEach((function(t){el(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ju(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function el(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tl=e=>{var{playerConfig:t,environment:r}=e,n=r.base_url,i={playlistId:t.playlist?t.playlist.id:null,adUnitPath:e.adUnitPath,shareToScene:t.shareToScene};return Zu(Zu({},e),{},{fetchVideo:e=>su((e=>"".concat(n,"/next_video/").concat(e,"?").concat(fa(i)))(e)).map((e=>JSON.parse(e.body))).map((e=>{var{video:t}=e;return t}))})},rl=e=>{var{loopVideo:t,playlistId:r}=e.playerConfig;return Zu(Zu({},e),{},{shouldLoop:t&&!r})};function nl(e){return e.config$.switchMap((e=>{var{playerEvent$:t}=e;return e=>t.withType("dfp-ad-requested").pluck("adUnitPath").startWith(null).map((t=>Zu(Zu({},e),{},{adUnitPath:t})))})(e)).switchMap((e=>{var{playerEvent$:t,intentStreams:r}=e;return e=>r.nextVideo$.merge(t.withType("loadedmetadata").mapTo(!1)).map((t=>Zu(Zu({},e),{},{nextVideoOverride:t})))})(e)).switchMap((e=>{var{playlist$:t}=e;return e=>t.map((t=>Zu(Zu({},e),{},{playlist:t})))})(e)).map(rl).map(tl)}var il=e=>t=>{var r=e.shouldLoop||"9x16"==t.aspect_ratio;return e.playlist?((e,t)=>{var r=e.playlist.videos.map((e=>e.id)),n=r.indexOf(t.id),i=r[(n+1)%r.length];return e.fetchVideo(i)})(e,t):e.nextVideoOverride?e.fetchVideo(e.nextVideoOverride.id):r?t.live_metadata?e.fetchVideo(t.id):di.of(t):e.fetchVideo(t.next_video.id)};function ol(e,t){return di.merge((e=>e.take(1).filter((e=>{var{video:t}=e;return t})).map((e=>{var{video:t}=e;return()=>di.of(t)})))(e),((e,t)=>{var{intentStreams:r,playerEvent$:n,userIdle$:i}=e,o=n.withType("ended").filterByLatestFrom(i,((e,t)=>!t)).merge(r.keepPlaying$).withLatestFrom(t,((e,t)=>t)).filter((e=>e.isContinuousPlay));return o.map(il)})(t,e),((e,t)=>t.switchMap((t=>e.intentStreams.loadVideoId$.map((e=>()=>t.fetchVideo(e))))))(t,e))}var sl=()=>{var e=document.createElement("script");return e.async=!0,e.type="text/javascript",document.head.appendChild(e),e},al=(e,t)=>{e.onload=t};const cl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sl,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:al;return di.create((n=>{var i=t();r(i,(e=>{n.next(e),n.complete()})),i.src=e}))};function ul(e,t){var r,n=function(e,t){return e.withLatestFrom(t,((e,t)=>{var{is360Supported:r,environment:n}=t,i=n.threejs_path,{projection_type_360:o=null}=e;return{needs360:r&&null!==o,threeJsPath:i,video:e}}))}(e,t),i=n.switchMap((e=>{var{needs360:t,threeJsPath:r,video:n}=e;return t&&void 0===window.THREE?cl(r).map((()=>({needs360:t,video:n}))):di.of({needs360:t,video:n})})).publishReplay(1).refCount(),[o,s]=i.partition((e=>{var{needs360:t}=e;return t})),a=(r=s,o.switchMap((()=>di.interval(30).takeUntil(r)))),c=function(e,t){return e.skipUntil(t).map((e=>{var{video:{projection_type_360:t}}=e;return t}))}(i,o);return{cne360AnimationInterval$:a,currentVideo$:i.map((e=>{var{video:t}=e;return t})),cne360CanvasSource$:c}}function ll(e){var{isCurrentlySticky$:t,isFullscreen$:r}=e;return t.combineLatest(r,((e,t)=>e&&!t)).distinctUntilChanged()}function dl(e,t){return new Date(hl(t)-e)}function hl(e){return e&&e.getTime?e.getTime():(new Date).getTime()}var pl=1e4,fl=18e5;function ml(e,t){var r=function(e,t){var r={videoId:e};return"".concat(t,"/").concat("player/live_video_metadata","?").concat(fa(r))}(e,t);return su(r).map((e=>JSON.parse(e.body)))}function vl(e){var{interval:t=pl,buffer:r=fl,config$:n,fetchLiveSource:i=ml,scheduler:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=gl(e,r)||0;return di.timer(s,t,o).withLatestFrom(n.pluck("environment","base_url")).switchMap((t=>{var[,r]=t;return i(e.id,r)})).filter((t=>{var{video:r}=t;return r.id===e.id&&r.sources.length})).map((t=>{var{video:r}=t;return Object.assign(e,r)})).first()}function gl(e,t){var{live_metadata:r={}}=e,{start_date:n}=r;if(!n)return null;var i=new Date(n),o=new Date,s=dl(t,i);return s>o?s-o:null}function yl(e,t,r){var n=e.switchMapTo(r.withType("dfp-content-resume"));return di.merge(e,n).withLatestFrom(t.pluck("captions"),((e,t)=>t))}var bl=["playing","pause","dfp-ad-started","dfp-ad-resume"],_l={spinnerWithBgPoster:[ts,ns],bgPoster:[ts,is],spinner:[ts],none:[]};var Tl="MUTED",wl="NEVER";function Sl(e,t,r){var{environment:n,playerConfig:i}=r,o=n.canAutoplay===Tl,s=i.autoplay&&o,a=i.muted||"1"==e||"0"==t;return!(n.canAutoplay===wl||!i.autoplay)&&(a||s)}var Cl=e=>di.create((t=>{var r=new Image;r.onload=()=>{t.next(e),t.complete()},r.onerror=e=>t.error(e),r.src=e}));function El(e,t,r){var n=e=>e;return e.switchMapTo(t.switchMapTo(r.take(1),n),n)}var Ol=di.timer(0,1500);function kl(e){var{currentVideo$:t,shareIntent$:r}=e;return r.filter((e=>"url"!==e&&"embed"!==e)).withLatestFrom(t,((e,t)=>({action:e,video:t})))}function xl(e){var{isLiveVideo$:t,playerEvent$:r,proposedLiveStreamEnd$:n,buffer$:i=di.of(fl),scheduler:o,videoStart$:s}=e;return s.withLatestFrom(t,n,i).switchMap((e=>{var[,t,n,i]=e;return t&&n?di.timer(function(e,t){var r=(new Date).getTime(),n=new Date(e).getTime()+t-r,i=2147483647;if(n>0)return n>i?i:n;return 0}(n,i),o).merge(r.withType("ended")).mapTo(!0):di.of(!1)})).distinctUntilChanged()}var Al=()=>({closeable:!1,message:"cne-support-live-overlay-message",title:"cne-support-live-overlay-title"}),Pl=e=>{var{image:t}=e;return{closeable:!1,message:"cne-player-live-available-soon-overlay-message",image:t}},Il=()=>({closeable:!0,message:"cne-support-360-overlay-message"}),Ml=e=>{var{video:t}=e;return{buttonIntents:[{type:"intent:load-video",data:{video:t}}],buttonText:"cne-support-error-overlay-button",closeable:!1,iconType:"warning",message:"cne-support-error-overlay-message"}},Ll=()=>({buttonIntents:[{type:"intent:keep-playing"},{type:"intent:close-overlay"}],buttonText:"cne-support-idle-overlay-button",closeable:!1,title:"cne-support-idle-overlay-title"});function Dl(e){var{documentHidden$:t,keepPlaying$:r,playerEvent$:n,viewportStatus$:i}=e,o=function(e,t,r){return t.combineLatest(r,((e,t)=>!t&&"FULLY_IN_VIEWPORT"===e)).distinctUntilChanged().switchMap((t=>t?di.of(0):e.withType("ended").scan((e=>e+1),0))).share()}(n,i,t);return{userIdle$:o.map((e=>e>=4)).merge(r.mapTo(!1)).share().startWith(!1).distinctUntilChanged(),showUserIdleMessageOverlay$:o.filter((e=>5===e)).share()}}var Rl=/(?:http[s]?:)?(?:\/\/)?[a-z]+\.(?:[a-z]+\.)?[^\/]+\/?|^\/|\/$|\/?\?.*$/;function Nl(e){var[t,r]=e.split(Rl);return r||t}function jl(e,t,r,n){return n.top>0?r-e:r-t}function Ul(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,{top:n,height:i}=t.getBoundingClientRect(),o=r.querySelector("html").clientHeight,s=o-(n+i);return e.map((e=>{var{intersectionRatio:t,intersectionRect:r}=e;return{intersectionRatio:jl(n,s,t*o,r)/i}}))}function Fl(e){return e.IntersectionObserver&&e.IntersectionObserver.toString().length<100}function $l(){return di.create((e=>{window.parent.postMessage({sentinel:"amp",type:"send-intersections"},"*");var t=t=>{t.source==window.parent&&t.origin!=window.location.origin&&t.data&&"amp"==t.data.sentinel&&"intersection"==t.data.type&&t.data.changes.forEach((t=>e.next(t)))};return window.addEventListener("message",t),()=>window.removeEventListener("message",t)}))}function Bl(e,t){return di.create((r=>{var n,i,o=new t((e=>{var[t]=e;r.next(t)}),{root:null,threshold:(n=.1,i=Math.floor(1/n),[...Array(i)].map(((e,t)=>t/i)))});return o.observe(e),()=>o.disconnect()}))}function Vl(e){var{ampIO:t=$l,applyIntersectionTransform:r=Ul,win:n=window}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{canAccessParent:i,playerConfig:{pageType:o},videoEl:s}=e,a=i&&n.top.IntersectionObserver;switch(!0){case Fl(n):return Bl(s,n.IntersectionObserver);case"amp-article"===o:return r(t(),s);case a&&!!n.frameElement:var c=Bl(n.frameElement,a);return r(c,s);case!!a:return Bl(s,a);default:return di.never()}}function ql(e,t){var r,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.7778;return e?(r=screen.width,n=screen.height):n=(r=t.offsetWidth)/i,{height:n,width:r}}var Hl=di.interval(50).startWith(0);function Wl(e){return e.map((e=>e/1e3))}var zl=r(7317).Z;function Gl(e,t,r,n){var i,o,{documentHidden$:s,windowEvent$:a}=t,{autoplayOverride$:c,closeMessage$:u,cneOverlayIntent$:l,enterFullScreen$:d,exitFullScreen$:h,facadeReady$:p,focusChanged$:f,focusedComponent$:m,keepPlaying$:v,loadVideoId$:g,mouseLeavePlayer$:y,muteToggle$:b,isCurrentlySticky$:_,persistentShareEnter$:T,persistentShareLeave$:w,playOnPage$:S,progressMouse$:C,saveSettings$:E,seekEnd$:O,seekStart$:k,seekLatestIntent$:x,setTimeIntent$:A,settingsSubMenuIntent$:P,shareIntent$:I,shouldPause$:M,shouldPlay$:L,show360MessageOverlayIntent$:D,showLiveWaitingOverlayIntent$:R,toggleCaptionsIntent$:N,touchVideo$:j,toggleSettings$:U,trackSparrowIntent$:F,trackSnowplowIntent$:$,volumeIntent$:B,consentUpdateIntent$:V}=n,q=function(e,t){return t.withLatestFrom(e.pluck("playerConfig"),e.pluck("video","disable_consent_check"),((e,t,r)=>{var n,{gdprApplies:i}=t;return n=hi(t)||!i||r?fi:!i||e&&Object.keys(e)?e:mi,pi("canRunBasedOnConsent > consentObj",n),n}))}(r,V),H=function(e){var{ajaxObservable:t=su,readCookie:r=fc}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r("CN_xid","");if(n)return di.of(n).share();var i=t("//infinityid.condenastdigital.com/infinityid",{withCredentials:!0}).map((e=>e.body)).catch((e=>(Cu("infinity id",e),di.of(""))));return e.pluck(vi).filter(Boolean).take(1).switchMap((()=>i)).publishReplay(1).refCount()}(q),W=function(e){var{intersectionObservable:t=Vl}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e=>{var r=t(e),n=(e.playerConfig.playerType,.2);return r.map((e=>{var{intersectionRatio:t}=e;return{percent:t.toFixed(1),status:t>n?"FULLY_IN_VIEWPORT":"OUT_OF_VIEWPORT"}}))};return e.switchMap((e=>r(e))).share()}(r),z=W.pluck("status"),G=W.pluck("percent"),{userIdle$:K,showUserIdleMessageOverlay$:X}=Dl({documentHidden$:s,keepPlaying$:v,playerEvent$:e,viewportStatus$:z}),Y=function(e){return e.switchMap((e=>{var t,{playerConfig:r}=e,{playlist:n}=r;if(!n)return di.of(null);try{t=e.sponsoredVideo||window.top._cne.sponsoredVideo}catch(e){Fu(e)}var i=n.videos.slice();n&&t&&i.splice(1,0,t);var o=Bu(Bu({},n),{},{videos:i});return di.of(o).merge(qu(e))})).publishReplay(1).refCount()}(r),{cne360AnimationInterval$:Q,currentVideo$:J,cne360CanvasSource$:Z}=function(e){return ul(ol((arguments.length>1&&void 0!==arguments[1]?arguments[1]:nl)(e),e).mergeScan(((e,t)=>t(e))),e.config$)}({config$:r,intentStreams:n,playerEvent$:e,playlist$:Y,userIdle$:K}),{currentVideo$:ee,isLiveVideo$:te,liveLoadingState$:re,proposedLiveStreamEnd$:ne,mobileLiveReadyPosterURL$:ie}=function(e){var{currentVideo$:t,config$:r,pollForLiveSource:n=vl}=e,i=t.pluck("live_metadata").map((e=>e||{})),o=t.map((e=>!!e.live_metadata)),s=i.pluck("end_date"),a=t.switchMap((e=>{var{live_metadata:t,sources:i=[]}=e,o=t&&0===i.length?n(e,{config$:r}):di.never();return di.of(e).merge(o)})).publishReplay(1).refCount(),c=a.filter((e=>{var{sources:t}=e;return t.length>0})),u=a.filter((e=>{var{live_metadata:t}=e;return!!t})).map((e=>({loading:0===e.sources.length,video:e}))),l=c.filterByLatestFrom(r,o,((e,t,r)=>t.isMobile&&r)).map((e=>e.live_ready_poster));return{currentVideo$:c,isLiveVideo$:o,liveLoadingState$:u,mobileLiveReadyPosterURL$:l,proposedLiveStreamEnd$:s}}({currentVideo$:J,config$:r}),oe=function(e){return e.withType("dfp-ad-started","dfp-content-pause").mapTo(!0).merge(e.withType("dfp-ad-timeout","dfp-content-resume").mapTo(!1)).startWith(!1).distinctUntilChanged()}(e),se=function(e){var{adDisplaying$:t,playerEvent$:r}=e,n=r.withType("dfp-ad-skippablestatechanged").map(Qc);return t.switchMap((e=>e?n:di.of(e))).startWith(!1).distinctUntilChanged()}({adDisplaying$:oe,playerEvent$:e}),ae=g.withLatestFrom(oe,((e,t)=>t)).filter((e=>e)),ce=e.withType("tech").pluck("value"),ue=function(e){var{aspectRatio$:t,targetDiv$:r,fullscreen$:n,poll$:i=Hl,getWidthHeightFn:o=ql}=e;return i.withLatestFrom(r,n,t).map((e=>{var[,t,r,n]=e,{width:i,height:s}=o(r,t,n);return{targetDiv:t,width:i,height:s,fullscreen:r}})).distinctUntilChanged((function(e,t){return e.width===t.width&&e.height===t.height&&e.fullscreen===t.fullscreen})).publishReplay(1).refCount()}({aspectRatio$:r.pluck("aspectRatio").map((e=>iu(e))),targetDiv$:r.pluck("playerContainer"),fullscreen$:e.withType("fullscreen").pluck("value"),tech$:ce}),le=function(e,t,r){return di.combineLatest(t.map((e=>({type:"cookie",level:e}))).takeUntil(e).merge(e),r,(e=>e)).filter((e=>{var{level:t}=e;return Zc(t)})).distinctUntilChanged()}(B,r.pluck("volumeCookie"),ee),de=function(e){var{config$:t,muteToggle$:r,volume$:n}=e;return t.pluck("mutedConfig").concat(di.merge(r,n.filter((e=>{var{type:t}=e;return"cookie"!==t})).map((e=>{var{level:t}=e;return 0===t})))).distinctUntilChanged()}({config$:r,muteToggle$:b,volume$:le}),he=function(e){var{autoplayOverride$:t,config$:r,viewportStatus$:n}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bu();return n.filterByLatestFrom(t,r,((e,t,r)=>{var{override:n,url:o}=t,{autoplayEnabled:s}=r;return!(n&&o===Nl(i.location.href))&&"FULLY_IN_VIEWPORT"===e&&s})).share().take(1)}({autoplayOverride$:c,config$:r,viewportStatus$:z}),pe=function(e){var{loadVideoId$:t,videoEnded$:r}=e,n=0;return t.merge(r).map((()=>n++))}({videoEnded$:e.withType("ended"),loadVideoId$:g}),fe=e.withType("currentTime").pluck("value"),me=L.merge(he),ve=function(e,t){return e.switchMap((()=>t.first()))}(ee,e.withType("playing")),ge=function(e,t){return t.withType("dfp-ad-started").merge(e).take(1).mapTo(!0)}(ve,e),ye=function(e){var{config$:t,mute$:r,touchVideo$:n,viewportAutoplay$:i}=e,o=i.mapTo(!0).filterByLatestFrom(t,r,((e,t,r)=>{var{isMobile:n}=t;return n&&r})).take(1);return di.of(!1).merge(o).merge(r.filter((e=>!e))).merge(n.mapTo(!1)).distinctUntilChanged()}({config$:r,mute$:de,playerEvent$:e,shouldPlay$:L,viewportAutoplay$:he,touchVideo$:j}),be=xl({currentVideo$:ee,isLiveVideo$:te,playerEvent$:e,proposedLiveStreamEnd$:ne,videoStart$:ve}),_e=function(e,t){return e.mapTo(!0).merge(t.mapTo(!1)).startWith(!1)}(k,O),Te=function(e){var{config$:t,playerEvent$:r,shouldPause$:n}=e,i=r.withType("playing","dfp-ad-started","dfp-ad-resume").mapTo(!0),o=n.mapTo(!1),s=t.pluck("isContinuousPlay"),a=r.withType("ended").withLatestFrom(s,((e,t)=>t));return o.merge(i).merge(a).startWith(!1).distinctUntilChanged()}({config$:r,playerEvent$:e,shouldPause$:M}),we=j.filterByLatestFrom(oe,((e,t)=>!t)),Se=di.of(la),Ce=te.withLatestFrom(Se,((e,t)=>e&&!t)).filter((e=>e)),Ee=te.filter((e=>e)),Oe=function(e){var{adDisplaying$:t,currentVideo$:r,errorCode$:n,isPlaying$:i,windowError$:o,scheduler:s,checkIsPlayingDelay:a=Xu}=e;return n.withLatestFrom(t,Yu).merge(o.map((e=>{var{message:t}=e;return t})).filter(Qu)).delay(a,s).filterByLatestFrom(i,((e,t)=>!t)).withLatestFrom(r,((e,t)=>({error:e,video:t})))}({adDisplaying$:oe,currentVideo$:ee,errorCode$:e.withType("errorCode").pluck("value"),isPlaying$:Te,windowError$:a.withType("error")}),ke=function(e){var{cneError$:t,currentVideo$:r,mergedPlay$:n,continuousPlay$:i,playerEvent$:o,isPlaying$:s,seekEnd$:a,shouldPlay$:c,userIdle$:u,videoStart$:l,_isMobile:d=na(),spinnerDelay$:h=di.timer(500)}=e,p=e=>t=>t.switchMapTo(e.takeUntil(v)).publishReplay().refCount(),f=l.switchMapTo(c.takeUntil(o.withType("ended"))),m=d?o.withType(...bl):o.withType(...bl,"timeupdate"),v=di.merge(t,m),g=a.filter((e=>e.elapsed>100&&!d)).filterByLatestFrom(s,((e,t)=>!!t)),[y,b]=a.switchMapTo(h.takeUntil(v)).filterByLatestFrom(s,((e,t)=>!!t)).mapTo(d).partition((e=>e)),_=f.let(p(h)).filter((()=>!d)),[T,w]=f.let(p(o.withType("stalled"))).mapTo(d).partition((e=>e)),S=o.withType(...bl),C=o.withType("timeupdate").filterByLatestFrom(l,((e,t)=>!!t)),E=n.take(1).filterByLatestFrom(t.startWith(null),((e,t)=>!t)).takeUntil(o.withType("playing")),O=o.withType("dfp-ad-complete","ended").filterByLatestFrom(i,u,((e,t,r)=>t&&!r)),k=di.merge(g.mapTo(_l.bgPoster),b.mapTo(_l.spinnerWithBgPoster),y.mapTo(_l.spinner),_.mapTo(_l.bgPoster),w.mapTo(_l.spinnerWithBgPoster),T.mapTo(_l.spinner),O.mapTo(_l.spinner),E.mapTo(_l.spinner)).takeUntil(t),x=di.merge(t.mapTo(_l.none),C.mapTo(_l.none),S.mapTo(_l.none)),A=di.merge(k,x);return r.take(1).switchMapTo(A).distinctUntilChanged()}({cneError$:Oe,currentVideo$:ee,mergedPlay$:me,continuousPlay$:r.pluck("isContinuousPlay"),playerEvent$:e,isPlaying$:Te,seekEnd$:O,shouldPlay$:L,userIdle$:K,videoStart$:ve}),xe=function(e){var{config$:t,progressMouse$:r,windowEvent$:n}=e,i=t.pluck("isMobile"),o=r.withType("down").pluck("event"),s=r.withType("move").pluck("event"),a=n.withType("mousemove"),c=n.withType("mouseup"),u=o.switchMap((()=>a.takeUntil(c)));return s.merge(u).filterByLatestFrom(i,((e,t)=>!t))}({config$:r,progressMouse$:C,windowEvent$:a}),Ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ou;return e.withType("cne-texttrackadded").pluck("value").publishReplay().refCount().switchMap((e=>e&&e.track?t(e).mapTo(e.track).startWith(null):e&&Oa(e)?di.of(e).startWith(null):di.of(null)))}(e),Pe=function(e){var{config$:t,mute$:r,toggleCaptionsIntent$:n,captionsTrack$:i}=e,o=t.withLatestFrom(r,((e,t)=>{var{autoplayEnabled:r,captionsCookie:n}=e;return r&&t?"showing":n||"hidden"})).switchMap((e=>n.scan((e=>"hidden"==e?"showing":"hidden"),e).startWith(e)));return di.combineLatest(o,i,((e,t)=>t?{captions:t,displayMode:e}:{captions:t,displayMode:"disabled"}))}({config$:r,mute$:de,toggleCaptionsIntent$:N,captionsTrack$:Ae}),Ie=e.withType("useractive").merge(e.withType("userinactive")),Me=function(e,t,r){var n=e.map((e=>{var{volumeCookie:t}=e;return Zc(t)?t:1})).takeUntil(r).merge(r.pluck("level")).distinctUntilChanged();return t.withLatestFrom(n,((e,t)=>e?0:e||t?t:1))}(r,de,B),Le=function(e){return e.distinctUntilChanged((function(e,t){return 0!==e&&0!==t})).map((e=>0===e))}(Me),De=function(e){var{buffer:t=Jc,playerEvent$:r,scheduler:n}=e,i=r.withType("pause","ended","seeked","play");return i.throttleTime(t,n).switchMap((e=>di.race(di.timer(t,null,n).map((()=>e)),i.mapTo(!1)))).filter(Boolean).filter((e=>{var{state:t,type:r}=e;return("content-playback"===t||!t)&&"pause"===r})).mapTo(!0)}({playerEvent$:e}),Re=function(e){var{analyticsPause$:t,playerEvent$:r}=e;return t.switchMapTo(r.withType("play").take(1))}({analyticsPause$:De,playerEvent$:e}),Ne=function(e){return e.scan((e=>e+1),0)}(ee),je=function(e){var{loadVideoId$:t,videoEnded$:r,viewportAutoplay$:n}=e,i=t.mapTo("manual"),o=r.mapTo("continuous"),s=n.mapTo("autoplay");return i.merge(o,s).startWith("manual")}({videoEnded$:e.withType("ended"),loadVideoId$:g,viewportAutoplay$:he}),Ue=function(e,t){return e.withType("dfp-ad-complete").withLatestFrom(t,((e,t)=>{var{id:r}=t;return{finishedAdIndex:e.ad.podInfo.getPodIndex(),videoId:r}}))}(e,ee),Fe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:di.of(!1);return e.filterByLatestFrom(r,((e,t)=>t)).withLatestFrom(t,((e,t)=>t))}(x,Te,te),$e=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:di.of(!1),i=t.filter((e=>!e)).mapTo(!1);return di.merge(e.mapTo(!0),i,r.mapTo(!0)).filterByLatestFrom(n,((e,t)=>t)).distinctUntilChanged()}(ve,Te,Fe,te),Be=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:di.of(!1);return e.switchMapTo(t.take(1).mapTo(!0)).filterByLatestFrom(r,((e,t)=>t))}(Ue,ve,te),Ve=function(e){var{cneError$:t,show360MessageOverlayIntent$:r,showLiveWaitingOverlayIntent$:n,showLiveMessageOverlay$:i,showUserIdleMessageOverlay$:o}=e;return di.merge(r.map(Il),i.map(Al),t.map(Ml),o.map(Ll),n.map(Pl))}({cneError$:Oe,show360MessageOverlayIntent$:D,showLiveMessageOverlay$:Ce,showLiveWaitingOverlayIntent$:R,showUserIdleMessageOverlay$:X}),qe=function(e){var{adDisplaying$:t,cneError$:r,cneOverlayIntent$:n,loadVideoId$:i,showLiveMessageOverlay$:o}=e,s=n.filterByLatestFrom(t,((e,t)=>"hide"===e.action||!t)).merge(r.mapTo({type:"message",action:"show"}),i.mapTo({type:"message",action:"hide"}),i.mapTo({type:"play",action:"hide"}),o.mapTo({type:"message",action:"show"})),a=s.filter((e=>"message"===e.type)).map((e=>"hide"===e.action)).startWith(!0);return s.filterByLatestFrom(a,((e,t)=>{var{type:r}=e;return t||"message"===r}))}({adDisplaying$:oe,cneError$:Oe,cneOverlayIntent$:l,loadVideoId$:g,showLiveMessageOverlay$:Ce}),{mouseDown$:He,mouseUp$:We,mouseMove$:ze}=(i=document.getElementById("cne-360-container"),{mouseDown$:di.fromEvent(i,"mousedown").merge(di.fromEvent(i,"touchstart")).map((e=>Ku(e))),mouseUp$:di.fromEvent(document,"mouseup").merge(di.fromEvent(i,"touchend")),mouseMove$:di.fromEvent(i,"mousemove").merge(di.fromEvent(i,"touchmove")).map((e=>Ku(e)))}),Ge=function(e,t){return e.mapTo(!0).merge(t.mapTo(!1)).startWith(!1)}(He,We),Ke=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Gu,i=e.switchMapTo(r.pairwise().takeUntil(t).map((e=>{var[t,r]=e;return{x:r.x-t.x,y:r.y-t.y,time:r.time-t.time,now:r.time}}))),o=t.withLatestFrom(i,((e,t)=>t)).distinctUntilChanged(((e,t)=>e.now===t.now)).switchMap((t=>n(t.time).scan((e=>({x:e.x*Hu,y:e.y*Hu})),t).takeWhile((e=>e.x>Wu||e.x<-.5||e.y>Wu||e.y<-.5)).concat(di.of({x:0,y:0})).takeUntil(e)));return i.merge(o).map((e=>({x:e.x*zu,y:e.y*zu})))}(He,We,ze),Xe=function(e,t){return e.switchMapTo(t.scan(((e,t)=>{var r=e.long-t.x,n=e.lat+t.y,i=Math.max(-85,Math.min(85,n)),o=(r+360)%360,s=Math.PI/180;return{lat:i,long:o,phi:(90-i)*s,theta:o*s}}),{lat:0,long:180}))}(ee,Ke),Ye=function(e){var{config$:t,currentVideo$:r,loading$:n,widthHeight$:i}=e,o={action:"hide"};return di.of(o).concat(r.take(1).filterByLatestFrom(t,nu).withLatestFrom(i,ru)).merge(n.mapTo(o))}({config$:r,currentVideo$:ee,loading$:ke,widthHeight$:ue}),Qe=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Cl;return t.map((e=>{var{poster_frame:t}=e;return t})).merge(r).filterByLatestFrom(e,((e,t)=>e&&"hide"===t.action)).switchMap((e=>n(e).catch((()=>di.of("")))))}(Ye,ee,ie),Je=e.withType("tech").pluck("value").map((e=>"Html5"===e.name()?"html5vpaid":e.name())),Ze=e.filter((e=>e.type.match(/dfp-ad/))),et=Ze.pluck("ad").filter((e=>e)).startWith(null),tt=Ze.pluck("adUnitPath").filter((e=>e)).startWith(null),rt=Ze.pluck("adsManager").filter((e=>e)).do((()=>zl("dfp adsManagerLoaded"))).startWith(null),nt=function(e){var{mouseLeavePlayer$:t,persistentShareEnter$:r,persistentShareLeave$:n,showShareOverlay$:i,scheduler:o}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,a=r.mapTo(!0),c=n.switchMap((()=>{var e=di.timer(s,null,o).mapTo("left"),t=r.mapTo("re-enter");return di.race(e,t)})).filter((e=>"left"===e)).mapTo(!1),u=t.merge(i).mapTo(!1);return a.merge(u,c)}({mouseLeavePlayer$:y,persistentShareEnter$:T,persistentShareLeave$:w,showShareOverlay$:l.withType("share")}),it=function(e){var{captionsDisplayMode$:t,config$:r,isPlaying$:n,playerEvent$:i,settingsMenuHasFocus$:o,toggleSettings$:s,widthHeight$:a}=e,c=o.map((e=>!e)),u=a.map((e=>{var{width:t}=e;return t<500})).combineLatest(r,t.map((e=>{var{displayMode:t}=e;return"disabled"===t})),((e,t,r)=>{var{isMobile:n}=t;return e||n||r})),l=n.combineLatest(i.withType("userinactive").mapTo(!0),((e,t)=>e&&t)).merge(c).filter(Boolean);return s.merge(l.mapTo(!1)).map((e=>e?"show":"hide")).combineLatest(u,((e,t)=>t?"disable":e)).share()}({captionsDisplayMode$:Pe,config$:r,isPlaying$:Te,settingsMenuHasFocus$:m.map((e=>"CneSettings"===e)),playerEvent$:e,toggleSettings$:U,widthHeight$:ue}),ot=function(e,t){return e.switchMap((()=>t.pluck("displayMode").map((e=>({menu:"cneCaptionOptions",display:"disabled"===e?"disable":"enable"})))))}(P,Pe),st=function(e){var{playerEvent$:t,settingsMenu$:r}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ol,i=r.filter((e=>"show"===e)),o=r.filter((e=>"show"!==e)).merge(t.withType("userinactive"));return i.switchMap((()=>n.mapTo(!0).takeUntil(o)))}({playerEvent$:e,settingsMenu$:it}),at=e.withType("percentComplete").pluck("value"),ct=function(e){var{videoStart$:t,percentComplete$:r}=e,n=di.merge(r.filter((e=>e>=.25)).take(1).mapTo(1),r.filter((e=>e>=.5)).take(1).mapTo(2),r.filter((e=>e>=.75)).take(1).mapTo(3));return t.switchMapTo(n)}({percentComplete$:at,videoStart$:ve}),ut=e.withType("fullscreen").pluck("value"),lt=ue.pluck("width").map((e=>e<Bo)).distinctUntilChanged(),dt=function(e){var{currentVideo$:t,config$:r,windowGoogle:n=window.google}=e,i=r.pluck("playerConfig","adsDisabled");return t.filterByLatestFrom(i,((e,t)=>!(t||n&&n.ima))).mapTo(!0)}({config$:r,currentVideo$:ee}),ht=function(e){var{playerEvent$:t,analyticsAdBlocked$:r}=e;return t.withType("dfp-ad-error").filter((e=>e.adError&&"ADS_REQUEST_NETWORK_ERROR"===e.adError.code)).merge(r).mapTo(!0).startWith(!1)}({playerEvent$:e,analyticsAdBlocked$:dt}),pt=function(e,t){return e.withLatestFrom(t,((e,t)=>{var{id:r}=t;return{videoId:r,adBlocked:e}}))}(ht,ee),ft=function(e){var{currentVideo$:t,playerEvent$:r}=e,n=r.withType("dfp-ad-started").mapTo(!0),i=t.mapTo(!1);return di.merge(n,i)}({currentVideo$:ee,playerEvent$:e}),mt=function(e){return e.withType("dfp-content-pause").switchMapTo(e.withType("dfp-content-resume").mapTo(!0).take(1)).merge(e.withType("playing").mapTo(!1)).distinctUntilChanged()}(e),vt=function(e){return e.scan((e=>e+1),0).startWith(0)}(S),gt=function(e,t){return e.withLatestFrom(t,((e,t)=>{var{playerConfig:r}=t;return r.adsDisabled?null:e}))}(ee,r);return{ad$:et,adDisplaying$:oe,adFinished$:Ue,adBlocked$:ht,adBlockedUnique$:pt,videoIfAdsNotDisabled$:gt,adUnitPath$:tt,adSkippable$:se,adsManager$:rt,analyticsAdBlocked$:dt,analyticsVolume$:Me,animatedClipDisplaying$:Ye,captionsDisplayMode$:Pe,cne360MouseActive$:Ge,cne360CanvasSource$:Z,cne360LatLong$:Xe,cneOverlay$:qe,config$:r,contentResuming$:mt,currentTimeInMs$:(o=fe,o.map((e=>Math.floor(1e3*e)))),currentVideo$:ee,documentHidden$:s,facadeReady$:p,liveLoadingState$:re,loading$:ke,initializeInBandCaptions$:Ee,infinityId$:H,inSyncWithLiveStream$:$e,seekLatestAfterPrerollForLive$:Be,isLiveVideo$:te,isPlaying$:Te,isSeeking$:_e,mute$:de,posterFrame$:Qe,percentComplete$:at,playlist$:Y,isCurrentlySticky$:ll({isCurrentlySticky$:_,isFullscreen$:ut}),prerollPlayed$:ft,showPersistentMute$:ye,setTime$:Wl(A),settingsMenu$:it,smallLayout$:lt,reportUserActivity$:st,settingsSubMenu$:ot,showLiveEndCard$:be,showShareDropdown$:nt,techName$:Je,viewportPercentage$:G,viewportStatus$:z,updateMessageOverlay$:Ve,videoStartType$:je,viewportAutoplay$:he,volume$:le,videoEndedOrSwitched$:pe,widthHeight$:ue,analyticsMute$:Le,analyticsPause$:De,analyticsResume$:Re,adRestart$:ae,captionsUpdateTextTrackDisplay$:Ie,closeMessage$:u,cne360MouseDrag$:Ke,cne360AnimationInterval$:Q,cneError$:Oe,enterFullScreen$:d,exitFullScreen$:h,focusChanged$:f,loadCaptions$:yl(ve,ee,e),loadVideoId$:g,mouseLeavePlayer$:y,muteToggle$:b,playerEvent$:e,playsOnPage$:vt,quartile$:ct,replay$:El(ee,e.withType("ended"),e.withType("play")),saveSettings$:E,scrub$:xe,seekLatest$:Fe,seekEnd$:O,shareIntent$:I,shouldPause$:M,mergedPlay$:me,shouldShareVideo$:kl({currentVideo$:ee,shareIntent$:I}),toggleUserActive$:we,trackSparrowIntent$:F,trackSnowplowIntent$:$,videoStart$:ve,videoOrAdStart$:ge,videoView$:Ne,volumeIntent$:B,canRunBasedOnConsent$:q}}function Kl(e){return di.of((t=>{var{eventString:r,data:n}=t;return e.trigger({type:r,data:n},n)}))}var Xl=e=>t=>{var{config:r,type:n,adDuration:i}=t,o=1e3*i;switch(n){case"playContent":e.playVideoContentPart(r);break;case"playAd":e.playVideoAdvertisement({ns_st_cl:o});break;case"stop":e.stop()}},Yl=e=>t=>e.switchMap((e=>e.comscore_config?di.of(new t.StreamingTag({customerC2:"".concat(e.comscore_config.c2)})):di.never()));function Ql(e){var{config$:t,currentVideo$:r,canRunBasedOnConsent$:n}=e,{tagAction:i=Xl,toScript$:o=cl,win:s=window}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.pluck(gi).filter(Boolean).take(1).switchMap((()=>t)).filter((e=>e.video&&e.video.comscore_config)).pluck("environment","comscore_library_path").switchMap((e=>o(e).map((()=>s.ns_)))).filter((e=>e&&e.StreamingTag)).switchMap(Yl(r)).map(i)}var Jl=((e,t,r,n,i,o,s)=>{e.fbq||(e.fbq=function(){i.callMethod?i.callMethod.apply(i,arguments):i.queue.push(arguments)},i=e.fbq,e._fbq||(e._fbq=i),i.push=i,i.loaded=!0,i.version="2.0",i.queue=[],(o=t.createElement(r)).async=!0,o.src=n,(s=t.getElementsByTagName(r)[0]).parentNode.insertBefore(o,s))}).bind(null,window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),Zl=(e,t)=>t("init",e),ed=e=>t=>{var{type:r,params:n,custom:i}=t;e(i?"trackCustom":"track",r,n)};function td(e){var{currentVideo$:t,canRunBasedOnConsent$:r}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jl,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];n();var{fbq:s}=i;return r.pluck(yi).filter((e=>e&&!o)).take(1).switchMap((()=>t)).pluck("facebook_pixel_id").switchMap((e=>e?di.of(e):di.never())).distinctUntilChanged().do((e=>Zl(e,s))).mapTo(ed(s))}var rd={allure:"GTM-WPC9DS6",arstechnica:"GTM-NLXNPCQ",brides:"GTM-5HMN9N3",architecturaldigest:"GTM-MRVDKNL",architecturaldigestindia:"GTM-W4C53LN",architecturaldigestitaly:"GTM-WTNTX26",architecturaldigestfrance:"GTM-TNLG3KG",architecturaldigestgermany:"GTM-56SZBMB",architecturaldigestspain:"GTM-5W83PTH",architecturaldigestrussia:"GTM-5WZKZ74",architecturaldigestmexico:"GTM-K3M29ST",bonappetit:"GTM-TLPN5X9",cntraveler:"GTM-5RDFB8G",epicurious:"GTM-PCTXLQR",glamour:"GTM-TXVJXJD",golfdigest:"GTM-M94KNML",gq:"GTM-PC9B6Z6",heyiris:"GTM-K5S77MT",newyorker:"GTM-NX5LSK3",nonconde:"GTM-M3LWXF2",pitchfork:"GTM-MMFBX2W",self:"GTM-KSHC4S5",teenvogue:"GTM-5WV8CLP",them:"GTM-NP9DWF8",thescene:"GTM-5JDFFGT",vanityfair:"GTM-KSG89LT",vanityfairfrance:"GTM-K8TFQ7T",vanityfairspain:"GTM-MP9L7FM",vanityfairitalia:"GTM-T9LN2QS",wired:"GTM-5HBJC2K",wmagazine:"GTM-TXW6R9J",vogue:"GTM-MC44X36",vogueindia:"GTM-M3SG2X6",gqindia:"GTM-P223J33",cntravelerindia:"GTM-5ZWM7R",cntraveleruk:"GTM-KJMKBQ5",cntravelerspain:"GTM-K5Q7ST6",vogueuk:"GTM-KG7M3XB",wireditalia:"GTM-PTX8W8W",wireduk:"GTM-5MLKVKC",wiredjapan:"GTM-WDGQM7Q",tatlerrussia:"GTM-KSMT82T",tatleruk:"GTM-TRLZ9GV",voguefrance:"GTM-N5PNP2L",voguespain:"GTM-KQ8LPCC",vogueitaly:"GTM-TL59GFJ",voguegermany:"GTM-5P7NXHK",voguemexico:"GTM-57C6XM8",voguejapan:"GTM-MHBCRTH",voguetaiwan:"GTM-TPWMSWZ",voguerussia:"GTM-WQMFMCM",voguebusiness:"GTM-KSK3JJ9",glamouruk:"GTM-MQK3BWT",glamourspain:"GTM-NNCNB3T",glamourgermany:"GTM-MTVMWWX",glamourrussia:"GTM-PNXVDX3",gqfrance:"GTM-K42BJLV",gquk:"GTM-W2K49QH",gqspain:"GTM-5M2Z395",gqitaly:"GTM-NRLM5D4",gqgermany:"GTM-NQPFNCC",gqjapan:"GTM-K8MFHJW",gqmexico:"GTM-TGJJPT5",gqtaiwan:"GTM-PC2V8K9",gqrussia:"GTM-MQH9V6R",lacucinaitaliana:"GTM-M6ZJ85Q",theworldofinteriorsuk:"GTM-TLK4DHD"};function nd(e,t,r){var{referenceWindow:n,playerConfig:i}=e,o=i.embedLocation.split("-")[0]||"nonconde";"amp-article"===i.pageType&&(o="nonconde",n._cne.ampDomain=i.analyticsUrl||n.location.host);var s=rd[o],a=function(e){for(var t=[],r=e.document.querySelectorAll('script[src*="googletagmanager.com/gtm.js"]'),n=0;n<r.length;n++){var i=(0,pa.Z)(r[n].src).searchParams,o=i.get("id"),s=i.get("l")||"dataLayer";e[s]&&t.push({gtmId:o,dataLayerName:s})}return t}(n),c=a.filter((e=>e.gtmId===s))[0];return c?di.of({referenceWindow:n,dataLayerName:c.dataLayerName}):a.length>0?(r("GAConflict",i.analyticsUrl||n.location),di.never()):t("https://www.googletagmanager.com/gtm.js?id=".concat(s,"&l=cneDataLayer"),function(e){return()=>{var t=e.document;e.cneDataLayer=[{"gtm.start":(new Date).getTime(),event:"gtm.js"}];var r=t.getElementsByTagName("script")[0],n=t.createElement("script");return n.async=!0,r.parentNode.insertBefore(n,r),n}}(n),function(e){var t={referenceWindow:e,dataLayerName:"cneDataLayer"};return(e,r)=>r(t)}(n))}function id(e){return function(t){var{referenceWindow:r,dataLayerName:n}=e;r[n].push(t)}}function od(e){var{config$:t,canRunBasedOnConsent$:r}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cl,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Eu;return r.pluck(bi).filter(Boolean).switchMap((()=>t)).take(1).switchMap((e=>nd(e,n,i))).map((e=>id(e)))}function sd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ad(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cd(e){var{target:t,moatApiSpecifics:r,moatPartnerCode:n,isAdTracking:i}=e,{protocol:o}=window.location,s="https:"===o?"z":"js",a="_moatApi"+Math.floor(1e8*Math.random()),c="".concat(o,"//").concat(s,".").concat("moatads.com","/").concat(n,"/moatvideo.js#").concat(a),u=ud(t,i),l=[],d=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sd(Object(r),!0).forEach((function(t){ad(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({dispatchEvent(e){this.sendEvent?(l&&(l.push(e),e=l,l=!1),this.sendEvent(e)):l.push(e)}},r);return window[a]=d,cl(c,u).mapTo(d.dispatchEvent.bind(d))}var ud=(e,t)=>()=>{var r=document.getElementById(e),n="js-cne-moat-script-".concat(t?"ad":"content"),i=r.querySelector("#".concat(n));if(i){i.parentNode.removeChild(i);var o=i.src;if(o&&o.length>0){var s=o.split("#");if(s.length>1){var a=s[s.length-1];delete window[a]}}}var c=document.createElement("script");return c.type="text/javascript",c.id=n,c.async=!0,r&&r.insertBefore(c,r.childNodes[0]||null),c};function ld(e){var{adUnitPath$:t,config$:r,currentVideo$:n,canRunBasedOnConsent$:i}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cd;return i.pluck(bi).filter(Boolean).take(1).switchMap((()=>di.combineLatest(t,r,n))).map((e=>{var[t,r,n]=e;return{adUnitPath:t,config:r,currentVideo:n}})).filter((e=>{var{adUnitPath:t,config:r,currentVideo:n}=e;return t&&n&&r})).distinctUntilChanged(((e,t)=>e.currentVideo.id===t.currentVideo.id)).switchMap((e=>{var{adUnitPath:t,currentVideo:r,config:n}=e;if(!r.moat_content_partner_code)return di.never();var i={adData:{ids:{level1:r.title,level2:t,slicer1:n.location,zMoatAP:n.autoplayEnabled,zMoatVideoId:r.id},duration:r.duration,url:r.url}};return o({isAdTracking:!1,moatApiSpecifics:i,moatPartnerCode:r.moat_content_partner_code,target:n.playerConfig.target})}))}var dd="condenastinlineint626489506216",hd="1495";function pd(e){var{adsManager$:t,adUnitPath$:r,config$:n,currentVideo$:i,canRunBasedOnConsent$:o,playerEvent$:s}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cd,c=s.withType("fullscreen").pluck("value");return o.pluck(bi).filter(Boolean).take(1).switchMap((()=>t)).withLatestFrom(r,n,i,c).map((e=>{var[t,r,n,i,o]=e;return{adsManager:t,adUnitPath:r,config:n,currentVideo:i,fullscreen:o}})).filter((e=>{var{config:t,currentVideo:r,adsManager:n,adUnitPath:i}=e;return t&&r&&n&&i})).distinctUntilChanged(((e,t)=>e.adsManager===t.adsManager)).switchMap((e=>{var{adsManager:t,adUnitPath:r,config:n,currentVideo:i,fullscreen:o}=e,{playerType:s,target:c}=n.playerConfig,u="interlude"===s&&i.dfp_cms_id===hd?dd:i.moat_ad_partner_code;if(!u)return di.never();var[,l="",d="",h="",p=""]=r.split("/").filter(Boolean),f={adsManager:t,ids:{partnerCode:u,viewMode:o?"fullscreen":"normal",slicer1:n.location,slicer2:r,zMoatBrand:l,zMoatPlayer:d,zMoatSiteSection:h,zMoatTemplate:p},imaSDK:!0};return a({isAdTracking:!0,moatApiSpecifics:f,moatPartnerCode:u,target:c})}))}function fd(e){var{protocol:t}=window.location,r="".concat(t,"//cdn-gl.imrworldwide.com/conf/").concat(e,".js#name=nlsnInstance&ns=NOLBUNDLE"),n=function(){var e={g:{},ggPM(e,t){window.NOLBUNDLE.nlsnInstance.q=window.NOLBUNDLE.nlsnInstance.q||[],window.NOLBUNDLE.nlsnInstance.q.push([e,t])}};return window.NOLBUNDLE=window.NOLBUNDLE||{},window.NOLBUNDLE.nlsnInstance=window.NOLBUNDLE.nlsnInstance||e,e}();return cl(r).mapTo((e=>t=>{var{type:r,data:n}=t;e.ggPM(r,n)})(n))}function md(e){var{currentVideo$:t,canRunBasedOnConsent$:r}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fd;return r.pluck(gi).filter(Boolean).take(1).switchMap((()=>t)).pluck("nielsen_api_id").switchMap((e=>e?di.of(e):di.never())).distinctUntilChanged().switchMap(n)}var vd=r(7317).Z;function gd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bd=3e3,_d=e=>{var t,r=di.create((e=>t=e)),n=di.interval(100).startWith(0).takeUntil(di.timer(bd)).filter((()=>!!e.permutive)).take(1).do((()=>{vd("permutiveChecker: using permutive from parent window"),t.next({permutive:e.permutive}),t.complete()}));return di.merge(r,n)},Td=(e,t)=>{var{permutiveKeys:r}=t.environment||{};if(r){((e,t)=>{!function(t,r,n){if(!t){t=t||{},e.permutive=t,window.permutive=t,t.q=[],t.config={}||{},t.config.apiKey=r,t.config.environment=t.config.environment||"production";for(var i=["addon","identify","track","trigger","query","segment","segments","ready","on","once","user","consent"],o=0;o<i.length;o++){var s=i[o];t[s]=function(e){return function(){var r=Array.prototype.slice.call(arguments,0);t.q.push({functionName:e,arguments:r})}}(s)}}}(e.permutive,t),e.googletag=e.googletag||{},e.googletag.cmd=e.googletag.cmd||[]})(e,r.apiKey);var n="https://cdn.permutive.app/".concat(r.workspaceId,"-web.js");return cl(n).map((()=>({permutive:e.permutive})))}return di.never()},wd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:di.timer(bd);if(!yu())return Td(window,e);var r=_d(window.top),n=t.switchMap((()=>Td(window,e))).do((()=>{vd("permutive check timed out")}));return di.race(r,n)};function Sd(e){return function(t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gd(Object(r),!0).forEach((function(t){yd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t);delete r.type,vd("Permutive tracking event",t.type,r,e),e.permutive.track(t.type,r)}}function Cd(e){var{config$:t,canRunBasedOnConsent$:r}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wd,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sd;return r.pluck(bi).filter(Boolean).take(1).switchMap((()=>t)).filter((e=>e.environment&&e.environment.permutiveKeys)).take(1).switchMap((e=>n(e))).filter((e=>!!e)).map((e=>i(e)))}function Ed(e){var{pageType:t,embedLocation:r}=e;return"instant-article"===t?"fbia":"amp-article"===t?"amp":r&&r.length?"oo":"non-oo"}function Od(e){var{referenceWindow:t}=e,[{site:r,content:n}={}]=t.dataLayer||[],{orgId:i,orgAppId:o}=r||{},{contentType:s}=n||{};return{org_id:i,org_app_id:o,contentType:s}}var kd=e=>({adAssetsUrl:e.ad_assets_url,baseUrl:uu(),ssl:e.ssl}),xd=e=>{var{adAssetsUrl:t,baseUrl:r,ssl:n}=e;return function(e){var{ad:i,adBlocked:o,adUnitPath:s,category:a,config:c,dimensions:u,documentHidden:l,infinityId:d,meta:h={},mute:p,playsOnPage:f,prerollPlayed:m,type:v,video:g,videoStartType:y,videoView:b,viewportStatus:_}=e,{beacon:T=vu,date:w=(new Date).toISOString(),win:S=window}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{analyticsUrl:C,playerType:E,recAlgorithm:O="",recStrategy:k="",isRightRail:x}=c.playerConfig,A=i&&i.mediaUrl&&i.mediaUrl.indexOf(t)>=0?"site_served":null,P=c.autoplayEnabled?"autoplay":"manual",I=Od(c),M={_ts:w,_c:a,_t:v,app:"playerservice",cBr:g.brand,cCh:"videos/show",cCu:g.url,cId:g.id,cKe:g.tags?g.tags.toString():"",cPd:g.premiere_date,cTi:g.title,cTy:s,mDu:g.duration,pHr:C||c.location,pID:c.pageId,pWw:u.width,pWh:u.height,sID:c.sessionId,uId:c.uId,xid:d,dim1:JSON.stringify({contentStartType:y,doNotTrackSetting:c.doNotTrackSetting,environment:Ed(c.playerConfig),gitBranch:c.playerConfig.gitBranch,gitSha:c.playerConfig.gitSha,guid:c.guid,isMobile:c.isMobile,isVerso:!!I.org_app_id,initialPlayerStartType:P,playerDepth:c.videoPagePosition,playerType:E,playsOnPage:f,prerollPlayed:m,recAlgorithm:O,recStrategy:k,sticky:c.playerConfig.isStickyType||!1,stickyPosition:c.playerConfig.stickyPosition||"",disableVastPrefetch:c.playerConfig.disableVastPrefetch||!1,disableVideoPrebid:c.playerConfig.disableVideoPrebid||!1,isRightRail:x,tabStatus:l?"hidden":"active",muted:p,versoContentType:I.contentType,videoEmbedPosition:c.playerConfig.videoEmbedPosition||"",videoViews:b,viewportStatus:_}),dim2:JSON.stringify({adBlocked:o,adId:i?i.adId:"",adType:i?i.apiFramework||A||"unknown":"",creativeId:i?i.creativeId:"",wrapperAdIds:i?i.wrapperAdIds:"",wrapperAdSystems:i?i.wrapperAdSystems:"",dfpLineItem:i?xc(i.adId,i.wrapperAdSystems,i.wrapperAdIds):"",publicaEnabled:c.publicaEnabled,podIndex:i&&i.podInfo?i.podInfo.getPodIndex():""})};h.adId=i?i.adId:"","GoogleTag"===a&&(M._v=S.performance.now()-h.pollStart);var L=[r,fa(M),fa(h),fa(I)].filter((e=>e.length)).join("&");T(L,n)}};function Ad(e){var{config$:t,canRunBasedOnConsent$:r}=e,{track:n=xd}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.pluck(bi).filter(Boolean).take(1).switchMap((()=>t)).map((e=>{var{environment:t}=e;return n(kd(t))}))}function Pd(e){return e<1?"vertical":1===e?"square":"landscape"}var Id=e=>{var{event:t,context:r}=e,n=(new Date).getTime(),i=bu();i.snowplowQueue&&i.snowplowQueue.push((()=>{i.snowplowCN("trackSelfDescribingEvent:".concat("sp"),{event:t,context:r,timestamp:n})}))};function Md(e,t){return{schema:e,data:{type:t}}}var Ld=()=>e=>{var{ad:t,adBlocked:r,adUnitPath:n,category:i,config:o,currentTimeInMs:s,dimensions:a,documentHidden:c,percentComplete:u,prerollPlayed:l,type:d,video:h,videoStartType:p,viewportPercentage:f,volume:m}=e,{playerType:v,recAlgorithm:g="",recStrategy:y="",isRightRail:b}=o.playerConfig,_=o.autoplayEnabled?"autoplay":"manual",T=!!function(e){var{referenceWindow:t}=e,[{site:r,content:n}={}]=t.dataLayer||[],{orgId:i,orgAppId:o}=r||{},{contentType:s}=n||{};return{site:{org_id:i,org_app_id:o},content:{contentType:s}}}(o).site.org_app_id,w=iu(h.aspect_ratio),S={schema:"iglu:com.condenast/video_player/jsonschema/2-0-0",data:{type:v,start_type:_,start_y:o.videoPagePosition,distribution:Ed(o.playerConfig),platform:T?"verso":"non-verso",rec_algorithm:g,rec_strategy:y,sticky_position:o.playerConfig.stickyPosition||null,adblock_status:r,default_muted:null,loop:null,embed_position:b?"rightRail":o.playerConfig.videoEmbedPosition||null,progress_percent:u?Math.round(100*u):null,inview_percent:f?Math.round(100*f):null,tab_active:!c,volume:Math.round(100*m),current_time:s/1e3,fullscreen:!!a.fullscreen,width:a.width,height:a.height,target_div:a.targetDiv.id,ad_played:l}},C={schema:"iglu:com.condenast/video/jsonschema/2-0-0",data:{video_id:h.id,start_type:p,duration:h.duration,aspect_ratio:w,orientation:Pd(w),ads_disabled:h.ads_disabled}},E={schema:"iglu:com.condenast/ad/jsonschema/2-0-0",data:{request_type:"video",creative_id:t?t.creativeId:null,line_item_id:t?xc(t.adId,t.wrapperAdSystems,t.wrapperAdIds):null,ad_unit_path:n,video_pod_position:t&&t.podInfo?t.podInfo.getPodIndex():null}};if("video_player_event"===i){var O=Md("iglu:com.condenast/video_player_event/jsonschema/1-0-3",d);Id({event:O,context:[S,C]})}else if("video_ad_player_event"===i){var k=Md("iglu:com.condenast/video_ad_player_event/jsonschema/1-0-1",d);Id({event:k,context:[S,C,E]})}};function Dd(e){var{config$:t,canRunBasedOnConsent$:r}=e,{track:n=Ld}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.pluck(bi).filter(Boolean).take(1).switchMap((()=>t)).map((e=>{var{environment:t}=e;return n(t)}))}var Rd=["endpoints","video"];function Nd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nd(Object(r),!0).forEach((function(t){Ud(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ud(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fd(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function $d(e){var{canRunBasedOnConsent$:t}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.fetch||ju,n=di.of((e=>{var{endpoints:t,video:n}=e,i=Fd(e,Rd);return t.forEach((e=>{var t=fa(jd({id:n.id,brand:n.brand,title:n.title,expiration:n.live_metadata.end_date},i));r("".concat(e,"?").concat(t))}))}));return t.pluck(gi).filter(Boolean).take(1).switchMap((()=>n))}function Bd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bd(Object(r),!0).forEach((function(t){qd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hd(e){return function(t){return Vd(Vd({},t),{},{cneBeaconLibrary$:$d(t),cneEventLibrary$:Kl(e),comscoreLibrary$:Ql(t),facebookLibrary$:td(t),googleAnalyticsLibrary$:od(t),moatContentLibrary$:ld(t),moatLibrary$:pd(t),nielsenLibrary$:md(t),permutiveLibrary$:Cd(t),sparrowLibrary$:Ad(t),snowplowLibrary$:Dd(t)})}}var Wd=()=>Math.floor(65536*Math.random()).toString(16);function zd(e){var t=new Map,[,r]=e.split("?");return(r?r.split("&"):[]).forEach((e=>{var[r,n]=e.split("=");t.set(r,decodeURIComponent(n))})),t}var Gd,Kd="aam_uuid",Xd="aam_fw";function Yd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fc,t=e(Kd,""),r=e(Xd,""),n=Qd(r);return{userId:t,segmentKeyValues:n}}function Qd(e){return e?e.split(";"):[]}function Jd(e,t){var r=e?window.top:window,n=e&&window.frameElement||t,{top:i}=n.getBoundingClientRect();return r.pageYOffset+i}function Zd(){if(!Gd)try{var e=document.createElement("canvas");Gd=!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){Gd=!1}return Gd}function eh(e){var{sponsoredVideo:t,environment:r,playerConfig:n,video:i}=e,o=yu(),s=function(e){var{target:t}=e,r=document.getElementById(t);if(!r)throw new Error("Could not find playerContainer with id '#".concat(t,"'"));return r}(n),a=function(e){var t=document.createElement("video"),r=Wo("cne-support-enable-javascript"),n='<a href="http://videojs.com/html5-video-support/" target="_blank">'.concat(Wo("cne-support-html5-video"),"</a>");return t.className="vjs-default-skin",t.removeAttribute("controls"),t.setAttribute("webkit-playsinline",""),t.setAttribute("playsinline",""),t.setAttribute("crossorigin","anonymous"),t.innerHTML='<p class="vjs-no-js">'.concat(r," ").concat(n,"</p>"),e.appendChild(t),t}(s),c=_u(),u=parseFloat(fc("volume")),l=o?window.top:window;return{aspectRatio:n.aspectRatio,audienceManagerConfig:Yd(),autoplayEnabled:r.canAutoplay!==wl&&n.autoplay,canAccessParent:o,canAutoplay:r.canAutoplay!==wl,captionsCookie:fc("captions"),doNotTrackSetting:l.navigator?l.navigator.doNotTrack:null,environment:r,guid:r.guid||Wd()+Wd()+"-"+Wd()+"-"+Wd()+"-"+Wd()+"-"+Wd()+Wd()+Wd(),is360Supported:Zd()&&!ia(),isContinuousPlay:n.continuousPlay||n.loopVideo,isMobile:na(),isScriptEmbed:n.isScriptEmbed,location:c,mutedConfig:Sl(fc("muted"),u,e),pageId:fc("pID",""),playerConfig:n,playerContainer:s,publicaEnabled:!!e.publicaEnabled,referenceWindow:l,sessionId:fc("sID",""),sponsoredVideo:t,uId:fc("CN_sp",""),urlVars:zd(c),video:i,videoEl:a,videoPagePosition:Jd(o,a),volumeCookie:u}}var th="#222",rh="#ccc",nh=()=>({colors:{white:"#fff",black:"#fff"},fonts:{families:{ArialMT:"ArialMT",casual:'"Comic Sans MS", Impact, fantasy',default:"ArialMT",monospace:"monospace",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",sansSerif:"sans-serif",script:'"Monotype Corsiva", cursive',serif:"serif",smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif',SUFIText:"SFUIText, sans-serif"},sizes:{small:"16px",medium:"20px",large:"24px"},variants:{smallcaps:"small-caps"}},languages:{english:Wo("cne-caption-language-english")},textShadows:{dropshadow:"2px 2px 3px ".concat(th,",\n      2px 2px 4px ").concat(th,",\n      2px 2px 5px ").concat(th),raised:"1px 1px ".concat(th,",\n      2px 2px ").concat(th,",\n      3px 3px ").concat(th),depressed:"1px 1px ".concat(rh,",\n      0 1px ").concat(rh,",\n      -1px -1px ").concat(th,",\n      0 -1px ").concat(th),uniform:"0 0 4px ".concat(th,",\n      0 0 4px ").concat(th,",\n      0 0 4px ").concat(th,",\n      0 0 4px ").concat(th)},positions:{top:{top:"2px",bottom:"auto"},bottom:{top:"auto",bottom:"2px"},auto:null},defaultValues:{backgroundColor:"#000",backgroundOpacity:"0.5",color:"#fff",edgeStyle:"dropshadow",fontSize:"14px",fontFamily:"SUFIText",language:"English",position:"auto",videoQuality:"auto"}}),ih={auto:"auto",UHD4K:"4k",HD1080:"1080",HD720:"720",SD360:"360"},oh={videoQuality:"auto"},sh=()=>{var e=Wo("cne-player-font-small"),t=Wo("cne-player-font-medium"),r=Wo("cne-player-font-large"),n=Wo("cne-player-position-auto"),i=Wo("cne-player-position-bottom"),o=Wo("cne-player-position-top"),s=Wo("cne-player-quality-auto");return{fontSize:[[e,nh().fonts.sizes.small],[t,nh().fonts.sizes.medium],[r,nh().fonts.sizes.large]],language:[[Wo("cne-caption-language-english"),nh().languages.english]],position:[[n,"auto"],[i,"bottom"],[o,"top"]],videoQuality:[[s,ih.auto],['2160<span class="resolution">4k<span>',ih.UHD4K],['1080<span class="resolution">HD<span>',ih.HD1080],["720",ih.HD720],["360",ih.SD360]]}};function ah(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(Object.keys(e.share_links||{})||[]).map((e=>({name:"ShareActionButton",action:e,ariaLabel:Wo("cne-aria-share-".concat(e))})));return{cneSvgDefs:!0,mediaLoader:!0,cne360Container:!0,adClickMask:!0,adContainer:!0,posterImage:!0,cneAnimatedClip:!0,cneScrubPoster:!0,cneBigPlayTitle:!0,loadingSpinner:!0,cneTextTrackDisplay:!0,persistentShare:{children:{shareWidget:!0,shareDropdown:{children:[...t.slice(0,2).map((e=>({name:"ShareDropdownItem",action:e.action}))),{name:"ShareDropdownItem",action:"email"},{name:"ShareDropdownItem",action:"more"}]}}},cneOverlay:{children:{shareOverlay:{children:{shareActions:{children:t},shareEmbed:!0,shareUrl:!0}},cneMessageOverlay:!0,cneLiveOverlay:!0,cneClose:!0}},cneLiveIndicatorActive:!0,cneLiveIndicatorAd:!0,controlBar:{children:ch()},cneMessage:!0,cne360Compass:!0,cneVideoTitle:!0,persistentMute:!0}}var ch=()=>{var e={progressControl:{children:{seekBar:{children:{loadProgressBar:!0,playProgressBar:{timeTooltip:!0},cneScrubberThumb:!0}}}},cneFullscreenToggle:!0,playToggle:!0,cneLiveIndicator:!0,cneVolumeToggle:{children:{muteToggle:!0,volumeControl:{vertical:!0,children:{volumeBar:{children:{volumeLevel:!0}}}}}},cneVolumeAlert:!0,cneCaptionsButton:!0,cneSettings:{children:{cneSettingsToggle:!0,cneSettingsMenu:{children:{settingsHeader:!0,settingsBody:{children:{cnePlayerSettings:{title:Wo("cne-player-settings-title"),children:[{name:"cneOptionGroup",className:"cne-settings-option-group cne-video-quality",defaultValue:oh.videoQuality,label:Wo("cne-player-video-quality"),listItems:sh().videoQuality,settingKey:"videoQuality",title:"player settings"},{name:"cneButton",className:"cne-settings-button",text:Wo("cne-player-caption-options"),intents:[{type:"intent:show-settings-submenu",data:"CnePlayerSettings"}]}]},cneCaptionOptions:{title:Wo("cne-player-caption-title"),children:[{name:"cneDropdown",className:"cne-captions-language",defaultValue:nh().defaultValues.language,label:Wo("cne-player-language"),listItems:sh().language,settingKey:"language",title:"closed captions language"},{name:"cneDropdown",className:"cne-captions-font-size",defaultValue:nh().defaultValues.fontSize,label:Wo("cne-player-font-size"),listItems:sh().fontSize,settingKey:"fontSize",title:"closed captions font size"},{name:"cneOptionGroup",className:"cne-captions-position",defaultValue:nh().defaultValues.position,label:Wo("cne-player-position"),listItems:sh().position,settingKey:"position",title:"closed captions position"},{name:"cneButton",className:"cne-settings-button cne-style-options-button",text:Wo("cne-player-style-options"),intents:[{type:"intent:show-settings-submenu",data:"CneCaptionStyles"}]}]}}},settingsFooter:!0}}}},currentTimeDisplay:!0,durationDisplay:!0,remainingTimeDisplay:!0,fullscreenToggle:!0};return e};function uh(e,t){var r=document.createElement("style");r.innerHTML=e,r.setAttribute("type","text/css"),t.appendChild(r)}function lh(e,t){var r=document.createElement("style"),n=":root { --aspect-ratio: ".concat(iu(e),"; }");r.innerHTML=n,r.setAttribute("type","text/css"),t.appendChild(r)}var dh=i().getComponent("Component");class hh extends dh{createEl(){var e=document.createElement("div");e.id="awesome-container",sa()&&(e.dataset.ios=!0);var t=super.createEl("div",{className:"awesome-wrapper"});return t.appendChild(e),this.adEl_=e,t}adEl(){return this.adEl_}updateFocusable(e){this.toggleClass("cne-invisible",!e)}}i().registerComponent("AdContainer",hh);var ph=i().getComponent("Component");class fh extends ph{createEl(){return super.createEl("div",{className:"click-mask"})}}i().registerComponent("AdClickMask",fh);var mh=i().getComponent("Component"),vh=500;class gh extends mh{createEl(){var e,t=this.options_.projection_type_360,r=this.player_.tech({IWillNotUseThisInPlugins:!0}).el(),n=this.options_.width,i=this.options_.height;this.scene=new window.THREE.Scene,this.camera=new window.THREE.PerspectiveCamera(75,n/i,1,2e3),this.camera.target=new window.THREE.Vector3(0,0,0),this.renderer=new window.THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.setRendererSize(n,i),this.renderer.autoClear=!1,this.renderer.setClearColor(0,1),this.texture=new window.THREE.Texture(r),this.texture.generateMipmaps=!1,this.texture.minFilter=window.THREE.LinearFilter,this.texture.maxFilter=window.THREE.LinearFilter,this.texture.format=window.THREE.RGBFormat,(e="equirectangular"===t?new window.THREE.SphereGeometry(vh,60,40):new window.THREE.SphereBufferGeometry(vh,60,40).toNonIndexed()).scale(-1,1,1);var o=new window.THREE.Mesh(e,new window.THREE.MeshBasicMaterial({map:this.texture}));return this.scene.add(o),this.time=(new Date).getTime(),this.renderer.domElement}render(){4===this.player_.readyState()&&(this.texture.needsUpdate=!0),this.renderer.render(this.scene,this.camera),this.camera.lookAt(this.camera.target)}updateCamera(e,t){this.camera.target.x=vh*Math.sin(e)*Math.cos(t),this.camera.target.y=vh*Math.cos(e),this.camera.target.z=vh*Math.sin(e)*Math.sin(t)}updateSize(e){var{width:t,height:r}=e;this.camera.aspect=t/r,this.camera.updateProjectionMatrix(),this.setRendererSize(t,r)}setRendererSize(e,t){e>3840&&(t=t/e*3840,e=3840),this.renderer.setSize(e,t,!1)}}i().registerComponent("Cne360Canvas",gh);var yh='width="100%" height="100%"',bh='viewBox="0 0 30 30"',_h="\n<svg ".concat(yh,' viewBox="0 0 56 56" focusable="false">\n  <rect transform="translate(4 4)" fill="#000" width="48" height="48" rx="24" fill-opacity=".6"/>\n  <circle cx="28" cy="28" r="25" stroke="#FFF" stroke-width="3" fill="none" stroke-opacity=".6" />\n  <use xlink:href="#svg-big-play-icon" />\n</svg>'),Th='\n<svg height="100%" viewBox="0 0 33.48 24" focusable="false">\n  <use xlink:href="#svg-email" />\n</svg>',wh='\n<svg height="100%" '.concat(bh,' focusable="false">\n  <use xlink:href="#svg-facebook" />\n</svg>'),Sh="\n<svg ".concat(yh,' viewBox="0 0 38.2999992 30" focusable="false">\n  <use xlink:href="#svg-full-screen" class="svg-full-screen" />\n  <use xlink:href="#svg-full-screen" class="svg-full-screen shadow" />\n\n  <use xlink:href="#svg-full-screen-exit" class="svg-full-screen-exit" />\n  <use xlink:href="#svg-full-screen-exit" class="svg-full-screen-exit shadow" />\n</svg>'),Ch="\n<svg ".concat(yh,' viewBox="-3 0 30 24"xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd">\n     <use xlink:href="#svg-line" />\n</svg>'),Eh="\n<svg ".concat(yh,' viewBox="0 0 37.5 30" focusable="false">\n  <use xlink:href="#svg-muted" class="svg-muted" />\n  <use xlink:href="#svg-muted" class="svg-muted shadow" />\n  <use xlink:href="#svg-speaker" class="svg-speaker" />\n  <use xlink:href="#svg-speaker" class="svg-speaker shadow" />\n  <use xlink:href="#svg-volume-high" class="svg-volume-high" />\n  <use xlink:href="#svg-volume-high" class="svg-volume-high shadow" />\n  <use xlink:href="#svg-volume-low" class="svg-volume-low" />\n  <use xlink:href="#svg-volume-low" class="svg-volume-low shadow" />\n</svg>'),Oh="\n<svg ".concat(yh,' viewBox="0 0 37.5 30" focusable="false">\n  <use xlink:href="#svg-muted" class="svg-muted" />\n  <use xlink:href="#svg-muted" class="svg-muted shadow" />\n  <use xlink:href="#svg-speaker" class="svg-speaker" />\n  <use xlink:href="#svg-speaker" class="svg-speaker shadow" />\n</svg>'),kh='\n<svg height="100%" '.concat(bh,' focusable="false">\n  <use xlink:href="#svg-pinterest" />\n</svg>'),xh="\n<svg ".concat(yh,' viewBox="0 0 26.1000004 30" focusable="false">\n  <use xlink:href="#svg-play" />\n  <use xlink:href="#svg-play" class="shadow" />\n</svg>'),Ah="\n<svg ".concat(yh,' viewBox="0 0 26.1000004 30" focusable="false">\n  <use xlink:href="#svg-pause" class="svg-pause" />\n  <use xlink:href="#svg-pause" class="svg-pause shadow" />\n\n  <use xlink:href="#svg-play" class="svg-play" />\n  <use xlink:href="#svg-play" class="svg-play shadow" />\n</svg>'),Ph="\n<svg ".concat(yh,' viewBox="0 0 28 30" focusable="false">\n  <use xlink:href="#svg-share" />\n  <use xlink:href="#svg-share" class="shadow" />\n</svg>'),Ih="\n<svg ".concat(yh,' viewBox="0 0 40 30" focusable="false">\n  <use xlink:href="#svg-360-dial" />\n</svg>'),Mh="\n<svg ".concat(yh,' viewBox="0 0 75 30" focusable="false">\n  <use xlink:href="#svg-360-icon" />\n</svg>'),Lh='\n<svg height="100%" '.concat(bh,' focusable="false">\n  <use xlink:href="#svg-tumblr" />\n</svg>'),Dh='\n<svg height="100%" '.concat(bh,' focusable="false">\n  <use xlink:href="#svg-twitter" />\n</svg>'),Rh='\n<svg height="100%" '.concat(bh,' focusable="false">\n  <use xlink:href="#svg-url" />\n</svg>'),Nh='\n<svg height="9" viewBox="0 0 12 9" focusable="false">\n  <use xlink:href="#svg-check" />\n</svg>',jh=i().getComponent("Component");class Uh extends jh{createEl(){return super.createEl("div",{className:"cne-360-compass",innerHTML:Mh})}updateRotation(e){this.el().innerHTML='\n      <div class="cne-360-icon">'.concat(Mh,'</div>\n      <div class="cne-360-compass-dial" style="transform:rotate(').concat(e,'deg);">\n        ').concat(Ih,"\n      </div>")}}i().registerComponent("Cne360Compass",Uh);var Fh;function $h(){if(void 0===Fh)try{Fh=!!window.AudioContext}catch(e){Fh=!1}return Fh}var Bh=i().getComponent("Component"),Vh=Math.PI/2,qh=Math.PI;class Hh extends Bh{createEl(){return super.createEl("div",{className:"cne-360-container",id:"cne-360-container"})}updateSrc(e){this.removeChild("Cne360Canvas"),this.removeClass("active"),e&&window.THREE&&(this.initializeAudio(),this.addClass("active"),this.addChild("Cne360Canvas",{projection_type_360:e,width:this.width,height:this.height}),this.updatePhiTheta(Vh,qh))}render(){var e=this.getChild("Cne360Canvas");e&&e.render()}updateSize(e){var{width:t,height:r}=e;this.width=t,this.height=r;var n=this.getChild("Cne360Canvas");n&&n.updateSize({width:t,height:r})}updatePhiTheta(e,t){var r=this.getChild("Cne360Canvas");r&&(r.updateCamera(e,t),this.updateAudio(e,t))}initializeAudio(){if(!this.foaDecoder&&$h()){var{Euler:e,Matrix3:t,Matrix4:r,Omnitone:n,Quaternion:i}=window.THREE,o=this.player_.tech({IWillNotUseThisInPlugins:!0}).el();this.euler_=new e,this.orientation_=new i,this.rotationQuarternion_=new i,this.rotationMatrix4_=new r,this.rotationMatrix_=new t;var s=new AudioContext,a=n.createFOADecoder(s,o,{postGainDB:2,channelMap:[0,1,2,3]});a.initialize().then((()=>{a.setMode("ambisonic")})),this.foaDecoder=a}}updateAudio(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.foaDecoder&&$h()&&(this.euler_.set(e,t,0,"YXZ"),this.orientation_.setFromEuler(this.euler_),this.rotationQuarternion_=this.orientation_.inverse(),this.rotationMatrix4_.makeRotationFromQuaternion(this.rotationQuarternion_),this.rotationMatrix_.setFromMatrix4(this.rotationMatrix4_),this.rotationMatrix_.getNormalMatrix(this.rotationMatrix4_),this.foaDecoder.setRotationMatrix(this.rotationMatrix_.elements))}}i().registerComponent("Cne360Container",Hh);var Wh=i().getComponent("ClickableComponent");class zh extends Wh{constructor(e,t){super(e,t),this.el_.removeAttribute("role")}createEl(){return super.createEl("div",{className:"cne-animated-clip",tabIndex:"-1"},{"aria-live":"off"})}update(e){var{action:t,animated_clip_url_mp4:r,animated_clip_url_webm:n,animated_clip_still:i}=e;"show"===t?this.el().innerHTML='<video loop muted autoplay webkit-playsinline playsinline\n                                poster="'.concat(i,'" >\n                                <source src="').concat(r,"\" type='video/mp4'>\n                                <source src=\"").concat(n,"\" type='video/webm'>\n                             </video>"):"hide"===t&&(this.el().innerHTML="")}handleClick(){this.player_.trigger("intent:play")}}i().registerComponent("CneAnimatedClip",zh);var Gh=i().getComponent("ClickableComponent");const Kh=class extends Gh{createControlTextEl(){}controlText(){}handleKeyUp(e){32===e.keyCode&&e.stopPropagation()}};class Xh extends Kh{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp)}createEl(){return super.createEl("div",{className:"cne-big-play-title"})}handleClick(){this.player_.trigger("intent:play")}update(e){var{title:t,hidePosterTitle:r}=e;this.el_.innerHTML=this.getInnerHTML(t),r?this.addClass("hide-title"):this.removeClass("hide-title")}getInnerHTML(e){return"<div class='vjs-big-play-button' tabindex='-1'>".concat(_h,"</div>\n            <div class='cne-big-play-title-section'>\n              <div class='cne-big-play-title-watch'>").concat(Wo("cne-player-big-play-title-watch"),"</div>\n              <div class='cne-big-play-title-text'>").concat(e,"</div>\n            </div>")}}i().registerComponent("CneBigPlayTitle",Xh);class Yh extends Kh{createEl(){var e=this.options_.text;return this.intents=this.options_.intents,super.createEl("div",{className:this.options_.className||"cne-button"},{"data-msg":e})}handleClick(){for(var e of this.intents)e.data?this.player_.trigger(e.type,e.data):this.player_.trigger(e)}}i().registerComponent("CneButton",Yh);var Qh='\n<span class="custom-control-focus" tabindex="-1">\n  '.concat('\n<svg width="20" height="16" viewBox="0 0 20 16" focusable="false">\n  <use xlink:href="#svg-cc-on" class="svg-cc-on" />\n  <use xlink:href="#svg-cc-on" class="svg-cc-on shadow" />\n  <use xlink:href="#svg-cc-off" class="svg-cc-off" />\n  <use xlink:href="#svg-cc-off" class="svg-cc-off shadow" />\n  <use xlink:href="#svg-cc-disabled" class="svg-cc-disabled" />\n  <use xlink:href="#svg-cc-disabled" class="svg-cc-disabled shadow" />\n</svg>',"\n</span>");class Jh extends Kh{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp)}createEl(){var e={"aria-label":Wo("cne-aria-closed-captions"),"aria-pressed":"false"};return super.createEl("div",{innerHTML:Qh,className:"vjs-captions-button "+super.buildCSSClass()},e)}update(e){this.resetStyle(),this.addClass(xa[e]),"disabled"===e?this.player_.trigger("intent:disable-settings-submenu","cneCaptionOptions"):"showing"==e?(this.setAttribute("aria-pressed","true"),this.player_.trigger("intent:enable-settings-submenu","cneCaptionOptions")):"hidden"===e&&this.setAttribute("aria-pressed","false")}resetStyle(){[xa.disabled,xa.showing,xa.hidden].map((e=>this.removeClass(e)))}handleClick(){this.player_.trigger("intent:toggle-captions")}}i().registerComponent("CneCaptionsButton",Jh);var Zh={TAB:9,RETURN:13,SHIFT:16,ESC:27,SPACE:32,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40},ep=[Zh.UP,Zh.DOWN,Zh.LEFT,Zh.RIGHT];class tp extends Kh{constructor(e,t){super(e,t),this.on("keydown",this.handleKeyDown),this.on("keyup",this.handleKeyUp)}createEl(){this.intent=this.options_.intent,this.callback=this.options_.callback,this.className=this.options_.className||"";var e={"aria-label":Wo("cne-aria-close-share")};return super.createEl("div",{innerHTML:'<span class="custom-control-focus" tabindex="-1"></span>',className:this.buildCSSClass()},e)}buildCSSClass(){return"cne-close ".concat(this.className)}handleKeyUp(e){e.keyCode===Zh.SPACE?e.stopPropagation():e.keyCode===Zh.ESC&&this.player_.trigger("intent:close-overlay")}handleKeyDown(e){e.keyCode!==Zh.TAB||e.shiftKey||this.player_.hasClass("overlay-active")&&(this.player_.trigger("intent:close-overlay"),this.player_.focus())}handleClick(e){e&&e.stopPropagation(),this.callback&&this.callback(),this.intent?this.player_.trigger(this.intent):this.player_.trigger("intent:close-overlay")}}i().registerComponent("CneClose",tp);var rp=i().getComponent("Component");class np extends rp{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"},{"aria-label":Wo("cne-aria-player-control-bar"),role:"group"})}updateTabOrder(){this.player_.el_.clientWidth<Bo?(this.player_.persistentShare.shareWidget.el_.tabIndex="1",this.playToggle.el_.tabIndex="2",this.cneVolumeToggle.muteToggle.el_.tabIndex="3",this.progressControl.seekBar.el_.tabIndex="4"):(this.player_.persistentShare.shareWidget.el_.tabIndex="0",this.playToggle.el_.tabIndex="0",this.cneVolumeToggle.muteToggle.el_.tabIndex="0",this.progressControl.seekBar.el_.tabIndex="0")}}i().registerComponent("ControlBar",np);var ip=i().getComponent("Component");class op extends ip{constructor(e,t){super(e,t),this.id=t.id}getId(){var e=this.options_.settingKey||"";return"".concat(this.player_.id_,"-settings-").concat(e.toLowerCase())}selectionChanged(){this.player_.trigger("intent:save-settings",{source:this,key:this.key(),val:this.getValue()})}buildCSSClass(){return"cne-option-control"}key(){return this.options_.settingKey}listElement(){return this.$("ul")}optionElements(){var e=this.listElement();return[].slice.call(e.children)}getValue(){return this.value||this.options_.default}selectedOption(){return this.el().querySelector(".cne-option-selected")}selectedText(){var e=this.selectedOption()||this.optionElements()[0];return e?e.innerText.trim():""}selectedId(){var e=this.selectedOption()||this.optionElements[0];return e?e.id:""}setValue(e){this.optionElements().map((t=>{t.getAttribute("value")===e?t.className="cne-option-selected":t.className=""})),this.value=e,this.updateAriaAttributes&&this.updateAriaAttributes()}}i().registerComponent("CneOptionControl",op);const sp=op;class ap extends sp{constructor(e,t){super(e,t),this.init(),this.on(this.comboBox,"click",this.comboBoxClick),this.on(this.comboBox,"keydown",this.comboBoxKeyDown),this.on(this.listBox,"click",this.optionClick),this.on(this.comboBox,"keyup",(e=>e.stopPropagation())),this.on(this.listBox,"keyup",(e=>e.stopPropagation())),this.optionElements().map((e=>{this.on(e,"blur",this.optionLostFocus),this.on(e,"keydown",this.optionsKeyDown)}))}createEl(){return super.createEl("div",{id:this.getId(),className:super.buildCSSClass()+" cne-dropdown",innerHTML:'\n<svg width="6" height="10" viewBox="0 0 6 10" focusable="false">\n  <use xlink:href="#svg-chevron-down" />\n</svg>'})}init(){var e=this.getId(),{listItems:t,defaultValue:r,label:n}=this.options_;this.dropDownLabel=this.addChild("CneLabel",{label:n,id:"".concat(e,"-label")}),this.dropDownLabel.el_.setAttribute("for","".concat(e,"-textbox")),this.comboBox=this.addChild("CneDropdownOptions",{label:n,listItems:t,defaultValue:r,id:e}),this.listBox=this.$(".cne-dropdown-listbox"),this.textBox=this.$(".cne-dropdown-textbox"),this.setValue(r),this.updateAriaAttributes(),this.searchString=""}setValue(e){super.setValue(e),this.textBox.value=this.selectedText()}updateAriaAttributes(){var e=this.selectedId();this.comboBox.setAttribute("aria-expanded",this.expanded()),this.comboBox.setAttribute("aria-activedescendant",this.selectedId()),e&&(this.selectedOption().setAttribute("aria-selected","true"),this.optionElements().map((t=>{e!==t.id&&t.setAttribute("aria-selected","false")})))}hideList(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.comboBox.removeClass("expanded"),this.updateAriaAttributes(),this.searchString="",e||this.textBox.focus()}showList(){this.comboBox.addClass("expanded"),this.updateAriaAttributes(),this.listBox.children[0].focus()}expanded(){return this.comboBox.hasClass("expanded")}findOption(){var e=this.optionElements().filter((e=>0===e.innerText.trim().toLowerCase().indexOf(this.searchString)));e.length>0&&e[0].focus(),this.clearSearchString()}clearSearchString(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((()=>{this.searchString=""}),1500)}comboBoxClick(){this.expanded()||this.showList()}comboBoxKeyDown(e){switch(e.keyCode){case Zh.RETURN:case Zh.SPACE:this.showList();break;case Zh.ESC:this.expanded()?this.hideList():this.player_.trigger("intent:close-settings");break;case Zh.DOWN:e.preventDefault(),this.expanded()||this.showList();break;case Zh.UP:e.preventDefault();break;default:if(!/^[a-zA-Z0-9-_ ]$/.test(e.key))return;this.expanded()||this.showList(),this.searchString+=e.key,this.findOption()}}optionsKeyDown(e){switch(e.keyCode){case Zh.RETURN:case Zh.SPACE:this.optionClick(e);break;case Zh.TAB:var t=e.target.parentNode;t&&t.nextElementSibling&&t.nextElementSibling.focus();break;case Zh.DOWN:if(e.preventDefault(),this.expanded()){var r=e.target.nextElementSibling||e.target.parentNode.firstElementChild;r&&r.focus()}else this.showList();break;case Zh.UP:e.preventDefault();var n=e.target.previousElementSibling||e.target.parentNode.lastElementChild;n&&n.focus()}}optionLostFocus(e){clearTimeout(this.listTimeout),this.listTimeout=setTimeout((()=>{document.activeElement.parentNode!==e.target.parentNode&&this.hideList(!0)}),100)}optionClick(e){e.stopPropagation(),this.setValue(e.target.getAttribute("value")),this.hideList(),super.selectionChanged()}}i().registerComponent("CneDropdown",ap);const cp=e=>{return"<input type='text' id=\"".concat(e.id,'-textbox" \n    class="cne-dropdown-textbox" \n    tabIndex="-1" />\n  <ul id="').concat(e.id,'-listbox" class="cne-dropdown-listbox" role="listbox">\n    ').concat((t=e.id,r=e.listItems,n=e.defaultOption,r.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,i=r[0]===n?'class="cne-option-selected"':"",o=t+"-"+r[0].replace(" ","").toLowerCase();return"".concat(e,"\n      <li id=").concat(o," ").concat(i,' value="').concat(r[1],'" role="option" tabindex="-1">\n        ').concat(Nh,"\n        ").concat(r[0],"\n      </li>")}),"")),"\n  </ul>");var t,r,n};var up=i().getComponent("Component");class lp extends up{createEl(){var{label:e,listItems:t,defaultOption:r}=this.options_,n="".concat(this.options_.id,"-combobox"),i={"aria-activedescendant":"","aria-expanded":"false","aria-labelledby":"".concat(this.options_.id,"-label"),"aria-owns":"".concat(this.options_.id,"-listbox"),readonly:"true",role:"combobox",tabindex:"0"};return super.createEl("div",{id:n,className:"cne-dropdown-combobox",innerHTML:cp({id:this.options_.id,label:e,listItems:t,defaultOption:r})},i)}}i().registerComponent("CneDropdownOptions",lp);var dp=i().getComponent("Component");class hp extends dp{createEl(){return super.createEl("label",{id:this.options_.id,className:"cne-label",innerHTML:this.options_.label})}}i().registerComponent("CneLabel",hp);var pp=i().getComponent("Component");class fp extends pp{createEl(){return super.createEl("div",{className:"cne-message"})}showMessage(e){var{message:t,buttonText:r,buttonIntent:n}=e;this.el_.innerHTML="<h4>".concat(t,"</h4>"),this.el_.className=this.getCSSClass(!0),this.addChild("CneClose",{intent:"intent:close-message"}),this.addChild("CneButton",{text:r,intents:["intent:close-message","intent:pause",n]})}hideMessage(){this.el_.innerHTML.length>0&&(this.removeChild("CneClose"),this.removeChild("CneButton"),this.el_.className=this.getCSSClass(!1),this.el_.innerHTML="")}getCSSClass(e){return"cne-message".concat(e?" active":" inactive")}}i().registerComponent("CneMessage",fp);var mp=i().getComponent("Component");class vp extends mp{createEl(){return super.createEl("div",{className:"cne-overlay-content message-overlay"})}update(e){var{title:t,message:r,buttonText:n,buttonIntents:i,iconType:o,closeable:s,image:a}=e,c="";a&&(c+="<img class='image' src=\"".concat(a,'" height="50px" alt="logo" />')),o&&(c+="<div class='icon-".concat(o,"'></div>")),t&&(c+="<h3>".concat(Wo(t),"</h3>")),r&&(c+="<h4>".concat(Wo(r),"</h4>")),s||this.player_.cneOverlay.cneClose.hide(),this.el().innerHTML=c,n&&i&&this.addChild("CneButton",{intents:i,text:"▶     "+Wo(n)},3),this.player_.trigger("intent:show-message-overlay")}}i().registerComponent("CneMessageOverlay",vp);const gp=(e,t,r,n,i)=>'<label id="'.concat(e,'-label" class="cne-label" for="').concat(e,'-radiogroup">').concat(r,'</label>\n  <ul id="').concat(e,'-radiogroup" \n    role="radiogroup"\n    class="').concat(t,'"\n    tabindex="-1"\n    aria-labelledby="').concat(e,'-label">\n    ').concat(function(e,t,r){return t.reduce((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,i=n[0]===r?'class="cne-option-selected" aria-checked="true"':'aria-checked="false"',o=e+"-"+n[0].replace(" ","").toLowerCase();return"".concat(t,'\n      <li role="radio" id=').concat(o,' tabindex="0" ').concat(i,' value="').concat(n[1],'">\n        <span class="custom-control-focus" tabindex="-1" value="').concat(n[1],'">\n          ').concat(n[0],"\n        </span>\n      </li>")}),"")}(e,n,i),"\n  </ul>");class yp extends sp{constructor(e,t){super(e,t),this.focusedIndex=-1,this.setValue(this.options_.defaultValue),this.on(this.$("ul"),"click",this.handleOptionClick),this.optionElements().map((e=>{this.on(e,"keyup",this.handleKeyUp)}))}createEl(){var e=this.getId(),t=gp(e,this.options_.className,this.options_.label,this.options_.listItems,this.options_.defaultValue);return super.createEl("div",{className:super.buildCSSClass()+" cne-option-group",innerHTML:t})}updateAriaAttributes(){var e=this.selectedId();e&&(this.selectedOption().setAttribute("aria-checked","true"),this.optionElements().map((t=>{e!==t.id&&t.setAttribute("aria-checked","false")})))}handleKeyUp(e){switch(e.keyCode){case Zh.RETURN:case Zh.SPACE:this.handleOptionClick(e),e.stopPropagation();break;case Zh.LEFT:var t=e.target.previousElementSibling||e.target.parentNode.lastElementChild;t&&t.focus();break;case Zh.RIGHT:var r=e.target.nextElementSibling||e.target.parentNode.firstElementChild;r&&r.focus()}}handleOptionClick(e){this.setValue(e.target.getAttribute("value")),super.selectionChanged(),this.updateAriaAttributes()}}i().registerComponent("CneOptionGroup",yp);var bp=i().getComponent("Component"),_p="cne-overlay",Tp={embed:"share",url:"share"},wp={embed:"share",url:"share"};class Sp extends bp{constructor(e,t){super(e,t),this.on("webkitAnimationEnd",this.handleAnimationEnd)}createEl(){return super.createEl("div",{className:_p})}update(e){var{type:t,action:r,source:n}=e;this[r](t,n)}hide(e){var t=wp[e],r=this.buildStateClass(t);this.el_.className=r,this.player_&&this.player_.removeClass&&r===_p?(this.el_.className="".concat(r," inactive"),this.player_.removeClass("overlay-active")):this.el_.className=r,this.updateFocus(t)}show(e,t){this.el_.className=this.buildStateClass(e),this.player_&&this.player_.removeClass&&this.player_.addClass("overlay-active"),this.activeOverlay=e,this.openedBy=t}handleAnimationEnd(e){switch(e.animationName){case"displayIn":case"shiftInLeft":this.updateFocus(this.activeOverlay)}}updateFocus(e){if(e){var t;switch(e){case"share":t="keyboard"===this.openedBy?document.querySelector(".share-facebook-trigger"):document.querySelector(".share-facebook-trigger .custom-control-focus");break;case"embed":t=document.querySelector("#share-content-embed");break;case"url":t=document.querySelector("#share-content-url")}t&&t.focus()}}buildStateClass(e){if(!e)return _p;var t=Tp[e],r=t?"".concat(t,"-active "):"";return"".concat(_p," active ").concat(r).concat(e,"-active")}}i().registerComponent("CneOverlay",Sp);var{getPointerPosition:Cp}=i().dom,Ep=i().getComponent("Component");class Op extends Ep{createEl(){return super.createEl("div",{innerHTML:'<video class="cne-scrub-poster__video" playsinline webkit-playsinline preload="metadata"></video>',className:this.buildCSSClass()})}buildCSSClass(){return"cne-scrub-poster"}updateVideo(e){var{thumb_encode:t,duration:r}=e,n=this.video();n.addEventListener("loadedmetadata",(()=>n.currentTime=1)),this.duration=r,n.currentSrc!==t&&n.setAttribute("src",t)}updatePosition(e){var t=this.getSeekBarEl(),r=Cp(t,e).x*this.duration||0;this.video().currentTime=r+1.5}video(){return this.el().querySelector("video")}getSeekBarEl(){return this.player().getChild("controlBar").getChild("progressControl").getChild("seekBar").el()}}i().registerComponent("cneScrubPoster",Op);var{findPosition:kp,getPointerPosition:xp}=i().dom,Ap=i().getComponent("Component");class Pp extends Ap{createEl(){return super.createEl("div",{innerHTML:'\n  <div class="cne-scrubber-thumb__container">\n    <video class="cne-scrubber-thumb__video"></video>\n    <div class="cne-scrubber-thumb__time js-scrubber-time"></div>\n  </div>',className:this.buildCSSClass()})}buildCSSClass(){return"cne-scrubber-thumb"}updateVideo(e){var{thumb_encode:t,duration:r}=e,n=this.video();this.duration=r,n.currentSrc!==t&&n.setAttribute("src",t)}updatePosition(e){var t=this.getSeekBarEl(),r=xp(t,e).x*this.duration||0,n=i().formatTime(r),o=this.el();o.querySelector(".js-scrubber-time").innerHTML=n,this.video().currentTime=r+1.5;var s=e.pageX-kp(t).left,a=t.clientWidth,c=o.clientWidth,u=Math.max(s-c/2,0);o.style.left=Math.min(u,a-c)+"px"}video(){return this.el().querySelector("video")}getSeekBarEl(){return this.player().getChild("controlBar").getChild("progressControl").getChild("seekBar").el()}}i().registerComponent("CneScrubberThumb",Pp);var Ip=r(7317).Z;function Mp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mp(Object(r),!0).forEach((function(t){Dp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Rp=i().getComponent("Component"),Np="cne-player-settings";class jp extends Rp{constructor(e,t,r){super(e,t);var n=r||this.cneSettingsMenu;this.playerSubMenus={CnePlayerSettings:n.settingsBody.cnePlayerSettings},this.captionSubMenus={CneCaptionOptions:n.settingsBody.cneCaptionOptions},this.subMenus=Lp(Lp({},this.playerSubMenus),this.captionSubMenus),e.options_.persistTextTrackSettings&&this.loadSavedSettings(),n.showSubMenu(this.subMenus.CneCaptionOptions),this.on(this.player_,"caption-settings-disabled",this.disable)}createEl(){var e={id:"".concat(this.player_.id_,"-settings"),tabindex:"-1"};return super.createEl("div",{className:"cne-settings vjs-control"},e)}toggleMenu(e){"disable"===e?this.disable():"enable"===e?this.enable():(this.isDisabled()&&this.enable(),"show"===e?this.cneSettingsMenu.show():"hide"===e&&this.cneSettingsMenu.hide()),this.cneSettingsToggle.setAttribute("aria-expanded","show"===e)}disable(){this.addClass("vjs-hidden"),this.addClass("cne-settings-disabled")}enable(){this.removeClass("vjs-hidden"),this.removeClass("cne-settings-disabled")}isDisabled(){return this.el().className.indexOf("cne-settings-disabled")>=0}getSavedSettings(){return function(e){try{return JSON.parse(window.localStorage.getItem(e))}catch(e){Ip(e)}}(Np)}saveSettings(){var e=this.getCurrentSettings(!0);!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(t){var r=t;"object"==typeof t&&(r=JSON.stringify(t)),window.localStorage.setItem(e,r)}else window.localStorage.removeItem(e)}catch(e){Ip(e)}}(Np,e),this.showCaptions(),this.updateCaptionPreview()}getCurrentSettings(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(e||null==this.currentSettings)&&(this.currentSettings=Lp(Lp({},this.getPlayerSettings(e)),this.getCaptionSettings(e))),this.currentSettings}getCaptionSettings(){return(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||null==this.captionSettings)&&(this.captionSettings=Lp(Lp({},nh().defaultValues),this.buildSettingsObject(this.captionSubMenus))),this.captionSettings}getPlayerSettings(){return(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||null==this.playerSettings)&&(this.playerSettings=this.buildSettingsObject(this.playerSubMenus)),this.playerSettings}buildSettingsObject(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.subMenus,t=this.getSavedSettings()||{};return Object.keys(e).map((e=>{[...this.subMenus[e].children()].map((e=>{e.options_.settingKey&&(t[e.options_.settingKey]=e.getValue())}))})),t}updateCaptionPreview(){var e=this.activeCaptions();e&&(this.el().querySelector(".cne-captions-sample-text").style.cssText="font-size: "+this.captionSettings.fontSize,this.updateCaptionsDisplay(),e.mode="showing")}updateCaptionsDisplay(){var e=this.player_.getChild("cneTextTrackDisplay");e&&e.updateDisplay()}loadSavedSettings(){var e=this.getSavedSettings();e&&this.applySettings(e)}applySettings(e){Object.keys(this.subMenus).map((t=>{[...this.subMenus[t].children()].map((t=>{t.options_.settingKey&&t.setValue(e[t.key()])}))}))}showCaptions(){var e=this.activeCaptions();e&&"hidden"===e.mode&&this.player_.trigger("intent:toggle-captions")}activeCaptions(){return this.player_.textTracks().tracks_.find((e=>"captions"===e.kind))}}i().registerComponent("CneSettings",jp);var Up=i().getComponent("Component");class Fp extends Up{createEl(){return super.createEl("div",{innerHTML:'\n<svg class="svg-defs" focusable="false">\n  <defs>\n    <filter height="130%" id="icon-shadow">\n      <feGaussianBlur in="SourceGraphic" stdDeviation="1" result="blur"/>\n      <feOffset in="blur" dx="0" dy="0" result="offsetBlur"/>\n      <feMerge>\n        <feMergeNode in="offsetBlur"/>\n        <feMergeNode in="SourceGraphic"/>\n      </feMerge>\n    </filter>\n\n    <path id="svg-360-dial" d="M39.9333344 8.8072824C34.8318254 3.396724 27.7832164.05 19.9982777.05c-7.7837925 0-14.830103 3.3455062-19.93161 8.7548447l19.93161 21.145157L39.9333344 8.8072823z" />\n    <path id="svg-360-icon" d="M60.35 15.122v1.215c5.105.608 8.994 1.459 8.994 2.917 0 2.796-18.718 2.917-21.635 2.917v3.889s27.104-.608 27.104-6.685c-.12-2.43-6.805-3.646-14.463-4.253zM.186 19.376c0 5.956 26.861 6.685 34.033 6.685v3.889l9.359-5.713-9.359-5.713v3.889s-28.563.608-28.563-3.16c0-1.337 3.889-2.309 8.994-2.917v-1.215C6.871 15.729.186 16.945.186 19.376zm18.596-5.835l1.459-.365c.122-.122.243 0 .365.122.365 1.094 1.215 2.188 3.039 2.188 1.823 0 2.917-1.215 2.917-2.917 0-1.945-1.215-3.16-3.039-3.16 0 0-.972-.122-.972-.243V7.829c-.122-.122.851-.243.851-.243 1.702 0 2.796-1.094 2.796-2.796 0-1.58-.972-2.674-2.674-2.674-1.58 0-2.431.851-2.674 2.066-.122.122-2.066-.365-1.945-.608.365-1.823 2.066-3.403 4.74-3.403 3.039 0 4.862 1.945 4.862 4.497 0 1.702-.851 2.917-2.066 3.646v.122c1.094.365 2.431 1.945 2.431 4.133 0 2.917-2.066 4.983-5.105 4.983-2.674 0-4.497-1.459-5.105-3.525-.123-.364-.001-.486.12-.486zm14.829-5.104l4.254-7.9c.122-.122.122-.122.365-.122h1.702c.122 0 .243.122.122.243l-3.768 6.928.122.122c.365-.243.972-.365 1.702-.365 2.674 0 4.862 1.945 4.862 4.983 0 3.282-2.188 5.226-5.226 5.226-3.039 0-5.105-1.945-5.105-5.105-.124-1.58.362-2.917.97-4.01zm4.132 6.928c1.823 0 3.039-1.337 3.039-3.16s-1.215-3.16-3.039-3.16c-1.823 0-3.039 1.337-3.039 3.16s1.216 3.16 3.039 3.16zM46.13 8.68c0-3.889.122-4.862.365-5.47.608-1.945 2.188-3.16 4.619-3.16 2.309 0 4.011 1.094 4.619 3.16.122.608.365 1.58.365 5.47s-.122 4.862-.365 5.47c-.608 2.066-2.309 3.16-4.619 3.16-2.309 0-4.011-1.094-4.619-3.16-.244-.609-.365-1.581-.365-5.47zm5.105 6.685c1.215 0 2.188-.608 2.552-1.702.122-.486.243-1.215.243-4.983 0-3.889-.122-4.497-.243-5.105-.365-1.094-1.337-1.702-2.552-1.702s-2.188.608-2.552 1.702c-.122.486-.243 1.215-.243 5.105 0 3.768.122 4.497.243 4.983.242 1.215 1.215 1.702 2.552 1.702zM62.66 4.79c-1.337 0-2.431-1.094-2.431-2.431S61.323.05 62.66.05s2.309 1.094 2.309 2.309c0 1.337-.972 2.431-2.309 2.431zm0-3.525c-.608 0-1.215.486-1.215 1.094s.486 1.094 1.215 1.094c.608 0 1.094-.486 1.094-1.094 0-.607-.487-1.094-1.094-1.094z" />\n    <path id="svg-big-play-icon" fill="#FFF" d="M38 27.019l-16 9.068V18.039z" />\n    <path id="svg-email" d="M4,3v17h24V3H4L4,3z M23.9,5.2L16,11.6L8.1,5.2H23.9L23.9,5.2z M6.1,17.9V6.4l9.9,8l9.9-8v11.5H6.1 L6.1,17.9z" />\n    <path id="svg-embed" d="M10.967 25.884L.053 14.969 11.061 4.055l2.352 2.352-8.656 8.562 8.562 8.562-2.352 2.353zm36.13-10.915L36.183 4.055l-2.352 2.352 8.562 8.562-8.656 8.562 2.352 2.352 11.008-10.914zM17.581 28.921l3.128 1.029 9.494-28.871L27.075.05l-9.494 28.871z" />\n    <path id="svg-facebook" d="M22.724.34v4.72h-2.807c-1.025 0-1.716.215-2.074.644-.358.429-.536 1.073-.536 1.931v3.379h5.238l-.697 5.292h-4.541v13.57h-5.471v-13.57h-4.56v-5.292h4.559V7.116c0-2.217.62-3.936 1.859-5.158S16.584.125 18.646.125c1.753 0 3.112.072 4.078.215z" />\n    <path id="svg-full-screen" d="M3.5644 9.8778H.05V.0222h10.4667997v3.5144003H3.5644V9.8778zM38.253399 9.184h-3.514397V3.5304003h-5.6536026V.016h9.1679993v9.168zM38.253399 29.9477997H27.7866V26.433401h6.9524022v-6.3412017h3.5143967v9.8556004zM9.2180176 26.4384155v3.5143433H.0499878V20.78479H3.564392v5.6536255h5.6536256z" />\n    <path id="svg-full-screen-exit" d="M11.061904 29.9500008H7.3433752v-7.361168H.0580964v-3.642639h11.003808v11.003807zM30.9766235 29.9500008h-3.7185268v-11.003807H38.261902v3.642639h-7.2852784v7.361168zM38.261902 11.0319033H27.2580966V.028097h3.7185268v7.3611673h7.2852783v3.642639zM11.061904 11.0319033H.0580964V7.389264h7.2852788V.028097h3.7185287v11.0038063z" />\n    <path id="svg-line" d="M24 10.304c0-5.369-5.383-9.738-12-9.738-6.616 0-12 4.369-12 9.738 0 4.814 4.269 8.846 10.036 9.608.391.084.922.258 1.057.592.121.303.079.778.039 1.085l-.171 1.027c-.053.303-.242 1.186 1.039.647 1.281-.54 6.911-4.069 9.428-6.967 1.739-1.907 2.572-3.843 2.572-5.992zm-18.988-2.595c.129 0 .234.105.234.234v4.153h2.287c.129 0 .233.104.233.233v.842c0 .129-.104.234-.233.234h-3.363c-.063 0-.119-.025-.161-.065l-.001-.001-.002-.002-.001-.001-.003-.003c-.04-.042-.065-.099-.065-.161v-5.229c0-.129.104-.234.233-.234h.842zm14.992 0c.129 0 .233.105.233.234v.842c0 .129-.104.234-.233.234h-2.287v.883h2.287c.129 0 .233.105.233.234v.842c0 .129-.104.234-.233.234h-2.287v.884h2.287c.129 0 .233.105.233.233v.842c0 .129-.104.234-.233.234h-3.363c-.063 0-.12-.025-.162-.065l-.003-.004-.003-.003c-.04-.042-.066-.099-.066-.161v-5.229c0-.062.025-.119.065-.161l.004-.004.003-.003c.042-.04.099-.066.162-.066h3.363zm-10.442.001c.129 0 .234.104.234.233v5.229c0 .128-.105.233-.234.233h-.842c-.129 0-.234-.105-.234-.233v-5.229c0-.129.105-.233.234-.233h.842zm2.127 0h.008l.012.001.013.001.01.001.013.003.008.003.014.004.008.003.013.006.007.003.013.007.007.004.012.009.006.004.013.011.004.004.014.014.002.002.018.023 2.396 3.236v-3.106c0-.129.105-.233.234-.233h.841c.13 0 .234.104.234.233v5.229c0 .128-.104.233-.234.233h-.841l-.06-.008-.004-.001-.015-.005-.007-.003-.012-.004-.011-.006-.007-.003-.014-.009-.002-.002-.06-.058-2.399-3.24v3.106c0 .128-.104.233-.234.233h-.841c-.129 0-.234-.105-.234-.233v-5.229c0-.129.105-.233.234-.233h.841z"/>\n    <path id="svg-muted" d="M31.8312 13.1313l-3.7375-3.7375-1.8687 1.8687L29.9625 15l-3.7375 3.7375 1.8687 1.8688 3.7375-3.7375 3.7375 3.7375 1.8688-1.8688L33.7 15l3.7375-3.7375-1.8688-1.8687-3.7375 3.7375z" />\n    <path id="svg-pause" d="M.4850805.02h4.13172v29.9399986h-4.13172V.02zm20.8981192 29.939999h4.1317215V.02h-4.1317215v29.939999z" />\n    <path id="svg-pinterest" d="M15 .073C6.742.073.075 6.74.075 14.999c0 6.369 3.98 11.742 9.452 13.931-.1-1.195-.199-2.985.1-4.279.298-1.195 1.791-7.463 1.791-7.463s-.497-.897-.497-2.189c0-2.09 1.194-3.582 2.687-3.582 1.294 0 1.891.995 1.891 2.091 0 1.293-.796 3.184-1.195 4.975-.398 1.493.796 2.688 2.19 2.688 2.687 0 4.677-2.786 4.677-6.867 0-3.582-2.588-6.069-6.269-6.069-4.278 0-6.766 3.183-6.766 6.468 0 1.293.497 2.687 1.094 3.382.099.199.099.298.099.398 0 .497-.298 1.493-.298 1.791-.099.298-.199.298-.497.2-1.89-.896-2.985-3.582-2.985-5.771 0-4.678 3.383-9.056 9.851-9.056 5.174 0 9.154 3.682 9.154 8.657 0 5.175-3.284 9.255-7.761 9.255-1.493 0-2.886-.797-3.383-1.691l-.896 3.58c-.298 1.294-1.294 2.887-1.89 3.883 1.393.397 2.886.596 4.378.596 8.258 0 14.925-6.667 14.925-14.926S23.258.073 15 .073z" />\n    <path id="svg-play" d="M0 0l26.1 15l-26.1 15z" />\n    <path id="svg-share" d="M6.1531944 12.656022l-2.386861-2.373024L14.0298356.078994l10.2038317 10.144678-2.3868618 2.373024-6.1461678-6.1698623v14.1194935h-3.4012766V6.5454845L6.1531944 12.656022zm18.080473 4.2403174v9.3033333H3.7663334v-9.3033333H.045v13.0246658h27.9099998V16.8963394h-3.7213324z" />\n    <path id="svg-speaker" d="M20.6187 29.95L8.649 22.475H.0625V7.525h7.475L20.6187.05v29.9zM3.8 18.7375h3.7375v-7.475H3.8v7.475zM16.8813 7.525l-5.6063 3.3222v8.3056l5.6063 3.3222V7.525z" />\n    <path id="svg-tumblr" d="M18.346 29.95c-6.69 0-9.199-4.685-9.199-7.973V12.21H6.01V8.322C10.819 6.728 11.864 2.64 12.177.25c0-.199.105-.199.209-.199h4.601v7.575h6.272v4.485h-6.272v9.269c0 1.295.523 2.99 2.926 2.99h.104c.836 0 1.986-.299 2.509-.498l1.464 4.285c-.523.798-3.137 1.694-5.437 1.793h-.207z" />\n    <path id="svg-twitter" d="M29.95 5.742c-.847 1.24-1.872 2.296-3.073 3.168.013.177.019.443.019.797 0 1.644-.24 3.285-.721 4.923s-1.211 3.209-2.191 4.715c-.98 1.505-2.147 2.836-3.5 3.994s-2.985 2.081-4.895 2.77-3.953 1.034-6.128 1.034c-3.428 0-6.564-.917-9.41-2.751.443.051.936.076 1.48.076 2.846 0 5.382-.873 7.608-2.618-1.328-.025-2.517-.433-3.567-1.224s-1.772-1.8-2.164-3.027c.417.063.803.095 1.157.095.544 0 1.081-.07 1.613-.209-1.417-.291-2.59-.996-3.519-2.115s-1.394-2.419-1.394-3.899v-.076c.86.481 1.783.74 2.77.778-.835-.557-1.499-1.284-1.992-2.182-.493-.898-.74-1.872-.74-2.922 0-1.113.278-2.144.835-3.092C3.667 5.862 5.53 7.37 7.724 8.502c2.194 1.132 4.544 1.761 7.048 1.888-.101-.481-.152-.949-.152-1.404 0-1.695.598-3.14 1.793-4.335s2.64-1.793 4.335-1.793c1.771 0 3.263.645 4.477 1.935 1.379-.266 2.675-.759 3.889-1.48-.468 1.455-1.366 2.58-2.694 3.377 1.177-.126 2.354-.442 3.53-.948z" />\n    <path id="svg-url" d="M24.942 5.371l-4.126-4.126C20.038.469 19.08.05 18.004.05s-2.033.419-2.751 1.136L7.121 9.319c-1.555 1.555-1.555 4.008 0 5.562l4.127 4.126c.778.777 1.795 1.136 2.751 1.136 1.017 0 2.032-.359 2.751-1.136l1.495-1.495-2.154-2.153-1.494 1.494c-.358.36-.957.36-1.256 0l-4.127-4.125c-.358-.358-.358-.957 0-1.256l8.134-8.133c.18-.179.418-.299.657-.299s.479.119.657.239l4.127 4.126c.179.18.24.419.24.658 0 .239-.12.478-.24.657l-2.033 2.094 2.153 2.153 2.033-2.033c.718-.718 1.136-1.734 1.136-2.751s-.419-2.094-1.136-2.812zm-6.161 5.622c-1.555-1.555-4.007-1.555-5.561 0l-1.495 1.495 2.153 2.153 1.494-1.495c.359-.358.957-.358 1.257 0l4.126 4.127c.18.179.24.418.24.657 0 .24-.12.479-.24.657l-8.072 8.073c-.359.358-.957.358-1.256 0L7.24 22.534c-.358-.358-.358-.957 0-1.256l2.033-2.033-2.153-2.153-2.033 2.033c-1.555 1.555-1.555 4.007 0 5.562l4.126 4.126c.778.778 1.795 1.136 2.751 1.136 1.017 0 2.033-.358 2.751-1.136l8.133-8.133c.719-.719 1.136-1.735 1.136-2.751 0-1.017-.418-2.033-1.136-2.751l-4.067-4.185z" />\n    <path id="svg-volume-high" d="M33.0288 26.2125c2.8487-3.0481 4.4087-7.0396 4.4087-11.2488s-1.56-8.2007-4.3409-11.1762l-2.0348 2.1772c2.2383 2.4675 3.4591 5.7333 3.4591 9.0716s-1.2209 6.5316-3.527 8.999l2.0349 2.1772z" />\n    <path id="svg-volume-low" d="M28.2598 21.2277l-2.0348-2.1772c1.0174-1.0886 1.56-2.4675 1.56-3.9915s-.5426-2.9029-1.56-3.9915l2.0348-2.1772c1.56 1.6692 2.3739 3.8464 2.3739 6.0961 0 2.3949-.8817 4.5721-2.3739 6.2413z" />\n    <path id="svg-cc-off" fill="#FFF" fill-rule="evenodd" d="M0 0h20v16H0V0zm1 1h18v14H1V1zm6.226 10.171c1.626 0 2.804-1.024 2.857-2.474H8.536c-.093.681-.611 1.13-1.306 1.13-.887 0-1.428-.765-1.428-2.004 0-1.235.54-1.991 1.424-1.991.694 0 1.217.466 1.3 1.156h1.552c-.048-1.437-1.257-2.5-2.852-2.5-1.903 0-3.067 1.27-3.067 3.34 0 2.069 1.169 3.343 3.067 3.343zm6.79 0c1.626 0 2.803-1.024 2.856-2.474h-1.547c-.092.681-.61 1.13-1.305 1.13-.888 0-1.428-.765-1.428-2.004 0-1.235.54-1.991 1.424-1.991.694 0 1.217.466 1.3 1.156h1.552c-.049-1.437-1.257-2.5-2.852-2.5-1.903 0-3.068 1.27-3.068 3.34 0 2.069 1.17 3.343 3.068 3.343z"/>\n    <path id="svg-cc-on" d="M0 0h20v16H0V0zm7.226 11.171c1.626 0 2.804-1.024 2.857-2.474H8.536c-.093.681-.611 1.13-1.306 1.13-.887 0-1.428-.765-1.428-2.004 0-1.235.54-1.991 1.424-1.991.694 0 1.217.466 1.3 1.156h1.552c-.048-1.437-1.257-2.5-2.852-2.5-1.903 0-3.067 1.27-3.067 3.34 0 2.069 1.169 3.343 3.067 3.343zm6.79 0c1.626 0 2.803-1.024 2.856-2.474h-1.547c-.092.681-.61 1.13-1.305 1.13-.888 0-1.428-.765-1.428-2.004 0-1.235.54-1.991 1.424-1.991.694 0 1.217.466 1.3 1.156h1.552c-.049-1.437-1.257-2.5-2.852-2.5-1.903 0-3.068 1.27-3.068 3.34 0 2.069 1.17 3.343 3.068 3.343z"/>\n    <path id="svg-cc-disabled"  opacity=".4" fill="#FFF" fill-rule="evenodd" d="M0 0h20v16H0V0zm1 1h18v14H1V1zm6.226 10.171c1.626 0 2.804-1.024 2.857-2.474H8.536c-.093.681-.611 1.13-1.306 1.13-.887 0-1.428-.765-1.428-2.004 0-1.235.54-1.991 1.424-1.991.694 0 1.217.466 1.3 1.156h1.552c-.048-1.437-1.257-2.5-2.852-2.5-1.903 0-3.067 1.27-3.067 3.34 0 2.069 1.169 3.343 3.067 3.343zm6.79 0c1.626 0 2.803-1.024 2.856-2.474h-1.547c-.092.681-.61 1.13-1.305 1.13-.888 0-1.428-.765-1.428-2.004 0-1.235.54-1.991 1.424-1.991.694 0 1.217.466 1.3 1.156h1.552c-.049-1.437-1.257-2.5-2.852-2.5-1.903 0-3.068 1.27-3.068 3.34 0 2.069 1.17 3.343 3.068 3.343z"/>\n    <path id="svg-settings" fill="#FFF" fill-rule="evenodd" d="M8 11.36a3.361 3.361 0 1 1 0-6.722 3.361 3.361 0 0 1 0 6.723zm8-2.026V6.666h-2.796c-.128-.499-.325-.97-.582-1.403L14.6 3.286 12.714 1.4l-1.977 1.978a5.343 5.343 0 0 0-1.403-.582V0H6.666v2.796c-.499.128-.97.325-1.403.582L3.286 1.4 1.4 3.286l1.978 1.977a5.343 5.343 0 0 0-.582 1.403H0v2.668h2.796c.128.499.325.97.582 1.403L1.4 12.714 3.286 14.6l1.977-1.978c.433.257.904.454 1.403.582V16h2.668v-2.796c.499-.128.97-.325 1.403-.582l1.977 1.978 1.886-1.886-1.978-1.977c.257-.433.454-.904.582-1.403H16z"/>\n    <path id="svg-tooltip-caret" transform="rotate(-180 6,2) " fill="#000" fill-opacity=".9" fill-rule="evenodd" d="M6 0l6 6H0z"/>\n    <path id="svg-chevron-down" fill="#FFF" fill-rule="evenodd" d="M0 1l1-1 4 4 4-4 1 1-5 5z"/>\n    <path id="svg-chevron-back" fill="#FFF" fill-rule="evenodd" d="M5 10l1-1-4-4 4-4-1-1-5 5z"/>\n    <path id="svg-check" fill="#FFF" fill-rule="evenodd" d="M4.222 9L0 4.829l1.33-1.315L4.223 6.37 10.669 0 12 1.315z"/>\n    <path id="svg-close" fill="#FFF" fill-opacity=".5" fill-rule="evenodd" d="M5.95 4.536L1.707.293.293 1.707 4.536 5.95.293 10.192l1.414 1.415L5.95 7.364l4.242 4.243 1.415-1.415L7.364 5.95l4.243-4.243L10.192.293 5.95 4.536z"/>\n  </defs>\n</svg>',className:"svg-definitions"})}}i().registerComponent("CneSvgDefs",Fp);var $p=i().getComponent("Component");class Bp extends $p{createEl(){return super.createEl("div",{innerHTML:'\n<div class="live-overlay--msg">\n  <img src="" height="50px" class="live-overlay--msg--image" />\n  <h4>'.concat(Wo("cne-player-live-overlay-header"),"</h4>\n</div>"),className:"cne-overlay-content live-overlay"})}update(e){var{brand_image:t}=e;this.el_&&(this.$("img").src=t)}}i().registerComponent("CneLiveOverlay",Bp);class Vp extends Kh{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp)}createEl(){var e=Wo("cne-player-live-data-label");return super.createEl("div",{innerHTML:'<span class="custom-control-focus" tabindex="-1" data-label='.concat(e,"></span>"),className:"vjs-control live-indicator"})}handleClick(){this.player_.trigger("intent:seek-latest")}}i().registerComponent("CneLiveIndicator",Vp);class qp extends Kh{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp)}createEl(){var e=Wo("cne-player-live-data-label");return super.createEl("div",{innerHTML:'<span class="custom-control-focus" tabindex="-1">'.concat(e,"</span>"),className:"vjs-control live-indicator-active"})}handleClick(){this.player_.trigger("intent:seek-latest")}}i().registerComponent("CneLiveIndicatorActive",qp);class Hp extends Kh{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp)}createEl(){var e=Wo("cne-player-live-ad-label");return super.createEl("div",{innerHTML:'<span class="custom-control-focus" tabindex="-1">'.concat(e,"</span>"),className:"vjs-control live-indicator-ad"})}}i().registerComponent("CneLiveIndicatorAd",Hp);var Wp=i().getComponent("TextTrackDisplay"),zp={small:.0356,medium:.0445,large:.0533};function Gp(e,t){return"rgba("+parseInt(e[1]+e[1],16)+","+parseInt(e[2]+e[2],16)+","+parseInt(e[3]+e[3],16)+","+t+")"}class Kp extends Wp{buildCSSClass(){return"cne-text-track-display ".concat(super.buildCSSClass)}setVideoData(e){this.videoData=e}originalPlayerHeight(){return this.originalHeight||(this.originalHeight=this.player_.el().clientHeight),this.originalHeight}updateForTrack(e){if("function"==typeof window.WebVTT&&e.activeCues){var t=this.player_.controlBar.cneSettings.getCaptionSettings()||{},r=Array.from(this.player_.remoteTextTracks().tracks_).filter((e=>{var{id:t=""}=e;return t.includes("CC")})).sort(((e,t)=>e.id<t.id?-1:1))[0],n=r?Array.from(r.activeCues):Array.from(e.activeCues);window.WebVTT.processCues(window,n,this.el_),n.map(((e,r)=>{this.updateCueStyles(e,t,r,n.length)}))}}updateCaptionsVisibility(e){"hidden"===e||"disabled"===e?this.el_.classList.add("hide-captions"):"showing"===e&&this.el_.classList.remove("hide-captions")}updateCueStyles(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(e){var{fonts:i,textShadows:o,positions:s}=nh(),a=e.displayState,c=t.fontVariant||t.fontFamily,u=Gp(t.backgroundColor||"#000",t.backgroundOpacity||1),l=null;if(t.fontFamily&&(a.firstChild.style.fontFamily=i.families[c]),t.fontSize&&(a.style.fontSize=t.fontSize,Object.keys(i.sizes).map((e=>{var r="captions-".concat(e);t.fontSize===i.sizes[e]?(this.addClass(r),l=zp[e]):this.removeClass(r)}))),l){var d=Math.round(l*this.player_.el_.clientHeight);a.style.fontSize=Math.max(12,d)+"px",a.style.height="auto"}var h=t.position;if("auto"===h&&this.videoData&&this.videoData.isLive&&(h="bottom"),s[h]){var p=s[h].top,f=s[h].bottom,m=a.offsetHeight,v=Math.max(n-r-1,0);a.style.top="auto"!==p?"".concat(parseInt(p)+m*v,"px"):p,a.style.bottom="auto"!==f?"".concat(parseInt(f)+m*v,"px"):f}if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity){var g=Gp(t.color||"#fff",t.textOpacity);a.firstChild.style.color=g}t.backgroundColor&&(a.firstChild.style.backgroundColor=u),t.edgeStyle&&(a.firstChild.style.textShadow=o[t.edgeStyle])}}}i().registerComponent("CneTextTrackDisplay",Kp);var Xp=i().getComponent("Component");class Yp extends Xp{createEl(){var e={id:"cne-volume-alert","aria-live":"assertive","aria-label":Wo("cne-aria-volume-alert")};return super.createEl("div",{className:"hidden-accessible"},e)}update(e){var t=Wo("cne-aria-volume-update");this.el_.innerText="".concat(t," ").concat(Math.round(100*e),"%")}}i().registerComponent("CneVolumeAlert",Yp);var Qp=i().getComponent("Component");class Jp extends Qp{createEl(){return super.createEl("div",{className:"cne-volume-toggle vjs-control"},{tabindex:"-1"})}}i().registerComponent("CneVolumeToggle",Jp);var Zp=i().getComponent("Component");class ef extends Zp{createEl(){return super.createEl("div",{className:this.buildCSSClass()})}update(e){var{hideHoverTitle:t,title:r,url:n,branded:i,branded_caption:o}=e;if(!t){Array.from(this.el_.childNodes).forEach((e=>{this.el_.removeChild(e)}));var s=document.createElement("h2");if(s.innerHTML=r,s.className="video-title-text",!n)return this.el_.appendChild(s),void(i&&this.el_.appendChild(this.buildBrandedContent(o)));var a=document.createElement("a");a.href=n,a.target="_blank",a.className="video-title-link",a.appendChild(s),i&&a.appendChild(this.buildBrandedContent(o)),this.el_.appendChild(a)}}buildCSSClass(){return"cne-video-title"}buildBrandedContent(e){var t=document.createElement("p");return t.className="branded-content",t.innerHTML=e||"Sponsored",t}}i().registerComponent("CneVideoTitle",ef);var tf='\n<span class="custom-control-focus" tabindex="-1">\n  '.concat(Sh,"\n</span>");class rf extends Kh{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp)}createEl(){var e={"aria-label":Wo("cne-aria-fullscreen")};return super.createEl("div",{innerHTML:tf,className:"vjs-fullscreen-control ".concat(super.buildCSSClass())},e)}handleClick(){this.player_.isFullscreen()?(this.player_.trigger("intent:exit-fullscreen"),this.setAttribute("aria-label",Wo("cne-aria-fullscreen"))):(this.player_.trigger("intent:enter-fullscreen"),this.setAttribute("aria-label",Wo("cne-aria-exit-fullscreen")))}}i().registerComponent("FullscreenToggle",rf);var nf=i().getComponent("Component");class of extends nf{createEl(){return super.createEl("div",{innerHTML:'<div class="cne-loading-spinner-circle"></div>',className:"cne-loading-spinner"})}}i().registerComponent("LoadingSpinner",of);var sf=i().getComponent("Button");class af extends sf{constructor(e,t){super(e,t),this.checkVolumeSupport(),this.on(e,"volumechange",this.update),this.on(e,"loadstart",this.update),this.on("keydown",this.handleKeyDown),this.on("keyup",this.handleKeyUp),this.on("focus",(()=>this.handleFocus(!0))),this.on("focusout",(()=>this.handleFocus(!1)))}createEl(){return super.createEl("button",{innerHTML:'\n<div class="mute-toggle-container">\n  <span class="custom-control-focus" tabindex="-1">\n    '.concat(Eh,'\n  </span>\n</div>\n<span style="display:none;" id="cne-volume-instructions">\n  ').concat(Wo("cne-player-volume-instructions"),"\n</span>")},{id:"cne-mute-toggle","aria-controls":"".concat(this.player_.id_,"-cne-volume-control"),"aria-describedby":"cne-volume-instructions","aria-haspopup":"true","aria-live":"polite","aria-roledescription":"Mute Button",role:"application",tabindex:"0"})}buildCSSClass(){return"vjs-mute-control ".concat(super.buildCSSClass())}checkVolumeSupport(){Zs&&"9"===ea&&this.addClass("vjs-hidden")}update(){var e=this.player_.volume(),t=3;0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);var r=this.player_.muted()?Wo("cne-player-volume-unmute"):Wo("cne-player-volume-mute");this.controlText()!==r&&this.controlText(r);for(var n=0;n<4;n++)this.removeClass("vjs-vol-".concat(n));this.addClass("vjs-vol-".concat(t))}handleKeyDown(e){var t,r;switch(e.stopPropagation(),e.keyCode){case Zh.UP:case Zh.DOWN:e.preventDefault(),t=this.player_.volume(),r=e.keyCode==Zh.UP?Math.min(t+.1,1):Math.max(t-.1,0),this.player_.trigger("intent:volume-change",{level:r})}}handleKeyUp(e){32===e.keyCode&&e.stopPropagation()}handleClick(e){e.stopPropagation(),this.player_.trigger("intent:mute-toggle",!this.player_.muted())}handleFocus(e){this.player_.trigger("intent:mute-focus",e)}}af.prototype.controlText_="Mute",i().registerComponent("MuteToggle",af);class cf extends Kh{createEl(){return super.createEl("div",{innerHTML:this.options_.content,className:"share-content js-share-content",id:"share-content-".concat(this.options_.type)})}handleClick(){!function(e){var t=document.getElementById(e);if(document.body.createTextRange)document.body.createTextRange().moveToElementText(t).select();else if(window.getSelection){var r=window.getSelection(),n=document.createRange();n.selectNodeContents(t),r.removeAllRanges(),r.addRange(n)}}("share-content-".concat(this.options_.type))}}i().registerComponent("OverlayTextBox",cf);var uf=i().getComponent("Component");class lf extends uf{createEl(){return super.createEl("div",{className:"persistent-share"})}}i().registerComponent("PersistentShare",lf);var df=i().getComponent("ClickableComponent");class hf extends df{constructor(e,t){var r=Object.assign(t);r.reportTouchActivity=!1,super(e,r),this.on(["mousedown","touchstart"],(e=>{e.stopPropagation()})),this.on(["mouseup","touchend"],(e=>{e.stopPropagation(),this.unmute()}))}createEl(){return super.createEl("div",{innerHTML:"<div class='persistent-mute-icon'>".concat(Oh,"</div>"),className:"persistent-mute"})}update(e){e?this.show():this.hide()}unmute(){this.player_.trigger("intent:mute-toggle",!1)}}i().registerComponent("PersistentMute",hf);var pf=i().getComponent("PlayToggle"),ff='\n<div class="play-toggle-container">\n  <span class="custom-control-focus" tabindex="-1">\n    '.concat(Ah,"\n  </span>\n</div>");class mf extends pf{createEl(){return super.createEl("button",{innerHTML:ff},{tabindex:"0"})}createControlTextEl(){}controlText(){}handleClick(){this.player_.paused()?this.player_.trigger("intent:play"):this.player_.trigger("intent:pause")}handlePlay(e){var t=Wo("cne-aria-pause");this.setAttribute("aria-label",t),super.handlePlay(e)}handlePause(e){var t=Wo("cne-aria-play");this.setAttribute("aria-label",t),super.handlePause(e)}}i().registerComponent("PlayToggle",mf);var vf=i().getComponent("ClickableComponent");class gf extends vf{createEl(){var e=Wo("cne-aria-playlist-next"),t=Wo("cne-aria-playlist-previous"),r="right"===this.options_.direction?e:t;return super.createEl("div",{innerHTML:'<span class="playlist-caret" aria-label="'.concat(r,'"></span>'),className:"playlist-arrow ".concat(this.options_.direction)})}handleClick(){this.clickCallback(this.options_.direction)}updatePage(e,t){var r=this.options_.direction;"left"===r&&0===e||"right"===r&&e===t?this.addClass("disabled"):this.removeClass("disabled")}clickCallback(){}}i().registerComponent("PlaylistArrow",gf);var yf=i().getComponent("Component");class bf extends yf{createEl(){return this.playlist={},super.createEl("div",{className:"playlist-body"})}update(e,t){var[r,n,i]=this.children();if(n.update(e,t),t&&t.videos&&t.id!=this.playlist.id){this.playlist=t,r.clickCallback=this.movePage.bind(this),i.clickCallback=this.movePage.bind(this),n.updatePageFromIndex=this.updatePageFromIndex.bind(this);var o=t.videos.length,s=n.el().getBoundingClientRect().width;this.pageSize=Math.floor(s/156),this.maxPage=Math.ceil(o/this.pageSize)-1,this.curPage=0,this.updateChildPages()}}movePage(e){"left"===e?this.curPage=Math.max(this.curPage-1,0):"right"===e&&(this.curPage=Math.min(this.curPage+1,this.maxPage)),this.updateChildPages()}updatePageFromIndex(e){this.curPage=Math.floor(e/this.pageSize),this.updateChildPages()}updateChildPages(){for(var e of this.children())e.updatePage(this.curPage,this.maxPage,this.pageSize)}}i().registerComponent("PlaylistBody",bf);var _f=i().getComponent("Component");class Tf extends _f{createEl(){return super.createEl("div",{className:"playlist-container"})}update(e,t){for(var r of this.children())r.update(e,t)}}i().registerComponent("PlaylistContainer",Tf);var wf=i().getComponent("Component");class Sf extends wf{createEl(){return super.createEl("div",{className:"playlist-header"})}update(e,t){t&&t.videos&&(this.playlist=t,e?this.playlist.videos.forEach(((t,r)=>{e.id===t.id&&this.renderWithIndex(r+1)})):this.renderWithIndex(1))}renderWithIndex(e){var t;this.el().setAttribute("data-title",this.playlist.title),this.el().innerHTML=(t={length:this.playlist.videos.length,index:e},'<div class="playlist-index"><span>'.concat(t.index,"</span><span>/ ").concat(t.length,"</span></div>"))}}i().registerComponent("PlaylistHeader",Sf);var Cf=i().getComponent("Component");class Ef extends Cf{createEl(){return this.playlist={},this.video={},super.createEl("div",{className:"playlist-items"})}update(e,t){t&&t.videos&&this.playlist.id!==t.id&&(this.playlist=t,t.videos.forEach(((e,t)=>{this.addChild("PlaylistItem",{video:e,index:t})})));e&&this.video.id!==e.id&&(this.video=e,this.children().forEach(((t,r)=>{t.video.id===e.id?(t.makeSelected(),this.updatePageFromIndex(r)):t.makeUnselected()})))}moveTo(e){this.el().style.transform="translateX(".concat(-e,"px)")}updatePageFromIndex(){}}i().registerComponent("PlaylistItems",Ef);var Of=i().getComponent("Component");class kf extends Of{createEl(){return super.createEl("div",{className:"playlist-items-container"})}update(e,t){t!==this.playlist&&(this.playlist=t,this.removeChild("PlaylistItems"),this.addChild("PlaylistItems"));var r=this.childNameIndex_.PlaylistItems;r.updatePageFromIndex=this.updatePageFromIndex,r.update(e,t)}updatePage(e,t,r){var n=this.childNameIndex_.PlaylistItems;if(e===t){var i=this.el().getBoundingClientRect().width,o=n.el().getBoundingClientRect().width;n.moveTo(o-i)}else n.moveTo(e*r*156)}updatePageFromIndex(){}}i().registerComponent("PlaylistItemsContainer",kf);const xf=(e,t,r,n)=>'<div class="poster-thumb-container">\n    <div class="poster-thumb" style="background-image:url('.concat(t,');"></div>\n    <div class="little-play-btn">').concat(e,"</div>\n  </div>\n  <h5>").concat(function(e){return e?'<span class="poster-thumb-title-sponsored">'.concat(Wo("cne-player-sponsored"),": </span>"):""}(n)).concat(r,"</h5>");var Af=i().getComponent("ClickableComponent");class Pf extends Af{constructor(e,t){super(e,t),this.video=t.video,this.index=t.index}createEl(){var e=this.options().video,t=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.length<t&&(r=""),e.slice(0,t)+r}(e.title,43,"...");return super.createEl("div",{className:"playlist-item",innerHTML:xf(xh,e.poster_frame,t,e.paid_content)})}handleClick(){this.player().trigger("intent:load-video",{video:this.video,index:this.index})}makeSelected(){this.addClass("selected")}makeUnselected(){this.removeClass("selected")}}i().registerComponent("PlaylistItem",Pf);var If=i().getComponent("PosterImage");class Mf extends If{handleClick(){this.player_.trigger("intent:play")}}i().registerComponent("PosterImage",Mf);var Lf=i().getComponent("ProgressControl");class Df extends Lf{constructor(e,t){super(e,t),e.ready((()=>{this.on(this.el(),"mousemove",this.triggerMouseMoveIntent),this.on(this.el(),"touchmove",this.triggerMouseMoveIntent),this.on(this.el(),"mousedown",this.triggerMouseDownIntent),this.on(this.el(),"touchstart",this.triggerMouseDownIntent)}))}triggerMouseDownIntent(e){this.player_.trigger("intent:progress-mouse",{event:e,type:"down"})}triggerMouseMoveIntent(e){this.player_.trigger("intent:progress-mouse",{event:e,type:"move"})}}i().registerComponent("ProgressControl",Df);var Rf=i().getComponent("SeekBar");class Nf extends Rf{handleMouseDown(e){super.handleMouseDown(e),this.player().trigger("intent:seek-start"),this.start=Date.now()}handleMouseUp(e){super.handleMouseUp(e),this.player().trigger({type:"intent:seek-end",elapsed:Date.now()-this.start})}allowTabFocus(e){this.el().setAttribute("tabindex",e?"0":"-1")}updateCuePostMidroll(e){var{finishedAdIndex:t}=e,r=this.cues&&this.cues.filter((e=>e.idx===t))[0];r&&(r.node.parentNode.removeChild(r.node),r.node=null),!this.el_.querySelectorAll(".cne-cue-marker").length&&this.removeCueContainer()}removeCueContainer(){var e=this.el_.querySelectorAll(".cne-cue-container");e.length&&e.forEach((e=>e.parentNode.removeChild(e)))}addCueIndicators(e){var{cue_points:t,duration:r}=e;this.cues=[];var n=1e3*r,i=document.createElement("div");i.className="cne-cue-container",t.forEach(((e,t)=>{var r=document.createElement("div"),o=e/n*100;r.className="cne-cue-marker",r.style.left="calc(".concat(o,"% - 4px)"),i.append(r),this.cues&&this.cues.push({idx:t+1,node:r})})),this.el_.appendChild(i)}}i().registerComponent("SeekBar",Nf);var jf=i().getComponent("Component");class Uf extends jf{createEl(){return super.createEl("div",{className:"cne-settings-body"})}}i().registerComponent("SettingsBody",Uf);var Ff=i().getComponent("Component");class $f extends Ff{createEl(){return super.createEl("div",{className:"cne-settings-submenu cne-caption-options"},{title:this.options_.title})}}i().registerComponent("CneCaptionOptions",$f);var Bf=i().getComponent("Component");class Vf extends Bf{createEl(){return super.createEl("div",{className:"cne-settings-footer",innerHTML:'<span class="cne-captions-sample-text" style="">'.concat(Wo("cne-player-caption-sample-text"),"</span>")})}}i().registerComponent("SettingsFooter",Vf);var qf=i().getComponent("Component");class Hf extends qf{constructor(e,t){super(e,t),this.on(this.$(".cne-settings-close"),"click",this.closeMenu),this.on(this.$(".cne-settings-close"),"keyup",this.closeButtonKeyUp)}createEl(){return super.createEl("div",{innerHTML:'<div class="cne-settings-back">\n    <span class="cne-settings-back-arrow">'.concat('\n<svg width="6" height="10" viewBox="0 0 6 10" focusable="false">\n  <use xlink:href="#svg-chevron-back" />\n</svg>','&nbsp;</span>\n    <span class="cne-settings-back-text">').concat(Wo("cne-player-settings-back"),'</span>\n  </div>\n  <h3 class="cne-settings-title">').concat(Wo("cne-player-settings-title"),'</h3>\n  <div class="cne-settings-close" tabindex="0" aria-label="').concat(Wo("cne-aria-exit-settings"),'" role="button">\n    <span class="custom-control-focus" tabindex="-1">\n      ').concat('\n<svg width="12" height="12" viewBox="0 0 12 12" focusable="false">\n  <use xlink:href="#svg-close" />\n</svg>','\n    </span>\n    <span class="vjs-hidden">').concat(Wo("cne-player-settings-close"),"</span>\n  </div>"),className:"cne-settings-header"})}closeButtonKeyUp(e){e.keyCode!==Zh.SPACE&&e.keyCode!==Zh.RETURN||this.closeMenu(),e.stopPropagation()}closeMenu(){this.player_.trigger("intent:close-settings")}title(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e)return this.el_.querySelector(".cne-settings-title").innerHTML;this.el_.querySelector(".cne-settings-title").innerHTML=e}}i().registerComponent("SettingsHeader",Hf);var Wf=i().getComponent("Component");class zf extends Wf{constructor(e,t){super(e,t),this.hide()}createEl(){return super.createEl("div",{id:"".concat(this.player_.id_,"-settings-menu"),className:"cne-settings-menu",innerHTML:'\n<svg class="cne-tooltip-caret" width="12" height="6" viewBox="0 0 12 6" focusable="false">\n  <use xlink:href="#svg-tooltip-caret" />\n</svg>'})}disableCaptionSettings(){this.player_.trigger("caption-settings-disabled")}enableCaptionSettings(){this.player_.trigger("caption-settings-enabled")}hideSubMenu(e){e.el_.style.display="none"}showSubMenu(e){var t=this.getSubMenus(),r=e||t[0];t.map((e=>{e.name()===r.name()?(e.el_.style.display="block",this.settingsHeader.title(r.getAttribute("title"))):e.el_.style.display="none"}))}toggleSubMenu(e,t){var r=this.settingsBody[e];r&&("show"==t?this.showSubMenu(r):"hide"===t?this.hideSubMenu(r):"disable"===t?this.disableCaptionSettings():"enable"===t&&this.enableCaptionSettings())}getSubMenus(e){return this.settingsBody.children().filter((t=>t.el_.className&&t.el_.className.indexOf("cne-settings-submenu")>=0&&(!e||t.el_.className.indexOf(e)>=0)))||[]}getDisabledSubMenus(){return this.getSubMenus("cne-menu-disabled")}visible(){return!this.hasClass("vjs-hidden")}}i().registerComponent("CneSettingsMenu",zf);var Gf=i().getComponent("Component");class Kf extends Gf{createEl(){return super.createEl("div",{className:"cne-settings-submenu cne-player-settings"},{title:this.options_.title})}}i().registerComponent("CnePlayerSettings",Kf);var Xf='\n<span class="custom-control-focus" tabindex="-1">\n  '.concat('\n<svg width="16" height="16" viewbox="0 0 16 16" focusable="false">\n  <use xLink:href="#svg-settings" class="svg-settings" />\n  <use xLink:href="#svg-settings" class="svg-settings shadow" />\n</svg>',"\n</span>");class Yf extends Kh{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp),this.on("keydown",this.handleKeyDown),this.el_.removeAttribute("aria-live")}createEl(){var e={"aria-label":Wo("cne-aria-settings-label"),"aria-controls":"".concat(this.player_.id_,"_settings"),"aria-expanded":"false",tabindex:"0",role:"button"};return super.createEl("div",{innerHTML:Xf,className:"cne-settings-toggle ".concat(super.buildCSSClass())},e)}handleKeyDown(e){ep.indexOf(e.keyCode)>-1&&e.preventDefault()}handleKeyUp(e){switch(e.stopPropagation(),e.keyCode){case Zh.UP:case Zh.DOWN:e.preventDefault(),this.handleClick(e);break;case Zh.ESC:this.player_.controlBar.cneSettings.cneSettingsMenu.visible()&&this.player_.trigger("intent:close-settings")}}handleClick(){this.player_.controlBar.cneSettings.cneSettingsMenu.visible()?this.player_.trigger("intent:close-settings"):this.player_.trigger("intent:show-settings")}}i().registerComponent("CneSettingsToggle",Yf);var Qf={facebook:wh,twitter:Dh,tumblr:Lh,line:Ch,pinterest:kh,embed:'\n<svg height="100%" viewBox="0 0 47.15 30" focusable="false">\n  <use xlink:href="#svg-embed" />\n</svg>',url:Rh,email:Th};class Jf extends Kh{constructor(e,t){super(e,t),this.on("keyup",(e=>e.stopPropagation()))}createEl(){var{action:e}=this.options_,{ariaLabel:t}=this.options_,r={"aria-label":t},n=Qf[e]||"",i=super.createEl("div",{innerHTML:'<span class="custom-control-focus" tabindex="-1">\n                      '.concat(n,"\n                    </span>"),className:"share-".concat(e,"-trigger")},r);return i.removeAttribute("aria-live"),i}handleClick(e){e.stopPropagation();var{action:t}=this.options_;switch(t){case"embed":this.player_.trigger("intent:show-share-embed"),this.player_.trigger("intent:share",{action:"embed"});break;case"url":this.player_.trigger("intent:show-share-url"),this.player_.trigger("intent:share",{action:"url"});break;default:this.player_.trigger("intent:share",{action:t})}}}i().registerComponent("ShareActionButton",Jf);var Zf=i().getComponent("Component");class em extends Zf{createEl(){return super.createEl("div",{className:"share-overlay--container share-actions"})}}i().registerComponent("ShareActions",em);var tm=i().getComponent("Component");class rm extends tm{constructor(e,t){super(e,t),this.contentEl_=document.createElement("div"),this.contentEl_.className="share-content--container",this.stopPropagationFn_=function(e){e.stopPropagation()},this.contentEl_.addEventListener("click",this.stopPropagationFn_),this.el_.appendChild(this.contentEl_),this.header=document.createElement("h4"),this.header.innerHTML=t.headerText,this.type=t.type}createEl(){return super.createEl("div",{className:this.buildCSSClass()})}dispose(){this.contentEl_.removeEventListener("click",this.stopPropagationFn_),super.dispose()}render(){this.removeChild("OverlayTextBox"),this.addChild("OverlayTextBox",{content:this.getContent(),type:this.options_.type}),this.contentEl().insertBefore(this.header,this.contentEl().firstChild)}buildCSSClass(){return"share-overlay--container share-".concat(this.options_.type)}}i().registerComponent("ShareLink",rm);const nm=rm;var im={allure:"/3379/allure.dart/share",architecturaldigest:"/3379/arch.dart/share",arstechnica:"/3379/ars.dart/share",bonappetit:"/3379/bonapp.dart/share",brides:"/479/brides.dart/share",cntraveler:"/3379/cntraveler.dart/share",epicurious:"/3379/epi.dart/share",glamour:"/3379/glamour.dart/share",iris:"/3379/thescene.dart/watch/share",pitchfork:"/3379/pitchfork.dart/share",self:"/3379/self.dart/share",teenvogue:"/3379/teenvogue.dart/share",thenewyorker:"/3379/newyorker.dart/share",vanityfair:"/3379/vanityfair.dart/share",vogue:"/3379/vogue.dart/share",w:"/3379/wmagazine.dart/share",golfdigest:"/3379/conde.golfdigest/partner",gq:"/3379/conde.gq/partner",wired:"/3379/conde.wired/partner",architecturaldigestindia:"/5574/in.archdigest",architecturaldigestitaly:"/5574/it.ad",architecturaldigestmexico:"/5574/mx.ad",architecturaldigestfrance:"/5574/fr.archdigest",architecturaldigestgermany:"/5574/de.archdigest",architecturaldigestspain:"/5574/es.archdigest",architecturaldigestrussia:"/45577845/ru.archdigest",cntravelerindia:"/5574/in.cntraveller",cntraveleruk:"/5574/uk.cntraveller",cntravelerspain:"/5574/es.cntraveller",vogueindia:"/5574/in.vogue",vogueuk:"/5574/uk.vogue",voguefrance:"/5574/fr.vogue",voguespain:"/5574/es.vogue",vogueitaly:"/5574/it.vogue",voguegermany:"/5574/de.vogue",voguemexico:"/5574/mx.vogue",voguejapan:"/5574/jp.vogue",voguetaiwan:"/5574/tw.vogue",voguerussia:"/45577845/ru.vogue",voguebusiness:"/5574/cni.voguebusiness",wireditalia:"/5574/it.wired",wireduk:"/5574/uk.wired",wiredjapan:"/5574/jp.wired",tatlerrussia:"/45577845/ru.tatler",tatleruk:"/5574/uk.tatler",glamouruk:"/5574/uk.glamour",glamourspain:"/5574/es.glamour",glamourmexico:"/5574/mx.glamour",glamourgermany:"/5574/de.glamour",glamourrussia:"/45577845/ru.glamour",gqindia:"/5574/in.gq",gqfrance:"/5574/fr.gq",gquk:"/5574/uk.gq",gqspain:"/5574/es.gq",gqitaly:"/5574/it.gq",gqgermany:"/5574/de.gq",gqjapan:"/5574/jp.gq",gqmexico:"/5574/mx.gq",gqtaiwan:"/5574/tw.gq",gqrussia:"/45577845/mx.gq",houseandgardenuk:"/5574/uk.houseandgarden",vanityfairfrance:"/5574/fr.vanityfair",vanityfairspain:"/5574/es.vanityfair",vanityfairitalia:"/5574/it.vanityfair",lacucinaitaliana:"/5574/it.lacucinaitaliana",theworldofinteriorsuk:"/5574/uk.worldofinteriors"};function om(e,t,r){var n=function(e,t){return e.match(/thescene/)?im.iris:im[t]||e||""}(t,r);return e.replace("[SHARE_AD_UNIT]",n)}class sm extends nm{constructor(e){super(e,{type:"embed",headerText:"EMBED URL"})}getContent(){var{embed:e}=this.video_&&this.video_.share_links||{};return e?om(e,this.adUnit_,this.video_.brand):""}setVideo(e){if(!this.adUnit_){var t=this.player().dfp.options();this.adUnit_=t.adUnitPath||t.fallbackAdUnitPath}this.video_=e,this.render()}setAdUnit(e){this.adUnit_=e,this.render()}}i().registerComponent("ShareEmbed",sm);var am=i().getComponent("Component");class cm extends am{constructor(e,t){super(e,t),this.on("click",(function(){this.player_.trigger("intent:close-overlay")})),this.on("keydown",this.handleKeyDown)}createEl(){return super.createEl("div",{className:this.buildCSSClass()},{role:"presentation"})}buildCSSClass(){return"cne-overlay-content share-overlay"}handleKeyDown(e){e.keyCode===Zh.ESC&&this.player_.trigger("intent:close-overlay")}}i().registerComponent("ShareOverlay",cm);class um extends nm{constructor(e){super(e,{type:"url",headerText:Wo("cne-player-share-url-header")})}getContent(){return this.video_.url}setVideo(e){this.video_=e,this.render()}}i().registerComponent("ShareUrl",um);class lm extends Kh{constructor(e,t){super(e,t),this.on("keypress",this.handleKeyPress)}createEl(){var e='\n      <span class="custom-control-focus" tabindex="-1">\n        '.concat(Ph,"\n      </span>"),t={"aria-label":Wo("cne-aria-share-options")};return super.createEl("div",{innerHTML:e,className:"share-widget"},t)}handleClick(){this.player_.trigger("intent:show-share")}handleKeyPress(e){[Zh.RETURN,Zh.SPACE].indexOf(e.keyCode)>=0&&this.player_.trigger("intent:show-share-keyboard")}}i().registerComponent("ShareWidget",lm);var dm=i().getComponent("Component");class hm extends dm{createEl(){return super.createEl("div",{className:"share-dropdown"})}update(e){!0===e?this.addClass("show"):this.removeClass("show")}}i().registerComponent("ShareDropdown",hm);var pm={email:Th,facebook:wh,twitter:Dh},fm={facebook:"cne-player-share",twitter:"cne-player-tweet",email:"cne-player-email",more:"cne-player-more"};class mm extends Kh{createEl(){var e,{action:t}=this.options_,r='\n      <div class="share-'.concat(t,'-text">\n      ').concat(Wo(fm[t]),"\n      </div>\n    ");"more"===t?e=r:e='\n      <div class="share-dropdown-item-icon share-dropdown-item-icon--'.concat(t,'">\n        ').concat(pm[t],"\n      </div>\n      ")+r;return super.createEl("div",{innerHTML:e||"",className:"share-dropdown-item"},{"data-label":t})}handleClick(e){e.stopPropagation();var{action:t}=this.options_;if("more"===t)this.player_.trigger("intent:show-share");else this.player_.trigger("intent:share",{action:t})}}i().registerComponent("ShareDropdownItem",mm);var vm=i().getComponent("VolumeBar");class gm extends vm{constructor(e,t){super(e,t),this.el_.setAttribute("tabindex","-1")}handleMouseMove(e){var t=this.calculateDistance(e);this.player_.trigger("intent:volume-change",{level:t})}}i().registerComponent("VolumeBar",gm);function ym(){var e,t,r,n,i,o,s=bu();function a(){var e=s.snowplowQueue||[];for(this.push=function(e){e()},s.snowplowQueue=this;e.length;)e.shift()()}s.snowplowQueue=s.snowplowQueue||[],s._CNE_DEV_MODE_&&(e=s,t=s.document,r="script",e[n="snowplowCN"]||(e.GlobalSnowplowNamespace=e.GlobalSnowplowNamespace||[],e.GlobalSnowplowNamespace.push(n),e[n]=function(){(e[n].q=e[n].q||[]).push(arguments)},e[n].q=e[n].q||[],i=t.createElement(r),o=t.getElementsByTagName(r)[0],i.async=1,i.src="https://cdn.jsdelivr.net/npm/@snowplow/javascript-tracker@3.8.0/dist/sp.min.js",o.parentNode.insertBefore(i,o)),s.snowplowCN((()=>{s.snowplowCN("newTracker","sp","https://com-condenast-prod1.mini.snplow.net",{appId:"cnetest",stateStorageStrategy:"cookieAndLocalStorage",discoverRootDomain:!0,cookieSameSite:"None",cookieSecure:!0,eventMethod:"post"}),new a})))}var bm={useStyledNonLinearAds:!0,loadVideoTimeout:na()?4e3:2e3};var _m=na()?9e3:5e3;function Tm(e){return Cc(e,["play","adplay"])}var wm=di.interval(250);function Sm(e){var{adComplete$:t,adPaused$:r,adResumed$:n,startMidroll$:i,startPreroll$:o,updateInterval$:s=wm}=e,a=di.merge(n.mapTo(!0),r.mapTo(!1)).startWith(!0);return di.merge(o,i).switchMapTo(s.filterByLatestFrom(a,((e,t)=>t)).takeUntil(t))}function Cm(e,t){return e.withType("start").filter((()=>t.hasCompanion)).map((e=>{var{companion:r,companionSize:{width:n,height:i},target:o}=t,s=function(e,t,r){var n=e.getAd();if(!n)return"";try{var i=n.getCompanionAds(t,r);return i&&i[0]&&i[0].getContent()?i[0].getContent():""}catch(e){return Cu("DFP Ad Error. Companion Ad Error",e),""}}(e,n,i);return{companionDivId:r||"cne-auto-companion",html:s,parentDivId:o,width:n,height:i}})).skipWhile((e=>{var{html:t}=e;return""===t}))}var Em=["AD_ERROR","CONTENT_RESUME_REQUESTED","CONTENT_PAUSE_REQUESTED","CLICK","DURATION_CHANGE","EXPANDED_CHANGED","STARTED","IMPRESSION","PAUSED","RESUMED","FIRST_QUARTILE","MIDPOINT","THIRD_QUARTILE","COMPLETE","USER_CLOSE","LINEAR_CHANGED","LOADED","AD_CAN_PLAY","AD_METADATA","AD_BREAK_READY","ALL_ADS_COMPLETED","SKIPPED","SKIPPABLE_STATE_CHANGED","LOG","VOLUME_CHANGED","VOLUME_MUTED"],Om=e=>{var{eventTarget$:t,dfpEventTypes$:r,events:n,fromAdEvent:i}=e;return t.withLatestFrom(r).switchMap((e=>{var[t,r]=e;return di.from(n).mergeMap((e=>i(t,r,e)))}))};function km(e,t,r){return di.fromEvent(e,t[r])}function xm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Am(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xm(Object(r),!0).forEach((function(t){Pm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Im=r(7317).Z;var Mm=r(7317).Z;const Lm=(e,t)=>e?()=>{try{var r=e.pubads(),n=r.getSlots()||[],i=r.getCorrelator(),o=(e=>(e.getTargetingKeys()||[]).reduce(((t,r)=>(t[r]=e.getTargeting(r),t)),{}))(r),s=o.ctx_line_items||[],a=((e,t)=>window.parent.cnBus&&window.parent.cnBus.history(t).length?(Mm("Ad render check passed via cnBus"),!0):e.map((e=>e.getSlotElementId())).filter((e=>window.parent.document.querySelectorAll("#".concat(e," ").concat("div[id^='google_ads_iframe']")).length>0)).length>0?(Mm("Ad render check passed via DOM Iframes"),!0):(Mm("Ad render check failed"),!1))(n,t),c=(e=>e.filter((e=>e.getOutOfPage())).map((e=>{var t=e.getResponseInformation();return t&&t.lineItemId})).filter(Boolean))(n),u=window.top.cne_failsafe_lineitem||[],l=(h=window.top._cne&&window.top._cne.cnsInfo&&window.top._cne.cnsInfo[0])?h.sopLineItem:null,d=[...s,...c,...u,l].filter(Boolean).map((e=>e.toString()));return o.ctx_line_items=[...new Set(d)],Mm("found lineItems:",o.ctx_line_items),{adsRendered:a,adUnits:n.map((e=>e.getAdUnitPath())),correlator:i,slots:n,targeting:o}}catch(e){return{error:e.message}}var h}:(Mm("GPT Not Present"),null);var Dm=r(7317).Z;function Rm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rm(Object(r),!0).forEach((function(t){jm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Um=3e3,Fm="ads.refreshing.#",$m="ads.moat.yield-ready",Bm=(e,t)=>function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{adUnits:n,error:i="",targeting:o={}}=r,{embedLocation:s,publicaEnabled:a,videoId:c}=t;Eu("gptData",e,{dim1:JSON.stringify({adBlocked:!(window.google&&window.google.ima),adUnits:n,embedLocation:s,error:i,lineItems:o.ctx_line_items,publicaEnabled:a,videoId:c})})},Vm=()=>yu()?(window.parent.googletag=window.parent.googletag||{},window.parent.googletag.cmd=window.parent.googletag.cmd||[],window.parent.googletag):null,qm=()=>yu()?window.parent.cnBus:null,Hm=(e,t)=>()=>{var{gptQueue:r=!1,gpt:n}=t;return di.create((i=>{var o=()=>{var r=e();return r.adsRendered?(i.next(r),i.complete()):(Dm("GPT Ads Not Loaded"),void(r.error&&(Dm("GPT Error",r.error),Bm("gptError",t)(r))))};r?n.cmd.push(o):o()}))},Wm=e=>di.create((t=>{e.cmd.push((()=>{e.pubads().addEventListener("slotRenderEnded",(()=>{t.next(),t.complete()}))}))})),zm=e=>e?di.create((t=>{e.on($m,(()=>{t.next(),t.complete()}))})):di.never();var Gm={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Æ:"AE",Ç:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ő:"O",Ø:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ű:"U",Ý:"Y",Þ:"TH",ß:"ss",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",æ:"ae",ç:"c",è:"e",é:"e",ê:"e",ë:"e",ì:"i",í:"i",î:"i",ï:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ő:"o",ø:"o",ù:"u",ú:"u",û:"u",ü:"u",ű:"u",ý:"y",þ:"th",ÿ:"y",ẞ:"SS",α:"a",β:"b",γ:"g",δ:"d",ε:"e",ζ:"z",η:"h",θ:"8",ι:"i",κ:"k",λ:"l",μ:"m",ν:"n",ξ:"3",ο:"o",π:"p",ρ:"r",σ:"s",τ:"t",υ:"y",φ:"f",χ:"x",ψ:"ps",ω:"w",ά:"a",έ:"e",ί:"i",ό:"o",ύ:"y",ή:"h",ώ:"w",ς:"s",ϊ:"i",ΰ:"y",ϋ:"y",ΐ:"i",Α:"A",Β:"B",Γ:"G",Δ:"D",Ε:"E",Ζ:"Z",Η:"H",Θ:"8",Ι:"I",Κ:"K",Λ:"L",Μ:"M",Ν:"N",Ξ:"3",Ο:"O",Π:"P",Ρ:"R",Σ:"S",Τ:"T",Υ:"Y",Φ:"F",Χ:"X",Ψ:"PS",Ω:"W",Ά:"A",Έ:"E",Ί:"I",Ό:"O",Ύ:"Y",Ή:"H",Ώ:"W",Ϊ:"I",Ϋ:"Y",ş:"s",Ş:"S",ı:"i",İ:"I",ğ:"g",Ğ:"G",а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"yo",ж:"zh",з:"z",и:"i",й:"j",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"h",ц:"c",ч:"ch",ш:"sh",щ:"sh",ъ:"u",ы:"y",ь:"",э:"e",ю:"yu",я:"ya",А:"A",Б:"B",В:"V",Г:"G",Д:"D",Е:"E",Ё:"Yo",Ж:"Zh",З:"Z",И:"I",Й:"J",К:"K",Л:"L",М:"M",Н:"N",О:"O",П:"P",Р:"R",С:"S",Т:"T",У:"U",Ф:"F",Х:"H",Ц:"C",Ч:"Ch",Ш:"Sh",Щ:"Sh",Ъ:"U",Ы:"Y",Ь:"",Э:"E",Ю:"Yu",Я:"Ya",Є:"Ye",І:"I",Ї:"Yi",Ґ:"G",є:"ye",і:"i",ї:"yi",ґ:"g",č:"c",ď:"d",ě:"e",ň:"n",ř:"r",š:"s",ť:"t",ů:"u",ž:"z",Č:"C",Ď:"D",Ě:"E",Ň:"N",Ř:"R",Š:"S",Ť:"T",Ů:"U",Ž:"Z",ą:"a",ć:"c",ę:"e",ł:"l",ń:"n",ś:"s",ź:"z",ż:"z",Ą:"A",Ć:"C",Ę:"e",Ł:"L",Ń:"N",Ś:"S",Ź:"Z",Ż:"Z",ā:"a",ē:"e",ģ:"g",ī:"i",ķ:"k",ļ:"l",ņ:"n",ū:"u",Ā:"A",Ē:"E",Ģ:"G",Ī:"i",Ķ:"k",Ļ:"L",Ņ:"N",Ū:"u","€":"euro","₢":"cruzeiro","₣":"french franc","£":"pound","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","¢":"cent","¥":"yen",元:"yuan",円:"yen","﷼":"rial","₠":"ecu","¤":"currency","฿":"baht",$:"dollar","&":"and","|":"or"};function Km(e){for(var t="",r=0;r<e.length;r++){var n=e[r];Gm[n]&&(n=Gm[n]),t+=n=(n=n.replace(/_/gi,"-")).replace(/[^\sA-Za-z0-9\-]/g,"")}return t=(t=(t=(t=(t=t.replace(/^\s+|\s+$/g,"")).replace(/^-+|-+$/g,"")).replace(/[-\s]+/g,"-")).replace(/-{2,}/g,"-")).toLowerCase()}function Xm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ym(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xm(Object(r),!0).forEach((function(t){Qm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jm=["golfdigest"],Zm=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?"rail-player":"interlude"===e?"inline-player":"player"},ev=e=>{var{adUnitPath:t,brand:r,position:n,brandMap:i}=e;if(!yu())return t;var o=((e,t,r)=>{var{adUnit:n}=window.top.cns||{},{category:i,contentType:o}=n||{};return i&&o?"".concat(r[e],"/").concat(t,"/").concat(i,"/").concat(o):null})(r,n,i);if(o)return o;var s=(()=>{var e=window.top.copilot||{},{categories:{channels:t=[]}={}}=e;return t.map((e=>{var{slug:t}=e;return t}))[0]})()||(window.top.digitalData?window.top.digitalData.section:null)||(()=>{var e=window.top.cns||{},{pageContext:{channel:t}={}}=e;return t})(),a=s?Km(s):null,c=(()=>{var[e]=window.dataLayer||window.top.dataLayer||[],{content:t={}}=e||{};return t.contentType})(),u=[i[r],n,a,c].filter(Boolean);return"".concat(u.join("/")).toLowerCase()},tv=e=>{var{adUnitPath:t,brand:r,isRightRail:n,pageType:i,playerType:o,section:s,brandMap:a,iu:c}=e;if(c)return c;if(!((e,t)=>t[e])(r,a))return t;if("amp-article"===i)return(e=>{var{brand:t,section:r,position:n,brandMap:i}=e,o="string"==typeof r?r.toLowerCase():"misc";return"".concat(i[t],"/").concat(n,"/").concat(Km(o),"/amp/1")})({brand:r,section:s,position:Zm(o),brandMap:a});if("videoportals"===i&&!Jm.includes(r))return((e,t)=>"".concat(t[e],"/player/video/watch-page/1"))(r,a);return ev({adUnitPath:t,brand:r,position:Zm(o,n),brandMap:a})};function rv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rv(Object(r),!0).forEach((function(t){iv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function iv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ov=e=>t=>{var r=(e=>t=>()=>e.logEvent('{"type": "'.concat(t,'"}')))(e);return{[t.IMPRESSION]:r("IMPRESSION"),[t.STARTED]:r("START"),[t.SKIPPED]:r("SKIP"),[t.CLICK]:r("CLICK"),[t.FIRST_QUARTILE]:r("QUARTILE1"),[t.MIDPOINT]:r("QUARTILE2"),[t.THIRD_QUARTILE]:r("QUARTILE3"),[t.COMPLETE]:r("COMPLETE"),[t.MUTED]:r("MUTE"),[t.ALL_ADS_COMPLETED]:()=>e("ima3_reset")}},sv=function(){var{dfpAdEvent$:e,dfpEventTypes$:t,publicaEnabled:r,pApi:n=window.pAPI}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!r)return di.never();var i=t.map(ov(n));return e.withLatestFrom(i).map((e=>{var[{type:t},r]=e;return r[t]})).filter((e=>e))};function av(e,t,r){var n,i=e.options(),o=function(e,t){var{gpt:r=Vm(),cnBus:n=qm(),timeout$:i=di.timer(Um)}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{embedLocation:o=""}=e;if(!o.length)return Dm("Not checking for ad targeting data: not on O&O"),Bm("notOnOO",e)(),di.of({});if(!r)return Dm("Not checking ad targeting data: no GPT library found"),Bm("gptNotFound",e)(),di.of({});var s=o.endsWith("videoportal"),a=Lm(r,s?$m:Fm),c=Hm(a,e),u=Hm(a,Nm({gptQueue:!0,gpt:r},e))().do((t=>{Dm("Initial gpt check successful"),Bm("initial",e)(t)})),l=Wm(r).switchMap(c).do((t=>{Dm("slotRenderEnded gpt check successful"),Bm("slotRenderEnded",e)(t)})),d=zm(n).switchMap(c).do((t=>{Dm("moatYieldReady check successful"),Bm("moatYieldReady",e)(t)})),h=t.filter((e=>{var{complete:t}=e;return!0===t})).switchMap((()=>i)).map(a).do((t=>{Dm("gpt check timed out"),Bm("timedOut",e)(t)})),p=s?d:l;return di.race(u,p,h)}(i,r).map((e=>t=>{var{slots:r=[],correlator:n,targeting:i}=t,o=r.map((e=>e.getAdUnitPath())).filter((e=>e&&!e.match(/\.cm/)))[0],s=e.adUnitPath,a=e.fallbackAdUnitPath;return{adUnitPath:(s||o||a).replace(/\/$/,""),correlator:n,targeting:i}})(i)),s=function(e){var{deferredTagData$:t,currentVideo$:r,options:n}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{allure:"/3379/conde.allure",architecturaldigest:"/3379/conde.arch",arstechnica:"/3379/conde.ars",bonappetit:"/3379/conde.bonapp",brides:"/479/conde.brides",cntraveler:"/3379/conde.cntraveler",epicurious:"/3379/conde.epi",glamour:"/3379/conde.glamour",golfdigest:"/21849421099/golfdigest",gq:"/3379/conde.gq",pitchfork:"/3379/conde.pitchfork",self:"/3379/conde.self",teenvogue:"/3379/conde.teenvogue",them:"/3379/conde.them",thenewyorker:"/3379/conde.newyorker",vanityfair:"/3379/conde.vanityfair",vogue:"/3379/conde.vogue",w:"/3379/conde.w",wired:"/3379/conde.wired",architecturaldigestindia:"/5574/in.archdigest",architecturaldigestfrance:"/5574/fr.archdigest",architecturaldigestgermany:"/5574/de.archdigest",architecturaldigestspain:"/5574/es.archdigest",architecturaldigestitaly:"/5574/it.ad",architecturaldigestmexico:"/5574/mx.ad",architecturaldigestrussia:"/45577845/ru.archdigest",vogueindia:"/5574/in.vogue",voguefrance:"/5574/fr.vogue",vogueuk:"/5574/uk.vogue",voguespain:"/5574/es.vogue",vogueitaly:"/5574/it.vogue",voguegermany:"/5574/de.vogue",voguemexico:"/5574/mx.vogue",voguejapan:"/5574/jp.vogue",voguetaiwan:"/5574/tw.vogue",voguerussia:"/45577845/ru.vogue",voguebusiness:"/5574/cni.voguebusiness",cntravelerindia:"/5574/in.cntraveller",cntraveleruk:"/5574/uk.cntraveller",cntravelerspain:"/5574/es.cntraveller",wireditalia:"/5574/it.wired",wireduk:"/5574/uk.wired",wiredjapan:"/5574/jp.wired",tatlerrussia:"/45577845/ru.tatler",tatleruk:"/5574/uk.tatler",glamouruk:"/5574/uk.glamour",glamourspain:"/5574/es.glamour",glamourmexico:"/5574/mx.glamour",glamourgermany:"/5574/de.glamour",glamourrussia:"/45577845/ru.glamour",gqindia:"/5574/in.gq",gqfrance:"/5574/fr.gq",gquk:"/5574/uk.gq",gqspain:"/5574/es.gq",gqitaly:"/5574/it.gq",gqgermany:"/5574/de.gq",gqjapan:"/5574/jp.gq",gqmexico:"/5574/mx.gq",gqtaiwan:"/5574/tw.gq",gqrussia:"/45577845/ru.gq",houseandgardenuk:"/5574/uk.houseandgarden",vanityfairfrance:"/5574/fr.vanityfair",vanityfairspain:"/5574/es.vanityfair",vanityfairitalia:"/5574/it.vanityfair",lacucinaitaliana:"/5574/it.lacucinaitaliana",theworldofinteriorsuk:"/5574/uk.worldofinteriors"};return r.bufferedWith(t,((e,t)=>{var{brand:r}=e,{adUnitPath:o}=t,s=tv(Ym(Ym({},n),{},{adUnitPath:o,brand:r,brandMap:i}));return Ym(Ym({},t),{},{adUnitPath:s,video:e})})).share()}({deferredTagData$:o,currentVideo$:t.withType("dfp-currentvideo").map((e=>{var{value:t}=e;return t})),options:i});return s.map((n=e.options().publicaEnabled,e=>{if(!n)return e;var t=e.adUnitPath.split("/").filter((e=>e.length)),r=t[1].indexOf("conde")>-1?(e=>{var[t,r,n]=e;return"".concat(t,"/").concat(r,"/").concat(n,"/ab-inventory")})(t):(e=>{var[t,r]=e;return"".concat(t,"/").concat(r,"/swish")})(t);return nv(nv({},e),{},{adUnitPath:r})}))}var cv=r(7317).Z;function uv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uv(Object(r),!0).forEach((function(t){dv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function dv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hv=/^https?:\/\/|^\/\//;function pv(e){var t,{aoTest:r,companionSize:n,embedLocation:i,height:o,infinityId:s,muted:a,adRequestData:c,playerSizeForAdRequest:u,isRightRail:l,isStickyType:d,stickyPosition:h,hasTeaser:p,urlVars:f,width:m,ampTargeting:v,cntPlatform:g,prebidData:y,autoplay:b,isSitewideOverride:_,positionInstance:T,playerOrientation:w}=e,{adUnitPath:S,correlator:C,targeting:E,video:O}=c,k=((e,t)=>{if(e)return e;try{var r=JSON.parse(t);if(r)return r}catch(e){cv("Error Parsing ampTargeting")}return cv("No Valid Ad Targeting Data Found"),{}})(E,v),x=(e=>e?null:"player_embed")(i),A=lv(lv(lv({},k),y),{},{ao_test:r||f.get("ao_test"),excl_cat:x,height:Math.round(o),mbid:f.get("mbid"),muted:a?1:0,right_rail:l?1:0,sensitive:O.sensitive,series:O.series_id,width:Math.round(m),cnt_platform:g,player_type:(t=f.get("embedType"),p?"teaser-player":l?"rail-player":"inline"===t?"inline-player":(i||"").endsWith("videoportal")?"watch-page":"embedded-player")});"2549131"===O.dfp_cms_id&&["height","muted","sensitive","width"].forEach((e=>{A["cne_".concat(e)]=A[e],delete A[e]})),O.live_metadata&&(A.traffic_type="live");var P=[];d?"hero"===h?P.push("sticky-player-hero"):"footer"===h?P.push("sticky-player-footer"):P.push("sticky-player"):l&&P.push("sticky-player-rail"),!1===b&&P.push("click-to-play"),_&&P.push("interlude-takeover"),p&&P.push("teaser-player"),"vertical"===w?P.push("vertical-format"):"square"===w?P.push("square-format"):P.push("horizontal-format"),a?P.push("muted"):P.push("sound-on"),P&&P.length&&(A.feature_flags=P),T>0&&(A.pos_instance=T);var I=encodeURIComponent(fa(A));cv("CUST_PARAMS: ",A);var M=S,L=O.dfp_cms_id||"1495";"true"===(0,pa.Z)(window.location.href).searchParams.get("llpvTest")&&(M=S.replace("3379","21729330630").replace("5574","21729330630"),L="2614559");var D=fa({sz:"".concat(u,"|").concat("480x70"),iu:M,ciu_szs:"".concat(n.width,"x").concat(n.height),gdfp_req:"1",env:"vp",output:"vmap",unviewed_position_start:"1",cust_params:I,correlator:C,description_url:encodeURIComponent(O.url||""),vid:O.id,cmsid:L,ppid:s?s.replace(/-/g,""):""},{escape:!1,removeNull:!1}),R="".concat("https://pubads.g.doubleclick.net/gampad/ads","?").concat(D);return(()=>{var{_CNE_AD_FIXTURE_:e}=window;return e&&hv.test(e)?e:(delete window._CNE_AD_FIXTURE_,null)})()||R}var fv=r(7317).Z,mv=(()=>{var e;try{e=window.top.performance}catch(t){e=window.performance}return e})();function vv(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:mv;if(null!=n&&"function"==typeof n.mark)try{n.mark(r),n.measure(e,t,r)}catch(e){fv(e)}}const gv={js:{evaluatedJSMark:"js_evaluatedJS",startedJSExecutionMark:"js_player_js_start_execution",jsStartedInlineMeasure:"js_jsStarted_inline",jsStartedScriptMeasure:"js_jsStarted_script",evaluateMainJSMeasure:"js_timeToEvaluate_main",evaluateMobileJSMeasure:"js_timeToEvaluate_mobile"},ads:{requestAdsMark:"ads_dfp_plugin_requestAds",requestAdsMeasure:"ads_requestAds",requestAdsManagerMark:"ads_dfp_plugin_requestAdsManager",requestAdsManagerMeasure:"ads_requestAdsManager",requestAdsLoaderMark:"ads_dfp_plugin_requestAdsLoader",requestAdsLoaderMeasure:"ads_requestAdsLoader",vastAdFetchStartedMark:"ads_fetchVASTAd_started",vastAdFetchCompleteMark:"ads_fetchVASTAd_complete",vastAdFetchMeasure:"ads_vastAdDuration",adStartingMark:"ads_AD_IS_STARTING",adStartingMeasure:"ads_startedAd"},misc:{loadEmbedPiecesMark:"promise_resolution_loadEmbedPieces",buildEmbedPiecesMark:"promise_resolution_buildEmbedPieces",buildScriptPlayerStarted:"loaderjs_assets_loaded",embedPiecesMeasure:"buildEmbedPiecesToLoadEmbedPieces",scriptEmbedCompleteMark:"scriptEmbedPromises_complete",scriptEmbedStartedMark:"scriptEmbedPromises_started",scriptEmbedCompleteMeasure:"scriptEmbedPromises_complete",createPlayerStartedMark:"createPlayer_started",createPlayerStartedMeasure:"createPlayer_started",fetchConfigStartedMark:"fetchConfig_started",fetchConfigCompletedMark:"fetchConfig_complete",fetchConfigCompletedMeasure:"fetchConfig_complete",fetchPrebidStartedMark:"fetchPrebid_started",fetchPrebidCompletedMark:"fetchPrebid_complete"}};var yv=r(7317).Z,{ads:{vastAdFetchStartedMark:bv,vastAdFetchCompleteMark:_v,vastAdFetchMeasure:Tv}}=gv,wv=e=>{var t=function(e){var t=(new DOMParser).parseFromString(e,"application/xml"),r=t.getElementsByTagNameNS("*","AdBreak");if(1!==r.length)return null;var n=r[0],i=n.getAttributeNode("timeOffset").textContent;if("start"!==i)return null;var o=t.getElementsByTagNameNS("*","AdSource")[0],s=t.getElementsByTagNameNS("*","AdTagURI")[0];return s&&n&&o?{adBreak:{timeOffset:i,breakType:n.getAttributeNode("breakType").textContent,breakId:n.getAttributeNode("breakId").textContent},adSource:{id:o.getAttributeNode("id").textContent,allowMultipleAds:o.getAttributeNode("allowMultipleAds").textContent,followRedirects:o.getAttributeNode("followRedirects").textContent},adTagURI:s.textContent}:null}(e);if(!t)return null;var{adTagURI:r}=t;return r},Sv=(e,t)=>r=>{var{urlVars:n,disableVastPrefetch:i}=t.options();return!0===(!0===i||"true"===n.get("disableVastPrefetch"))?(yv("vastPrefetch disabled"),di.of(e)):(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mv;null!=t&&"function"==typeof t.mark&&t.mark(e)}(bv),su(r).map((t=>{vv(Tv,bv,_v);var r=wv(t.body);return r?Object.assign(e,{adTagUrl:r}):e})))},Cv=(e,t)=>function(){var{adTagUrl:e,pApi:t=window.pAPI,timeout$:r=di.timer(1e3)}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.mapTo(e),i=di.create((r=>{if(!t||!t.ready)return r.next(e),void r.complete();t.ready((n=>{n&&n.adblock_detected?r.next(t.proxyResource(e,{filter:"ima3"})):r.next(e),r.complete()}))}));return di.race(i,n)}(e).switchMap(Sv(e,t));function Ev(e,t){return di.fromEvent(e,t)}var Ov=e=>"FULLY_IN_VIEWPORT"!==e;var kv=r(9255),xv=r(7317).Z;window.name.includes("amp_iframe")?xv("On AMP Pages, __tcfapi proxy is injected by GTM. Aborting proxy function init..."):window.__tcfapi?xv("window.__tcfapi already exists. Aborting proxy function init..."):function(){for(var e,t=window,r={};t;){try{if(t.frames.__tcfapiLocator){e=t;break}xv("__tcfapi proxy init complete - tcfapi:",typeof window.__tcfapi)}catch(e){xv("__tcfapi proxy init",e)}if(t===window.top)break;t=t.parent}window.__tcfapi=function(t,n,i,o){if(e){var s=Math.random()+"",a={__tcfapiCall:{command:t,parameter:o,version:n,callId:s}};r[s]=i,e.postMessage(a,"*")}else i({msg:"CMP not found"},!1)},window.addEventListener("message",(function(e){var t={};try{t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){}var n=t.__tcfapiReturn;n&&"function"==typeof r[n.callId]&&r[n.callId](n.returnValue,n.success)}),!1)}();var Av=(e,t)=>{if(t&&"object"==typeof e){var{eventStatus:r,gdprApplies:n}=e;return{complete:!n||["useractioncomplete","tcloaded"].includes(r),consentData:e}}return{error:"Unable to get tcData",result:e,complete:!0}},Pv=e=>window.__tcfapi("addEventListener",2,e),Iv=e=>window.__tcfapi("removeEventListener",2,e),Mv=e=>{var{googleImaVansAdapter:t}=e;return t&&"function"==typeof t.init};var Lv=r(7317).Z;function Dv(e,t,r){var n,{adsDisabled:i,autoplay:o,disableOutOfViewportAds:s,gdprApplies:a,publicaEnabled:c}=t.options(),u=di.of(function(e){if(!e&&window.google&&window.google.ima){var t=window.google.ima;return t.settings.setVpaidMode(t.ImaSdkSettings.VpaidMode.ENABLED),Im("imaGlobals initialized"),{google:window.google,googleImaVansAdapter:window.googleImaVansAdapter,ima:t}}return{}}(i)),l=u.pluck("ima").filter(Boolean),d=r.withType("adsLoader").pluck("value"),h=r.withType("adsManager").pluck("value"),p=e.$("video.vjs-tech"),f=function(e){var{adContainer:t,googleIMA$:r,videoElement:n}=e;return r.map((e=>new e.AdDisplayContainer(t,n))).publishReplay(1).refCount()}({adContainer:e.getChild("adContainer").adEl(),googleIMA$:l,videoElement:p}),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bm;return e.pluck("AdsRenderingSettings").map((e=>{var r=new e;return Object.assign(r,t)})).publishReplay(1).refCount()}(l),v=function(e){return di.of(e)}(p),g=function(e){return e.map((e=>Am(Am(Am({},e.AdEvent.Type),e.AdErrorEvent.Type),e.AdsManagerLoadedEvent.Type))).publishReplay().refCount()}(l),y=function(e){var{adsManager$:t,adsLoader$:r,dfpEventTypes$:n,events:i=Em,loaderEvents:o=["AD_ERROR","ADS_MANAGER_LOADED"],fromAdEvent:s=km}=e,a=Om({eventTarget$:t,dfpEventTypes$:n,events:i,fromAdEvent:s}),c=Om({eventTarget$:r,dfpEventTypes$:n,events:o,fromAdEvent:s});return di.merge(a,c).share()}({adsManager$:h,adsLoader$:d,dfpEventTypes$:g}),b=Cc(e,["cne:load-video-id","cne:viewport","contentupdate","dfp-currentvideo","dfp-resize","ended","play","readyforpreroll","volumechange"]),_=di.of({playerConfig:{gdprApplies:a}}),T=(n=_,n.pluck("playerConfig").switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{gdprApplies:t}=e;return!t||hi(e)?(xv("playerConfig > gdprApplies",t),kv.y$.of({complete:!0,consentData:{gdprApplies:t}})):kv.y$.fromEventPattern(Pv,Iv,Av)}))).do((e=>Lv("consentCheck$",e))),w=av(t,b,T),S=b.withType("dfp-currentvideo","volumechange").map((()=>e.muted()?0:e.volume())).startWith(e.muted()?0:e.volume()),C=function(e,t){var r=t.take(1).withLatestFrom(e,((e,t)=>Ov(t))),n=e.skipUntil(t).map(Ov);return r.merge(n).startWith(!1)}(b.withType("cne:viewport").map((e=>{var{data:t}=e;return t})),b.withType("play")),E=function(e){var{disableOutOfViewportAds:t,documentHidden$:r,skipAdRequestOutsideViewport$:n}=e;return n.combineLatest(r,((e,r)=>r||e&&t))}({disableOutOfViewportAds:s,documentHidden$:wc(),skipAdRequestOutsideViewport$:C}),O=function(e){var{adsLoader$:t,selectPlayerEvents$:r,googleIMA$:n,adRequestData$:i,skipAdRequest$:o,consentCheck$:s,dfp:a,adTag:c=pv,tryExtractVASTAdRequest:u=Cv}=e,l=r.withType("dfp-resize").take(1),d=s.filter((e=>{var{complete:t}=e;return!0===t})),h=di.combineLatest(t,n,o,l,d);return i.zip(r.withType("contentupdate")).bufferedWith(h,((e,t)=>{var[r]=e,[n,i,o]=t;return(e=>{var{adsLoader:t,adTag:r,adRequestData:n,dfp:i,ima:o,skipAdRequest:s}=e,{aoTest:a,companionSize:c,embedLocation:u,urlVars:l,isRightRail:d,isStickyType:h,stickyPosition:p,hasTeaser:f,positionInstance:m,ampTargeting:v,cntPlatform:g,prebidData:y,autoplay:b,interludeOverride:_,recAlgorithm:T,videoId:w}=i.options(),S=i.playerSize().width,C=i.playerSize().height,E=i.infinityId(),O=i.mutedConfig(),k=i.playerSizeForAdRequest(),x=i.playerOrientation(),A=!(!_||"sitewideInterludeVideoOverride"!==T&&"mobileSitewideInterludeVideoOverride"!==T||w!==i.video().id);return{adsLoader:t,AdsRequest:o.AdsRequest,adTagUrl:r({aoTest:a,companionSize:c,embedLocation:u,height:C,infinityId:E,muted:O,adRequestData:n,playerSizeForAdRequest:k,isRightRail:d,isStickyType:h,stickyPosition:p,hasTeaser:f,positionInstance:m,urlVars:l,width:S,ampTargeting:v,cntPlatform:g,prebidData:y,autoplay:b,isSitewideOverride:A,playerOrientation:x}),height:C,width:S,skipAdRequest:s}})({adsLoader:n,adTag:c,adRequestData:r,dfp:a,ima:i,skipAdRequest:o})})).switchMap((e=>e.skipAdRequest||a.video().disableAds?di.of(e):u(e,a))).publishReplay().refCount()}({adsLoader$:d,selectPlayerEvents$:b,adRequestData$:w,dfp:t,skipAdRequest$:E,googleIMA$:l,consentCheck$:T}),k=function(e,t){return e.switchMap((e=>t.withType("ended","cne:load-video-id").mapTo(e)))}(d,b),x=function(e){var{dfpAdEvent$:t,dfpEventTypes$:r}=e;return r.pluck("LOADED").switchMap((e=>t.withType(e))).map((e=>e.getAd())).publishReplay(1).refCount()}({dfpAdEvent$:y,dfpEventTypes$:g}),A=e=>g.pluck(e).switchMap((e=>y.withType(e))),P=A("AD_ERROR"),I=A("STARTED"),M=A("LOADED").withLatestFrom(S,((e,t)=>t)),L=A("PAUSED"),D=A("RESUMED"),R=A("CONTENT_PAUSE_REQUESTED"),N=A("CONTENT_RESUME_REQUESTED"),j=Cm(y,t.options()),U=j.map((e=>{var{html:t}=e;return""!==t})).distinctUntilChanged(),F=function(e){var{autoplay:t,adDisplayContainer$:r,playIntent$:n}=e;return t?r.mapTo(!0).take(1):di.combineLatest(n,r).mapTo(!0).take(1)}({autoplay:o,adDisplayContainer$:f,playIntent$:b.withType("play")}),$=function(e){var{adStarted$:t,contentResumeRequested$:r,requestAds$:n,vjsPlayForTimeout$:i,timer$:o=di.timer(_m)}=e,s=t.merge(r);return n.switchMapTo(i.take(1)).switchMapTo(o.takeUntil(s)).share()}({adStarted$:I,contentResumeRequested$:N,requestAds$:O,vjsPlayForTimeout$:Tm(e)}),B=b.withType("readyforpreroll").withLatestFrom(S,((e,t)=>t)),V=N.merge($),q=function(e){var{adComplete$:t,allAdsCompleted$:r,cachedVolume$:n,contentPauseRequested$:i,startPreroll$:o}=e;return o.switchMapTo(t).switchMapTo(i.withLatestFrom(n,((e,t)=>t)).takeUntil(r))}({adComplete$:V,allAdsCompleted$:A("ALL_ADS_COMPLETED"),cachedVolume$:S,contentPauseRequested$:R,startPreroll$:B}),H=function(e){var{adDisplayContainer$:t,googleIMA$:r}=e;return r.zip(t).publishReplay().refCount()}({adDisplayContainer$:f,googleIMA$:l}),W=function(e){var{adsLoader$:t,adsRenderingSettings$:r,contentPlayback$:n,dfpEventTypes$:i,adsManagerLoaded:o=Ev}=e;return t.withLatestFrom(i.pluck("ADS_MANAGER_LOADED")).switchMap((e=>{var[t,r]=e;return o(t,r)})).withLatestFrom(n,r)}({adsLoader$:d,adsRenderingSettings$:m,contentPlayback$:v,dfpEventTypes$:g}),z=H.switchMap((e=>$.withLatestFrom(d,S,((t,r,n)=>({timeout:t,adsLoader:r,initialData:e,cachedVolume:n}))))),G=W.switchMapTo($.withLatestFrom(h,S,((e,t,r)=>({adsManager:t,cachedVolume:r})))),K=function(e){var{adsManager$:t,dfp:r,imaGlobals$:n,videoElement:i,consentCheck$:o}=e,s=(e=>{var{gdprApplies:t}=e.options();return{anId:t?"931564":"931565",campId:e.playerSizeForAdRequest()}})(r);return o.filter((e=>{var{complete:t}=e;return t})).switchMap((()=>t)).withLatestFrom(n,((e,t)=>{var{google:r,googleImaVansAdapter:n}=t;return{adsManager:e,config:s,google:r,googleImaVansAdapter:n,videoElement:i}})).filter(Mv)}({adsManager$:h,dfp:t,imaGlobals$:u,videoElement:p,consentCheck$:T});return{adDisplayContainer$:f,adError$:P,adsManager$:h,adsRenderingSettings$:m,adStarted$:I,adTimeUpdate$:Sm({startPreroll$:B,startMidroll$:q,adComplete$:V,adPaused$:L,adResumed$:D}),companionAd$:j,companionAdShowing$:U,contentComplete$:k,contentResumeRequested$:N,currentAd$:x,initDfpAdContainer$:F,initializeContribAds$:l.mapTo(!0),initializeIAS$:K,notifyPublica$:sv({dfpAdEvent$:y,dfpEventTypes$:g,publicaEnabled:c}),requestAds$:O,requestAdsLoader$:H,requestAdsManager$:W,retriggerOnPlayer$:Mc({adsManager$:h,adRequestData$:w,dfpAdEvent$:y,dfpEventTypes$:g,requestAds$:O,timeoutAds$:z.merge(G)}),setAdVolume$:M,startMidroll$:q,startPreroll$:B,timeoutAdsLoader$:z,timeoutAdsManager$:G}}var Rv={liveCuePoints:!1};function Nv(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rv;e.ads(r)}function jv(e){var{bodyContent:t="",headContent:r="",target:n,options:i={}}=e,o=document.createElement("iframe");Object.assign(o,{frameBorder:0,marginWidth:0,marginHeight:0},i);var s="<html><head>".concat(r,"</head><body>").concat(t,"</body></html>");n.appendChild(o),o.contentDocument.open(),o.contentDocument.write(s),o.contentDocument.close()}var Uv="dfp",Fv={canHandleSource(e){var{type:t}=e;return t===Uv},canPlayType:e=>e===Uv?"maybe":"",handleSource(e,t){var{dfp:r}=e;return new $v(r,t)}};class $v{constructor(e,t){this.tech_=t,t.setupAdMode(e)}dispose(){this.tech_.disposeAdMode()}}function Bv(){try{return window.frameElement}catch(e){return null}}var{ads:{requestAdsMark:Vv,requestAdsMeasure:qv,requestAdsLoaderMark:Hv,requestAdsLoaderMeasure:Wv,requestAdsManagerMark:zv,requestAdsManagerMeasure:Gv,adStartingMark:Kv,adStartingMeasure:Xv},js:{evaluatedJSMark:Yv}}=gv;function Qv(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Bv(),{adDisplayContainer$:o,adError$:s,adsManager$:a,adsRenderingSettings$:c,adStarted$:u,adTimeUpdate$:l,companionAd$:d,companionAdShowing$:h,contentComplete$:p,currentAd$:f,contentResumeRequested$:m,initDfpAdContainer$:v,initializeContribAds$:g,initializeIAS$:y,notifyPublica$:b,requestAds$:_,requestAdsLoader$:T,requestAdsManager$:w,retriggerOnPlayer$:S,setAdVolume$:C,startMidroll$:E,startPreroll$:O,timeoutAdsLoader$:k,timeoutAdsManager$:x}=r,A=e.$("video.vjs-tech"),P=Nv.bind(null,e),I=r=>{var{adsLoader:n,AdsRequest:i,adTagUrl:o,height:s,skipAdRequest:a,width:c}=r;if(a||t.video().disableAds)e.ads.skipLinearAdMode();else{var u=Object.assign(new i,{adTagUrl:o,linearAdSlotHeight:s,linearAdSlotWidth:c});vv(qv,Hv,Vv),n.requestAds(u)}},M=e=>{var[t,r]=e;vv(Wv,Yv,Hv);var i=new t.AdsLoader(r,A);n.next({type:"adsLoader",value:i})},L=t=>{var{adsLoader:r,initialData:n,cachedVolume:i}=t;r.destroy(),0==i&&e.muted(!0),e.ads.skipLinearAdMode(),Eu("Ad Timeout (before adsManager was created)"),M(n)},D=e=>{var[t,r,i]=e;vv(Gv,Vv,zv);var o=t.getAdsManager(r,i);n.next({type:"adsManager",value:o})},R=t=>{var{adsManager:r,cachedVolume:n}=t;r.destroy(),0==n&&e.muted(!0),e.ads.endLinearAdMode(),Eu("Ad Timeout (after adsManager was created)")},N=r=>{t.adsManager(r),e.trigger("adsready")},j=e=>{t.adDisplayContainer(e)},U=r=>{t.volume(r),vv(Xv,void 0,Kv),t.startAds(),e.ads.startLinearAdMode(),e.pause(),e.src({src:"dfp-placeholder",dfp:t,type:Uv})},F=e=>{t.initAds(),U(e)},$=()=>{e.trigger("timeupdate")},B=()=>e.ads.endLinearAdMode(),V=()=>{t.startedAd(),e.trigger("ads-ad-started")},q=e=>{t.volume(e)},H=e=>e.contentComplete(),W=r=>{r.isLinear()?e.removeClass("cne-non-linear"):e.addClass("cne-non-linear"),t.currentAd(r)},z=t=>e.trigger(t),G=e=>{var{companionDivId:t,html:r,parentDivId:n,width:i,height:o}=e,s=document.getElementById(t);if(!s){var a=document.getElementById(n);(s=document.createElement("div")).id=t,a.appendChild(s)}s.innerHTML="",jv({bodyContent:r,headContent:"<style>body { overflow: hidden; }</style>",target:s,options:{width:i,height:o}})},K=e=>{if(i){var t=i.parentElement,r=parseInt(t.style.height)||0;t.style.height="".concat(e?75+r:r,"px")}},X=()=>e.trigger("adserror"),Y=()=>t.initAdContainer(),Q=e=>e(),J=e=>{var{adsManager:t,config:r,google:n,googleImaVansAdapter:i,videoElement:o}=e;i.init(n,t,o,r)},Z=di.merge(o.do(j),s.do(X),a.do(N),c,u.do(V),l.do($),d.do(G),h.do(K),p.do(H),m.do(B),f.do(W),v.do(Y),g.do(P),y.do(J),b.do(Q),O.do(F),E.do(U),C.do(q),_.do(I),T.do(M),w.do(D),S.do(z),k.do(L),x.do(R));return Z}var Jv=r(9122),Zv=i().getTech("Html5"),eg=i().getTech("Tech");class tg extends Zv{adMode(e){return"boolean"==typeof e&&(this.adMode_=e),this.adMode_||!1}setupAdMode(e){this.dfp=e,this.adMode(!0),this.trigger("durationchange"),this.dfp.on("dfp-currentad",(()=>this.trigger("durationchange")))}disposeAdMode(){this.adMode(!1),this.dfp.el()&&this.dfp.off("dfp-currentad"),delete this.dfp,delete this.adIsPaused_}pause(){if(this.adMode()){if(this.paused())return;this.adIsPaused_=!0,this.dfp.pause(),this.trigger({type:"pause",adMode:!0})}else super.pause()}play(){if(this.adMode()){if(!this.paused())return;this.adIsPaused_=!1,this.dfp.play(),this.trigger({type:"play",adMode:!0})}else super.play()}load(){this.adMode()||super.load()}paused(){return this.adMode()?void 0===this.adIsPaused_||!!this.adIsPaused_:super.paused()}volume(){return this.adMode()?this.dfp.volume():super.volume()}setVolume(e){this.adMode()&&(this.dfp.volume(e),this.trigger("volumechange")),super.setVolume(e)}muted(){return this.adMode()?0===this.volume():super.muted()}setMuted(e){this.adMode()?e?(this.preMutedVolume_=this.volume(),this.setVolume(0)):this.setVolume(this.preMutedVolume_||1):e||0!==super.volume()||this.setVolume(this.preMutedVolume_||1),super.setMuted(e),this.trigger("volumechange")}duration(){if(this.adMode()){var e=this.dfp.duration();return this._parseAdDuration(e)}return super.duration()}_parseAdDuration(e){var t=parseFloat(e);return t&&t>0?t:0}currentTime(){return this.adMode()?this._adCurrentTime():super.currentTime()}_adCurrentTime(){var e=this.dfp.remainingTime(),t=this.duration();return e<0?0:t?t-e:e}}eg.withSourceHandlers(tg),tg.registerSourceHandler(Fv),i().registerTech("Html5",tg);var rg=i().getComponent("Component");class ng extends rg{constructor(e,t){super(e,t),this.muted_=this.options_.muted,this.inViewportAutoplay_=!this.options_.isIframeEmbed&&this.options_.autoplay,this.autoplay_=this.options_.autoplay,this.startedAd_=!1}options(){return this.options_}dispose(e){if(e){var t=[e.adTimeoutTimeout,e.cancelPlayTimeout];for(var r of t)window.clearTimeout(r)}this.adDisplayContainerCall_("destroy"),this.adsManagerCall_("destroy"),super.dispose()}adsManager(e){if(!e)return this.adsManager_;this.adsManagerCall_("destroy"),this.adsManager_=e}adDisplayContainer(e){if(!e)return this.adDisplayContainer_;this.adDisplayContainerCall_("destroy"),this.adDisplayContainer_=e}currentAd(e){if(!e)return this.currentAd_;this.currentAd_=e,this.sendLineItemToGPT_(),this.trigger("dfp-currentad")}initAds(){this.adsManagerCall_("init",this.width(),this.height(),this.viewMode())}startAds(){this.startedAd_=!1,this.adsManagerCall_("start")}startedAd(){this.startedAd_=!0}initAdContainer(){this.adDisplayContainerCall_("initialize")}resize(e,t,r){this.width_=e,this.height_=t,this.viewMode_=r,this.adsManagerCall_("resize",e,t,r),this.player().trigger("dfp-resize")}viewMode(){return this.viewMode_||"normal"}height(){return this.height_}width(){return this.width_}playerSizeForAdRequest(){var{playerType:e}=this.options();return["vertical","square"].includes(this.playerOrientation())?"interlude"===e?"640x360|360x640":"640x480|480x640":"interlude"===e?"640x360":"640x480"}playerOrientation(){var e=this.options_.aspect_ratio,{clientWidth:t,clientHeight:r}=this.player().el_,n=e?iu(e):t/r;return n<1?"vertical":1===n?"square":"landscape"}playerSize(){return{width:this.player().el_.clientWidth,height:this.player().el_.clientHeight}}play(){this.startedAd_&&this.adsManagerCall_("resume")}pause(){this.startedAd_&&this.adsManagerCall_("pause")}skip(){this.adsManagerCall_("skip")}volume(e){var t=this.adsManagerGet_("getVolume");if("number"!=typeof e||e===t)return t;this.adsManagerCall_("setVolume",e)}duration(){return this.currentAdGet_("getDuration")}remainingTime(){return this.adsManagerGet_("getRemainingTime")}video(e){if(!e)return this.video_||{};this.video_=e,this.player().trigger({type:"dfp-currentvideo",value:e})}infinityId(e){return e&&(this.infinityId_=e),this.infinityId_}mutedConfig(e){if(void 0===e)return this.muted_;this.muted_=e}sendLineItemToGPT_(){if(yu()&&window.top.googletag)try{var e=xc(this.currentAdGet_("adId"),this.currentAdGet_("getWrapperAdSystems"),this.currentAdGet_("getWrapperAdIds")),t=[...window.top.googletag.pubads().getTargeting("ctx_line_items")||[],e],r=[...new Set(t)];window.top.googletag.pubads().setTargeting("ctx_line_items",r)}catch(e){Cu("Error thrown setting GPT targeting",e)}}restartAd(){var e=this.player();e.ads.endLinearAdMode(),e.trigger("contentresumed"),this.adsManagerCall_("destroy")}adsManagerCall_(e){var t=this.adsManager();if(t&&"function"==typeof t[e]){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t[e](...n)}}adsManagerGet_(e){var t=this.adsManager();if(t&&"function"==typeof t[e]){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return t[e](...n)}}adDisplayContainerCall_(e){var t=this.adDisplayContainer();if(t&&"function"==typeof t[e]){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t[e](...n)}}currentAdGet_(e){var t=this.currentAd();if(t&&"function"==typeof t[e])return t[e]()}}function ig(e){var[t,r]=e?e.split(/x/i):[];return{width:t||"300",height:r||"60"}}i().registerPlugin("dfp",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dv,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qv,n=this,i=new ng(n,e),o=new Jv.BehaviorSubject({}),s=t(n,i,o),a=r(n,i,s,o);a.subscribe(),this.dfp=i}));var og=r(7317).Z;function sg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ag(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sg(Object(r),!0).forEach((function(t){cg(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var{misc:{loadEmbedPiecesMark:ug,createPlayerStartedMark:lg,createPlayerStartedMeasure:dg}}=gv,hg=(e,t,r)=>{var{autoplayEnabled:n,urlVars:o,playerConfig:s,publicaEnabled:a,video:c,videoEl:u}=e;r.addLanguage(t.language,t.videos_js_language_data);var l=r(u,t);return l.addClass("video-js"),l.dfp(ag(ag({},s),{},{autoplay:n,adsDisabled:s.adsDisabled,adUnitPath:s.iu,brand:c.brand,companionSize:ig(s.companionSize),disableOutOfViewportAds:s.doova,urlVars:o,publicaEnabled:a,prebidData:c.prebidData})),s.has_playlist&&0!=s.showPlaylistBar&&function(e,t){var{playerConfig:r,playerContainer:n}=t;if(0!=r.hasRail){var o=i().getComponent("PlaylistContainer");e.cnePlaylistContainer=new o(e,{children:{playlistHeader:!0,playlistBody:{children:[{name:"playlistArrow",direction:"left"},{name:"playlistItemsContainer",children:{playlistItems:!0}},{name:"playlistArrow",direction:"right"}]}}});var s=e.cnePlaylistContainer.el();"light"===r.theme?s.className+=" playlist-light":"vogueworld"===r.theme&&(s.className+=" playlist-vw"),n.appendChild(s)}}(l,e),l};function pg(e,t){var r=e.el().parentNode;r&&r.classList.remove("player-container");var{cnePlaylistContainer:n}=e;n&&n.dispose(),t.complete(),e.dfp.dispose(e.ads),setTimeout((()=>{e.dispose()}))}const fg=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Su(t),ym(),Eu("Player Requested");var n=eh(t),i=n.playerContainer;i.classList.add("player-container");var o=t.playerConfig.play_btn_styles;o&&uh(o,i);var{playerConfig:{aspectRatio:s},video:{aspect_ratio:a},aspectRatioOverride:c}=t,u=c||s||a;"16x9"!==u&&lh(u,i);var l=hg(n,r,e),d=Vc(l),h=di.of(ag(ag({},n),{},{videoEl:l.$("video.vjs-tech")})),p=Ec(h),f=new ni.Subject,m=Yc(f,l),v=Hd(l)(Gl(d,p,h,m)),g=Uo(v,l),y=Eo(Tc(g,l)),b=new si(f,y,{}),_=f.withType("dispose");return vv(dg,ug,lg),b.takeUntil(_).subscribe((()=>{}),(e=>og(e)),(()=>pg(l,f))),{facade:Gc(b,t.environment.secret),player:l}};var{js:{evaluatedJSMark:mg,startedJSExecutionMark:vg,evaluateMainJSMeasure:gg}}=gv;vv(gg,vg,mg),(window._cne=window._cne||{},window._cne).createPlayer=function(e){var t;t=e.video.localized_messages,Ho=t||{};var r=!!e.video.live_metadata,n={fluid:!0,autoplay:!1,preload:"metadata",children:ah(e.video),html5:{nativeTextTracks:r&&ia()||sa(),vhs:{bandwidth:2097152,overrideNative:!i().browser.IS_SAFARI},nativeAudioTracks:i().browser.IS_SAFARI,nativeVideoTracks:i().browser.IS_SAFARI},persistTextTrackSettings:!0,language:e.video.locale,videos_js_language_data:e.video.videos_js_language_data},{facade:o,player:s}=fg(i(),e,n);return ri(i(),s,e.video),o}},7317:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(90),i=null;function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=(0,n.Z)(e.location.href),r=t.searchParams.get("cneDebug");return i="true"===r||e._CNE_DEV_MODE_}function s(){null===i&&o();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i&&console.warn("cneLog: ",...t)}},90:(e,t,r)=>{"use strict";function n(e){try{return new URL(e)}catch(u){var t=document.createElement("a");t.href=e;var{host:r="",hostname:n="",pathname:i="",port:o="",protocol:s="",search:a=""}=t,c={};return(0===t.search.indexOf("?")?t.search.substring(1):t.search).split("&").forEach((e=>{var t=e.split("=");2===t.length&&(c[t[0]]=t[1])})),{host:r,hostname:n,pathname:i,port:o,protocol:s,search:a,searchParams:{get:e=>c[e]}}}}r.d(t,{Z:()=>n})},7878:(e,t,r)=>{r(6253),r(9115),r(1181),r(8416),r(5645).Map},7657:(e,t,r)=>{r(5767),r(8132),r(8388),r(7470),r(4882),r(1520),r(7476),r(9622),r(9375),r(3533),r(4672),r(4157),r(5095),r(9892),r(5115),r(9176),r(8838),r(6253),r(5645).Object},9074:(e,t,r)=>{r(6253),r(9115),r(1181),r(851),r(5645).Promise},2298:(e,t,r)=>{r(6253),r(9115),r(1181),r(8184),r(5645).Set},4244:(e,t,r)=>{r(5767),r(6253),r(5645).Symbol},8938:(e,t,r)=>{r(2310),r(5645).Array.find},4963:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},7722:(e,t,r)=>{var n=r(6314)("unscopables"),i=Array.prototype;null==i[n]&&r(7728)(i,n,{}),e.exports=function(e){i[n][e]=!0}},3328:e=>{e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},7007:(e,t,r)=>{var n=r(5286);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},9315:(e,t,r)=>{var n=r(2110),i=r(875),o=r(2337);e.exports=function(e){return function(t,r,s){var a,c=n(t),u=i(c.length),l=o(s,u);if(e&&r!=r){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}}},50:(e,t,r)=>{var n=r(741),i=r(9797),o=r(508),s=r(875),a=r(6886);e.exports=function(e,t){var r=1==e,c=2==e,u=3==e,l=4==e,d=6==e,h=5==e||d,p=t||a;return function(t,a,f){for(var m,v,g=o(t),y=i(g),b=n(a,f,3),_=s(y.length),T=0,w=r?p(t,_):c?p(t,0):void 0;_>T;T++)if((h||T in y)&&(v=b(m=y[T],T,g),e))if(r)w[T]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return T;case 2:w.push(m)}else if(l)return!1;return d?-1:u||l?l:w}}},2736:(e,t,r)=>{var n=r(5286),i=r(4302),o=r(6314)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},6886:(e,t,r)=>{var n=r(2736);e.exports=function(e,t){return new(n(e))(t)}},1488:(e,t,r)=>{var n=r(2032),i=r(6314)("toStringTag"),o="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:o?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},2032:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},9824:(e,t,r)=>{"use strict";var n=r(9275).f,i=r(2503),o=r(4408),s=r(741),a=r(3328),c=r(3531),u=r(2923),l=r(5436),d=r(2974),h=r(7057),p=r(4728).fastKey,f=r(1616),m=h?"_s":"size",v=function(e,t){var r,n=p(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,u){var l=e((function(e,n){a(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,null!=n&&c(n,r,e[u],e)}));return o(l.prototype,{clear:function(){for(var e=f(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var r=f(this,t),n=v(r,e);if(n){var i=n.n,o=n.p;delete r._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==n&&(r._f=i),r._l==n&&(r._l=o),r[m]--}return!!n},forEach:function(e){f(this,t);for(var r,n=s(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!v(f(this,t),e)}}),h&&n(l.prototype,"size",{get:function(){return f(this,t)[m]}}),l},def:function(e,t,r){var n,i,o=v(e,t);return o?o.v=r:(e._l=o={i:i=p(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[m]++,"F"!==i&&(e._i[i]=o)),e},getEntry:v,setStrong:function(e,t,r){u(e,t,(function(e,r){this._t=f(e,t),this._k=r,this._l=void 0}),(function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?l(0,"keys"==t?r.k:"values"==t?r.v:[r.k,r.v]):(e._t=void 0,l(1))}),r?"entries":"values",!r,!0),d(t)}}},5795:(e,t,r)=>{"use strict";var n=r(3816),i=r(2985),o=r(7234),s=r(4408),a=r(4728),c=r(3531),u=r(3328),l=r(5286),d=r(4253),h=r(7462),p=r(2943),f=r(266);e.exports=function(e,t,r,m,v,g){var y=n[e],b=y,_=v?"set":"add",T=b&&b.prototype,w={},S=function(e){var t=T[e];o(T,e,"delete"==e||"has"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof b&&(g||T.forEach&&!d((function(){(new b).entries().next()})))){var C=new b,E=C[_](g?{}:-0,1)!=C,O=d((function(){C.has(1)})),k=h((function(e){new b(e)})),x=!g&&d((function(){for(var e=new b,t=5;t--;)e[_](t,t);return!e.has(-0)}));k||((b=t((function(t,r){u(t,b,e);var n=f(new y,t,b);return null!=r&&c(r,v,n[_],n),n}))).prototype=T,T.constructor=b),(O||x)&&(S("delete"),S("has"),v&&S("get")),(x||E)&&S(_),g&&T.clear&&delete T.clear}else b=m.getConstructor(t,e,v,_),s(b.prototype,r),a.NEED=!0;return p(b,e),w[e]=b,i(i.G+i.W+i.F*(b!=y),w),g||m.setStrong(b,e,v),b}},5645:e=>{var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},741:(e,t,r)=>{var n=r(4963);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},1355:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},7057:(e,t,r)=>{e.exports=!r(4253)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},2457:(e,t,r)=>{var n=r(5286),i=r(3816).document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},4430:e=>{e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},5541:(e,t,r)=>{var n=r(7184),i=r(4548),o=r(4682);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var s,a=r(e),c=o.f,u=0;a.length>u;)c.call(e,s=a[u++])&&t.push(s);return t}},2985:(e,t,r)=>{var n=r(3816),i=r(5645),o=r(7728),s=r(7234),a=r(741),c=function(e,t,r){var u,l,d,h,p=e&c.F,f=e&c.G,m=e&c.S,v=e&c.P,g=e&c.B,y=f?n:m?n[t]||(n[t]={}):(n[t]||{}).prototype,b=f?i:i[t]||(i[t]={}),_=b.prototype||(b.prototype={});for(u in f&&(r=t),r)d=((l=!p&&y&&void 0!==y[u])?y:r)[u],h=g&&l?a(d,n):v&&"function"==typeof d?a(Function.call,d):d,y&&s(y,u,d,e&c.U),b[u]!=d&&o(b,u,h),v&&_[u]!=d&&(_[u]=d)};n.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},4253:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},3531:(e,t,r)=>{var n=r(741),i=r(8851),o=r(6555),s=r(7007),a=r(875),c=r(9002),u={},l={},d=e.exports=function(e,t,r,d,h){var p,f,m,v,g=h?function(){return e}:c(e),y=n(r,d,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(p=a(e.length);p>b;b++)if((v=t?y(s(f=e[b])[0],f[1]):y(e[b]))===u||v===l)return v}else for(m=g.call(e);!(f=m.next()).done;)if((v=i(m,y,f.value,t))===u||v===l)return v};d.BREAK=u,d.RETURN=l},18:(e,t,r)=>{e.exports=r(3825)("native-function-to-string",Function.toString)},3816:e=>{var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},9181:e=>{var t={}.hasOwnProperty;e.exports=function(e,r){return t.call(e,r)}},7728:(e,t,r)=>{var n=r(9275),i=r(681);e.exports=r(7057)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},639:(e,t,r)=>{var n=r(3816).document;e.exports=n&&n.documentElement},1734:(e,t,r)=>{e.exports=!r(7057)&&!r(4253)((function(){return 7!=Object.defineProperty(r(2457)("div"),"a",{get:function(){return 7}}).a}))},266:(e,t,r)=>{var n=r(5286),i=r(7375).set;e.exports=function(e,t,r){var o,s=t.constructor;return s!==r&&"function"==typeof s&&(o=s.prototype)!==r.prototype&&n(o)&&i&&i(e,o),e}},7242:e=>{e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},9797:(e,t,r)=>{var n=r(2032);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},6555:(e,t,r)=>{var n=r(2803),i=r(6314)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[i]===e)}},4302:(e,t,r)=>{var n=r(2032);e.exports=Array.isArray||function(e){return"Array"==n(e)}},5286:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},8851:(e,t,r)=>{var n=r(7007);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},9988:(e,t,r)=>{"use strict";var n=r(2503),i=r(681),o=r(2943),s={};r(7728)(s,r(6314)("iterator"),(function(){return this})),e.exports=function(e,t,r){e.prototype=n(s,{next:i(1,r)}),o(e,t+" Iterator")}},2923:(e,t,r)=>{"use strict";var n=r(4461),i=r(2985),o=r(7234),s=r(7728),a=r(2803),c=r(9988),u=r(2943),l=r(468),d=r(6314)("iterator"),h=!([].keys&&"next"in[].keys()),p="keys",f="values",m=function(){return this};e.exports=function(e,t,r,v,g,y,b){c(r,t,v);var _,T,w,S=function(e){if(!h&&e in k)return k[e];switch(e){case p:case f:return function(){return new r(this,e)}}return function(){return new r(this,e)}},C=t+" Iterator",E=g==f,O=!1,k=e.prototype,x=k[d]||k["@@iterator"]||g&&k[g],A=x||S(g),P=g?E?S("entries"):A:void 0,I="Array"==t&&k.entries||x;if(I&&(w=l(I.call(new e)))!==Object.prototype&&w.next&&(u(w,C,!0),n||"function"==typeof w[d]||s(w,d,m)),E&&x&&x.name!==f&&(O=!0,A=function(){return x.call(this)}),n&&!b||!h&&!O&&k[d]||s(k,d,A),a[t]=A,a[C]=m,g)if(_={values:E?A:S(f),keys:y?A:S(p),entries:P},b)for(T in _)T in k||o(k,T,_[T]);else i(i.P+i.F*(h||O),t,_);return _}},7462:(e,t,r)=>{var n=r(6314)("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o=[7],s=o[n]();s.next=function(){return{done:r=!0}},o[n]=function(){return s},e(o)}catch(e){}return r}},5436:e=>{e.exports=function(e,t){return{value:t,done:!!e}}},2803:e=>{e.exports={}},4461:e=>{e.exports=!1},4728:(e,t,r)=>{var n=r(3953)("meta"),i=r(5286),o=r(9181),s=r(9275).f,a=0,c=Object.isExtensible||function(){return!0},u=!r(4253)((function(){return c(Object.preventExtensions({}))})),l=function(e){s(e,n,{value:{i:"O"+ ++a,w:{}}})},d=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[n].i},getWeak:function(e,t){if(!o(e,n)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[n].w},onFreeze:function(e){return u&&d.NEED&&c(e)&&!o(e,n)&&l(e),e}}},4351:(e,t,r)=>{var n=r(3816),i=r(4193).set,o=n.MutationObserver||n.WebKitMutationObserver,s=n.process,a=n.Promise,c="process"==r(2032)(s);e.exports=function(){var e,t,r,u=function(){var n,i;for(c&&(n=s.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(c)r=function(){s.nextTick(u)};else if(!o||n.navigator&&n.navigator.standalone)if(a&&a.resolve){var l=a.resolve(void 0);r=function(){l.then(u)}}else r=function(){i.call(n,u)};else{var d=!0,h=document.createTextNode("");new o(u).observe(h,{characterData:!0}),r=function(){h.data=d=!d}}return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},3499:(e,t,r)=>{"use strict";var n=r(4963);function i(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)}e.exports.f=function(e){return new i(e)}},5345:(e,t,r)=>{"use strict";var n=r(7057),i=r(7184),o=r(4548),s=r(4682),a=r(508),c=r(9797),u=Object.assign;e.exports=!u||r(4253)((function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach((function(e){t[e]=e})),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n}))?function(e,t){for(var r=a(e),u=arguments.length,l=1,d=o.f,h=s.f;u>l;)for(var p,f=c(arguments[l++]),m=d?i(f).concat(d(f)):i(f),v=m.length,g=0;v>g;)p=m[g++],n&&!h.call(f,p)||(r[p]=f[p]);return r}:u},2503:(e,t,r)=>{var n=r(7007),i=r(5588),o=r(4430),s=r(9335)("IE_PROTO"),a=function(){},c=function(){var e,t=r(2457)("iframe"),n=o.length;for(t.style.display="none",r(639).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;n--;)delete c.prototype[o[n]];return c()};e.exports=Object.create||function(e,t){var r;return null!==e?(a.prototype=n(e),r=new a,a.prototype=null,r[s]=e):r=c(),void 0===t?r:i(r,t)}},9275:(e,t,r)=>{var n=r(7007),i=r(1734),o=r(1689),s=Object.defineProperty;t.f=r(7057)?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return s(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},5588:(e,t,r)=>{var n=r(9275),i=r(7007),o=r(7184);e.exports=r(7057)?Object.defineProperties:function(e,t){i(e);for(var r,s=o(t),a=s.length,c=0;a>c;)n.f(e,r=s[c++],t[r]);return e}},8693:(e,t,r)=>{var n=r(4682),i=r(681),o=r(2110),s=r(1689),a=r(9181),c=r(1734),u=Object.getOwnPropertyDescriptor;t.f=r(7057)?u:function(e,t){if(e=o(e),t=s(t,!0),c)try{return u(e,t)}catch(e){}if(a(e,t))return i(!n.f.call(e,t),e[t])}},9327:(e,t,r)=>{var n=r(2110),i=r(616).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return s.slice()}}(e):i(n(e))}},616:(e,t,r)=>{var n=r(189),i=r(4430).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},4548:(e,t)=>{t.f=Object.getOwnPropertySymbols},468:(e,t,r)=>{var n=r(9181),i=r(508),o=r(9335)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},189:(e,t,r)=>{var n=r(9181),i=r(2110),o=r(9315)(!1),s=r(9335)("IE_PROTO");e.exports=function(e,t){var r,a=i(e),c=0,u=[];for(r in a)r!=s&&n(a,r)&&u.push(r);for(;t.length>c;)n(a,r=t[c++])&&(~o(u,r)||u.push(r));return u}},7184:(e,t,r)=>{var n=r(189),i=r(4430);e.exports=Object.keys||function(e){return n(e,i)}},4682:(e,t)=>{t.f={}.propertyIsEnumerable},3160:(e,t,r)=>{var n=r(2985),i=r(5645),o=r(4253);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],s={};s[e]=t(r),n(n.S+n.F*o((function(){r(1)})),"Object",s)}},188:e=>{e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},94:(e,t,r)=>{var n=r(7007),i=r(5286),o=r(3499);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=o.f(e);return(0,r.resolve)(t),r.promise}},681:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},4408:(e,t,r)=>{var n=r(7234);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},7234:(e,t,r)=>{var n=r(3816),i=r(7728),o=r(9181),s=r(3953)("src"),a=r(18),c="toString",u=(""+a).split(c);r(5645).inspectSource=function(e){return a.call(e)},(e.exports=function(e,t,r,a){var c="function"==typeof r;c&&(o(r,"name")||i(r,"name",t)),e[t]!==r&&(c&&(o(r,s)||i(r,s,e[t]?""+e[t]:u.join(String(t)))),e===n?e[t]=r:a?e[t]?e[t]=r:i(e,t,r):(delete e[t],i(e,t,r)))})(Function.prototype,c,(function(){return"function"==typeof this&&this[s]||a.call(this)}))},7195:e=>{e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},7375:(e,t,r)=>{var n=r(5286),i=r(7007),o=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=r(741)(Function.call,r(8693).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:o}},2974:(e,t,r)=>{"use strict";var n=r(3816),i=r(9275),o=r(7057),s=r(6314)("species");e.exports=function(e){var t=n[e];o&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},2943:(e,t,r)=>{var n=r(9275).f,i=r(9181),o=r(6314)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},9335:(e,t,r)=>{var n=r(3825)("keys"),i=r(3953);e.exports=function(e){return n[e]||(n[e]=i(e))}},3825:(e,t,r)=>{var n=r(5645),i=r(3816),o="__core-js_shared__",s=i[o]||(i[o]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(4461)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},8364:(e,t,r)=>{var n=r(7007),i=r(4963),o=r(6314)("species");e.exports=function(e,t){var r,s=n(e).constructor;return void 0===s||null==(r=n(s)[o])?t:i(r)}},4496:(e,t,r)=>{var n=r(1467),i=r(1355);e.exports=function(e){return function(t,r){var o,s,a=String(i(t)),c=n(r),u=a.length;return c<0||c>=u?e?"":void 0:(o=a.charCodeAt(c))<55296||o>56319||c+1===u||(s=a.charCodeAt(c+1))<56320||s>57343?e?a.charAt(c):o:e?a.slice(c,c+2):s-56320+(o-55296<<10)+65536}}},4193:(e,t,r)=>{var n,i,o,s=r(741),a=r(7242),c=r(639),u=r(2457),l=r(3816),d=l.process,h=l.setImmediate,p=l.clearImmediate,f=l.MessageChannel,m=l.Dispatch,v=0,g={},y="onreadystatechange",b=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},_=function(e){b.call(e.data)};h&&p||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return g[++v]=function(){a("function"==typeof e?e:Function(e),t)},n(v),v},p=function(e){delete g[e]},"process"==r(2032)(d)?n=function(e){d.nextTick(s(b,e,1))}:m&&m.now?n=function(e){m.now(s(b,e,1))}:f?(o=(i=new f).port2,i.port1.onmessage=_,n=s(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+"","*")},l.addEventListener("message",_,!1)):n=y in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),b.call(e)}}:function(e){setTimeout(s(b,e,1),0)}),e.exports={set:h,clear:p}},2337:(e,t,r)=>{var n=r(1467),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=n(e))<0?i(e+t,0):o(e,t)}},1467:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},2110:(e,t,r)=>{var n=r(9797),i=r(1355);e.exports=function(e){return n(i(e))}},875:(e,t,r)=>{var n=r(1467),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},508:(e,t,r)=>{var n=r(1355);e.exports=function(e){return Object(n(e))}},1689:(e,t,r)=>{var n=r(5286);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},3953:e=>{var t=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+r).toString(36))}},575:(e,t,r)=>{var n=r(3816).navigator;e.exports=n&&n.userAgent||""},1616:(e,t,r)=>{var n=r(5286);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},6074:(e,t,r)=>{var n=r(3816),i=r(5645),o=r(4461),s=r(8787),a=r(9275).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},8787:(e,t,r)=>{t.f=r(6314)},6314:(e,t,r)=>{var n=r(3825)("wks"),i=r(3953),o=r(3816).Symbol,s="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=s&&o[e]||(s?o:i)("Symbol."+e))}).store=n},9002:(e,t,r)=>{var n=r(1488),i=r(6314)("iterator"),o=r(2803);e.exports=r(5645).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[n(e)]}},2310:(e,t,r)=>{"use strict";var n=r(2985),i=r(50)(5),o="find",s=!0;o in[]&&Array(1).find((function(){s=!1})),n(n.P+n.F*s,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(7722)(o)},6997:(e,t,r)=>{"use strict";var n=r(7722),i=r(5436),o=r(2803),s=r(2110);e.exports=r(2923)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},8416:(e,t,r)=>{"use strict";var n=r(9824),i=r(1616),o="Map";e.exports=r(5795)(o,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=n.getEntry(i(this,o),e);return t&&t.v},set:function(e,t){return n.def(i(this,o),0===e?0:e,t)}},n,!0)},5115:(e,t,r)=>{var n=r(2985);n(n.S+n.F,"Object",{assign:r(5345)})},8132:(e,t,r)=>{var n=r(2985);n(n.S,"Object",{create:r(2503)})},7470:(e,t,r)=>{var n=r(2985);n(n.S+n.F*!r(7057),"Object",{defineProperties:r(5588)})},8388:(e,t,r)=>{var n=r(2985);n(n.S+n.F*!r(7057),"Object",{defineProperty:r(9275).f})},9375:(e,t,r)=>{var n=r(5286),i=r(4728).onFreeze;r(3160)("freeze",(function(e){return function(t){return e&&n(t)?e(i(t)):t}}))},4882:(e,t,r)=>{var n=r(2110),i=r(8693).f;r(3160)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(n(e),t)}}))},9622:(e,t,r)=>{r(3160)("getOwnPropertyNames",(function(){return r(9327).f}))},1520:(e,t,r)=>{var n=r(508),i=r(468);r(3160)("getPrototypeOf",(function(){return function(e){return i(n(e))}}))},9892:(e,t,r)=>{var n=r(5286);r(3160)("isExtensible",(function(e){return function(t){return!!n(t)&&(!e||e(t))}}))},4157:(e,t,r)=>{var n=r(5286);r(3160)("isFrozen",(function(e){return function(t){return!n(t)||!!e&&e(t)}}))},5095:(e,t,r)=>{var n=r(5286);r(3160)("isSealed",(function(e){return function(t){return!n(t)||!!e&&e(t)}}))},9176:(e,t,r)=>{var n=r(2985);n(n.S,"Object",{is:r(7195)})},7476:(e,t,r)=>{var n=r(508),i=r(7184);r(3160)("keys",(function(){return function(e){return i(n(e))}}))},4672:(e,t,r)=>{var n=r(5286),i=r(4728).onFreeze;r(3160)("preventExtensions",(function(e){return function(t){return e&&n(t)?e(i(t)):t}}))},3533:(e,t,r)=>{var n=r(5286),i=r(4728).onFreeze;r(3160)("seal",(function(e){return function(t){return e&&n(t)?e(i(t)):t}}))},8838:(e,t,r)=>{var n=r(2985);n(n.S,"Object",{setPrototypeOf:r(7375).set})},6253:(e,t,r)=>{"use strict";var n=r(1488),i={};i[r(6314)("toStringTag")]="z",i+""!="[object z]"&&r(7234)(Object.prototype,"toString",(function(){return"[object "+n(this)+"]"}),!0)},851:(e,t,r)=>{"use strict";var n,i,o,s,a=r(4461),c=r(3816),u=r(741),l=r(1488),d=r(2985),h=r(5286),p=r(4963),f=r(3328),m=r(3531),v=r(8364),g=r(4193).set,y=r(4351)(),b=r(3499),_=r(188),T=r(575),w=r(94),S="Promise",C=c.TypeError,E=c.process,O=E&&E.versions,k=O&&O.v8||"",x=c.Promise,A="process"==l(E),P=function(){},I=i=b.f,M=!!function(){try{var e=x.resolve(1),t=(e.constructor={})[r(6314)("species")]=function(e){e(P,P)};return(A||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t&&0!==k.indexOf("6.6")&&-1===T.indexOf("Chrome/66")}catch(e){}}(),L=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},D=function(e,t){if(!e._n){e._n=!0;var r=e._c;y((function(){for(var n=e._v,i=1==e._s,o=0,s=function(t){var r,o,s,a=i?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{a?(i||(2==e._h&&j(e),e._h=1),!0===a?r=n:(l&&l.enter(),r=a(n),l&&(l.exit(),s=!0)),r===t.promise?u(C("Promise-chain cycle")):(o=L(r))?o.call(r,c,u):c(r)):u(n)}catch(e){l&&!s&&l.exit(),u(e)}};r.length>o;)s(r[o++]);e._c=[],e._n=!1,t&&!e._h&&R(e)}))}},R=function(e){g.call(c,(function(){var t,r,n,i=e._v,o=N(e);if(o&&(t=_((function(){A?E.emit("unhandledRejection",i,e):(r=c.onunhandledrejection)?r({promise:e,reason:i}):(n=c.console)&&n.error&&n.error("Unhandled promise rejection",i)})),e._h=A||N(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},N=function(e){return 1!==e._h&&0===(e._a||e._c).length},j=function(e){g.call(c,(function(){var t;A?E.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},U=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},F=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw C("Promise can't be resolved itself");(t=L(e))?y((function(){var n={_w:r,_d:!1};try{t.call(e,u(F,n,1),u(U,n,1))}catch(e){U.call(n,e)}})):(r._v=e,r._s=1,D(r,!1))}catch(e){U.call({_w:r,_d:!1},e)}}};M||(x=function(e){f(this,x,S,"_h"),p(e),n.call(this);try{e(u(F,this,1),u(U,this,1))}catch(e){U.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(4408)(x.prototype,{then:function(e,t){var r=I(v(this,x));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=A?E.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&D(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new n;this.promise=e,this.resolve=u(F,e,1),this.reject=u(U,e,1)},b.f=I=function(e){return e===x||e===s?new o(e):i(e)}),d(d.G+d.W+d.F*!M,{Promise:x}),r(2943)(x,S),r(2974)(S),s=r(5645).Promise,d(d.S+d.F*!M,S,{reject:function(e){var t=I(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(a||!M),S,{resolve:function(e){return w(a&&this===s?x:this,e)}}),d(d.S+d.F*!(M&&r(7462)((function(e){x.all(e).catch(P)}))),S,{all:function(e){var t=this,r=I(t),n=r.resolve,i=r.reject,o=_((function(){var r=[],o=0,s=1;m(e,!1,(function(e){var a=o++,c=!1;r.push(void 0),s++,t.resolve(e).then((function(e){c||(c=!0,r[a]=e,--s||n(r))}),i)})),--s||n(r)}));return o.e&&i(o.v),r.promise},race:function(e){var t=this,r=I(t),n=r.reject,i=_((function(){m(e,!1,(function(e){t.resolve(e).then(r.resolve,n)}))}));return i.e&&n(i.v),r.promise}})},8184:(e,t,r)=>{"use strict";var n=r(9824),i=r(1616);e.exports=r(5795)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return n.def(i(this,"Set"),e=0===e?0:e,e)}},n)},9115:(e,t,r)=>{"use strict";var n=r(4496)(!0);r(2923)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})}))},5767:(e,t,r)=>{"use strict";var n=r(3816),i=r(9181),o=r(7057),s=r(2985),a=r(7234),c=r(4728).KEY,u=r(4253),l=r(3825),d=r(2943),h=r(3953),p=r(6314),f=r(8787),m=r(6074),v=r(5541),g=r(4302),y=r(7007),b=r(5286),_=r(508),T=r(2110),w=r(1689),S=r(681),C=r(2503),E=r(9327),O=r(8693),k=r(4548),x=r(9275),A=r(7184),P=O.f,I=x.f,M=E.f,L=n.Symbol,D=n.JSON,R=D&&D.stringify,N=p("_hidden"),j=p("toPrimitive"),U={}.propertyIsEnumerable,F=l("symbol-registry"),$=l("symbols"),B=l("op-symbols"),V=Object.prototype,q="function"==typeof L&&!!k.f,H=n.QObject,W=!H||!H.prototype||!H.prototype.findChild,z=o&&u((function(){return 7!=C(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=P(V,t);n&&delete V[t],I(e,t,r),n&&e!==V&&I(V,t,n)}:I,G=function(e){var t=$[e]=C(L.prototype);return t._k=e,t},K=q&&"symbol"==typeof L.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof L},X=function(e,t,r){return e===V&&X(B,t,r),y(e),t=w(t,!0),y(r),i($,t)?(r.enumerable?(i(e,N)&&e[N][t]&&(e[N][t]=!1),r=C(r,{enumerable:S(0,!1)})):(i(e,N)||I(e,N,S(1,{})),e[N][t]=!0),z(e,t,r)):I(e,t,r)},Y=function(e,t){y(e);for(var r,n=v(t=T(t)),i=0,o=n.length;o>i;)X(e,r=n[i++],t[r]);return e},Q=function(e){var t=U.call(this,e=w(e,!0));return!(this===V&&i($,e)&&!i(B,e))&&(!(t||!i(this,e)||!i($,e)||i(this,N)&&this[N][e])||t)},J=function(e,t){if(e=T(e),t=w(t,!0),e!==V||!i($,t)||i(B,t)){var r=P(e,t);return!r||!i($,t)||i(e,N)&&e[N][t]||(r.enumerable=!0),r}},Z=function(e){for(var t,r=M(T(e)),n=[],o=0;r.length>o;)i($,t=r[o++])||t==N||t==c||n.push(t);return n},ee=function(e){for(var t,r=e===V,n=M(r?B:T(e)),o=[],s=0;n.length>s;)!i($,t=n[s++])||r&&!i(V,t)||o.push($[t]);return o};q||(a((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(r){this===V&&t.call(B,r),i(this,N)&&i(this[N],e)&&(this[N][e]=!1),z(this,e,S(1,r))};return o&&W&&z(V,e,{configurable:!0,set:t}),G(e)}).prototype,"toString",(function(){return this._k})),O.f=J,x.f=X,r(616).f=E.f=Z,r(4682).f=Q,k.f=ee,o&&!r(4461)&&a(V,"propertyIsEnumerable",Q,!0),f.f=function(e){return G(p(e))}),s(s.G+s.W+s.F*!q,{Symbol:L});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)p(te[re++]);for(var ne=A(p.store),ie=0;ne.length>ie;)m(ne[ie++]);s(s.S+s.F*!q,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=L(e)},keyFor:function(e){if(!K(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!q,"Object",{create:function(e,t){return void 0===t?C(e):Y(C(e),t)},defineProperty:X,defineProperties:Y,getOwnPropertyDescriptor:J,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var oe=u((function(){k.f(1)}));s(s.S+s.F*oe,"Object",{getOwnPropertySymbols:function(e){return k.f(_(e))}}),D&&s(s.S+s.F*(!q||u((function(){var e=L();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))}))),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(b(t)||void 0!==e)&&!K(e))return g(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!K(t))return t}),n[1]=t,R.apply(D,n)}}),L.prototype[j]||r(7728)(L.prototype,j,L.prototype.valueOf),d(L,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},1181:(e,t,r)=>{for(var n=r(6997),i=r(7184),o=r(7234),s=r(3816),a=r(7728),c=r(2803),u=r(6314),l=u("iterator"),d=u("toStringTag"),h=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=i(p),m=0;m<f.length;m++){var v,g=f[m],y=p[g],b=s[g],_=b&&b.prototype;if(_&&(_[l]||a(_,l,h),_[d]||a(_,d,g),c[g]=h,y))for(v in n)_[v]||o(_,v,n[v],!0)}},9144:(e,t,r)=>{var n,i="undefined"!=typeof window?window:{},o=r(5893);"undefined"!=typeof document?n=document:(n=i["__GLOBAL_DOCUMENT_CACHE@4"])||(n=i["__GLOBAL_DOCUMENT_CACHE@4"]=o),e.exports=n},8908:e=>{var t;t="undefined"!=typeof window?window:"undefined"!=typeof self?self:{},e.exports=t},5220:e=>{"use strict";var t=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=function(e,t){var r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return r=r>=0?r:0,(16&e[t+5])>>4?r+20:r+10},n=function(e,t){return e.length-t<10||e[t]!=="I".charCodeAt(0)||e[t+1]!=="D".charCodeAt(0)||e[t+2]!=="3".charCodeAt(0)?t:(t+=r(e,t),n(e,t))},i=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]};e.exports={isLikelyAacData:function(e){var t=n(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:r,parseAdtsSize:function(e,t){var r=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|r},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var r=0;r+5<e.length;){if(255===e[r]&&240==(246&e[r+1]))return t[(60&e[r+2])>>>2];r++}return null},parseAacTimestamp:function(e){var t,r,n;t=10,64&e[5]&&(t+=4,t+=i(e.subarray(10,14)));do{if((r=i(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){n=e.subarray(t+10,t+r+10);for(var o=0;o<n.byteLength;o++)if(0===n[o]){var s=unescape(function(e,t,r){var n,i="";for(n=t;n<r;n++)i+="%"+("00"+e[n].toString(16)).slice(-2);return i}(n,0,o));if("com.apple.streaming.transportStreamTimestamp"===s){var a=n.subarray(o+1),c=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return c*=4,c+=3&a[7]}break}}t+=10,t+=r}while(t<e.byteLength);return null}}},4149:(e,t,r)=>{"use strict";var n=r(5215),i=function(e){var t=31&e[1];return t<<=8,t|=e[2]},o=function(e){return!!(64&e[1])},s=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},a=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};e.exports={parseType:function(e,t){var r=i(e);return 0===r?"pat":r===t?"pmt":t?"pes":null},parsePat:function(e){var t=o(e),r=4+s(e);return t&&(r+=e[r]+1),(31&e[r+10])<<8|e[r+11]},parsePmt:function(e){var t={},r=o(e),n=4+s(e);if(r&&(n+=e[n]+1),1&e[n+5]){var i;i=3+((15&e[n+1])<<8|e[n+2])-4;for(var a=12+((15&e[n+10])<<8|e[n+11]);a<i;){var c=n+a;t[(31&e[c+1])<<8|e[c+2]]=e[c],a+=5+((15&e[c+3])<<8|e[c+4])}return t}},parsePayloadUnitStartIndicator:o,parsePesType:function(e,t){switch(t[i(e)]){case n.H264_STREAM_TYPE:return"video";case n.ADTS_STREAM_TYPE:return"audio";case n.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!o(e))return null;var t=4+s(e);if(t>=e.byteLength)return null;var r,n=null;return 192&(r=e[t+7])&&((n={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,n.pts*=4,n.pts+=(6&e[t+13])>>>1,n.dts=n.pts,64&r&&(n.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,n.dts*=4,n.dts+=(6&e[t+18])>>>1)),n},videoPacketContainsKeyFrame:function(e){for(var t=4+s(e),r=e.subarray(t),n=0,i=0,o=!1;i<r.byteLength-3;i++)if(1===r[i+2]){n=i+5;break}for(;n<r.byteLength;)switch(r[n]){case 0:if(0!==r[n-1]){n+=2;break}if(0!==r[n-2]){n++;break}i+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===a(31&r[i+3])&&(o=!0);do{n++}while(1!==r[n]&&n<r.length);i=n-2,n+=3;break;case 1:if(0!==r[n-1]||0!==r[n-2]){n+=3;break}"slice_layer_without_partitioning_rbsp_idr"===a(31&r[i+3])&&(o=!0),i=n-2,n+=3;break;default:n+=3}return r=r.subarray(i),n-=i,i=0,r&&r.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===a(31&r[i+3])&&(o=!0),o}}},5215:e=>{"use strict";e.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},817:(e,t,r)=>{"use strict";var n=r(1961),i="shared",o=function(e,t){var r=1;for(e>t&&(r=-1);Math.abs(t-e)>4294967296;)e+=8589934592*r;return e},s=function(e){var t,r;s.prototype.init.call(this),this.type_=e||i,this.push=function(e){this.type_!==i&&e.type!==this.type_||(void 0===r&&(r=e.dts),e.dts=o(e.dts,r),e.pts=o(e.pts,r),t=e.dts,this.trigger("data",e))},this.flush=function(){r=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){r=void 0,t=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};s.prototype=new n,e.exports={TimestampRolloverStream:s,handleRollover:o}},7088:(e,t,r)=>{var n=r(1976).toUnsigned,i=r(2),o=function(e,t){var r,s,a,c,u,l=[];if(!t.length)return null;for(r=0;r<e.byteLength;)s=n(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]),a=i(e.subarray(r+4,r+8)),c=s>1?r+s:e.byteLength,a===t[0]&&(1===t.length?l.push(e.subarray(r+8,c)):(u=o(e.subarray(r+8,c),t.slice(1))).length&&(l=l.concat(u))),r=c;return l};e.exports=o},2:e=>{e.exports=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])}},7661:(e,t,r)=>{"use strict";var n,i,o,s,a,c,u=r(1976).toUnsigned,l=r(1976).toHexString,d=r(7088),h=r(2),p=r(5654),f=r(2459),m=r(3389);n=function(e){return d(e,["moov","trak"]).reduce((function(e,t){var r,n,i,o,s;return(r=d(t,["tkhd"])[0])?(n=r[0],o=u(r[i=0===n?12:20]<<24|r[i+1]<<16|r[i+2]<<8|r[i+3]),(s=d(t,["mdia","mdhd"])[0])?(i=0===(n=s[0])?12:20,e[o]=u(s[i]<<24|s[i+1]<<16|s[i+2]<<8|s[i+3]),e):null):null}),{})},i=function(e,t){var r,n,i;return r=d(t,["moof","traf"]),n=[].concat.apply([],r.map((function(t){return d(t,["tfhd"]).map((function(r){var n,i,o;return n=u(r[4]<<24|r[5]<<16|r[6]<<8|r[7]),i=e[n]||9e4,o=d(t,["tfdt"]).map((function(e){var t,r;return t=e[0],r=u(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(r*=Math.pow(2,32),r+=u(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),r}))[0],(o=o||1/0)/i}))}))),i=Math.min.apply(null,n),isFinite(i)?i:0},o=function(e,t){var r,n=d(t,["moof","traf"]),i=0,o=0;if(n&&n.length){var s=d(n[0],["tfhd"])[0],a=d(n[0],["trun"])[0],c=d(n[0],["tfdt"])[0];if(s)r=p(s).trackId;if(c)i=m(c).baseMediaDecodeTime;if(a){var u=f(a);u.samples&&u.samples.length&&(o=u.samples[0].compositionTimeOffset||0)}}return(i+o)/(e[r]||9e4)},s=function(e){var t=d(e,["moov","trak"]),r=[];return t.forEach((function(e){var t=d(e,["mdia","hdlr"]),n=d(e,["tkhd"]);t.forEach((function(e,t){var i,o,s=h(e.subarray(8,12)),a=n[t];"vide"===s&&(o=0===(i=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0)?i.getUint32(12):i.getUint32(20),r.push(o))}))})),r},c=function(e){var t=0===e[0]?12:20;return u(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])},a=function(e){var t=d(e,["moov","trak"]),r=[];return t.forEach((function(e){var t,n,i={},o=d(e,["tkhd"])[0];o&&(n=(t=new DataView(o.buffer,o.byteOffset,o.byteLength)).getUint8(0),i.id=0===n?t.getUint32(12):t.getUint32(20));var s=d(e,["mdia","hdlr"])[0];if(s){var a=h(s.subarray(8,12));i.type="vide"===a?"video":"soun"===a?"audio":a}var u=d(e,["mdia","minf","stbl","stsd"])[0];if(u){var p=u.subarray(8);i.codec=h(p.subarray(4,8));var f,m=d(p,[i.codec])[0];m&&(/^[a-z]vc[1-9]$/i.test(i.codec)?(f=m.subarray(78),"avcC"===h(f.subarray(4,8))&&f.length>11?(i.codec+=".",i.codec+=l(f[9]),i.codec+=l(f[10]),i.codec+=l(f[11])):i.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(i.codec)&&(f=m.subarray(28),"esds"===h(f.subarray(4,8))&&f.length>20&&0!==f[19]?(i.codec+="."+l(f[19]),i.codec+="."+l(f[20]>>>2&63).replace(/^0/,"")):i.codec="mp4a.40.2"))}var v=d(e,["mdia","mdhd"])[0];v&&(i.timescale=c(v)),r.push(i)})),r},e.exports={findBox:d,parseType:h,timescale:n,startTime:i,compositionStartTime:o,videoTrackIds:s,tracks:a,getTimescaleFromMediaHeader:c}},4633:e=>{e.exports=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}}},4221:e=>{e.exports=function(e){var t,r=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:r.getUint32(4),timescale:r.getUint32(8),earliestPresentationTime:r.getUint32(12),firstOffset:r.getUint32(16)},i=r.getUint16(22);for(t=24;i;t+=12,i--)n.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&r.getUint32(t),subsegmentDuration:r.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&r.getUint32(t+8)});return n}},3389:(e,t,r)=>{var n=r(1976).toUnsigned;e.exports=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:n(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=n(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),t}},5654:e=>{e.exports=function(e){var t,r=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:r.getUint32(4)},i=1&n.flags[2],o=2&n.flags[2],s=8&n.flags[2],a=16&n.flags[2],c=32&n.flags[2],u=65536&n.flags[0],l=131072&n.flags[0];return t=8,i&&(t+=4,n.baseDataOffset=r.getUint32(12),t+=4),o&&(n.sampleDescriptionIndex=r.getUint32(t),t+=4),s&&(n.defaultSampleDuration=r.getUint32(t),t+=4),a&&(n.defaultSampleSize=r.getUint32(t),t+=4),c&&(n.defaultSampleFlags=r.getUint32(t)),u&&(n.durationIsEmpty=!0),!i&&l&&(n.baseDataOffsetIsMoof=!0),n}},2459:(e,t,r)=>{var n=r(4633);e.exports=function(e){var t,r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),o=1&r.flags[2],s=4&r.flags[2],a=1&r.flags[1],c=2&r.flags[1],u=4&r.flags[1],l=8&r.flags[1],d=i.getUint32(4),h=8;for(o&&(r.dataOffset=i.getInt32(h),h+=4),s&&d&&(t={flags:n(e.subarray(h,h+4))},h+=4,a&&(t.duration=i.getUint32(h),h+=4),c&&(t.size=i.getUint32(h),h+=4),l&&(1===r.version?t.compositionTimeOffset=i.getInt32(h):t.compositionTimeOffset=i.getUint32(h),h+=4),r.samples.push(t),d--);d--;)t={},a&&(t.duration=i.getUint32(h),h+=4),c&&(t.size=i.getUint32(h),h+=4),u&&(t.flags=n(e.subarray(h,h+4)),h+=4),l&&(1===r.version?t.compositionTimeOffset=i.getInt32(h):t.compositionTimeOffset=i.getUint32(h),h+=4),r.samples.push(t);return r}},5547:(e,t,r)=>{"use strict";var n=r(5215),i=r(817).handleRollover,o={};o.ts=r(4149),o.aac=r(5220);var s=r(1489).ONE_SECOND_IN_TS,a=188,c=71,u=function(e,t,r){for(var n,i,s,u,l=0,d=a,h=!1;d<=e.byteLength;)if(e[l]!==c||e[d]!==c&&d!==e.byteLength)l++,d++;else{if(n=e.subarray(l,d),"pes"===o.ts.parseType(n,t.pid))i=o.ts.parsePesType(n,t.table),s=o.ts.parsePayloadUnitStartIndicator(n),"audio"===i&&s&&(u=o.ts.parsePesTime(n))&&(u.type="audio",r.audio.push(u),h=!0);if(h)break;l+=a,d+=a}for(l=(d=e.byteLength)-a,h=!1;l>=0;)if(e[l]!==c||e[d]!==c&&d!==e.byteLength)l--,d--;else{if(n=e.subarray(l,d),"pes"===o.ts.parseType(n,t.pid))i=o.ts.parsePesType(n,t.table),s=o.ts.parsePayloadUnitStartIndicator(n),"audio"===i&&s&&(u=o.ts.parsePesTime(n))&&(u.type="audio",r.audio.push(u),h=!0);if(h)break;l-=a,d-=a}},l=function(e,t,r){for(var n,i,s,u,l,d,h,p=0,f=a,m=!1,v={data:[],size:0};f<e.byteLength;)if(e[p]!==c||e[f]!==c)p++,f++;else{if(n=e.subarray(p,f),"pes"===o.ts.parseType(n,t.pid))if(i=o.ts.parsePesType(n,t.table),s=o.ts.parsePayloadUnitStartIndicator(n),"video"===i&&(s&&!m&&(u=o.ts.parsePesTime(n))&&(u.type="video",r.video.push(u),m=!0),!r.firstKeyFrame)){if(s&&0!==v.size){for(l=new Uint8Array(v.size),d=0;v.data.length;)h=v.data.shift(),l.set(h,d),d+=h.byteLength;if(o.ts.videoPacketContainsKeyFrame(l)){var g=o.ts.parsePesTime(l);g?(r.firstKeyFrame=g,r.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}v.size=0}v.data.push(n),v.size+=n.byteLength}if(m&&r.firstKeyFrame)break;p+=a,f+=a}for(p=(f=e.byteLength)-a,m=!1;p>=0;)if(e[p]!==c||e[f]!==c)p--,f--;else{if(n=e.subarray(p,f),"pes"===o.ts.parseType(n,t.pid))i=o.ts.parsePesType(n,t.table),s=o.ts.parsePayloadUnitStartIndicator(n),"video"===i&&s&&(u=o.ts.parsePesTime(n))&&(u.type="video",r.video.push(u),m=!0);if(m)break;p-=a,f-=a}},d=function(e){var t={pid:null,table:null},r={};for(var i in function(e,t){for(var r,n=0,i=a;i<e.byteLength;)if(e[n]!==c||e[i]!==c)n++,i++;else{switch(r=e.subarray(n,i),o.ts.parseType(r,t.pid)){case"pat":t.pid||(t.pid=o.ts.parsePat(r));break;case"pmt":t.table||(t.table=o.ts.parsePmt(r))}if(t.pid&&t.table)return;n+=a,i+=a}}(e,t),t.table){if(t.table.hasOwnProperty(i))switch(t.table[i]){case n.H264_STREAM_TYPE:r.video=[],l(e,t,r),0===r.video.length&&delete r.video;break;case n.ADTS_STREAM_TYPE:r.audio=[],u(e,t,r),0===r.audio.length&&delete r.audio}}return r};e.exports={inspect:function(e,t){var r;return r=o.aac.isLikelyAacData(e)?function(e){for(var t,r=!1,n=0,i=null,a=null,c=0,u=0;e.length-u>=3;){switch(o.aac.parseType(e,u)){case"timed-metadata":if(e.length-u<10){r=!0;break}if((c=o.aac.parseId3TagSize(e,u))>e.length){r=!0;break}null===a&&(t=e.subarray(u,u+c),a=o.aac.parseAacTimestamp(t)),u+=c;break;case"audio":if(e.length-u<7){r=!0;break}if((c=o.aac.parseAdtsSize(e,u))>e.length){r=!0;break}null===i&&(t=e.subarray(u,u+c),i=o.aac.parseSampleRate(t)),n++,u+=c;break;default:u++}if(r)return null}if(null===i||null===a)return null;var l=s/i;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*n*l,pts:a+1024*n*l}]}}(e):d(e),r&&(r.audio||r.video)?(function(e,t){if(e.audio&&e.audio.length){var r=t;void 0===r&&(r=e.audio[0].dts),e.audio.forEach((function(e){e.dts=i(e.dts,r),e.pts=i(e.pts,r),e.dtsTime=e.dts/s,e.ptsTime=e.pts/s}))}if(e.video&&e.video.length){var n=t;if(void 0===n&&(n=e.video[0].dts),e.video.forEach((function(e){e.dts=i(e.dts,n),e.pts=i(e.pts,n),e.dtsTime=e.dts/s,e.ptsTime=e.pts/s})),e.firstKeyFrame){var o=e.firstKeyFrame;o.dts=i(o.dts,n),o.pts=i(o.pts,n),o.dtsTime=o.dts/s,o.ptsTime=o.dts/s}}}(r,t),r):null},parseAudioPes_:u}},1976:e=>{e.exports={toUnsigned:function(e){return e>>>0},toHexString:function(e){return("00"+e.toString(16)).slice(-2)}}},1489:e=>{var t,r,n,i,o,s,a,c=9e4;t=function(e){return e*c},r=function(e,t){return e*t},n=function(e){return e/c},i=function(e,t){return e/t},o=function(e,r){return t(i(e,r))},s=function(e,t){return r(n(e),t)},a=function(e,t,r){return n(r?e:e-t)},e.exports={ONE_SECOND_IN_TS:c,secondsToVideoTs:t,secondsToAudioTs:r,videoTsToSeconds:n,audioTsToSeconds:i,audioTsToVideoTs:o,videoTsToAudioTs:s,metadataTsToSeconds:a}},1961:e=>{"use strict";var t=function(){this.init=function(){var e={};this.on=function(t,r){e[t]||(e[t]=[]),e[t]=e[t].concat(r)},this.off=function(t,r){var n;return!!e[t]&&(n=e[t].indexOf(r),e[t]=e[t].slice(),e[t].splice(n,1),n>-1)},this.trigger=function(t){var r,n,i,o;if(r=e[t])if(2===arguments.length)for(i=r.length,n=0;n<i;++n)r[n].call(this,arguments[1]);else{for(o=[],n=arguments.length,n=1;n<arguments.length;++n)o.push(arguments[n]);for(i=r.length,n=0;n<i;++n)r[n].apply(this,o)}},this.dispose=function(){e={}}}};t.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},t.prototype.push=function(e){this.trigger("data",e)},t.prototype.flush=function(e){this.trigger("done",e)},t.prototype.partialFlush=function(e){this.trigger("partialdone",e)},t.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},t.prototype.reset=function(e){this.trigger("reset",e)},e.exports=t},437:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8314),o=r(4859),s=function(e){function t(){e.apply(this,arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}return n(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),o.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),o.Subscription.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(i.Subject);t.AsyncSubject=s},9122:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8314),o=r(7376),s=function(e){function t(t){e.call(this),this._value=t}return n(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(i.Subject);t.BehaviorSubject=s},7056:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r,n){e.call(this),this.parent=t,this.outerValue=r,this.outerIndex=n,this.index=0}return n(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(r(5239).Subscriber);t.InnerSubscriber=i},8270:(e,t,r)=>{"use strict";var n=r(5100),i=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},e.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return n.Observable.of(this.value);case"E":return n.Observable.throw(this.error);case"C":return n.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):this.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return this.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();t.Notification=i},5100:(e,t,r)=>{"use strict";var n=r(7919),i=r(9510),o=r(683),s=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,o=i.toSubscriber(e,t,r);if(n?n.call(o,this.source):o.add(this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var r=this;if(t||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?t=n.root.Rx.config.Promise:n.root.Promise&&(t=n.root.Promise)),!t)throw new Error("no Promise impl found");return new t((function(t,n){var i;i=r.subscribe((function(t){if(i)try{e(t)}catch(e){n(e),i.unsubscribe()}else e(t)}),n,t)}))},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[o.observable]=function(){return this},e.create=function(t){return new e(t)},e}();t.Observable=s},2320:(e,t)=>{"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},3147:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(r(5239).Subscriber);t.OuterSubscriber=i},7875:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8314),o=r(9082),s=r(4859),a=r(1073),c=r(7376),u=r(3189),l=function(e){function t(t,r,n){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=n,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=r<1?1:r}return n(t,e),t.prototype.next=function(t){var r=this._getNow();this._events.push(new d(r,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,r=this._trimBufferThenGetEvents(),n=this.scheduler;if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError||this.isStopped?t=s.Subscription.EMPTY:(this.observers.push(e),t=new u.SubjectSubscription(this,e)),n&&e.add(e=new a.ObserveOnSubscriber(e,n));for(var i=r.length,o=0;o<i&&!e.closed;o++)e.next(r[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,o=0;o<i&&!(e-n[o].time<r);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&n.splice(0,o),n},t}(i.Subject);t.ReplaySubject=l;var d=function(e,t){this.time=e,this.value=t}},9255:(e,t,r)=>{"use strict";var n=r(8314);n.Subject,n.AnonymousSubject;var i=r(5100);t.y$=i.Observable,r(8322),r(7303),r(2761),r(3810),r(1039),r(7492),r(8748),r(4115),r(496),r(3705),r(6651),r(1658),r(4958),r(6514),r(757),r(8678),r(4005),r(8713),r(6280),r(1425),r(1887),r(4222),r(7049),r(3538),r(7701),r(8476),r(4487),r(242),r(9219),r(6549),r(8721),r(2059),r(2433),r(8532),r(1354),r(9794),r(9523),r(826),r(4329),r(8671),r(5392),r(2768),r(8649),r(2246),r(2743),r(7549),r(2276),r(1639),r(2355),r(6165),r(2666),r(275),r(6819),r(5272),r(7775),r(9790),r(1325),r(7183),r(5285),r(4087),r(5391),r(7574),r(2324),r(2063),r(5561),r(5251),r(4587),r(6771),r(6261),r(2391),r(2854),r(7537),r(3998),r(8788),r(3449),r(6593),r(2633),r(2961),r(462),r(7046),r(8321),r(60),r(1082),r(6679),r(2417),r(6873),r(8659),r(1021),r(3502),r(1483),r(3517),r(6093),r(7918),r(4536),r(4507),r(5532),r(530),r(2285),r(7691),r(6095),r(2821),r(3187),r(8316),r(3125),r(5855),r(1544),r(7619),r(1498),r(4220),r(8409),r(600),r(3802),r(9739),r(42),r(7971),r(3606),r(6658),r(5620),r(9337),r(1846),r(3588),r(7502),r(25),r(3869),r(279),r(8391),r(1194),r(4859).Subscription,r(5239).Subscriber,r(437).AsyncSubject,r(7875).ReplaySubject,r(9122).BehaviorSubject,r(8852).ConnectableObservable,r(8270).Notification,r(2107).EmptyError,r(521).ArgumentOutOfRangeError,r(7376).ObjectUnsubscribedError,r(4333).TimeoutError,r(6288).UnsubscriptionError,r(5782).TimeInterval,r(4453).Timestamp,r(7738).TestScheduler,r(6576).VirtualTimeScheduler;var o=r(1691);o.AjaxResponse,o.AjaxError,o.AjaxTimeoutError;var s=r(2664),a=r(8404),c=r(9082),u=r(4401),l=r(2992),d=r(5810),h=r(683);s.asap,c.queue,u.animationFrame,a.async,l.rxSubscriber,h.observable,d.iterator},3422:(e,t)=>{"use strict";var r=function(){function e(t,r){void 0===r&&(r=e.now),this.SchedulerAction=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();t.Scheduler=r},8314:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),o=r(5239),s=r(4859),a=r(7376),c=r(3189),u=r(2992),l=function(e){function t(t){e.call(this,t),this.destination=t}return n(t,e),t}(o.Subscriber);t.SubjectSubscriber=l;var d=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return n(t,e),t.prototype[u.rxSubscriber]=function(){return new l(this)},t.prototype.lift=function(e){var t=new h(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new a.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(e.complete(),s.Subscription.EMPTY):(this.observers.push(e),new c.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},t.create=function(e,t){return new h(e,t)},t}(i.Observable);t.Subject=d;var h=function(e){function t(t,r){e.call(this),this.destination=t,this.source=r}return n(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):s.Subscription.EMPTY},t}(d);t.AnonymousSubject=h},3189:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r){e.call(this),this.subject=t,this.subscriber=r,this.closed=!1}return n(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},t}(r(4859).Subscription);t.SubjectSubscription=i},5239:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(1404),o=r(4859),s=r(2320),a=r(2992),c=function(e){function t(r,n,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!r){this.destination=s.empty;break}if("object"==typeof r){r instanceof t?(this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new u(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new u(this,r,n,i)}}return n(t,e),t.prototype[a.rxSubscriber]=function(){return this},t.create=function(e,r,n){var i=new t(e,r,n);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(o.Subscription);t.Subscriber=c;var u=function(e){function t(t,r,n,o){var a;e.call(this),this._parentSubscriber=t;var c=this;i.isFunction(r)?a=r:r&&(a=r.next,n=r.error,o=r.complete,r!==s.empty&&(c=Object.create(r),i.isFunction(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this))),this._context=c,this._next=a,this._error=n,this._complete=o}return n(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){if(!this.isStopped){var e=this._parentSubscriber;this._complete?e.syncErrorThrowable?(this.__tryOrSetError(e,this._complete),this.unsubscribe()):(this.__tryOrUnsub(this._complete),this.unsubscribe()):this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,r){try{t.call(this._context,r)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(c)},4859:(e,t,r)=>{"use strict";var n=r(5936),i=r(7620),o=r(1404),s=r(6447),a=r(4456),c=r(6288),u=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var r=this,u=r._parent,d=r._parents,h=r._unsubscribe,p=r._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,m=d?d.length:0;u;)u.remove(this),u=++f<m&&d[f]||null;if(o.isFunction(h))s.tryCatch(h).call(this)===a.errorObject&&(t=!0,e=e||(a.errorObject.e instanceof c.UnsubscriptionError?l(a.errorObject.e.errors):[a.errorObject.e]));if(n.isArray(p))for(f=-1,m=p.length;++f<m;){var v=p[f];if(i.isObject(v))if(s.tryCatch(v.unsubscribe).call(v)===a.errorObject){t=!0,e=e||[];var g=a.errorObject.e;g instanceof c.UnsubscriptionError?e=e.concat(l(g.errors)):e.push(g)}}if(t)throw new c.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var r=t;switch(typeof t){case"function":r=new e(t);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.prototype._addParent=function(e){var t=this._parent,r=this._parents;t&&t!==e?r?-1===r.indexOf(e)&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=((t=new e).closed=!0,t),e}();function l(e){return e.reduce((function(e,t){return e.concat(t instanceof c.UnsubscriptionError?t.errors:t)}),[])}t.Subscription=u},8322:(e,t,r)=>{"use strict";var n=r(5100),i=r(7935);n.Observable.bindCallback=i.bindCallback},7303:(e,t,r)=>{"use strict";var n=r(5100),i=r(1157);n.Observable.bindNodeCallback=i.bindNodeCallback},2761:(e,t,r)=>{"use strict";var n=r(5100),i=r(1071);n.Observable.combineLatest=i.combineLatest},3810:(e,t,r)=>{"use strict";var n=r(5100),i=r(5167);n.Observable.concat=i.concat},1039:(e,t,r)=>{"use strict";var n=r(5100),i=r(3975);n.Observable.defer=i.defer},8476:(e,t,r)=>{"use strict";var n=r(5100),i=r(8460);n.Observable.ajax=i.ajax},4487:(e,t,r)=>{"use strict";var n=r(5100),i=r(998);n.Observable.webSocket=i.webSocket},7492:(e,t,r)=>{"use strict";var n=r(5100),i=r(6256);n.Observable.empty=i.empty},8748:(e,t,r)=>{"use strict";var n=r(5100),i=r(8320);n.Observable.forkJoin=i.forkJoin},4115:(e,t,r)=>{"use strict";var n=r(5100),i=r(7038);n.Observable.from=i.from},496:(e,t,r)=>{"use strict";var n=r(5100),i=r(9126);n.Observable.fromEvent=i.fromEvent},3705:(e,t,r)=>{"use strict";var n=r(5100),i=r(9535);n.Observable.fromEventPattern=i.fromEventPattern},6651:(e,t,r)=>{"use strict";var n=r(5100),i=r(8808);n.Observable.fromPromise=i.fromPromise},1658:(e,t,r)=>{"use strict";var n=r(5100),i=r(1898);n.Observable.generate=i.GenerateObservable.create},4958:(e,t,r)=>{"use strict";var n=r(5100),i=r(5324);n.Observable.if=i._if},6514:(e,t,r)=>{"use strict";var n=r(5100),i=r(1775);n.Observable.interval=i.interval},757:(e,t,r)=>{"use strict";var n=r(5100),i=r(3943);n.Observable.merge=i.merge},4005:(e,t,r)=>{"use strict";var n=r(5100),i=r(4403);n.Observable.never=i.never},8713:(e,t,r)=>{"use strict";var n=r(5100),i=r(9325);n.Observable.of=i.of},6280:(e,t,r)=>{"use strict";var n=r(5100),i=r(3262);n.Observable.onErrorResumeNext=i.onErrorResumeNextStatic},1425:(e,t,r)=>{"use strict";var n=r(5100),i=r(5954);n.Observable.pairs=i.pairs},8678:(e,t,r)=>{"use strict";var n=r(5100),i=r(1208);n.Observable.race=i.raceStatic},1887:(e,t,r)=>{"use strict";var n=r(5100),i=r(1093);n.Observable.range=i.range},7049:(e,t,r)=>{"use strict";var n=r(5100),i=r(1344);n.Observable.throw=i._throw},3538:(e,t,r)=>{"use strict";var n=r(5100),i=r(4903);n.Observable.timer=i.timer},4222:(e,t,r)=>{"use strict";var n=r(5100),i=r(4813);n.Observable.using=i.using},7701:(e,t,r)=>{"use strict";var n=r(5100),i=r(5545);n.Observable.zip=i.zip},2324:(e,t,r)=>{"use strict";var n=r(5100),i=r(6224);n.Observable.prototype.audit=i.audit},2063:(e,t,r)=>{"use strict";var n=r(5100),i=r(7788);n.Observable.prototype.auditTime=i.auditTime},242:(e,t,r)=>{"use strict";var n=r(5100),i=r(4402);n.Observable.prototype.buffer=i.buffer},9219:(e,t,r)=>{"use strict";var n=r(5100),i=r(2224);n.Observable.prototype.bufferCount=i.bufferCount},6549:(e,t,r)=>{"use strict";var n=r(5100),i=r(3667);n.Observable.prototype.bufferTime=i.bufferTime},8721:(e,t,r)=>{"use strict";var n=r(5100),i=r(4457);n.Observable.prototype.bufferToggle=i.bufferToggle},2059:(e,t,r)=>{"use strict";var n=r(5100),i=r(4945);n.Observable.prototype.bufferWhen=i.bufferWhen},2433:(e,t,r)=>{"use strict";var n=r(5100),i=r(4824);n.Observable.prototype.catch=i._catch,n.Observable.prototype._catch=i._catch},8532:(e,t,r)=>{"use strict";var n=r(5100),i=r(9817);n.Observable.prototype.combineAll=i.combineAll},1354:(e,t,r)=>{"use strict";var n=r(5100),i=r(3339);n.Observable.prototype.combineLatest=i.combineLatest},9794:(e,t,r)=>{"use strict";var n=r(5100),i=r(8311);n.Observable.prototype.concat=i.concat},9523:(e,t,r)=>{"use strict";var n=r(5100),i=r(2525);n.Observable.prototype.concatAll=i.concatAll},826:(e,t,r)=>{"use strict";var n=r(5100),i=r(5246);n.Observable.prototype.concatMap=i.concatMap},4329:(e,t,r)=>{"use strict";var n=r(5100),i=r(1411);n.Observable.prototype.concatMapTo=i.concatMapTo},8671:(e,t,r)=>{"use strict";var n=r(5100),i=r(4840);n.Observable.prototype.count=i.count},2768:(e,t,r)=>{"use strict";var n=r(5100),i=r(285);n.Observable.prototype.debounce=i.debounce},8649:(e,t,r)=>{"use strict";var n=r(5100),i=r(9997);n.Observable.prototype.debounceTime=i.debounceTime},2246:(e,t,r)=>{"use strict";var n=r(5100),i=r(8069);n.Observable.prototype.defaultIfEmpty=i.defaultIfEmpty},2743:(e,t,r)=>{"use strict";var n=r(5100),i=r(6358);n.Observable.prototype.delay=i.delay},7549:(e,t,r)=>{"use strict";var n=r(5100),i=r(487);n.Observable.prototype.delayWhen=i.delayWhen},5392:(e,t,r)=>{"use strict";var n=r(5100),i=r(3281);n.Observable.prototype.dematerialize=i.dematerialize},2276:(e,t,r)=>{"use strict";var n=r(5100),i=r(2339);n.Observable.prototype.distinct=i.distinct},1639:(e,t,r)=>{"use strict";var n=r(5100),i=r(5275);n.Observable.prototype.distinctUntilChanged=i.distinctUntilChanged},2355:(e,t,r)=>{"use strict";var n=r(5100),i=r(1693);n.Observable.prototype.distinctUntilKeyChanged=i.distinctUntilKeyChanged},6165:(e,t,r)=>{"use strict";var n=r(5100),i=r(1490);n.Observable.prototype.do=i._do,n.Observable.prototype._do=i._do},5272:(e,t,r)=>{"use strict";var n=r(5100),i=r(9189);n.Observable.prototype.elementAt=i.elementAt},4587:(e,t,r)=>{"use strict";var n=r(5100),i=r(7212);n.Observable.prototype.every=i.every},2666:(e,t,r)=>{"use strict";var n=r(5100),i=r(8784);n.Observable.prototype.exhaust=i.exhaust},275:(e,t,r)=>{"use strict";var n=r(5100),i=r(3658);n.Observable.prototype.exhaustMap=i.exhaustMap},6819:(e,t,r)=>{"use strict";var n=r(5100),i=r(4610);n.Observable.prototype.expand=i.expand},7775:(e,t,r)=>{"use strict";var n=r(5100),i=r(2044);n.Observable.prototype.filter=i.filter},9790:(e,t,r)=>{"use strict";var n=r(5100),i=r(4383);n.Observable.prototype.finally=i._finally,n.Observable.prototype._finally=i._finally},1325:(e,t,r)=>{"use strict";var n=r(5100),i=r(9788);n.Observable.prototype.find=i.find},7183:(e,t,r)=>{"use strict";var n=r(5100),i=r(6107);n.Observable.prototype.findIndex=i.findIndex},5285:(e,t,r)=>{"use strict";var n=r(5100),i=r(8616);n.Observable.prototype.first=i.first},4087:(e,t,r)=>{"use strict";var n=r(5100),i=r(2185);n.Observable.prototype.groupBy=i.groupBy},5391:(e,t,r)=>{"use strict";var n=r(5100),i=r(5537);n.Observable.prototype.ignoreElements=i.ignoreElements},7574:(e,t,r)=>{"use strict";var n=r(5100),i=r(1279);n.Observable.prototype.isEmpty=i.isEmpty},5561:(e,t,r)=>{"use strict";var n=r(5100),i=r(7009);n.Observable.prototype.last=i.last},5251:(e,t,r)=>{"use strict";var n=r(5100),i=r(7774);n.Observable.prototype.let=i.letProto,n.Observable.prototype.letBind=i.letProto},6771:(e,t,r)=>{"use strict";var n=r(5100),i=r(9987);n.Observable.prototype.map=i.map},6261:(e,t,r)=>{"use strict";var n=r(5100),i=r(1727);n.Observable.prototype.mapTo=i.mapTo},2391:(e,t,r)=>{"use strict";var n=r(5100),i=r(8692);n.Observable.prototype.materialize=i.materialize},2854:(e,t,r)=>{"use strict";var n=r(5100),i=r(2674);n.Observable.prototype.max=i.max},7537:(e,t,r)=>{"use strict";var n=r(5100),i=r(4039);n.Observable.prototype.merge=i.merge},3998:(e,t,r)=>{"use strict";var n=r(5100),i=r(895);n.Observable.prototype.mergeAll=i.mergeAll},8788:(e,t,r)=>{"use strict";var n=r(5100),i=r(493);n.Observable.prototype.mergeMap=i.mergeMap,n.Observable.prototype.flatMap=i.mergeMap},3449:(e,t,r)=>{"use strict";var n=r(5100),i=r(5760);n.Observable.prototype.flatMapTo=i.mergeMapTo,n.Observable.prototype.mergeMapTo=i.mergeMapTo},6593:(e,t,r)=>{"use strict";var n=r(5100),i=r(6064);n.Observable.prototype.mergeScan=i.mergeScan},2633:(e,t,r)=>{"use strict";var n=r(5100),i=r(8758);n.Observable.prototype.min=i.min},2961:(e,t,r)=>{"use strict";var n=r(5100),i=r(900);n.Observable.prototype.multicast=i.multicast},462:(e,t,r)=>{"use strict";var n=r(5100),i=r(1073);n.Observable.prototype.observeOn=i.observeOn},7046:(e,t,r)=>{"use strict";var n=r(5100),i=r(3262);n.Observable.prototype.onErrorResumeNext=i.onErrorResumeNext},8321:(e,t,r)=>{"use strict";var n=r(5100),i=r(1786);n.Observable.prototype.pairwise=i.pairwise},60:(e,t,r)=>{"use strict";var n=r(5100),i=r(1686);n.Observable.prototype.partition=i.partition},1082:(e,t,r)=>{"use strict";var n=r(5100),i=r(5490);n.Observable.prototype.pluck=i.pluck},6679:(e,t,r)=>{"use strict";var n=r(5100),i=r(9916);n.Observable.prototype.publish=i.publish},2417:(e,t,r)=>{"use strict";var n=r(5100),i=r(7634);n.Observable.prototype.publishBehavior=i.publishBehavior},8659:(e,t,r)=>{"use strict";var n=r(5100),i=r(7832);n.Observable.prototype.publishLast=i.publishLast},6873:(e,t,r)=>{"use strict";var n=r(5100),i=r(8563);n.Observable.prototype.publishReplay=i.publishReplay},1021:(e,t,r)=>{"use strict";var n=r(5100),i=r(1208);n.Observable.prototype.race=i.race},3502:(e,t,r)=>{"use strict";var n=r(5100),i=r(7733);n.Observable.prototype.reduce=i.reduce},1483:(e,t,r)=>{"use strict";var n=r(5100),i=r(4512);n.Observable.prototype.repeat=i.repeat},3517:(e,t,r)=>{"use strict";var n=r(5100),i=r(6078);n.Observable.prototype.repeatWhen=i.repeatWhen},6093:(e,t,r)=>{"use strict";var n=r(5100),i=r(6943);n.Observable.prototype.retry=i.retry},7918:(e,t,r)=>{"use strict";var n=r(5100),i=r(5045);n.Observable.prototype.retryWhen=i.retryWhen},4536:(e,t,r)=>{"use strict";var n=r(5100),i=r(6710);n.Observable.prototype.sample=i.sample},4507:(e,t,r)=>{"use strict";var n=r(5100),i=r(151);n.Observable.prototype.sampleTime=i.sampleTime},5532:(e,t,r)=>{"use strict";var n=r(5100),i=r(8076);n.Observable.prototype.scan=i.scan},530:(e,t,r)=>{"use strict";var n=r(5100),i=r(5613);n.Observable.prototype.sequenceEqual=i.sequenceEqual},2285:(e,t,r)=>{"use strict";var n=r(5100),i=r(5192);n.Observable.prototype.share=i.share},7691:(e,t,r)=>{"use strict";var n=r(5100),i=r(4355);n.Observable.prototype.single=i.single},6095:(e,t,r)=>{"use strict";var n=r(5100),i=r(7232);n.Observable.prototype.skip=i.skip},2821:(e,t,r)=>{"use strict";var n=r(5100),i=r(8225);n.Observable.prototype.skipUntil=i.skipUntil},3187:(e,t,r)=>{"use strict";var n=r(5100),i=r(775);n.Observable.prototype.skipWhile=i.skipWhile},8316:(e,t,r)=>{"use strict";var n=r(5100),i=r(341);n.Observable.prototype.startWith=i.startWith},3125:(e,t,r)=>{"use strict";var n=r(5100),i=r(1360);n.Observable.prototype.subscribeOn=i.subscribeOn},5855:(e,t,r)=>{"use strict";var n=r(5100),i=r(6589);n.Observable.prototype.switch=i._switch,n.Observable.prototype._switch=i._switch},1544:(e,t,r)=>{"use strict";var n=r(5100),i=r(9318);n.Observable.prototype.switchMap=i.switchMap},7619:(e,t,r)=>{"use strict";var n=r(5100),i=r(9881);n.Observable.prototype.switchMapTo=i.switchMapTo},1498:(e,t,r)=>{"use strict";var n=r(5100),i=r(4545);n.Observable.prototype.take=i.take},4220:(e,t,r)=>{"use strict";var n=r(5100),i=r(4153);n.Observable.prototype.takeLast=i.takeLast},8409:(e,t,r)=>{"use strict";var n=r(5100),i=r(1305);n.Observable.prototype.takeUntil=i.takeUntil},600:(e,t,r)=>{"use strict";var n=r(5100),i=r(4686);n.Observable.prototype.takeWhile=i.takeWhile},3802:(e,t,r)=>{"use strict";var n=r(5100),i=r(2880);n.Observable.prototype.throttle=i.throttle},9739:(e,t,r)=>{"use strict";var n=r(5100),i=r(2508);n.Observable.prototype.throttleTime=i.throttleTime},42:(e,t,r)=>{"use strict";var n=r(5100),i=r(5782);n.Observable.prototype.timeInterval=i.timeInterval},7971:(e,t,r)=>{"use strict";var n=r(5100),i=r(904);n.Observable.prototype.timeout=i.timeout},3606:(e,t,r)=>{"use strict";var n=r(5100),i=r(4900);n.Observable.prototype.timeoutWith=i.timeoutWith},6658:(e,t,r)=>{"use strict";var n=r(5100),i=r(4453);n.Observable.prototype.timestamp=i.timestamp},5620:(e,t,r)=>{"use strict";var n=r(5100),i=r(7882);n.Observable.prototype.toArray=i.toArray},9337:(e,t,r)=>{"use strict";var n=r(5100),i=r(3479);n.Observable.prototype.toPromise=i.toPromise},1846:(e,t,r)=>{"use strict";var n=r(5100),i=r(5686);n.Observable.prototype.window=i.window},3588:(e,t,r)=>{"use strict";var n=r(5100),i=r(9311);n.Observable.prototype.windowCount=i.windowCount},7502:(e,t,r)=>{"use strict";var n=r(5100),i=r(4405);n.Observable.prototype.windowTime=i.windowTime},25:(e,t,r)=>{"use strict";var n=r(5100),i=r(3969);n.Observable.prototype.windowToggle=i.windowToggle},3869:(e,t,r)=>{"use strict";var n=r(5100),i=r(529);n.Observable.prototype.windowWhen=i.windowWhen},279:(e,t,r)=>{"use strict";var n=r(5100),i=r(9090);n.Observable.prototype.withLatestFrom=i.withLatestFrom},8391:(e,t,r)=>{"use strict";var n=r(5100),i=r(8655);n.Observable.prototype.zip=i.zipProto},1194:(e,t,r)=>{"use strict";var n=r(5100),i=r(8841);n.Observable.prototype.zipAll=i.zipAll},1235:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),o=r(4819),s=r(9735),a=function(e){function t(t,r){e.call(this),this.arrayLike=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return n(t,e),t.create=function(e,r){var n=e.length;return 0===n?new s.EmptyObservable:1===n?new o.ScalarObservable(e[0],r):new t(e,r)},t.dispatch=function(e){var t=e.arrayLike,r=e.index,n=e.length,i=e.subscriber;i.closed||(r>=n?i.complete():(i.next(t[r]),e.index=r+1,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.arrayLike,n=this.scheduler,i=r.length;if(n)return n.schedule(t.dispatch,0,{arrayLike:r,index:0,length:i,subscriber:e});for(var o=0;o<i&&!e.closed;o++)e.next(r[o]);e.complete()},t}(i.Observable);t.ArrayLikeObservable=a},3418:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),o=r(4819),s=r(9735),a=r(93),c=function(e){function t(t,r){e.call(this),this.array=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return n(t,e),t.create=function(e,r){return new t(e,r)},t.of=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var n=e[e.length-1];a.isScheduler(n)?e.pop():n=null;var i=e.length;return i>1?new t(e,n):1===i?new o.ScalarObservable(e[0],n):new s.EmptyObservable(n)},t.dispatch=function(e){var t=e.array,r=e.index,n=e.count,i=e.subscriber;r>=n?i.complete():(i.next(t[r]),i.closed||(e.index=r+1,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.array,n=r.length,i=this.scheduler;if(i)return i.schedule(t.dispatch,0,{array:r,index:0,count:n,subscriber:e});for(var o=0;o<n&&!e.closed;o++)e.next(r[o]);e.complete()},t}(i.Observable);t.ArrayObservable=c},6619:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),o=r(6447),s=r(4456),a=r(437),c=function(e){function t(t,r,n,i,o){e.call(this),this.callbackFunc=t,this.selector=r,this.args=n,this.context=i,this.scheduler=o}return n(t,e),t.create=function(e,r,n){return void 0===r&&(r=void 0),function(){for(var i=[],o=0;o<arguments.length;o++)i[o-0]=arguments[o];return new t(e,r,i,this,n)}},t.prototype._subscribe=function(e){var r=this.callbackFunc,n=this.args,i=this.scheduler,c=this.subject;if(i)return i.schedule(t.dispatch,0,{source:this,subscriber:e,context:this.context});if(!c){c=this.subject=new a.AsyncSubject;var u=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=e.source,i=n.selector,a=n.subject;if(i){var c=o.tryCatch(i).apply(this,t);c===s.errorObject?a.error(s.errorObject.e):(a.next(c),a.complete())}else a.next(t.length<=1?t[0]:t),a.complete()};u.source=this,o.tryCatch(r).apply(this.context,n.concat(u))===s.errorObject&&c.error(s.errorObject.e)}return c.subscribe(e)},t.dispatch=function(e){var t=this,r=e.source,n=e.subscriber,i=e.context,c=r.callbackFunc,d=r.args,h=r.scheduler,p=r.subject;if(!p){p=r.subject=new a.AsyncSubject;var f=function e(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];var i=e.source,a=i.selector,c=i.subject;if(a){var d=o.tryCatch(a).apply(this,r);d===s.errorObject?t.add(h.schedule(l,0,{err:s.errorObject.e,subject:c})):t.add(h.schedule(u,0,{value:d,subject:c}))}else{var p=r.length<=1?r[0]:r;t.add(h.schedule(u,0,{value:p,subject:c}))}};f.source=r,o.tryCatch(c).apply(i,d.concat(f))===s.errorObject&&p.error(s.errorObject.e)}t.add(p.subscribe(n))},t}(i.Observable);function u(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function l(e){var t=e.err;e.subject.error(t)}t.BoundCallbackObservable=c},4785:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),o=r(6447),s=r(4456),a=r(437),c=function(e){function t(t,r,n,i,o){e.call(this),this.callbackFunc=t,this.selector=r,this.args=n,this.context=i,this.scheduler=o}return n(t,e),t.create=function(e,r,n){return void 0===r&&(r=void 0),function(){for(var i=[],o=0;o<arguments.length;o++)i[o-0]=arguments[o];return new t(e,r,i,this,n)}},t.prototype._subscribe=function(e){var t=this.callbackFunc,r=this.args,n=this.scheduler,i=this.subject;if(n)return n.schedule(u,0,{source:this,subscriber:e,context:this.context});if(!i){i=this.subject=new a.AsyncSubject;var c=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=e.source,i=n.selector,a=n.subject,c=t.shift();if(c)a.error(c);else if(i){var u=o.tryCatch(i).apply(this,t);u===s.errorObject?a.error(s.errorObject.e):(a.next(u),a.complete())}else a.next(t.length<=1?t[0]:t),a.complete()};c.source=this,o.tryCatch(t).apply(this.context,r.concat(c))===s.errorObject&&i.error(s.errorObject.e)}return i.subscribe(e)},t}(i.Observable);function u(e){var t=this,r=e.source,n=e.subscriber,i=e.context,c=r,u=c.callbackFunc,h=c.args,p=c.scheduler,f=r.subject;if(!f){f=r.subject=new a.AsyncSubject;var m=function e(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];var i=e.source,a=i.selector,c=i.subject,u=r.shift();if(u)t.add(p.schedule(d,0,{err:u,subject:c}));else if(a){var h=o.tryCatch(a).apply(this,r);h===s.errorObject?t.add(p.schedule(d,0,{err:s.errorObject.e,subject:c})):t.add(p.schedule(l,0,{value:h,subject:c}))}else{var f=r.length<=1?r[0]:r;t.add(p.schedule(l,0,{value:f,subject:c}))}};m.source=r,o.tryCatch(u).apply(i,h.concat(m))===s.errorObject&&t.add(p.schedule(d,0,{err:s.errorObject.e,subject:f}))}t.add(f.subscribe(n))}function l(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function d(e){var t=e.err;e.subject.error(t)}t.BoundNodeCallbackObservable=c},8852:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8314),o=r(5100),s=r(5239),a=r(4859),c=function(e){function t(t,r){e.call(this),this.source=t,this.subjectFactory=r,this._refCount=0}return n(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||((e=this._connection=new a.Subscription).add(this.source.subscribe(new u(this.getSubject(),this))),e.closed?(this._connection=null,e=a.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return this.lift(new l(this))},t}(o.Observable);t.ConnectableObservable=c,t.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:c.prototype._subscribe},getSubject:{value:c.prototype.getSubject},connect:{value:c.prototype.connect},refCount:{value:c.prototype.refCount}};var u=function(e){function t(t,r){e.call(this,t),this.connectable=r}return n(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i.SubjectSubscriber),l=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new d(e,r),i=t.subscribe(n);return n.closed||(n.connection=r.connect()),i},e}(),d=function(e){function t(t,r){e.call(this,t),this.connectable=r}return n(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(s.Subscriber)},4912:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),o=r(8794),s=r(3147),a=function(e){function t(t){e.call(this),this.observableFactory=t}return n(t,e),t.create=function(e){return new t(e)},t.prototype._subscribe=function(e){return new c(e,this.observableFactory)},t}(i.Observable);t.DeferObservable=a;var c=function(e){function t(t,r){e.call(this,t),this.factory=r,this.tryDefer()}return n(t,e),t.prototype.tryDefer=function(){try{this._callFactory()}catch(e){this._error(e)}},t.prototype._callFactory=function(){var e=this.factory();e&&this.add(o.subscribeToResult(this,e))},t}(s.OuterSubscriber)},9735:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t){e.call(this),this.scheduler=t}return n(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){e.subscriber.complete()},t.prototype._subscribe=function(e){var r=this.scheduler;if(r)return r.schedule(t.dispatch,0,{subscriber:e});e.complete()},t}(r(5100).Observable);t.EmptyObservable=i},4521:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r){e.call(this),this.error=t,this.scheduler=r}return n(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.error;e.subscriber.error(t)},t.prototype._subscribe=function(e){var r=this.error,n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{error:r,subscriber:e});e.error(r)},t}(r(5100).Observable);t.ErrorObservable=i},8947:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),o=r(9735),s=r(5936),a=r(8794),c=r(3147),u=function(e){function t(t,r){e.call(this),this.sources=t,this.resultSelector=r}return n(t,e),t.create=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];if(null===e||0===arguments.length)return new o.EmptyObservable;var n=null;return"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&s.isArray(e[0])&&(e=e[0]),0===e.length?new o.EmptyObservable:new t(e,n)},t.prototype._subscribe=function(e){return new l(e,this.sources,this.resultSelector)},t}(i.Observable);t.ForkJoinObservable=u;var l=function(e){function t(t,r,n){e.call(this,t),this.sources=r,this.resultSelector=n,this.completed=0,this.haveValues=0;var i=r.length;this.total=i,this.values=new Array(i);for(var o=0;o<i;o++){var s=r[o],c=a.subscribeToResult(this,s,null,o);c&&(c.outerIndex=o,this.add(c))}}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.values[r]=t,i._hasValue||(i._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(e){var t=this.destination,r=this,n=r.haveValues,i=r.resultSelector,o=r.values,s=o.length;if(e._hasValue){if(this.completed++,this.completed===s){if(n===s){var a=i?i.apply(this,o):o;t.next(a)}t.complete()}}else t.complete()},t}(c.OuterSubscriber)},9483:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),o=r(6447),s=r(1404),a=r(4456),c=r(4859),u=Object.prototype.toString;var l=function(e){function t(t,r,n,i){e.call(this),this.sourceObj=t,this.eventName=r,this.selector=n,this.options=i}return n(t,e),t.create=function(e,r,n,i){return s.isFunction(n)&&(i=n,n=void 0),new t(e,r,i,n)},t.setupSubscription=function(e,r,n,i,o){var s;if(function(e){return!!e&&"[object NodeList]"===u.call(e)}(e)||function(e){return!!e&&"[object HTMLCollection]"===u.call(e)}(e))for(var a=0,l=e.length;a<l;a++)t.setupSubscription(e[a],r,n,i,o);else if(function(e){return!!e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var d=e;e.addEventListener(r,n,o),s=function(){return d.removeEventListener(r,n)}}else if(function(e){return!!e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var h=e;e.on(r,n),s=function(){return h.off(r,n)}}else{if(!function(e){return!!e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e))throw new TypeError("Invalid event target");var p=e;e.addListener(r,n),s=function(){return p.removeListener(r,n)}}i.add(new c.Subscription(s))},t.prototype._subscribe=function(e){var r=this.sourceObj,n=this.eventName,i=this.options,s=this.selector,c=s?function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=o.tryCatch(s).apply(void 0,t);n===a.errorObject?e.error(a.errorObject.e):e.next(n)}:function(t){return e.next(t)};t.setupSubscription(r,n,c,e,i)},t}(i.Observable);t.FromEventObservable=l},3083:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(1404),o=r(5100),s=r(4859),a=function(e){function t(t,r,n){e.call(this),this.addHandler=t,this.removeHandler=r,this.selector=n}return n(t,e),t.create=function(e,r,n){return new t(e,r,n)},t.prototype._subscribe=function(e){var t=this,r=this.removeHandler,n=this.selector?function(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];t._callSelector(e,r)}:function(t){e.next(t)},o=this._callAddHandler(n,e);i.isFunction(r)&&e.add(new s.Subscription((function(){r(n,o)})))},t.prototype._callSelector=function(e,t){try{var r=this.selector.apply(this,t);e.next(r)}catch(t){e.error(t)}},t.prototype._callAddHandler=function(e,t){try{return this.addHandler(e)||null}catch(e){t.error(e)}},t}(o.Observable);t.FromEventPatternObservable=a},7305:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5936),o=r(2900),s=r(338),a=r(6694),c=r(8770),u=r(3418),l=r(1235),d=r(5810),h=r(5100),p=r(1073),f=r(683),m=function(e){function t(t,r){e.call(this,null),this.ish=t,this.scheduler=r}return n(t,e),t.create=function(e,r){if(null!=e){if("function"==typeof e[f.observable])return e instanceof h.Observable&&!r?e:new t(e,r);if(i.isArray(e))return new u.ArrayObservable(e,r);if(s.isPromise(e))return new a.PromiseObservable(e,r);if("function"==typeof e[d.iterator]||"string"==typeof e)return new c.IteratorObservable(e,r);if(o.isArrayLike(e))return new l.ArrayLikeObservable(e,r)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")},t.prototype._subscribe=function(e){var t=this.ish,r=this.scheduler;return null==r?t[f.observable]().subscribe(e):t[f.observable]().subscribe(new p.ObserveOnSubscriber(e,r,0))},t}(h.Observable);t.FromObservable=m},1898:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),o=r(93),s=function(e){return e},a=function(e){function t(t,r,n,i,o){e.call(this),this.initialState=t,this.condition=r,this.iterate=n,this.resultSelector=i,this.scheduler=o}return n(t,e),t.create=function(e,r,n,i,a){return 1==arguments.length?new t(e.initialState,e.condition,e.iterate,e.resultSelector||s,e.scheduler):void 0===i||o.isScheduler(i)?new t(e,r,n,s,i):new t(e,r,n,i,a)},t.prototype._subscribe=function(e){var r=this.initialState;if(this.scheduler)return this.scheduler.schedule(t.dispatch,0,{subscriber:e,iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:r});for(var n=this,i=n.condition,o=n.resultSelector,s=n.iterate;;){if(i){var a=void 0;try{a=i(r)}catch(t){return void e.error(t)}if(!a){e.complete();break}}var c=void 0;try{c=o(r)}catch(t){return void e.error(t)}if(e.next(c),e.closed)break;try{r=s(r)}catch(t){return void e.error(t)}}},t.dispatch=function(e){var t=e.subscriber,r=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(r){var n=void 0;try{n=r(e.state)}catch(e){return void t.error(e)}if(!n)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}},t}(i.Observable);t.GenerateObservable=a},7547:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),o=r(8794),s=r(3147),a=function(e){function t(t,r,n){e.call(this),this.condition=t,this.thenSource=r,this.elseSource=n}return n(t,e),t.create=function(e,r,n){return new t(e,r,n)},t.prototype._subscribe=function(e){var t=this,r=t.condition,n=t.thenSource,i=t.elseSource;return new c(e,r,n,i)},t}(i.Observable);t.IfObservable=a;var c=function(e){function t(t,r,n,i){e.call(this,t),this.condition=r,this.thenSource=n,this.elseSource=i,this.tryIf()}return n(t,e),t.prototype.tryIf=function(){var e=this,t=e.condition,r=e.thenSource,n=e.elseSource;try{var i=t()?r:n;i?this.add(o.subscribeToResult(this,i)):this._complete()}catch(e){this._error(e)}},t}(s.OuterSubscriber)},1763:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3523),o=r(5100),s=r(8404),a=function(e){function t(t,r){void 0===t&&(t=0),void 0===r&&(r=s.async),e.call(this),this.period=t,this.scheduler=r,(!i.isNumeric(t)||t<0)&&(this.period=0),r&&"function"==typeof r.schedule||(this.scheduler=s.async)}return n(t,e),t.create=function(e,r){return void 0===e&&(e=0),void 0===r&&(r=s.async),new t(e,r)},t.dispatch=function(e){var t=e.index,r=e.subscriber,n=e.period;r.next(t),r.closed||(e.index+=1,this.schedule(e,n))},t.prototype._subscribe=function(e){var r=this.period,n=this.scheduler;e.add(n.schedule(t.dispatch,r,{index:0,subscriber:e,period:r}))},t}(o.Observable);t.IntervalObservable=a},8770:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(7919),o=r(5100),s=r(5810),a=function(e){function t(t,r){if(e.call(this),this.scheduler=r,null==t)throw new Error("iterator cannot be null.");this.iterator=function(e){var t=e[s.iterator];if(!t&&"string"==typeof e)return new c(e);if(!t&&void 0!==e.length)return new u(e);if(!t)throw new TypeError("object is not iterable");return e[s.iterator]()}(t)}return n(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.index,r=e.hasError,n=e.iterator,i=e.subscriber;if(r)i.error(e.error);else{var o=n.next();o.done?i.complete():(i.next(o.value),e.index=t+1,i.closed?"function"==typeof n.return&&n.return():this.schedule(e))}},t.prototype._subscribe=function(e){var r=this.iterator,n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{index:0,iterator:r,subscriber:e});for(;;){var i=r.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed){"function"==typeof r.return&&r.return();break}}},t}(o.Observable);t.IteratorObservable=a;var c=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length),this.str=e,this.idx=t,this.len=r}return e.prototype[s.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},e}(),u=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=function(e){var t=+e.length;if(isNaN(t))return 0;if(0===t||(r=t,"number"!=typeof r||!i.root.isFinite(r)))return t;var r;if((t=function(e){var t=+e;if(0===t)return t;if(isNaN(t))return t;return t<0?-1:1}(t)*Math.floor(Math.abs(t)))<=0)return 0;if(t>l)return l;return t}(e)),this.arr=e,this.idx=t,this.len=r}return e.prototype[s.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},e}();var l=Math.pow(2,53)-1},5659:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),o=r(4985),s=function(e){function t(){e.call(this)}return n(t,e),t.create=function(){return new t},t.prototype._subscribe=function(e){o.noop()},t}(i.Observable);t.NeverObservable=s},6544:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};function i(e){var t=e.obj,r=e.keys,n=e.length,i=e.index,o=e.subscriber;if(i!==n){var s=r[i];o.next([s,t[s]]),e.index=i+1,this.schedule(e)}else o.complete()}var o=function(e){function t(t,r){e.call(this),this.obj=t,this.scheduler=r,this.keys=Object.keys(t)}return n(t,e),t.create=function(e,r){return new t(e,r)},t.prototype._subscribe=function(e){var t=this.keys,r=this.scheduler,n=t.length;if(r)return r.schedule(i,0,{obj:this.obj,keys:t,length:n,index:0,subscriber:e});for(var o=0;o<n;o++){var s=t[o];e.next([s,this.obj[s]])}e.complete()},t}(r(5100).Observable);t.PairsObservable=o},6694:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(7919),o=function(e){function t(t,r){e.call(this),this.promise=t,this.scheduler=r}return n(t,e),t.create=function(e,r){return new t(e,r)},t.prototype._subscribe=function(e){var t=this,r=this.promise,n=this.scheduler;if(null==n)this._isScalar?e.closed||(e.next(this.value),e.complete()):r.then((function(r){t.value=r,t._isScalar=!0,e.closed||(e.next(r),e.complete())}),(function(t){e.closed||e.error(t)})).then(null,(function(e){i.root.setTimeout((function(){throw e}))}));else if(this._isScalar){if(!e.closed)return n.schedule(s,0,{value:this.value,subscriber:e})}else r.then((function(r){t.value=r,t._isScalar=!0,e.closed||e.add(n.schedule(s,0,{value:r,subscriber:e}))}),(function(t){e.closed||e.add(n.schedule(a,0,{err:t,subscriber:e}))})).then(null,(function(e){i.root.setTimeout((function(){throw e}))}))},t}(r(5100).Observable);function s(e){var t=e.value,r=e.subscriber;r.closed||(r.next(t),r.complete())}function a(e){var t=e.err,r=e.subscriber;r.closed||r.error(t)}t.PromiseObservable=o},3349:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r,n){e.call(this),this.start=t,this._count=r,this.scheduler=n}return n(t,e),t.create=function(e,r,n){return void 0===e&&(e=0),void 0===r&&(r=0),new t(e,r,n)},t.dispatch=function(e){var t=e.start,r=e.index,n=e.count,i=e.subscriber;r>=n?i.complete():(i.next(t),i.closed||(e.index=r+1,e.start=t+1,this.schedule(e)))},t.prototype._subscribe=function(e){var r=0,n=this.start,i=this._count,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{index:r,count:i,start:n,subscriber:e});for(;;){if(r++>=i){e.complete();break}if(e.next(n++),e.closed)break}},t}(r(5100).Observable);t.RangeObservable=i},4819:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r){e.call(this),this.value=t,this.scheduler=r,this._isScalar=!0,r&&(this._isScalar=!1)}return n(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.done,r=e.value,n=e.subscriber;t?n.complete():(n.next(r),n.closed||(e.done=!0,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.value,n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{done:!1,value:r,subscriber:e});e.next(r),e.closed||e.complete()},t}(r(5100).Observable);t.ScalarObservable=i},9034:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),o=r(2664),s=r(3523),a=function(e){function t(t,r,n){void 0===r&&(r=0),void 0===n&&(n=o.asap),e.call(this),this.source=t,this.delayTime=r,this.scheduler=n,(!s.isNumeric(r)||r<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=o.asap)}return n(t,e),t.create=function(e,r,n){return void 0===r&&(r=0),void 0===n&&(n=o.asap),new t(e,r,n)},t.dispatch=function(e){var t=e.source,r=e.subscriber;return this.add(t.subscribe(r))},t.prototype._subscribe=function(e){var r=this.delayTime,n=this.source;return this.scheduler.schedule(t.dispatch,r,{source:n,subscriber:e})},t}(i.Observable);t.SubscribeOnObservable=a},2453:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3523),o=r(5100),s=r(8404),a=r(93),c=r(1589),u=function(e){function t(t,r,n){void 0===t&&(t=0),e.call(this),this.period=-1,this.dueTime=0,i.isNumeric(r)?this.period=Number(r)<1?1:Number(r):a.isScheduler(r)&&(n=r),a.isScheduler(n)||(n=s.async),this.scheduler=n,this.dueTime=c.isDate(t)?+t-this.scheduler.now():t}return n(t,e),t.create=function(e,r,n){return void 0===e&&(e=0),new t(e,r,n)},t.dispatch=function(e){var t=e.index,r=e.period,n=e.subscriber;if(n.next(t),!n.closed){if(-1===r)return n.complete();e.index=t+1,this.schedule(e,r)}},t.prototype._subscribe=function(e){var r=this,n=r.period,i=r.dueTime;return r.scheduler.schedule(t.dispatch,i,{index:0,period:n,subscriber:e})},t}(o.Observable);t.TimerObservable=u},9688:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),o=r(8794),s=r(3147),a=function(e){function t(t,r){e.call(this),this.resourceFactory=t,this.observableFactory=r}return n(t,e),t.create=function(e,r){return new t(e,r)},t.prototype._subscribe=function(e){var t,r=this.resourceFactory,n=this.observableFactory;try{return t=r(),new c(e,t,n)}catch(t){e.error(t)}},t}(i.Observable);t.UsingObservable=a;var c=function(e){function t(t,r,n){e.call(this,t),this.resource=r,this.observableFactory=n,t.add(r),this.tryUse()}return n(t,e),t.prototype.tryUse=function(){try{var e=this.observableFactory.call(this,this.resource);e&&this.add(o.subscribeToResult(this,e))}catch(e){this._error(e)}},t}(s.OuterSubscriber)},7935:(e,t,r)=>{"use strict";var n=r(6619);t.bindCallback=n.BoundCallbackObservable.create},1157:(e,t,r)=>{"use strict";var n=r(4785);t.bindNodeCallback=n.BoundNodeCallbackObservable.create},1071:(e,t,r)=>{"use strict";var n=r(93),i=r(5936),o=r(3418),s=r(3339);t.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null,a=null;return n.isScheduler(e[e.length-1])&&(a=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&i.isArray(e[0])&&(e=e[0]),new o.ArrayObservable(e,a).lift(new s.CombineLatestOperator(r))}},5167:(e,t,r)=>{"use strict";var n=r(8311);t.concat=n.concatStatic},3975:(e,t,r)=>{"use strict";var n=r(4912);t.defer=n.DeferObservable.create},1691:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(7919),o=r(6447),s=r(4456),a=r(5100),c=r(5239),u=r(9987);function l(){if(i.root.XMLHttpRequest)return new i.root.XMLHttpRequest;if(i.root.XDomainRequest)return new i.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}function d(e,t){return void 0===t&&(t=null),new g({method:"GET",url:e,headers:t})}function h(e,t,r){return new g({method:"POST",url:e,body:t,headers:r})}function p(e,t){return new g({method:"DELETE",url:e,headers:t})}function f(e,t,r){return new g({method:"PUT",url:e,body:t,headers:r})}function m(e,t,r){return new g({method:"PATCH",url:e,body:t,headers:r})}function v(e,t){return new g({method:"GET",url:e,responseType:"json",headers:t}).lift(new u.MapOperator((function(e,t){return e.response}),null))}t.ajaxGet=d,t.ajaxPost=h,t.ajaxDelete=p,t.ajaxPut=f,t.ajaxPatch=m,t.ajaxGetJSON=v;var g=function(e){function t(t){e.call(this);var r={async:!0,createXHR:function(){return this.crossDomain?l.call(this):function(){if(i.root.XMLHttpRequest)return new i.root.XMLHttpRequest;var e=void 0;try{for(var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=0;r<3;r++)try{if(e=t[r],new i.root.ActiveXObject(e))break}catch(e){}return new i.root.ActiveXObject(e)}catch(e){throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)r.url=t;else for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);this.request=r}var r;return n(t,e),t.prototype._subscribe=function(e){return new y(e,this.request)},t.create=((r=function(e){return new t(e)}).get=d,r.post=h,r.delete=p,r.put=f,r.patch=m,r.getJSON=v,r),t}(a.Observable);t.AjaxObservable=g;var y=function(e){function t(t,r){e.call(this,t),this.request=r,this.done=!1;var n=r.headers=r.headers||{};r.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in n||i.root.FormData&&r.body instanceof i.root.FormData||void 0===r.body||(n["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),r.body=this.serializeBody(r.body,r.headers["Content-Type"]),this.send()}return n(t,e),t.prototype.next=function(e){this.done=!0;var t=this,r=t.xhr,n=t.request,i=t.destination,o=new b(e,r,n);i.next(o)},t.prototype.send=function(){var e=this.request,t=this.request,r=t.user,n=t.method,i=t.url,a=t.async,c=t.password,u=t.headers,l=t.body,d=e.createXHR,h=o.tryCatch(d).call(e);if(h===s.errorObject)this.error(s.errorObject.e);else{this.xhr=h,this.setupEvents(h,e);if((r?o.tryCatch(h.open).call(h,n,i,a,r,c):o.tryCatch(h.open).call(h,n,i,a))===s.errorObject)return this.error(s.errorObject.e),null;if(h.timeout=e.timeout,h.responseType=e.responseType,"withCredentials"in h&&(h.withCredentials=!!e.withCredentials),this.setHeaders(h,u),(l?o.tryCatch(h.send).call(h,l):o.tryCatch(h.send).call(h))===s.errorObject)return this.error(s.errorObject.e),null}return h},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(i.root.FormData&&e instanceof i.root.FormData)return e;if(t){var r=t.indexOf(";");-1!==r&&(t=t.substring(0,r))}switch(t){case"application/x-www-form-urlencoded":return Object.keys(e).map((function(t){return encodeURI(t)+"="+encodeURI(e[t])})).join("&");case"application/json":return JSON.stringify(e);default:return e}},t.prototype.setHeaders=function(e,t){for(var r in t)t.hasOwnProperty(r)&&e.setRequestHeader(r,t[r])},t.prototype.setupEvents=function(e,t){var r=t.progressSubscriber;function n(e){var t=n,r=t.subscriber,i=t.progressSubscriber,o=t.request;i&&i.error(e),r.error(new T(this,o))}if(e.ontimeout=n,n.request=t,n.subscriber=this,n.progressSubscriber=r,e.upload&&"withCredentials"in e){var o,s;if(r)o=function(e){o.progressSubscriber.next(e)},i.root.XDomainRequest?e.onprogress=o:e.upload.onprogress=o,o.progressSubscriber=r;s=function(e){var t=s,r=t.progressSubscriber,n=t.subscriber,i=t.request;r&&r.error(e),n.error(new _("ajax error",this,i))},e.onerror=s,s.request=t,s.subscriber=this,s.progressSubscriber=r}function a(e){var t=a,r=t.subscriber,n=t.progressSubscriber,i=t.request;if(4===this.readyState){var o=1223===this.status?204:this.status,s="text"===this.responseType?this.response||this.responseText:this.response;0===o&&(o=s?200:0),200<=o&&o<300?(n&&n.complete(),r.next(e),r.complete()):(n&&n.error(e),r.error(new _("ajax error "+o,this,i)))}}e.onreadystatechange=a,a.subscriber=this,a.progressSubscriber=r,a.request=t},t.prototype.unsubscribe=function(){var t=this.done,r=this.xhr;!t&&r&&4!==r.readyState&&"function"==typeof r.abort&&r.abort(),e.prototype.unsubscribe.call(this)},t}(c.Subscriber);t.AjaxSubscriber=y;var b=function(e,t,r){switch(this.originalEvent=e,this.xhr=t,this.request=r,this.status=t.status,this.responseType=t.responseType||r.responseType,this.responseType){case"json":this.response="response"in t?t.responseType?t.response:JSON.parse(t.response||t.responseText||"null"):JSON.parse(t.responseText||"null");break;case"xml":this.response=t.responseXML;break;default:this.response="response"in t?t.response:t.responseText}};t.AjaxResponse=b;var _=function(e){function t(t,r,n){e.call(this,t),this.message=t,this.xhr=r,this.request=n,this.status=r.status}return n(t,e),t}(Error);t.AjaxError=_;var T=function(e){function t(t,r){e.call(this,"ajax timeout",t,r)}return n(t,e),t}(_);t.AjaxTimeoutError=T},3209:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8314),o=r(5239),s=r(5100),a=r(4859),c=r(7919),u=r(7875),l=r(6447),d=r(4456),h=r(2682),p=function(e){function t(t,r){if(t instanceof s.Observable)e.call(this,r,t);else{if(e.call(this),this.WebSocketCtor=c.root.WebSocket,this._output=new i.Subject,"string"==typeof t?this.url=t:h.assign(this,t),!this.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new u.ReplaySubject}}return n(t,e),t.prototype.resultSelector=function(e){return JSON.parse(e.data)},t.create=function(e){return new t(e)},t.prototype.lift=function(e){var r=new t(this,this.destination);return r.operator=e,r},t.prototype._resetState=function(){this.socket=null,this.source||(this.destination=new u.ReplaySubject),this._output=new i.Subject},t.prototype.multiplex=function(e,t,r){var n=this;return new s.Observable((function(i){var o=l.tryCatch(e)();o===d.errorObject?i.error(d.errorObject.e):n.next(o);var s=n.subscribe((function(e){var t=l.tryCatch(r)(e);t===d.errorObject?i.error(d.errorObject.e):t&&i.next(e)}),(function(e){return i.error(e)}),(function(){return i.complete()}));return function(){var e=l.tryCatch(t)();e===d.errorObject?i.error(d.errorObject.e):n.next(e),s.unsubscribe()}}))},t.prototype._connectSocket=function(){var e=this,t=this.WebSocketCtor,r=this._output,n=null;try{n=this.protocol?new t(this.url,this.protocol):new t(this.url),this.socket=n,this.binaryType&&(this.socket.binaryType=this.binaryType)}catch(e){return void r.error(e)}var i=new a.Subscription((function(){e.socket=null,n&&1===n.readyState&&n.close()}));n.onopen=function(t){var s=e.openObserver;s&&s.next(t);var a=e.destination;e.destination=o.Subscriber.create((function(e){return 1===n.readyState&&n.send(e)}),(function(t){var i=e.closingObserver;i&&i.next(void 0),t&&t.code?n.close(t.code,t.reason):r.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),e._resetState()}),(function(){var t=e.closingObserver;t&&t.next(void 0),n.close(),e._resetState()})),a&&a instanceof u.ReplaySubject&&i.add(a.subscribe(e.destination))},n.onerror=function(t){e._resetState(),r.error(t)},n.onclose=function(t){e._resetState();var n=e.closeObserver;n&&n.next(t),t.wasClean?r.complete():r.error(t)},n.onmessage=function(t){var n=l.tryCatch(e.resultSelector)(t);n===d.errorObject?r.error(d.errorObject.e):r.next(n)}},t.prototype._subscribe=function(e){var t=this,r=this.source;if(r)return r.subscribe(e);this.socket||this._connectSocket();var n=new a.Subscription;return n.add(this._output.subscribe(e)),n.add((function(){var e=t.socket;0===t._output.observers.length&&(e&&1===e.readyState&&e.close(),t._resetState())})),n},t.prototype.unsubscribe=function(){var t=this.source,r=this.socket;r&&1===r.readyState&&(r.close(),this._resetState()),e.prototype.unsubscribe.call(this),t||(this.destination=new u.ReplaySubject)},t}(i.AnonymousSubject);t.WebSocketSubject=p},8460:(e,t,r)=>{"use strict";var n=r(1691);t.ajax=n.AjaxObservable.create},998:(e,t,r)=>{"use strict";var n=r(3209);t.webSocket=n.WebSocketSubject.create},6256:(e,t,r)=>{"use strict";var n=r(9735);t.empty=n.EmptyObservable.create},8320:(e,t,r)=>{"use strict";var n=r(8947);t.forkJoin=n.ForkJoinObservable.create},7038:(e,t,r)=>{"use strict";var n=r(7305);t.from=n.FromObservable.create},9126:(e,t,r)=>{"use strict";var n=r(9483);t.fromEvent=n.FromEventObservable.create},9535:(e,t,r)=>{"use strict";var n=r(3083);t.fromEventPattern=n.FromEventPatternObservable.create},8808:(e,t,r)=>{"use strict";var n=r(6694);t.fromPromise=n.PromiseObservable.create},5324:(e,t,r)=>{"use strict";var n=r(7547);t._if=n.IfObservable.create},1775:(e,t,r)=>{"use strict";var n=r(1763);t.interval=n.IntervalObservable.create},3943:(e,t,r)=>{"use strict";var n=r(4039);t.merge=n.mergeStatic},4403:(e,t,r)=>{"use strict";var n=r(5659);t.never=n.NeverObservable.create},9325:(e,t,r)=>{"use strict";var n=r(3418);t.of=n.ArrayObservable.of},5954:(e,t,r)=>{"use strict";var n=r(6544);t.pairs=n.PairsObservable.create},1093:(e,t,r)=>{"use strict";var n=r(3349);t.range=n.RangeObservable.create},1344:(e,t,r)=>{"use strict";var n=r(4521);t._throw=n.ErrorObservable.create},4903:(e,t,r)=>{"use strict";var n=r(2453);t.timer=n.TimerObservable.create},4813:(e,t,r)=>{"use strict";var n=r(9688);t.using=n.UsingObservable.create},5545:(e,t,r)=>{"use strict";var n=r(8655);t.zip=n.zipStatic},6224:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(6447),o=r(4456),s=r(3147),a=r(8794);t.audit=function(e){return this.lift(new c(e))};var c=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.durationSelector))},e}(),u=function(e){function t(t,r){e.call(this,t),this.durationSelector=r,this.hasValue=!1}return n(t,e),t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t=i.tryCatch(this.durationSelector)(e);t===o.errorObject?this.destination.error(o.errorObject.e):this.add(this.throttled=a.subscribeToResult(this,t))}},t.prototype.clearThrottle=function(){var e=this,t=e.value,r=e.hasValue,n=e.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),r&&(this.value=null,this.hasValue=!1,this.destination.next(t))},t.prototype.notifyNext=function(e,t,r,n){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(s.OuterSubscriber)},7788:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8404),o=r(5239);t.auditTime=function(e,t){return void 0===t&&(t=i.async),this.lift(new s(e,t))};var s=function(){function e(e,t){this.duration=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.duration,this.scheduler))},e}(),a=function(e){function t(t,r,n){e.call(this,t),this.duration=r,this.scheduler=n,this.hasValue=!1}return n(t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0,this.throttled||this.add(this.throttled=this.scheduler.schedule(c,this.duration,this))},t.prototype.clearThrottle=function(){var e=this,t=e.value,r=e.hasValue,n=e.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),r&&(this.value=null,this.hasValue=!1,this.destination.next(t))},t}(o.Subscriber);function c(e){e.clearThrottle()}},4402:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),o=r(8794);t.buffer=function(e){return this.lift(new s(e))};var s=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.closingNotifier))},e}(),a=function(e){function t(t,r){e.call(this,t),this.buffer=[],this.add(o.subscribeToResult(this,r))}return n(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(e,t,r,n,i){var o=this.buffer;this.buffer=[],this.destination.next(o)},t}(i.OuterSubscriber)},2224:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.bufferCount=function(e,t){return void 0===t&&(t=null),this.lift(new o(e,t))};var o=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?a:s}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),s=function(e){function t(t,r){e.call(this,t),this.bufferSize=r,this.buffer=[]}return n(t,e),t.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),e.prototype._complete.call(this)},t}(i.Subscriber),a=function(e){function t(t,r,n){e.call(this,t),this.bufferSize=r,this.startBufferEvery=n,this.buffers=[],this.count=0}return n(t,e),t.prototype._next=function(e){var t=this,r=t.bufferSize,n=t.startBufferEvery,i=t.buffers,o=t.count;this.count++,o%n==0&&i.push([]);for(var s=i.length;s--;){var a=i[s];a.push(e),a.length===r&&(i.splice(s,1),this.destination.next(a))}},t.prototype._complete=function(){for(var t=this.buffers,r=this.destination;t.length>0;){var n=t.shift();n.length>0&&r.next(n)}e.prototype._complete.call(this)},t}(i.Subscriber)},3667:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8404),o=r(5239),s=r(93);t.bufferTime=function(e){var t=arguments.length,r=i.async;s.isScheduler(arguments[arguments.length-1])&&(r=arguments[arguments.length-1],t--);var n=null;t>=2&&(n=arguments[1]);var o=Number.POSITIVE_INFINITY;return t>=3&&(o=arguments[2]),this.lift(new a(e,n,o,r))};var a=function(){function e(e,t,r,n){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},e}(),c=function(){this.buffer=[]},u=function(e){function t(t,r,n,i,o){e.call(this,t),this.bufferTimeSpan=r,this.bufferCreationInterval=n,this.maxBufferSize=i,this.scheduler=o,this.contexts=[];var s=this.openContext();if(this.timespanOnly=null==n||n<0,this.timespanOnly){var a={subscriber:this,context:s,bufferTimeSpan:r};this.add(s.closeAction=o.schedule(l,r,a))}else{var c={subscriber:this,context:s},u={bufferTimeSpan:r,bufferCreationInterval:n,subscriber:this,scheduler:o};this.add(s.closeAction=o.schedule(h,r,c)),this.add(o.schedule(d,n,u))}}return n(t,e),t.prototype._next=function(e){for(var t,r=this.contexts,n=r.length,i=0;i<n;i++){var o=r[i],s=o.buffer;s.push(e),s.length==this.maxBufferSize&&(t=o)}t&&this.onBufferFull(t)},t.prototype._error=function(t){this.contexts.length=0,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts,r=this.destination;t.length>0;){var n=t.shift();r.next(n.buffer)}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var r=this.bufferTimeSpan,n={subscriber:this,context:e,bufferTimeSpan:r};this.add(e.closeAction=this.scheduler.schedule(l,r,n))}},t.prototype.openContext=function(){var e=new c;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts;(t?t.indexOf(e):-1)>=0&&t.splice(t.indexOf(e),1)},t}(o.Subscriber);function l(e){var t=e.subscriber,r=e.context;r&&t.closeContext(r),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function d(e){var t=e.bufferCreationInterval,r=e.bufferTimeSpan,n=e.subscriber,i=e.scheduler,o=n.openContext();n.closed||(n.add(o.closeAction=i.schedule(h,r,{subscriber:n,context:o})),this.schedule(e,t))}function h(e){var t=e.subscriber,r=e.context;t.closeContext(r)}},4457:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(4859),o=r(8794),s=r(3147);t.bufferToggle=function(e,t){return this.lift(new a(e,t))};var a=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.openings,this.closingSelector))},e}(),c=function(e){function t(t,r,n){e.call(this,t),this.openings=r,this.closingSelector=n,this.contexts=[],this.add(o.subscribeToResult(this,r))}return n(t,e),t.prototype._next=function(e){for(var t=this.contexts,r=t.length,n=0;n<r;n++)t[n].buffer.push(e)},t.prototype._error=function(t){for(var r=this.contexts;r.length>0;){var n=r.shift();n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts;t.length>0;){var r=t.shift();this.destination.next(r.buffer),r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,r,n,i){e?this.closeBuffer(e):this.openBuffer(t)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var t=this.closingSelector.call(this,e);t&&this.trySubscribe(t)}catch(e){this._error(e)}},t.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var r=e.buffer,n=e.subscription;this.destination.next(r),t.splice(t.indexOf(e),1),this.remove(n),n.unsubscribe()}},t.prototype.trySubscribe=function(e){var t=this.contexts,r=new i.Subscription,n={buffer:[],subscription:r};t.push(n);var s=o.subscribeToResult(this,e,n);!s||s.closed?this.closeBuffer(n):(s.context=n,this.add(s),r.add(s))},t}(s.OuterSubscriber)},4945:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(4859),o=r(6447),s=r(4456),a=r(3147),c=r(8794);t.bufferWhen=function(e){return this.lift(new u(e))};var u=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.closingSelector))},e}(),l=function(e){function t(t,r){e.call(this,t),this.closingSelector=r,this.subscribing=!1,this.openBuffer()}return n(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},t.prototype.notifyNext=function(e,t,r,n,i){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t=this.buffer;this.buffer&&this.destination.next(t),this.buffer=[];var r=o.tryCatch(this.closingSelector)();r===s.errorObject?this.error(s.errorObject.e):(e=new i.Subscription,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(c.subscribeToResult(this,r)),this.subscribing=!1)},t}(a.OuterSubscriber)},4824:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),o=r(8794);t._catch=function(e){var t=new s(e),r=this.lift(t);return t.caught=r};var s=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.selector,this.caught))},e}(),a=function(e){function t(t,r,n){e.call(this,t),this.selector=r,this.caught=n}return n(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=void 0;try{r=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),this.add(o.subscribeToResult(this,r))}},t}(i.OuterSubscriber)},9817:(e,t,r)=>{"use strict";var n=r(3339);t.combineAll=function(e){return this.lift(new n.CombineLatestOperator(e))}},3339:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3418),o=r(5936),s=r(3147),a=r(8794),c={};t.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null;return"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&o.isArray(e[0])&&(e=e[0].slice()),e.unshift(this),this.lift.call(new i.ArrayObservable(e),new u(r))};var u=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.project))},e}();t.CombineLatestOperator=u;var l=function(e){function t(t,r){e.call(this,t),this.project=r,this.active=0,this.values=[],this.observables=[]}return n(t,e),t.prototype._next=function(e){this.values.push(c),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var r=0;r<t;r++){var n=e[r];this.add(a.subscribeToResult(this,n,n,r))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){var o=this.values,s=o[r],a=this.toRespond?s===c?--this.toRespond:this.toRespond:0;o[r]=t,0===a&&(this.project?this._tryProject(o):this.destination.next(o.slice()))},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(s.OuterSubscriber);t.CombineLatestSubscriber=l},8311:(e,t,r)=>{"use strict";var n=r(5100),i=r(93),o=r(3418),s=r(895);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null,a=e;return i.isScheduler(a[e.length-1])&&(r=a.pop()),null===r&&1===e.length&&e[0]instanceof n.Observable?e[0]:new o.ArrayObservable(e,r).lift(new s.MergeAllOperator(1))}t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(a.apply(void 0,[this].concat(e)))},t.concatStatic=a},2525:(e,t,r)=>{"use strict";var n=r(895);t.concatAll=function(){return this.lift(new n.MergeAllOperator(1))}},5246:(e,t,r)=>{"use strict";var n=r(493);t.concatMap=function(e,t){return this.lift(new n.MergeMapOperator(e,t,1))}},1411:(e,t,r)=>{"use strict";var n=r(5760);t.concatMapTo=function(e,t){return this.lift(new n.MergeMapToOperator(e,t,1))}},4840:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.count=function(e){return this.lift(new o(e,this))};var o=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.source))},e}(),s=function(e){function t(t,r,n){e.call(this,t),this.predicate=r,this.source=n,this.count=0,this.index=0}return n(t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(i.Subscriber)},285:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),o=r(8794);t.debounce=function(e){return this.lift(new s(e))};var s=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.durationSelector))},e}(),a=function(e){function t(t,r){e.call(this,t),this.durationSelector=r,this.hasValue=!1,this.durationSubscription=null}return n(t,e),t.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(e,t){var r=this.durationSubscription;this.value=e,this.hasValue=!0,r&&(r.unsubscribe(),this.remove(r)),(r=o.subscribeToResult(this,t)).closed||this.add(this.durationSubscription=r)},t.prototype.notifyNext=function(e,t,r,n,i){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var t=this.value,r=this.durationSubscription;r&&(this.durationSubscription=null,r.unsubscribe(),this.remove(r)),this.value=null,this.hasValue=!1,e.prototype._next.call(this,t)}},t}(i.OuterSubscriber)},9997:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(8404);t.debounceTime=function(e,t){return void 0===t&&(t=o.async),this.lift(new s(e,t))};var s=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.dueTime,this.scheduler))},e}(),a=function(e){function t(t,r,n){e.call(this,t),this.dueTime=r,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return n(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(c,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(i.Subscriber);function c(e){e.debouncedNext()}},8069:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.defaultIfEmpty=function(e){return void 0===e&&(e=null),this.lift(new o(e))};var o=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.defaultValue))},e}(),s=function(e){function t(t,r){e.call(this,t),this.defaultValue=r,this.isEmpty=!0}return n(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(i.Subscriber)},6358:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8404),o=r(1589),s=r(5239),a=r(8270);t.delay=function(e,t){void 0===t&&(t=i.async);var r=o.isDate(e)?+e-t.now():Math.abs(e);return this.lift(new c(r,t))};var c=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.delay,this.scheduler))},e}(),u=function(e){function t(t,r,n){e.call(this,t),this.delay=r,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}return n(t,e),t.dispatch=function(e){for(var t=e.source,r=t.queue,n=e.scheduler,i=e.destination;r.length>0&&r[0].time-n.now()<=0;)r.shift().notification.observe(i);if(r.length>0){var o=Math.max(0,r[0].time-n.now());this.schedule(e,o)}else t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,r=new l(t.now()+this.delay,e);this.queue.push(r),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(a.Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e)},t.prototype._complete=function(){this.scheduleNotification(a.Notification.createComplete())},t}(s.Subscriber),l=function(e,t){this.time=e,this.notification=t}},487:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(5100),s=r(3147),a=r(8794);t.delayWhen=function(e,t){return t?new l(this,t).lift(new c(e)):this.lift(new c(e))};var c=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.delayDurationSelector))},e}(),u=function(e){function t(t,r){e.call(this,t),this.delayDurationSelector=r,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(e),this.removeSubscription(i),this.tryComplete()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},t.prototype._next=function(e){try{var t=this.delayDurationSelector(e);t&&this.tryDelay(t,e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete()},t.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e),r=null;return-1!==t&&(r=this.values[t],this.delayNotifierSubscriptions.splice(t,1),this.values.splice(t,1)),r},t.prototype.tryDelay=function(e,t){var r=a.subscribeToResult(this,e,t);this.add(r),this.delayNotifierSubscriptions.push(r),this.values.push(t)},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(s.OuterSubscriber),l=function(e){function t(t,r){e.call(this),this.source=t,this.subscriptionDelay=r}return n(t,e),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new d(e,this.source))},t}(o.Observable),d=function(e){function t(t,r){e.call(this),this.parent=t,this.source=r,this.sourceSubscribed=!1}return n(t,e),t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(i.Subscriber)},3281:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.dematerialize=function(){return this.lift(new o)};var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){e.call(this,t)}return n(t,e),t.prototype._next=function(e){e.observe(this.destination)},t}(i.Subscriber)},2339:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),o=r(8794),s=r(6900);t.distinct=function(e,t){return this.lift(new a(e,t))};var a=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.keySelector,this.flushes))},e}(),c=function(e){function t(t,r,n){e.call(this,t),this.keySelector=r,this.values=new s.Set,n&&this.add(o.subscribeToResult(this,n))}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.values.clear()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,r=this.destination;try{t=this.keySelector(e)}catch(e){return void r.error(e)}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var r=this.values;r.has(e)||(r.add(e),this.destination.next(t))},t}(i.OuterSubscriber);t.DistinctSubscriber=c},5275:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(6447),s=r(4456);t.distinctUntilChanged=function(e,t){return this.lift(new a(e,t))};var a=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.compare,this.keySelector))},e}(),c=function(e){function t(t,r,n){e.call(this,t),this.keySelector=n,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}return n(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t=e;if(this.keySelector&&(t=o.tryCatch(this.keySelector)(e))===s.errorObject)return this.destination.error(s.errorObject.e);var r=!1;if(this.hasKey){if((r=o.tryCatch(this.compare)(this.key,t))===s.errorObject)return this.destination.error(s.errorObject.e)}else this.hasKey=!0;!1===Boolean(r)&&(this.key=t,this.destination.next(e))},t}(i.Subscriber)},1693:(e,t,r)=>{"use strict";var n=r(5275);t.distinctUntilKeyChanged=function(e,t){return n.distinctUntilChanged.call(this,(function(r,n){return t?t(r[e],n[e]):r[e]===n[e]}))}},1490:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t._do=function(e,t,r){return this.lift(new o(e,t,r))};var o=function(){function e(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.nextOrObserver,this.error,this.complete))},e}(),s=function(e){function t(t,r,n,o){e.call(this,t);var s=new i.Subscriber(r,n,o);s.syncErrorThrowable=!0,this.add(s),this.safeSubscriber=s}return n(t,e),t.prototype._next=function(e){var t=this.safeSubscriber;t.next(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.next(e)},t.prototype._error=function(e){var t=this.safeSubscriber;t.error(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.error(e)},t.prototype._complete=function(){var e=this.safeSubscriber;e.complete(),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.complete()},t}(i.Subscriber)},9189:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(521);t.elementAt=function(e,t){return this.lift(new s(e,t))};var s=function(){function e(e,t){if(this.index=e,this.defaultValue=t,e<0)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.index,this.defaultValue))},e}(),a=function(e){function t(t,r,n){e.call(this,t),this.index=r,this.defaultValue=n}return n(t,e),t.prototype._next=function(e){0==this.index--&&(this.destination.next(e),this.destination.complete())},t.prototype._complete=function(){var e=this.destination;this.index>=0&&(void 0!==this.defaultValue?e.next(this.defaultValue):e.error(new o.ArgumentOutOfRangeError)),e.complete()},t}(i.Subscriber)},7212:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.every=function(e,t){return this.lift(new o(e,t,this))};var o=function(){function e(e,t,r){this.predicate=e,this.thisArg=t,this.source=r}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.thisArg,this.source))},e}(),s=function(e){function t(t,r,n,i){e.call(this,t),this.predicate=r,this.thisArg=n,this.source=i,this.index=0,this.thisArg=n||this}return n(t,e),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(i.Subscriber)},8784:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),o=r(8794);t.exhaust=function(){return this.lift(new s)};var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){e.call(this,t),this.hasCompleted=!1,this.hasSubscription=!1}return n(t,e),t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(o.subscribeToResult(this,e)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber)},3658:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),o=r(8794);t.exhaustMap=function(e,t){return this.lift(new s(e,t))};var s=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.resultSelector))},e}(),a=function(e){function t(t,r,n){e.call(this,t),this.project=r,this.resultSelector=n,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}return n(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t=this.index++,r=this.destination;try{var n=this.project(e,t);this.hasSubscription=!0,this.add(o.subscribeToResult(this,n,e,t))}catch(e){r.error(e)}},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){var o=this.resultSelector,s=this.destination;o?this.trySelectResult(e,t,r,n):s.next(t)},t.prototype.trySelectResult=function(e,t,r,n){var i=this.resultSelector,o=this.destination;try{var s=i(e,t,r,n);o.next(s)}catch(e){o.error(e)}},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber)},4610:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(6447),o=r(4456),s=r(3147),a=r(8794);t.expand=function(e,t,r){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=void 0),t=(t||0)<1?Number.POSITIVE_INFINITY:t,this.lift(new c(e,t,r))};var c=function(){function e(e,t,r){this.project=e,this.concurrent=t,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.project,this.concurrent,this.scheduler))},e}();t.ExpandOperator=c;var u=function(e){function t(t,r,n,i){e.call(this,t),this.project=r,this.concurrent=n,this.scheduler=i,this.index=0,this.active=0,this.hasCompleted=!1,n<Number.POSITIVE_INFINITY&&(this.buffer=[])}return n(t,e),t.dispatch=function(e){var t=e.subscriber,r=e.result,n=e.value,i=e.index;t.subscribeToProjection(r,n,i)},t.prototype._next=function(e){var r=this.destination;if(r.closed)this._complete();else{var n=this.index++;if(this.active<this.concurrent){r.next(e);var s=i.tryCatch(this.project)(e,n);if(s===o.errorObject)r.error(o.errorObject.e);else if(this.scheduler){var a={subscriber:this,result:s,value:e,index:n};this.add(this.scheduler.schedule(t.dispatch,0,a))}else this.subscribeToProjection(s,e,n)}else this.buffer.push(e)}},t.prototype.subscribeToProjection=function(e,t,r){this.active++,this.add(a.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){this._next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(s.OuterSubscriber);t.ExpandSubscriber=u},2044:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.filter=function(e,t){return this.lift(new o(e,t))};var o=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.thisArg))},e}(),s=function(e){function t(t,r,n){e.call(this,t),this.predicate=r,this.thisArg=n,this.count=0,this.predicate=r}return n(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(i.Subscriber)},4383:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(4859);t._finally=function(e){return this.lift(new s(e))};var s=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.callback))},e}(),a=function(e){function t(t,r){e.call(this,t),this.add(new o.Subscription(r))}return n(t,e),t}(i.Subscriber)},9788:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.find=function(e,t){if("function"!=typeof e)throw new TypeError("predicate is not a function");return this.lift(new o(e,this,!1,t))};var o=function(){function e(e,t,r,n){this.predicate=e,this.source=t,this.yieldIndex=r,this.thisArg=n}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}();t.FindValueOperator=o;var s=function(e){function t(t,r,n,i,o){e.call(this,t),this.predicate=r,this.source=n,this.yieldIndex=i,this.thisArg=o,this.index=0}return n(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){var t=this.predicate,r=this.thisArg,n=this.index++;try{t.call(r||this,e,n,this.source)&&this.notifyComplete(this.yieldIndex?n:e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(i.Subscriber);t.FindValueSubscriber=s},6107:(e,t,r)=>{"use strict";var n=r(9788);t.findIndex=function(e,t){return this.lift(new n.FindValueOperator(e,this,!0,t))}},8616:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(2107);t.first=function(e,t,r){return this.lift(new s(e,t,r,this))};var s=function(){function e(e,t,r,n){this.predicate=e,this.resultSelector=t,this.defaultValue=r,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),a=function(e){function t(t,r,n,i,o){e.call(this,t),this.predicate=r,this.resultSelector=n,this.defaultValue=i,this.source=o,this.index=0,this.hasCompleted=!1,this._emitted=!1}return n(t,e),t.prototype._next=function(e){var t=this.index++;this.predicate?this._tryPredicate(e,t):this._emit(e,t)},t.prototype._tryPredicate=function(e,t){var r;try{r=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}r&&this._emit(e,t)},t.prototype._emit=function(e,t){this.resultSelector?this._tryResultSelector(e,t):this._emitFinal(e)},t.prototype._tryResultSelector=function(e,t){var r;try{r=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this._emitFinal(r)},t.prototype._emitFinal=function(e){var t=this.destination;this._emitted||(this._emitted=!0,t.next(e),t.complete(),this.hasCompleted=!0)},t.prototype._complete=function(){var e=this.destination;this.hasCompleted||void 0===this.defaultValue?this.hasCompleted||e.error(new o.EmptyError):(e.next(this.defaultValue),e.complete())},t}(i.Subscriber)},2185:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(4859),s=r(5100),a=r(8314),c=r(5205),u=r(1741);t.groupBy=function(e,t,r,n){return this.lift(new l(e,t,r,n))};var l=function(){function e(e,t,r,n){this.keySelector=e,this.elementSelector=t,this.durationSelector=r,this.subjectSelector=n}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},e}(),d=function(e){function t(t,r,n,i,o){e.call(this,t),this.keySelector=r,this.elementSelector=n,this.durationSelector=i,this.subjectSelector=o,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}return n(t,e),t.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},t.prototype._group=function(e,t){var r=this.groups;r||(r=this.groups="string"==typeof t?new u.FastMap:new c.Map);var n,i=r.get(t);if(this.elementSelector)try{n=this.elementSelector(e)}catch(e){this.error(e)}else n=e;if(!i){i=this.subjectSelector?this.subjectSelector():new a.Subject,r.set(t,i);var o=new p(t,i,this);if(this.destination.next(o),this.durationSelector){var s=void 0;try{s=this.durationSelector(new p(t,i))}catch(e){return void this.error(e)}this.add(s.subscribe(new h(t,i,this)))}}i.closed||i.next(n)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach((function(t,r){t.error(e)})),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach((function(e,t){e.complete()})),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(i.Subscriber),h=function(e){function t(t,r,n){e.call(this),this.key=t,this.group=r,this.parent=n}return n(t,e),t.prototype._next=function(e){this._complete()},t.prototype._error=function(e){var t=this.group;t.closed||t.error(e),this.parent.removeGroup(this.key)},t.prototype._complete=function(){var e=this.group;e.closed||e.complete(),this.parent.removeGroup(this.key)},t}(i.Subscriber),p=function(e){function t(t,r,n){e.call(this),this.key=t,this.groupSubject=r,this.refCountSubscription=n}return n(t,e),t.prototype._subscribe=function(e){var t=new o.Subscription,r=this.refCountSubscription,n=this.groupSubject;return r&&!r.closed&&t.add(new f(r)),t.add(n.subscribe(e)),t},t}(s.Observable);t.GroupedObservable=p;var f=function(e){function t(t){e.call(this),this.parent=t,t.count++}return n(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(o.Subscription)},5537:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(4985);t.ignoreElements=function(){return this.lift(new s)};var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype._next=function(e){o.noop()},t}(i.Subscriber)},1279:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.isEmpty=function(){return this.lift(new o)};var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){e.call(this,t)}return n(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(i.Subscriber)},7009:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(2107);t.last=function(e,t,r){return this.lift(new s(e,t,r,this))};var s=function(){function e(e,t,r,n){this.predicate=e,this.resultSelector=t,this.defaultValue=r,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),a=function(e){function t(t,r,n,i,o){e.call(this,t),this.predicate=r,this.resultSelector=n,this.defaultValue=i,this.source=o,this.hasValue=!1,this.index=0,void 0!==i&&(this.lastValue=i,this.hasValue=!0)}return n(t,e),t.prototype._next=function(e){var t=this.index++;if(this.predicate)this._tryPredicate(e,t);else{if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},t.prototype._tryPredicate=function(e,t){var r;try{r=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}if(r){if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},t.prototype._tryResultSelector=function(e,t){var r;try{r=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this.lastValue=r,this.hasValue=!0},t.prototype._complete=function(){var e=this.destination;this.hasValue?(e.next(this.lastValue),e.complete()):e.error(new o.EmptyError)},t}(i.Subscriber)},7774:(e,t)=>{"use strict";t.letProto=function(e){return e(this)}},9987:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.map=function(e,t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new o(e,t))};var o=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.thisArg))},e}();t.MapOperator=o;var s=function(e){function t(t,r,n){e.call(this,t),this.project=r,this.count=0,this.thisArg=n||this}return n(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.Subscriber)},1727:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.mapTo=function(e){return this.lift(new o(e))};var o=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.value))},e}(),s=function(e){function t(t,r){e.call(this,t),this.value=r}return n(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(i.Subscriber)},8692:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(8270);t.materialize=function(){return this.lift(new s)};var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){e.call(this,t)}return n(t,e),t.prototype._next=function(e){this.destination.next(o.Notification.createNext(e))},t.prototype._error=function(e){var t=this.destination;t.next(o.Notification.createError(e)),t.complete()},t.prototype._complete=function(){var e=this.destination;e.next(o.Notification.createComplete()),e.complete()},t}(i.Subscriber)},2674:(e,t,r)=>{"use strict";var n=r(7733);t.max=function(e){var t="function"==typeof e?function(t,r){return e(t,r)>0?t:r}:function(e,t){return e>t?e:t};return this.lift(new n.ReduceOperator(t))}},4039:(e,t,r)=>{"use strict";var n=r(5100),i=r(3418),o=r(895),s=r(93);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=Number.POSITIVE_INFINITY,a=null,c=e[e.length-1];return s.isScheduler(c)?(a=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof c&&(r=e.pop()),null===a&&1===e.length&&e[0]instanceof n.Observable?e[0]:new i.ArrayObservable(e,a).lift(new o.MergeAllOperator(r))}t.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(a.apply(void 0,[this].concat(e)))},t.mergeStatic=a},895:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),o=r(8794);t.mergeAll=function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),this.lift(new s(e))};var s=function(){function e(e){this.concurrent=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.concurrent))},e}();t.MergeAllOperator=s;var a=function(e){function t(t,r){e.call(this,t),this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0}return n(t,e),t.prototype._next=function(e){this.active<this.concurrent?(this.active++,this.add(o.subscribeToResult(this,e))):this.buffer.push(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber);t.MergeAllSubscriber=a},493:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8794),o=r(3147);t.mergeMap=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"number"==typeof t&&(r=t,t=null),this.lift(new s(e,t,r))};var s=function(){function e(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=e,this.resultSelector=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.resultSelector,this.concurrent))},e}();t.MergeMapOperator=s;var a=function(e){function t(t,r,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY),e.call(this,t),this.project=r,this.resultSelector=n,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){this.add(i.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){this.resultSelector?this._notifyResultSelector(e,t,r,n):this.destination.next(t)},t.prototype._notifyResultSelector=function(e,t,r,n){var i;try{i=this.resultSelector(e,t,r,n)}catch(e){return void this.destination.error(e)}this.destination.next(i)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(o.OuterSubscriber);t.MergeMapSubscriber=a},5760:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),o=r(8794);t.mergeMapTo=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"number"==typeof t&&(r=t,t=null),this.lift(new s(e,t,r))};var s=function(){function e(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.ish=e,this.resultSelector=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.ish,this.resultSelector,this.concurrent))},e}();t.MergeMapToOperator=s;var a=function(e){function t(t,r,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY),e.call(this,t),this.ish=r,this.resultSelector=n,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.resultSelector,r=this.index++,n=this.ish,i=this.destination;this.active++,this._innerSub(n,i,t,e,r)}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,r,n,i){this.add(o.subscribeToResult(this,e,n,i))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){var o=this.resultSelector,s=this.destination;o?this.trySelectResult(e,t,r,n):s.next(t)},t.prototype.trySelectResult=function(e,t,r,n){var i,o=this.resultSelector,s=this.destination;try{i=o(e,t,r,n)}catch(e){return void s.error(e)}s.next(i)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber);t.MergeMapToSubscriber=a},6064:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(6447),o=r(4456),s=r(8794),a=r(3147);t.mergeScan=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),this.lift(new c(e,t,r))};var c=function(){function e(e,t,r){this.accumulator=e,this.seed=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.accumulator,this.seed,this.concurrent))},e}();t.MergeScanOperator=c;var u=function(e){function t(t,r,n,i){e.call(this,t),this.accumulator=r,this.acc=n,this.concurrent=i,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,r=i.tryCatch(this.accumulator)(this.acc,e),n=this.destination;r===o.errorObject?n.error(o.errorObject.e):(this.active++,this._innerSub(r,e,t))}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,r){this.add(s.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t.prototype.notifyNext=function(e,t,r,n,i){var o=this.destination;this.acc=t,this.hasValue=!0,o.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(a.OuterSubscriber);t.MergeScanSubscriber=u},8758:(e,t,r)=>{"use strict";var n=r(7733);t.min=function(e){var t="function"==typeof e?function(t,r){return e(t,r)<0?t:r}:function(e,t){return e<t?e:t};return this.lift(new n.ReduceOperator(t))}},900:(e,t,r)=>{"use strict";var n=r(8852);t.multicast=function(e,t){var r;if(r="function"==typeof e?e:function(){return e},"function"==typeof t)return this.lift(new i(r,t));var o=Object.create(this,n.connectableObservableDescriptor);return o.source=this,o.subjectFactory=r,o};var i=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var r=this.selector,n=this.subjectFactory(),i=r(n).subscribe(e);return i.add(t.subscribe(n)),i},e}();t.MulticastOperator=i},1073:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(8270);t.observeOn=function(e,t){return void 0===t&&(t=0),this.lift(new s(e,t))};var s=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.scheduler,this.delay))},e}();t.ObserveOnOperator=s;var a=function(e){function t(t,r,n){void 0===n&&(n=0),e.call(this,t),this.scheduler=r,this.delay=n}return n(t,e),t.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new c(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(o.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(o.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(o.Notification.createComplete())},t}(i.Subscriber);t.ObserveOnSubscriber=a;var c=function(e,t){this.notification=e,this.destination=t};t.ObserveOnMessage=c},3262:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(7305),o=r(5936),s=r(3147),a=r(8794);t.onErrorResumeNext=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length&&o.isArray(e[0])&&(e=e[0]),this.lift(new c(e))},t.onErrorResumeNextStatic=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null;return 1===e.length&&o.isArray(e[0])&&(e=e[0]),r=e.shift(),new i.FromObservable(r,null).lift(new c(e))};var c=function(){function e(e){this.nextSources=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.nextSources))},e}(),u=function(e){function t(t,r){e.call(this,t),this.destination=t,this.nextSources=r}return n(t,e),t.prototype.notifyError=function(e,t){this.subscribeToNextSource()},t.prototype.notifyComplete=function(e){this.subscribeToNextSource()},t.prototype._error=function(e){this.subscribeToNextSource()},t.prototype._complete=function(){this.subscribeToNextSource()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();e?this.add(a.subscribeToResult(this,e)):this.destination.complete()},t}(s.OuterSubscriber)},1786:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.pairwise=function(){return this.lift(new o)};var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){e.call(this,t),this.hasPrev=!1}return n(t,e),t.prototype._next=function(e){this.hasPrev?this.destination.next([this.prev,e]):this.hasPrev=!0,this.prev=e},t}(i.Subscriber)},1686:(e,t,r)=>{"use strict";var n=r(1088),i=r(2044);t.partition=function(e,t){return[i.filter.call(this,e,t),i.filter.call(this,n.not(e,t))]}},5490:(e,t,r)=>{"use strict";var n=r(9987);function i(e,t){return function(r){for(var n=r,i=0;i<t;i++){var o=n[e[i]];if(void 0===o)return;n=o}return n}}t.pluck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e.length;if(0===r)throw new Error("list of properties cannot be empty.");return n.map.call(this,i(e,r))}},9916:(e,t,r)=>{"use strict";var n=r(8314),i=r(900);t.publish=function(e){return e?i.multicast.call(this,(function(){return new n.Subject}),e):i.multicast.call(this,new n.Subject)}},7634:(e,t,r)=>{"use strict";var n=r(9122),i=r(900);t.publishBehavior=function(e){return i.multicast.call(this,new n.BehaviorSubject(e))}},7832:(e,t,r)=>{"use strict";var n=r(437),i=r(900);t.publishLast=function(){return i.multicast.call(this,new n.AsyncSubject)}},8563:(e,t,r)=>{"use strict";var n=r(7875),i=r(900);t.publishReplay=function(e,t,r){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY),i.multicast.call(this,new n.ReplaySubject(e,t,r))}},1208:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5936),o=r(3418),s=r(3147),a=r(8794);function c(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(1===e.length){if(!i.isArray(e[0]))return e[0];e=e[0]}return new o.ArrayObservable(e).lift(new u)}t.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length&&i.isArray(e[0])&&(e=e[0]),this.lift.call(c.apply(void 0,[this].concat(e)))},t.raceStatic=c;var u=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new l(e))},e}();t.RaceOperator=u;var l=function(e){function t(t){e.call(this,t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return n(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var r=0;r<t&&!this.hasFirst;r++){var n=e[r],i=a.subscribeToResult(this,n,n,r);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,r,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==r){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)},t}(s.OuterSubscriber);t.RaceSubscriber=l},7733:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.reduce=function(e,t){var r=!1;return arguments.length>=2&&(r=!0),this.lift(new o(e,t,r))};var o=function(){function e(e,t,r){void 0===r&&(r=!1),this.accumulator=e,this.seed=t,this.hasSeed=r}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.accumulator,this.seed,this.hasSeed))},e}();t.ReduceOperator=o;var s=function(e){function t(t,r,n,i){e.call(this,t),this.accumulator=r,this.hasSeed=i,this.index=0,this.hasValue=!1,this.acc=n,this.hasSeed||this.index++}return n(t,e),t.prototype._next=function(e){this.hasValue||(this.hasValue=this.hasSeed)?this._tryReduce(e):(this.acc=e,this.hasValue=!0)},t.prototype._tryReduce=function(e){var t;try{t=this.accumulator(this.acc,e,this.index++)}catch(e){return void this.destination.error(e)}this.acc=t},t.prototype._complete=function(){(this.hasValue||this.hasSeed)&&this.destination.next(this.acc),this.destination.complete()},t}(i.Subscriber);t.ReduceSubscriber=s},4512:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(9735);t.repeat=function(e){return void 0===e&&(e=-1),0===e?new o.EmptyObservable:e<0?this.lift(new s(-1,this)):this.lift(new s(e-1,this))};var s=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.count,this.source))},e}(),a=function(e){function t(t,r,n){e.call(this,t),this.count=r,this.source=n}return n(t,e),t.prototype.complete=function(){if(!this.isStopped){var t=this.source,r=this.count;if(0===r)return e.prototype.complete.call(this);r>-1&&(this.count=r-1),t.subscribe(this._unsubscribeAndRecycle())}},t}(i.Subscriber)},6078:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8314),o=r(6447),s=r(4456),a=r(3147),c=r(8794);t.repeatWhen=function(e){return this.lift(new u(e))};var u=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.notifier,t))},e}(),l=function(e){function t(t,r,n){e.call(this,t),this.notifier=r,this.source=n,this.sourceIsBeingSubscribedTo=!0}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(t){if(!1===this.sourceIsBeingSubscribedTo)return e.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries){if(this.retriesSubscription.closed)return e.prototype.complete.call(this)}else this.subscribeToRetries();this._unsubscribeAndRecycle(),this.notifications.next()}},t.prototype._unsubscribe=function(){var e=this.notifications,t=this.retriesSubscription;e&&(e.unsubscribe(),this.notifications=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype._unsubscribeAndRecycle=function(){var t=this,r=t.notifications,n=t.retries,i=t.retriesSubscription;return this.notifications=null,this.retries=null,this.retriesSubscription=null,e.prototype._unsubscribeAndRecycle.call(this),this.notifications=r,this.retries=n,this.retriesSubscription=i,this},t.prototype.subscribeToRetries=function(){this.notifications=new i.Subject;var t=o.tryCatch(this.notifier)(this.notifications);if(t===s.errorObject)return e.prototype.complete.call(this);this.retries=t,this.retriesSubscription=c.subscribeToResult(this,t)},t}(a.OuterSubscriber)},6943:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.retry=function(e){return void 0===e&&(e=-1),this.lift(new o(e,this))};var o=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.count,this.source))},e}(),s=function(e){function t(t,r,n){e.call(this,t),this.count=r,this.source=n}return n(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=this.source,n=this.count;if(0===n)return e.prototype.error.call(this,t);n>-1&&(this.count=n-1),r.subscribe(this._unsubscribeAndRecycle())}},t}(i.Subscriber)},5045:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8314),o=r(6447),s=r(4456),a=r(3147),c=r(8794);t.retryWhen=function(e){return this.lift(new u(e,this))};var u=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.notifier,this.source))},e}(),l=function(e){function t(t,r,n){e.call(this,t),this.notifier=r,this.source=n}return n(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=this.errors,n=this.retries,a=this.retriesSubscription;if(n)this.errors=null,this.retriesSubscription=null;else{if(r=new i.Subject,(n=o.tryCatch(this.notifier)(r))===s.errorObject)return e.prototype.error.call(this,s.errorObject.e);a=c.subscribeToResult(this,n)}this._unsubscribeAndRecycle(),this.errors=r,this.retries=n,this.retriesSubscription=a,r.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype.notifyNext=function(e,t,r,n,i){var o=this,s=o.errors,a=o.retries,c=o.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this._unsubscribeAndRecycle(),this.errors=s,this.retries=a,this.retriesSubscription=c,this.source.subscribe(this)},t}(a.OuterSubscriber)},6710:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),o=r(8794);t.sample=function(e){return this.lift(new s(e))};var s=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var r=new a(e),n=t.subscribe(r);return n.add(o.subscribeToResult(r,this.notifier)),n},e}(),a=function(e){function t(){e.apply(this,arguments),this.hasValue=!1}return n(t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(e,t,r,n,i){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(i.OuterSubscriber)},151:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(8404);t.sampleTime=function(e,t){return void 0===t&&(t=o.async),this.lift(new s(e,t))};var s=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.period,this.scheduler))},e}(),a=function(e){function t(t,r,n){e.call(this,t),this.period=r,this.scheduler=n,this.hasValue=!1,this.add(n.schedule(c,r,{subscriber:this,period:r}))}return n(t,e),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(i.Subscriber);function c(e){var t=e.subscriber,r=e.period;t.notifyNext(),this.schedule(e,r)}},8076:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.scan=function(e,t){var r=!1;return arguments.length>=2&&(r=!0),this.lift(new o(e,t,r))};var o=function(){function e(e,t,r){void 0===r&&(r=!1),this.accumulator=e,this.seed=t,this.hasSeed=r}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.accumulator,this.seed,this.hasSeed))},e}(),s=function(e){function t(t,r,n,i){e.call(this,t),this.accumulator=r,this._seed=n,this.hasSeed=i,this.index=0}return n(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.accumulator(this.seed,e,r)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(i.Subscriber)},5613:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(6447),s=r(4456);t.sequenceEqual=function(e,t){return this.lift(new a(e,t))};var a=function(){function e(e,t){this.compareTo=e,this.comparor=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.compareTo,this.comparor))},e}();t.SequenceEqualOperator=a;var c=function(e){function t(t,r,n){e.call(this,t),this.compareTo=r,this.comparor=n,this._a=[],this._b=[],this._oneComplete=!1,this.add(r.subscribe(new u(t,this)))}return n(t,e),t.prototype._next=function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},t.prototype.checkValues=function(){for(var e=this,t=e._a,r=e._b,n=e.comparor;t.length>0&&r.length>0;){var i=t.shift(),a=r.shift(),c=!1;n?(c=o.tryCatch(n)(i,a))===s.errorObject&&this.destination.error(s.errorObject.e):c=i===a,c||this.emit(!1)}},t.prototype.emit=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype.nextB=function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())},t}(i.Subscriber);t.SequenceEqualSubscriber=c;var u=function(e){function t(t,r){e.call(this,t),this.parent=r}return n(t,e),t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e)},t.prototype._complete=function(){this.parent._complete()},t}(i.Subscriber)},5192:(e,t,r)=>{"use strict";var n=r(900),i=r(8314);function o(){return new i.Subject}t.share=function(){return n.multicast.call(this,o).refCount()}},4355:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(2107);t.single=function(e){return this.lift(new s(e,this))};var s=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.source))},e}(),a=function(e){function t(t,r,n){e.call(this,t),this.predicate=r,this.source=n,this.seenValue=!1,this.index=0}return n(t,e),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)},t.prototype.tryNext=function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new o.EmptyError)},t}(i.Subscriber)},7232:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.skip=function(e){return this.lift(new o(e))};var o=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.total))},e}(),s=function(e){function t(t,r){e.call(this,t),this.total=r,this.count=0}return n(t,e),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(i.Subscriber)},8225:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),o=r(8794);t.skipUntil=function(e){return this.lift(new s(e))};var s=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.notifier))},e}(),a=function(e){function t(t,r){e.call(this,t),this.hasValue=!1,this.isInnerStopped=!1,this.add(o.subscribeToResult(this,r))}return n(t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype._complete=function(){this.isInnerStopped?e.prototype._complete.call(this):this.unsubscribe()},t.prototype.notifyNext=function(e,t,r,n,i){this.hasValue=!0},t.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&e.prototype._complete.call(this)},t}(i.OuterSubscriber)},775:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.skipWhile=function(e){return this.lift(new o(e))};var o=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate))},e}(),s=function(e){function t(t,r){e.call(this,t),this.predicate=r,this.skipping=!0,this.index=0}return n(t,e),t.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},t.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(e){this.destination.error(e)}},t}(i.Subscriber)},341:(e,t,r)=>{"use strict";var n=r(3418),i=r(4819),o=r(9735),s=r(8311),a=r(93);t.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e[e.length-1];a.isScheduler(r)?e.pop():r=null;var c=e.length;return 1===c?s.concatStatic(new i.ScalarObservable(e[0],r),this):c>1?s.concatStatic(new n.ArrayObservable(e,r),this):s.concatStatic(new o.EmptyObservable(r),this)}},1360:(e,t,r)=>{"use strict";var n=r(9034);t.subscribeOn=function(e,t){return void 0===t&&(t=0),this.lift(new i(e,t))};var i=function(){function e(e,t){this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return new n.SubscribeOnObservable(t,this.delay,this.scheduler).subscribe(e)},e}()},6589:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),o=r(8794);t._switch=function(){return this.lift(new s)};var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){e.call(this,t),this.active=0,this.hasCompleted=!1}return n(t,e),t.prototype._next=function(e){this.unsubscribeInner(),this.active++,this.add(this.innerSubscription=o.subscribeToResult(this,e))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&this.destination.complete()},t.prototype.unsubscribeInner=function(){this.active=this.active>0?this.active-1:0;var e=this.innerSubscription;e&&(e.unsubscribe(),this.remove(e))},t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.unsubscribeInner(),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(i.OuterSubscriber)},9318:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),o=r(8794);t.switchMap=function(e,t){return this.lift(new s(e,t))};var s=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.resultSelector))},e}(),a=function(e){function t(t,r,n){e.call(this,t),this.project=r,this.resultSelector=n,this.index=0}return n(t,e),t.prototype._next=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){var n=this.innerSubscription;n&&n.unsubscribe(),this.add(this.innerSubscription=o.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,r,n,i){this.resultSelector?this._tryNotifyNext(e,t,r,n):this.destination.next(t)},t.prototype._tryNotifyNext=function(e,t,r,n){var i;try{i=this.resultSelector(e,t,r,n)}catch(e){return void this.destination.error(e)}this.destination.next(i)},t}(i.OuterSubscriber)},9881:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),o=r(8794);t.switchMapTo=function(e,t){return this.lift(new s(e,t))};var s=function(){function e(e,t){this.observable=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.observable,this.resultSelector))},e}(),a=function(e){function t(t,r,n){e.call(this,t),this.inner=r,this.resultSelector=n,this.index=0}return n(t,e),t.prototype._next=function(e){var t=this.innerSubscription;t&&t.unsubscribe(),this.add(this.innerSubscription=o.subscribeToResult(this,this.inner,e,this.index++))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,r,n,i){var o=this.resultSelector,s=this.destination;o?this.tryResultSelector(e,t,r,n):s.next(t)},t.prototype.tryResultSelector=function(e,t,r,n){var i,o=this.resultSelector,s=this.destination;try{i=o(e,t,r,n)}catch(e){return void s.error(e)}s.next(i)},t}(i.OuterSubscriber)},4545:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(521),s=r(9735);t.take=function(e){return 0===e?new s.EmptyObservable:this.lift(new a(e))};var a=function(){function e(e){if(this.total=e,this.total<0)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.total))},e}(),c=function(e){function t(t,r){e.call(this,t),this.total=r,this.count=0}return n(t,e),t.prototype._next=function(e){var t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))},t}(i.Subscriber)},4153:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(521),s=r(9735);t.takeLast=function(e){return 0===e?new s.EmptyObservable:this.lift(new a(e))};var a=function(){function e(e){if(this.total=e,this.total<0)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.total))},e}(),c=function(e){function t(t,r){e.call(this,t),this.total=r,this.ring=new Array,this.count=0}return n(t,e),t.prototype._next=function(e){var t=this.ring,r=this.total,n=this.count++;t.length<r?t.push(e):t[n%r]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var r=this.count>=this.total?this.total:this.count,n=this.ring,i=0;i<r;i++){var o=t++%r;e.next(n[o])}e.complete()},t}(i.Subscriber)},1305:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),o=r(8794);t.takeUntil=function(e){return this.lift(new s(e))};var s=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.notifier))},e}(),a=function(e){function t(t,r){e.call(this,t),this.notifier=r,this.add(o.subscribeToResult(this,r))}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.complete()},t.prototype.notifyComplete=function(){},t}(i.OuterSubscriber)},4686:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.takeWhile=function(e){return this.lift(new o(e))};var o=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate))},e}(),s=function(e){function t(t,r){e.call(this,t),this.predicate=r,this.index=0}return n(t,e),t.prototype._next=function(e){var t,r=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void r.error(e)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var r=this.destination;Boolean(t)?r.next(e):r.complete()},t}(i.Subscriber)},2880:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),o=r(8794);t.throttle=function(e){return this.lift(new s(e))};var s=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.durationSelector))},e}(),a=function(e){function t(t,r){e.call(this,t),this.destination=t,this.durationSelector=r}return n(t,e),t.prototype._next=function(e){this.throttled||this.tryDurationSelector(e)},t.prototype.tryDurationSelector=function(e){var t=null;try{t=this.durationSelector(e)}catch(e){return void this.destination.error(e)}this.emitAndThrottle(e,t)},t.prototype.emitAndThrottle=function(e,t){this.add(this.throttled=o.subscribeToResult(this,t)),this.destination.next(e)},t.prototype._unsubscribe=function(){var e=this.throttled;e&&(this.remove(e),this.throttled=null,e.unsubscribe())},t.prototype.notifyNext=function(e,t,r,n,i){this._unsubscribe()},t.prototype.notifyComplete=function(){this._unsubscribe()},t}(i.OuterSubscriber)},2508:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(8404);t.throttleTime=function(e,t){return void 0===t&&(t=o.async),this.lift(new s(e,t))};var s=function(){function e(e,t){this.duration=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.duration,this.scheduler))},e}(),a=function(e){function t(t,r,n){e.call(this,t),this.duration=r,this.scheduler=n}return n(t,e),t.prototype._next=function(e){this.throttled||(this.add(this.throttled=this.scheduler.schedule(c,this.duration,{subscriber:this})),this.destination.next(e))},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(e.unsubscribe(),this.remove(e),this.throttled=null)},t}(i.Subscriber);function c(e){e.subscriber.clearThrottle()}},5782:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(8404);t.timeInterval=function(e){return void 0===e&&(e=o.async),this.lift(new a(e))};var s=function(e,t){this.value=e,this.interval=t};t.TimeInterval=s;var a=function(){function e(e){this.scheduler=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.scheduler))},e}(),c=function(e){function t(t,r){e.call(this,t),this.scheduler=r,this.lastTime=0,this.lastTime=r.now()}return n(t,e),t.prototype._next=function(e){var t=this.scheduler.now(),r=t-this.lastTime;this.lastTime=t,this.destination.next(new s(e,r))},t}(i.Subscriber)},904:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8404),o=r(1589),s=r(5239),a=r(4333);t.timeout=function(e,t){void 0===t&&(t=i.async);var r=o.isDate(e),n=r?+e-t.now():Math.abs(e);return this.lift(new c(n,r,t,new a.TimeoutError))};var c=function(){function e(e,t,r,n){this.waitFor=e,this.absoluteTimeout=t,this.scheduler=r,this.errorInstance=n}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.absoluteTimeout,this.waitFor,this.scheduler,this.errorInstance))},e}(),u=function(e){function t(t,r,n,i,o){e.call(this,t),this.absoluteTimeout=r,this.waitFor=n,this.scheduler=i,this.errorInstance=o,this.action=null,this.scheduleTimeout()}return n(t,e),t.dispatchTimeout=function(e){e.error(e.errorInstance)},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.errorInstance=null},t}(s.Subscriber)},4900:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8404),o=r(1589),s=r(3147),a=r(8794);t.timeoutWith=function(e,t,r){void 0===r&&(r=i.async);var n=o.isDate(e),s=n?+e-r.now():Math.abs(e);return this.lift(new c(s,n,t,r))};var c=function(){function e(e,t,r,n){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),u=function(e){function t(t,r,n,i,o){e.call(this,t),this.absoluteTimeout=r,this.waitFor=n,this.withObservable=i,this.scheduler=o,this.action=null,this.scheduleTimeout()}return n(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(a.subscribeToResult(e,t))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},t}(s.OuterSubscriber)},4453:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(8404);t.timestamp=function(e){return void 0===e&&(e=o.async),this.lift(new a(e))};var s=function(e,t){this.value=e,this.timestamp=t};t.Timestamp=s;var a=function(){function e(e){this.scheduler=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.scheduler))},e}(),c=function(e){function t(t,r){e.call(this,t),this.scheduler=r}return n(t,e),t.prototype._next=function(e){var t=this.scheduler.now();this.destination.next(new s(e,t))},t}(i.Subscriber)},7882:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.toArray=function(){return this.lift(new o)};var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){e.call(this,t),this.array=[]}return n(t,e),t.prototype._next=function(e){this.array.push(e)},t.prototype._complete=function(){this.destination.next(this.array),this.destination.complete()},t}(i.Subscriber)},3479:(e,t,r)=>{"use strict";var n=r(7919);t.toPromise=function(e){var t=this;if(e||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?e=n.root.Rx.config.Promise:n.root.Promise&&(e=n.root.Promise)),!e)throw new Error("no Promise impl found");return new e((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))}},5686:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8314),o=r(3147),s=r(8794);t.window=function(e){return this.lift(new a(e))};var a=function(){function e(e){this.windowBoundaries=e}return e.prototype.call=function(e,t){var r=new c(e),n=t.subscribe(r);return n.closed||r.add(s.subscribeToResult(r,this.windowBoundaries)),n},e}(),c=function(e){function t(t){e.call(this,t),this.window=new i.Subject,t.next(this.window)}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.openWindow()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,r=this.window=new i.Subject;t.next(r)},t}(o.OuterSubscriber)},9311:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),o=r(8314);t.windowCount=function(e,t){return void 0===t&&(t=0),this.lift(new s(e,t))};var s=function(){function e(e,t){this.windowSize=e,this.startWindowEvery=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.windowSize,this.startWindowEvery))},e}(),a=function(e){function t(t,r,n){e.call(this,t),this.destination=t,this.windowSize=r,this.startWindowEvery=n,this.windows=[new o.Subject],this.count=0,t.next(this.windows[0])}return n(t,e),t.prototype._next=function(e){for(var t=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,r=this.destination,n=this.windowSize,i=this.windows,s=i.length,a=0;a<s&&!this.closed;a++)i[a].next(e);var c=this.count-n+1;if(c>=0&&c%t==0&&!this.closed&&i.shift().complete(),++this.count%t==0&&!this.closed){var u=new o.Subject;i.push(u),r.next(u)}},t.prototype._error=function(e){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(i.Subscriber)},4405:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8314),o=r(8404),s=r(5239),a=r(3523),c=r(93);t.windowTime=function(e){var t=o.async,r=null,n=Number.POSITIVE_INFINITY;return c.isScheduler(arguments[3])&&(t=arguments[3]),c.isScheduler(arguments[2])?t=arguments[2]:a.isNumeric(arguments[2])&&(n=arguments[2]),c.isScheduler(arguments[1])?t=arguments[1]:a.isNumeric(arguments[1])&&(r=arguments[1]),this.lift(new u(e,r,n,t))};var u=function(){function e(e,t,r,n){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},e}(),l=function(e){function t(){e.apply(this,arguments),this._numberOfNextedValues=0}return n(t,e),t.prototype.next=function(t){this._numberOfNextedValues++,e.prototype.next.call(this,t)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(i.Subject),d=function(e){function t(t,r,n,i,o){e.call(this,t),this.destination=t,this.windowTimeSpan=r,this.windowCreationInterval=n,this.maxWindowSize=i,this.scheduler=o,this.windows=[];var s=this.openWindow();if(null!==n&&n>=0){var a={subscriber:this,window:s,context:null},c={windowTimeSpan:r,windowCreationInterval:n,subscriber:this,scheduler:o};this.add(o.schedule(f,r,a)),this.add(o.schedule(p,n,c))}else{var u={subscriber:this,window:s,windowTimeSpan:r};this.add(o.schedule(h,r,u))}}return n(t,e),t.prototype._next=function(e){for(var t=this.windows,r=t.length,n=0;n<r;n++){var i=t[n];i.closed||(i.next(e),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},t.prototype._error=function(e){for(var t=this.windows;t.length>0;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){for(var e=this.windows;e.length>0;){var t=e.shift();t.closed||t.complete()}this.destination.complete()},t.prototype.openWindow=function(){var e=new l;return this.windows.push(e),this.destination.next(e),e},t.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},t}(s.Subscriber);function h(e){var t=e.subscriber,r=e.windowTimeSpan,n=e.window;n&&t.closeWindow(n),e.window=t.openWindow(),this.schedule(e,r)}function p(e){var t=e.windowTimeSpan,r=e.subscriber,n=e.scheduler,i=e.windowCreationInterval,o=r.openWindow(),s=this,a={action:s,subscription:null},c={subscriber:r,window:o,context:a};a.subscription=n.schedule(f,t,c),s.add(a.subscription),s.schedule(e,i)}function f(e){var t=e.subscriber,r=e.window,n=e.context;n&&n.action&&n.subscription&&n.action.remove(n.subscription),t.closeWindow(r)}},3969:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8314),o=r(4859),s=r(6447),a=r(4456),c=r(3147),u=r(8794);t.windowToggle=function(e,t){return this.lift(new l(e,t))};var l=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.openings,this.closingSelector))},e}(),d=function(e){function t(t,r,n){e.call(this,t),this.openings=r,this.closingSelector=n,this.contexts=[],this.add(this.openSubscription=u.subscribeToResult(this,r,r))}return n(t,e),t.prototype._next=function(e){var t=this.contexts;if(t)for(var r=t.length,n=0;n<r;n++)t[n].window.next(e)},t.prototype._error=function(t){var r=this.contexts;if(this.contexts=null,r)for(var n=r.length,i=-1;++i<n;){var o=r[i];o.window.error(t),o.subscription.unsubscribe()}e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var r=t.length,n=-1;++n<r;){var i=t[n];i.window.complete(),i.subscription.unsubscribe()}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,r=-1;++r<t;){var n=e[r];n.window.unsubscribe(),n.subscription.unsubscribe()}},t.prototype.notifyNext=function(e,t,r,n,c){if(e===this.openings){var l=this.closingSelector,d=s.tryCatch(l)(t);if(d===a.errorObject)return this.error(a.errorObject.e);var h=new i.Subject,p=new o.Subscription,f={window:h,subscription:p};this.contexts.push(f);var m=u.subscribeToResult(this,d,f);m.closed?this.closeWindow(this.contexts.length-1):(m.context=f,p.add(m)),this.destination.next(h)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,r=t[e],n=r.window,i=r.subscription;t.splice(e,1),n.complete(),i.unsubscribe()}},t}(c.OuterSubscriber)},529:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8314),o=r(6447),s=r(4456),a=r(3147),c=r(8794);t.windowWhen=function(e){return this.lift(new u(e))};var u=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.closingSelector))},e}(),l=function(e){function t(t,r){e.call(this,t),this.destination=t,this.closingSelector=r,this.openWindow()}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.openWindow(i)},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var r=this.window=new i.Subject;this.destination.next(r);var n=o.tryCatch(this.closingSelector)();if(n===s.errorObject){var a=s.errorObject.e;this.destination.error(a),this.window.error(a)}else this.add(this.closingNotification=c.subscribeToResult(this,n))},t}(a.OuterSubscriber)},9090:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),o=r(8794);t.withLatestFrom=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];"function"==typeof t[t.length-1]&&(e=t.pop());var n=t;return this.lift(new s(n,e))};var s=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.observables,this.project))},e}(),a=function(e){function t(t,r,n){e.call(this,t),this.observables=r,this.project=n,this.toRespond=[];var i=r.length;this.values=new Array(i);for(var s=0;s<i;s++)this.toRespond.push(s);for(s=0;s<i;s++){var a=r[s];this.add(o.subscribeToResult(this,a,a,s))}}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.values[r]=t;var o=this.toRespond;if(o.length>0){var s=o.indexOf(r);-1!==s&&o.splice(s,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.OuterSubscriber)},8655:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3418),o=r(5936),s=r(5239),a=r(3147),c=r(8794),u=r(5810);function l(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e[e.length-1];return"function"==typeof r&&e.pop(),new i.ArrayObservable(e).lift(new d(r))}t.zipProto=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(l.apply(void 0,[this].concat(e)))},t.zipStatic=l;var d=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new h(e,this.project))},e}();t.ZipOperator=d;var h=function(e){function t(t,r,n){void 0===n&&(n=Object.create(null)),e.call(this,t),this.iterators=[],this.active=0,this.project="function"==typeof r?r:null,this.values=n}return n(t,e),t.prototype._next=function(e){var t=this.iterators;o.isArray(e)?t.push(new f(e)):"function"==typeof e[u.iterator]?t.push(new p(e[u.iterator]())):t.push(new m(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(0!==t){this.active=t;for(var r=0;r<t;r++){var n=e[r];n.stillUnsubscribed?this.add(n.subscribe(n,r)):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,r=this.destination,n=0;n<t;n++){if("function"==typeof(s=e[n]).hasValue&&!s.hasValue())return}var i=!1,o=[];for(n=0;n<t;n++){var s,a=(s=e[n]).next();if(s.hasCompleted()&&(i=!0),a.done)return void r.complete();o.push(a.value)}this.project?this._tryProject(o):r.next(o),i&&r.complete()},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(s.Subscriber);t.ZipSubscriber=h;var p=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),f=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[u.iterator]=function(){return this},e.prototype.next=function(e){var t=this.index++,r=this.array;return t<this.length?{value:r[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),m=function(e){function t(t,r,n){e.call(this,t),this.parent=r,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return n(t,e),t.prototype[u.iterator]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return c.subscribeToResult(this,this.observable,this,t)},t}(a.OuterSubscriber)},8841:(e,t,r)=>{"use strict";var n=r(8655);t.zipAll=function(e){return this.lift(new n.ZipOperator(e))}},3896:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r){e.call(this)}return n(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(r(4859).Subscription);t.Action=i},3569:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(2932),o=r(3833),s=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r}return n(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=o.AnimationFrame.requestAnimationFrame(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(o.AnimationFrame.cancelAnimationFrame(r),t.scheduled=void 0)},t}(i.AsyncAction);t.AnimationFrameAction=s},4737:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},t}(r(884).AsyncScheduler);t.AnimationFrameScheduler=i},2808:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(2431),o=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r}return n(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=i.Immediate.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(i.Immediate.clearImmediate(r),t.scheduled=void 0)},t}(r(2932).AsyncAction);t.AsapAction=o},9953:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},t}(r(884).AsyncScheduler);t.AsapScheduler=i},2932:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(7919),o=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r,this.pending=!1}return n(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,t)),this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),i.root.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&this.delay===r)return t;i.root.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r=!1,n=void 0;try{this.work(e)}catch(e){r=!0,n=!!e&&e||new Error(e)}if(r)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,r=t.actions,n=r.indexOf(this);this.work=null,this.delay=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null))},t}(r(3896).Action);t.AsyncAction=o},884:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return n(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(r(3422).Scheduler);t.AsyncScheduler=i},1807:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r}return n(t,e),t.prototype.schedule=function(t,r){return void 0===r&&(r=0),r>0?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?e.prototype.requestAsyncId.call(this,t,r,n):t.flush(this)},t}(r(2932).AsyncAction);t.QueueAction=i},2824:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(r(884).AsyncScheduler);t.QueueScheduler=i},6576:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(2932),o=function(e){function t(t,r){var n=this;void 0===t&&(t=s),void 0===r&&(r=Number.POSITIVE_INFINITY),e.call(this,t,(function(){return n.frame})),this.maxFrames=r,this.frame=0,this.index=-1}return n(t,e),t.prototype.flush=function(){for(var e,t,r=this.actions,n=this.maxFrames;(t=r.shift())&&(this.frame=t.delay)<=n&&!(e=t.execute(t.state,t.delay)););if(e){for(;t=r.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(r(884).AsyncScheduler);t.VirtualTimeScheduler=o;var s=function(e){function t(t,r,n){void 0===n&&(n=t.index+=1),e.call(this,t,r),this.scheduler=t,this.work=r,this.index=n,this.active=!0,this.index=t.index=n}return n(t,e),t.prototype.schedule=function(r,n){if(void 0===n&&(n=0),!this.id)return e.prototype.schedule.call(this,r,n);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(r,n)},t.prototype.requestAsyncId=function(e,r,n){void 0===n&&(n=0),this.delay=e.frame+n;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,r){void 0===r&&(r=0)},t.prototype._execute=function(t,r){if(!0===this.active)return e.prototype._execute.call(this,t,r)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(i.AsyncAction);t.VirtualAction=s},4401:(e,t,r)=>{"use strict";var n=r(3569),i=r(4737);t.animationFrame=new i.AnimationFrameScheduler(n.AnimationFrameAction)},2664:(e,t,r)=>{"use strict";var n=r(2808),i=r(9953);t.asap=new i.AsapScheduler(n.AsapAction)},8404:(e,t,r)=>{"use strict";var n=r(2932),i=r(884);t.async=new i.AsyncScheduler(n.AsyncAction)},9082:(e,t,r)=>{"use strict";var n=r(1807),i=r(2824);t.queue=new i.QueueScheduler(n.QueueAction)},5810:(e,t,r)=>{"use strict";var n=r(7919);function i(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var r=e.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=e.Map;if(n)for(var i=Object.getOwnPropertyNames(n.prototype),o=0;o<i.length;++o){var s=i[o];if("entries"!==s&&"size"!==s&&n.prototype[s]===n.prototype.entries)return s}return"@@iterator"}t.symbolIteratorPonyfill=i,t.iterator=i(n.root),t.$$iterator=t.iterator},683:(e,t,r)=>{"use strict";var n=r(7919);function i(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}t.getSymbolObservable=i,t.observable=i(n.root),t.$$observable=t.observable},2992:(e,t,r)=>{"use strict";var n=r(7919).root.Symbol;t.rxSubscriber="function"==typeof n&&"function"==typeof n.for?n.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber},2488:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),o=r(4859),s=r(3537),a=r(4835),c=function(e){function t(t,r){e.call(this,(function(e){var t=this,r=t.logSubscribedFrame();return e.add(new o.Subscription((function(){t.logUnsubscribedFrame(r)}))),t.scheduleMessages(e),e})),this.messages=t,this.subscriptions=[],this.scheduler=r}return n(t,e),t.prototype.scheduleMessages=function(e){for(var t=this.messages.length,r=0;r<t;r++){var n=this.messages[r];e.add(this.scheduler.schedule((function(e){var t=e.message,r=e.subscriber;t.notification.observe(r)}),n.frame,{message:n,subscriber:e}))}},t}(i.Observable);t.ColdObservable=c,a.applyMixins(c,[s.SubscriptionLoggable])},3839:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8314),o=r(4859),s=r(3537),a=r(4835),c=function(e){function t(t,r){e.call(this),this.messages=t,this.subscriptions=[],this.scheduler=r}return n(t,e),t.prototype._subscribe=function(t){var r=this,n=r.logSubscribedFrame();return t.add(new o.Subscription((function(){r.logUnsubscribedFrame(n)}))),e.prototype._subscribe.call(this,t)},t.prototype.setup=function(){for(var e=this,t=e.messages.length,r=0;r<t;r++)!function(){var t=e.messages[r];e.scheduler.schedule((function(){t.notification.observe(e)}),t.frame)}()},t}(i.Subject);t.HotObservable=c,a.applyMixins(c,[s.SubscriptionLoggable])},9080:(e,t)=>{"use strict";var r=function(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.subscribedFrame=e,this.unsubscribedFrame=t};t.SubscriptionLog=r},3537:(e,t,r)=>{"use strict";var n=r(9080),i=function(){function e(){this.subscriptions=[]}return e.prototype.logSubscribedFrame=function(){return this.subscriptions.push(new n.SubscriptionLog(this.scheduler.now())),this.subscriptions.length-1},e.prototype.logUnsubscribedFrame=function(e){var t=this.subscriptions,r=t[e];t[e]=new n.SubscriptionLog(r.subscribedFrame,this.scheduler.now())},e}();t.SubscriptionLoggable=i},7738:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),o=r(8270),s=r(2488),a=r(3839),c=r(9080),u=r(6576),l=function(e){function t(t){e.call(this,u.VirtualAction,750),this.assertDeepEqual=t,this.hotObservables=[],this.coldObservables=[],this.flushTests=[]}return n(t,e),t.prototype.createTime=function(e){var r=e.indexOf("|");if(-1===r)throw new Error('marble diagram for time should have a completion marker "|"');return r*t.frameTimeFactor},t.prototype.createColdObservable=function(e,r,n){if(-1!==e.indexOf("^"))throw new Error('cold observable cannot have subscription offset "^"');if(-1!==e.indexOf("!"))throw new Error('cold observable cannot have unsubscription marker "!"');var i=t.parseMarbles(e,r,n),o=new s.ColdObservable(i,this);return this.coldObservables.push(o),o},t.prototype.createHotObservable=function(e,r,n){if(-1!==e.indexOf("!"))throw new Error('hot observable cannot have unsubscription marker "!"');var i=t.parseMarbles(e,r,n),o=new a.HotObservable(i,this);return this.hotObservables.push(o),o},t.prototype.materializeInnerObservable=function(e,t){var r=this,n=[];return e.subscribe((function(e){n.push({frame:r.frame-t,notification:o.Notification.createNext(e)})}),(function(e){n.push({frame:r.frame-t,notification:o.Notification.createError(e)})}),(function(){n.push({frame:r.frame-t,notification:o.Notification.createComplete()})})),n},t.prototype.expectObservable=function(e,r){var n=this;void 0===r&&(r=null);var s,a=[],c={actual:a,ready:!1},u=t.parseMarblesAsSubscriptions(r).unsubscribedFrame;return this.schedule((function(){s=e.subscribe((function(e){var t=e;e instanceof i.Observable&&(t=n.materializeInnerObservable(t,n.frame)),a.push({frame:n.frame,notification:o.Notification.createNext(t)})}),(function(e){a.push({frame:n.frame,notification:o.Notification.createError(e)})}),(function(){a.push({frame:n.frame,notification:o.Notification.createComplete()})}))}),0),u!==Number.POSITIVE_INFINITY&&this.schedule((function(){return s.unsubscribe()}),u),this.flushTests.push(c),{toBe:function(e,r,n){c.ready=!0,c.expected=t.parseMarbles(e,r,n,!0)}}},t.prototype.expectSubscriptions=function(e){var r={actual:e,ready:!1};return this.flushTests.push(r),{toBe:function(e){var n="string"==typeof e?[e]:e;r.ready=!0,r.expected=n.map((function(e){return t.parseMarblesAsSubscriptions(e)}))}}},t.prototype.flush=function(){for(var t=this.hotObservables;t.length>0;)t.shift().setup();e.prototype.flush.call(this);for(var r=this.flushTests.filter((function(e){return e.ready}));r.length>0;){var n=r.shift();this.assertDeepEqual(n.actual,n.expected)}},t.parseMarblesAsSubscriptions=function(e){if("string"!=typeof e)return new c.SubscriptionLog(Number.POSITIVE_INFINITY);for(var t=e.length,r=-1,n=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,o=0;o<t;o++){var s=o*this.frameTimeFactor,a=e[o];switch(a){case"-":case" ":break;case"(":r=s;break;case")":r=-1;break;case"^":if(n!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");n=r>-1?r:s;break;case"!":if(i!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");i=r>-1?r:s;break;default:throw new Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+a+"'.")}}return i<0?new c.SubscriptionLog(n):new c.SubscriptionLog(n,i)},t.parseMarbles=function(e,t,r,n){if(void 0===n&&(n=!1),-1!==e.indexOf("!"))throw new Error('conventional marble diagrams cannot have the unsubscription marker "!"');for(var i=e.length,a=[],c=e.indexOf("^"),u=-1===c?0:c*-this.frameTimeFactor,l="object"!=typeof t?function(e){return e}:function(e){return n&&t[e]instanceof s.ColdObservable?t[e].messages:t[e]},d=-1,h=0;h<i;h++){var p=h*this.frameTimeFactor+u,f=void 0,m=e[h];switch(m){case"-":case" ":case"^":break;case"(":d=p;break;case")":d=-1;break;case"|":f=o.Notification.createComplete();break;case"#":f=o.Notification.createError(r||"error");break;default:f=o.Notification.createNext(l(m))}f&&a.push({frame:d>-1?d:p,notification:f})}return a},t}(u.VirtualTimeScheduler);t.TestScheduler=l},3833:(e,t,r)=>{"use strict";var n=r(7919),i=function(e){e.requestAnimationFrame?(this.cancelAnimationFrame=e.cancelAnimationFrame.bind(e),this.requestAnimationFrame=e.requestAnimationFrame.bind(e)):e.mozRequestAnimationFrame?(this.cancelAnimationFrame=e.mozCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.mozRequestAnimationFrame.bind(e)):e.webkitRequestAnimationFrame?(this.cancelAnimationFrame=e.webkitCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.webkitRequestAnimationFrame.bind(e)):e.msRequestAnimationFrame?(this.cancelAnimationFrame=e.msCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.msRequestAnimationFrame.bind(e)):e.oRequestAnimationFrame?(this.cancelAnimationFrame=e.oCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.oRequestAnimationFrame.bind(e)):(this.cancelAnimationFrame=e.clearTimeout.bind(e),this.requestAnimationFrame=function(t){return e.setTimeout(t,1e3/60)})};t.RequestAnimationFrameDefinition=i,t.AnimationFrame=new i(n.root)},521:function(e,t){"use strict";var r=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=function(e){function t(){var t=e.call(this,"argument out of range");this.name=t.name="ArgumentOutOfRangeError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);t.ArgumentOutOfRangeError=n},2107:function(e,t){"use strict";var r=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=function(e){function t(){var t=e.call(this,"no elements in sequence");this.name=t.name="EmptyError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);t.EmptyError=n},1741:(e,t)=>{"use strict";var r=function(){function e(){this.values={}}return e.prototype.delete=function(e){return this.values[e]=null,!0},e.prototype.set=function(e,t){return this.values[e]=t,this},e.prototype.get=function(e){return this.values[e]},e.prototype.forEach=function(e,t){var r=this.values;for(var n in r)r.hasOwnProperty(n)&&null!==r[n]&&e.call(t,r[n],n)},e.prototype.clear=function(){this.values={}},e}();t.FastMap=r},2431:(e,t,r)=>{"use strict";var n=r(7919),i=function(){function e(e){if(this.root=e,e.setImmediate&&"function"==typeof e.setImmediate)this.setImmediate=e.setImmediate.bind(e),this.clearImmediate=e.clearImmediate.bind(e);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate();var t=function e(t){delete e.instance.tasksByHandle[t]};t.instance=this,this.clearImmediate=t}}return e.prototype.identify=function(e){return this.root.Object.prototype.toString.call(e)},e.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)},e.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)},e.prototype.canUseReadyStateChange=function(){var e=this.root.document;return Boolean(e&&"onreadystatechange"in e.createElement("script"))},e.prototype.canUsePostMessage=function(){var e=this.root;if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}return!1},e.prototype.partiallyApplied=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=function e(){var t=e.handler,r=e.args;"function"==typeof t?t.apply(void 0,r):new Function(""+t)()};return n.handler=e,n.args=t,n},e.prototype.addFromSetImmediateArguments=function(e){return this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,e),this.nextHandle++},e.prototype.createProcessNextTickSetImmediate=function(){var e=function e(){var t=e.instance,r=t.addFromSetImmediateArguments(arguments);return t.root.process.nextTick(t.partiallyApplied(t.runIfPresent,r)),r};return e.instance=this,e},e.prototype.createPostMessageSetImmediate=function(){var e=this.root,t="setImmediate$"+e.Math.random()+"$",r=function r(n){var i=r.instance;n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i.runIfPresent(+n.data.slice(t.length))};r.instance=this,e.addEventListener("message",r,!1);var n=function e(){var t=e,r=t.messagePrefix,n=t.instance,i=n.addFromSetImmediateArguments(arguments);return n.root.postMessage(r+i,"*"),i};return n.instance=this,n.messagePrefix=t,n},e.prototype.runIfPresent=function(e){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,e),0);else{var t=this.tasksByHandle[e];if(t){this.currentlyRunningATask=!0;try{t()}finally{this.clearImmediate(e),this.currentlyRunningATask=!1}}}},e.prototype.createMessageChannelSetImmediate=function(){var e=this,t=new this.root.MessageChannel;t.port1.onmessage=function(t){var r=t.data;e.runIfPresent(r)};var r=function e(){var t=e,r=t.channel,n=t.instance,i=n.addFromSetImmediateArguments(arguments);return r.port2.postMessage(i),i};return r.channel=t,r.instance=this,r},e.prototype.createReadyStateChangeSetImmediate=function(){var e=function e(){var t=e.instance,r=t.root,n=r.document,i=n.documentElement,o=t.addFromSetImmediateArguments(arguments),s=n.createElement("script");return s.onreadystatechange=function(){t.runIfPresent(o),s.onreadystatechange=null,i.removeChild(s),s=null},i.appendChild(s),o};return e.instance=this,e},e.prototype.createSetTimeoutSetImmediate=function(){var e=function e(){var t=e.instance,r=t.addFromSetImmediateArguments(arguments);return t.root.setTimeout(t.partiallyApplied(t.runIfPresent,r),0),r};return e.instance=this,e},e}();t.ImmediateDefinition=i,t.Immediate=new i(n.root)},5205:(e,t,r)=>{"use strict";var n=r(7919),i=r(4846);t.Map=n.root.Map||i.MapPolyfill},4846:(e,t)=>{"use strict";var r=function(){function e(){this.size=0,this._values=[],this._keys=[]}return e.prototype.get=function(e){var t=this._keys.indexOf(e);return-1===t?void 0:this._values[t]},e.prototype.set=function(e,t){var r=this._keys.indexOf(e);return-1===r?(this._keys.push(e),this._values.push(t),this.size++):this._values[r]=t,this},e.prototype.delete=function(e){var t=this._keys.indexOf(e);return-1!==t&&(this._values.splice(t,1),this._keys.splice(t,1),this.size--,!0)},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},e.prototype.forEach=function(e,t){for(var r=0;r<this.size;r++)e.call(t,this._values[r],this._keys[r])},e}();t.MapPolyfill=r},7376:function(e,t){"use strict";var r=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);t.ObjectUnsubscribedError=n},6900:(e,t,r)=>{"use strict";var n=r(7919);function i(){return function(){function e(){this._values=[]}return e.prototype.add=function(e){this.has(e)||this._values.push(e)},e.prototype.has=function(e){return-1!==this._values.indexOf(e)},Object.defineProperty(e.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._values.length=0},e}()}t.minimalSetImpl=i,t.Set=n.root.Set||i()},4333:function(e,t){"use strict";var r=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=function(e){function t(){var t=e.call(this,"Timeout has occurred");this.name=t.name="TimeoutError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);t.TimeoutError=n},6288:function(e,t){"use strict";var r=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=function(e){function t(t){e.call(this),this.errors=t;var r=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return r(t,e),t}(Error);t.UnsubscriptionError=n},4835:(e,t)=>{"use strict";t.applyMixins=function(e,t){for(var r=0,n=t.length;r<n;r++)for(var i=t[r],o=Object.getOwnPropertyNames(i.prototype),s=0,a=o.length;s<a;s++){var c=o[s];e.prototype[c]=i.prototype[c]}}},2682:(e,t,r)=>{"use strict";var n=r(7919);function i(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=t.length,i=0;i<n;i++){var o=t[i];for(var s in o)o.hasOwnProperty(s)&&(e[s]=o[s])}return e}function o(e){return e.Object.assign||i}t.assignImpl=i,t.getAssign=o,t.assign=o(n.root)},4456:(e,t)=>{"use strict";t.errorObject={e:{}}},5936:(e,t)=>{"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},2900:(e,t)=>{"use strict";t.isArrayLike=function(e){return e&&"number"==typeof e.length}},1589:(e,t)=>{"use strict";t.isDate=function(e){return e instanceof Date&&!isNaN(+e)}},1404:(e,t)=>{"use strict";t.isFunction=function(e){return"function"==typeof e}},3523:(e,t,r)=>{"use strict";var n=r(5936);t.isNumeric=function(e){return!n.isArray(e)&&e-parseFloat(e)+1>=0}},7620:(e,t)=>{"use strict";t.isObject=function(e){return null!=e&&"object"==typeof e}},338:(e,t)=>{"use strict";t.isPromise=function(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}},93:(e,t)=>{"use strict";t.isScheduler=function(e){return e&&"function"==typeof e.schedule}},4985:(e,t)=>{"use strict";t.noop=function(){}},1088:(e,t)=>{"use strict";t.not=function(e,t){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=e,r.thisArg=t,r}},7919:(e,t)=>{"use strict";if(t.root="object"==typeof window&&window.window===window&&window||"object"==typeof self&&self.self===self&&self||!1,!t.root)throw new Error("RxJS could not find any global context (window, self, global)")},8794:(e,t,r)=>{"use strict";var n=r(7919),i=r(2900),o=r(338),s=r(7620),a=r(5100),c=r(5810),u=r(7056),l=r(683);t.subscribeToResult=function(e,t,r,d){var h=new u.InnerSubscriber(e,r,d);if(h.closed)return null;if(t instanceof a.Observable)return t._isScalar?(h.next(t.value),h.complete(),null):t.subscribe(h);if(i.isArrayLike(t)){for(var p=0,f=t.length;p<f&&!h.closed;p++)h.next(t[p]);h.closed||h.complete()}else{if(o.isPromise(t))return t.then((function(e){h.closed||(h.next(e),h.complete())}),(function(e){return h.error(e)})).then(null,(function(e){n.root.setTimeout((function(){throw e}))})),h;if(t&&"function"==typeof t[c.iterator])for(var m=t[c.iterator]();;){var v=m.next();if(v.done){h.complete();break}if(h.next(v.value),h.closed)break}else if(t&&"function"==typeof t[l.observable]){var g=t[l.observable]();if("function"==typeof g.subscribe)return g.subscribe(new u.InnerSubscriber(e,r,d));h.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var y="You provided "+(s.isObject(t)?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";h.error(new TypeError(y))}}return null}},9510:(e,t,r)=>{"use strict";var n=r(5239),i=r(2992),o=r(2320);t.toSubscriber=function(e,t,r){if(e){if(e instanceof n.Subscriber)return e;if(e[i.rxSubscriber])return e[i.rxSubscriber]()}return e||t||r?new n.Subscriber(e,t,r):new n.Subscriber(o.empty)}},6447:(e,t,r)=>{"use strict";var n,i=r(4456);function o(){try{return n.apply(this,arguments)}catch(e){return i.errorObject.e=e,i.errorObject}}t.tryCatch=function(e){return n=e,o}},9945:function(e){var t,r,n,i,o;t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=o.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var s=o.parseURL(t);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return n.alwaysNormalize?(s.path=o.normalizePath(s.path),o.buildURLFromParts(s)):t;var a=o.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var c=r.exec(a.path);a.netLoc=c[1],a.path=c[2]}a.netLoc&&!a.path&&(a.path="/");var u={scheme:a.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(u.netLoc=a.netLoc,"/"!==s.path[0]))if(s.path){var l=a.path,d=l.substring(0,l.lastIndexOf("/")+1)+s.path;u.path=o.normalizePath(d)}else u.path=a.path,s.params||(u.params=a.params,s.query||(u.query=a.query));return null===u.path&&(u.path=n.alwaysNormalize?o.normalizePath(s.path):s.path),o.buildURLFromParts(u)},parseURL:function(e){var r=t.exec(e);return r?{scheme:r[1]||"",netLoc:r[2]||"",path:r[3]||"",params:r[4]||"",query:r[5]||"",fragment:r[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(i,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=o},5387:function(e){
/**
 * @license
 * Video.js 7.2.4 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/master/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 */
e.exports=function(){var e="7.2.4",t="undefined"!=typeof window?window:"undefined"!=typeof self?self:{};function r(e,t){return e(t={exports:{}},t.exports),t.exports}var n,i="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},o={},s=Object.freeze({default:o}),a=s&&o||s,c=void 0!==t?t:"undefined"!=typeof window?window:{};"undefined"!=typeof document?n=document:(n=c["__GLOBAL_DOCUMENT_CACHE@4"])||(n=c["__GLOBAL_DOCUMENT_CACHE@4"]=a);var u=n,l=void 0,d="info",h=[],p=function(e,t){var r=l.levels[d],n=new RegExp("^("+r+")$");if("log"!==e&&t.unshift(e.toUpperCase()+":"),h&&h.push([].concat(t)),t.unshift("VIDEOJS:"),i.console){var o=i.console[e];o||"debug"!==e||(o=i.console.info||i.console.log),o&&r&&n.test(e)&&o[Array.isArray(t)?"apply":"call"](i.console,t)}};l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];p("log",t)},l.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:d},l.level=function(e){if("string"==typeof e){if(!l.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');d=e}return d},l.history=function(){return h?[].concat(h):[]},l.history.clear=function(){h&&(h.length=0)},l.history.disable=function(){null!==h&&(h.length=0,h=null)},l.history.enable=function(){null===h&&(h=[])},l.error=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return p("error",t)},l.warn=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return p("warn",t)},l.debug=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return p("debug",t)};var f=l;function m(e){return e.replace(/\n\r?\s*/g,"")}var v=function(e){for(var t="",r=0;r<arguments.length;r++)t+=m(e[r])+(arguments[r+1]||"");return t},g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},b=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},_=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},T=function(e,t){return e.raw=t,e},w=Object.prototype.toString,S=function(e){return k(e)?Object.keys(e):[]};function C(e,t){S(e).forEach((function(r){return t(e[r],r)}))}function E(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return S(e).reduce((function(r,n){return t(r,e[n],n)}),r)}function O(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Object.assign?Object.assign.apply(Object,[e].concat(r)):(r.forEach((function(t){t&&C(t,(function(t,r){e[r]=t}))})),e)}function k(e){return!!e&&"object"===(void 0===e?"undefined":g(e))}function x(e){return k(e)&&"[object Object]"===w.call(e)&&e.constructor===Object}function A(e,t){if(!e||!t)return"";if("function"==typeof i.getComputedStyle){var r=i.getComputedStyle(e);return r?r[t]:""}return""}var P=T(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);function I(e){return"string"==typeof e&&/\S/.test(e)}function M(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function L(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}function D(){return u===i.document}function R(e){return k(e)&&1===e.nodeType}function N(){try{return i.parent!==i.self}catch(e){return!0}}function j(e){return function(t,r){if(!I(t))return u[e](null);I(r)&&(r=u.querySelector(r));var n=R(r)?r:u;return n[e]&&n[e](t)}}function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],i=u.createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){var r=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(f.warn(v(P,e,r)),i.setAttribute(e,r)):"textContent"===e?F(i,r):i[e]=r})),Object.getOwnPropertyNames(r).forEach((function(e){i.setAttribute(e,r[e])})),n&&ie(i,n),i}function F(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function $(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function B(e,t){return M(t),e.classList?e.classList.contains(t):L(t).test(e.className)}function V(e,t){return e.classList?e.classList.add(t):B(e,t)||(e.className=(e.className+" "+t).trim()),e}function q(e,t){return e.classList?e.classList.remove(t):(M(t),e.className=e.className.split(/\s+/).filter((function(e){return e!==t})).join(" ")),e}function H(e,t,r){var n=B(e,t);if("function"==typeof r&&(r=r(e,t)),"boolean"!=typeof r&&(r=!n),r!==n)return r?V(e,t):q(e,t),e}function W(e,t){Object.getOwnPropertyNames(t).forEach((function(r){var n=t[r];null==n||!1===n?e.removeAttribute(r):e.setAttribute(r,!0===n?"":n)}))}function z(e){var t={},r=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&e.attributes.length>0)for(var n=e.attributes,i=n.length-1;i>=0;i--){var o=n[i].name,s=n[i].value;"boolean"!=typeof e[o]&&-1===r.indexOf(","+o+",")||(s=null!==s),t[o]=s}return t}function G(e,t){return e.getAttribute(t)}function K(e,t,r){e.setAttribute(t,r)}function X(e,t){e.removeAttribute(t)}function Y(){u.body.focus(),u.onselectstart=function(){return!1}}function Q(){u.onselectstart=function(){return!0}}function J(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),r={};return["bottom","height","left","right","top","width"].forEach((function(e){void 0!==t[e]&&(r[e]=t[e])})),r.height||(r.height=parseFloat(A(e,"height"))),r.width||(r.width=parseFloat(A(e,"width"))),r}}function Z(e){var t=void 0;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var r=u.documentElement,n=u.body,o=r.clientLeft||n.clientLeft||0,s=i.pageXOffset||n.scrollLeft,a=t.left+s-o,c=r.clientTop||n.clientTop||0,l=i.pageYOffset||n.scrollTop,d=t.top+l-c;return{left:Math.round(a),top:Math.round(d)}}function ee(e,t){var r={},n=Z(e),i=e.offsetWidth,o=e.offsetHeight,s=n.top,a=n.left,c=t.pageY,u=t.pageX;return t.changedTouches&&(u=t.changedTouches[0].pageX,c=t.changedTouches[0].pageY),r.y=Math.max(0,Math.min(1,(s-c+o)/o)),r.x=Math.max(0,Math.min(1,(u-a)/i)),r}function te(e){return k(e)&&3===e.nodeType}function re(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function ne(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((function(e){return"function"==typeof e&&(e=e()),R(e)||te(e)?e:"string"==typeof e&&/\S/.test(e)?u.createTextNode(e):void 0})).filter((function(e){return e}))}function ie(e,t){return ne(t).forEach((function(t){return e.appendChild(t)})),e}function oe(e,t){return ie(re(e),t)}function se(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||0===e.button&&1===e.buttons}var ae=j("querySelector"),ce=j("querySelectorAll"),ue=Object.freeze({isReal:D,isEl:R,isInFrame:N,createEl:U,textContent:F,prependTo:$,hasClass:B,addClass:V,removeClass:q,toggleClass:H,setAttributes:W,getAttributes:z,getAttribute:G,setAttribute:K,removeAttribute:X,blockTextSelection:Y,unblockTextSelection:Q,getBoundingClientRect:J,findPosition:Z,getPointerPosition:ee,isTextNode:te,emptyEl:re,normalizeContent:ne,appendContent:ie,insertContent:oe,isSingleLeftClick:se,$:ae,$$:ce}),le=1;function de(){return le++}var he={},pe="vdata"+(new Date).getTime();function fe(e){var t=e[pe];return t||(t=e[pe]=de()),he[t]||(he[t]={}),he[t]}function me(e){var t=e[pe];return!!t&&!!Object.getOwnPropertyNames(he[t]).length}function ve(e){var t=e[pe];if(t){delete he[t];try{delete e[pe]}catch(t){e.removeAttribute?e.removeAttribute(pe):e[pe]=null}}}function ge(e,t){var r=fe(e);0===r.handlers[t].length&&(delete r.handlers[t],e.removeEventListener?e.removeEventListener(t,r.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,r.dispatcher)),Object.getOwnPropertyNames(r.handlers).length<=0&&(delete r.handlers,delete r.dispatcher,delete r.disabled),0===Object.getOwnPropertyNames(r).length&&ve(e)}function ye(e,t,r,n){r.forEach((function(r){e(t,r,n)}))}function be(e){function t(){return!0}function r(){return!1}if(!e||!e.isPropagationStopped){var n=e||i.event;for(var o in e={},n)"layerX"!==o&&"layerY"!==o&&"keyLocation"!==o&&"webkitMovementX"!==o&&"webkitMovementY"!==o&&("returnValue"===o&&n.preventDefault||(e[o]=n[o]));if(e.target||(e.target=e.srcElement||u),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){n.preventDefault&&n.preventDefault(),e.returnValue=!1,n.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),e.cancelBubble=!0,n.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=r,e.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=r,null!==e.clientX&&void 0!==e.clientX){var s=u.documentElement,a=u.body;e.pageX=e.clientX+(s&&s.scrollLeft||a&&a.scrollLeft||0)-(s&&s.clientLeft||a&&a.clientLeft||0),e.pageY=e.clientY+(s&&s.scrollTop||a&&a.scrollTop||0)-(s&&s.clientTop||a&&a.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}var _e=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function(){_e=!0}});i.addEventListener("test",null,e),i.removeEventListener("test",null,e)}catch(e){}}();var Te=["touchstart","touchmove"];function we(e,t,r){if(Array.isArray(t))return ye(we,e,t,r);var n=fe(e);if(n.handlers||(n.handlers={}),n.handlers[t]||(n.handlers[t]=[]),r.guid||(r.guid=de()),n.handlers[t].push(r),n.dispatcher||(n.disabled=!1,n.dispatcher=function(t,r){if(!n.disabled){t=be(t);var i=n.handlers[t.type];if(i)for(var o=i.slice(0),s=0,a=o.length;s<a&&!t.isImmediatePropagationStopped();s++)try{o[s].call(e,t,r)}catch(e){f.error(e)}}}),1===n.handlers[t].length)if(e.addEventListener){var i=!1;_e&&Te.indexOf(t)>-1&&(i={passive:!0}),e.addEventListener(t,n.dispatcher,i)}else e.attachEvent&&e.attachEvent("on"+t,n.dispatcher)}function Se(e,t,r){if(me(e)){var n=fe(e);if(n.handlers){if(Array.isArray(t))return ye(Se,e,t,r);var i=function(e,t){n.handlers[t]=[],ge(e,t)};if(void 0!==t){var o=n.handlers[t];if(o)if(r){if(r.guid)for(var s=0;s<o.length;s++)o[s].guid===r.guid&&o.splice(s--,1);ge(e,t)}else i(e,t)}else for(var a in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},a)&&i(e,a)}}}function Ce(e,t,r){var n=me(e)?fe(e):{},i=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=be(t),n.dispatcher&&n.dispatcher.call(e,t,r),i&&!t.isPropagationStopped()&&!0===t.bubbles)Ce.call(null,i,t,r);else if(!i&&!t.defaultPrevented){var o=fe(t.target);t.target[t.type]&&(o.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),o.disabled=!1)}return!t.defaultPrevented}function Ee(e,t,r){if(Array.isArray(t))return ye(Ee,e,t,r);var n=function n(){Se(e,t,n),r.apply(this,arguments)};n.guid=r.guid=r.guid||de(),we(e,t,n)}var Oe=Object.freeze({fixEvent:be,on:we,off:Se,trigger:Ce,one:Ee}),ke=!1,xe=void 0,Ae=function(){if(D()&&!1!==xe.options.autoSetup){var e=Array.prototype.slice.call(u.getElementsByTagName("video")),t=Array.prototype.slice.call(u.getElementsByTagName("audio")),r=Array.prototype.slice.call(u.getElementsByTagName("video-js")),n=e.concat(t,r);if(n&&n.length>0)for(var i=0,o=n.length;i<o;i++){var s=n[i];if(!s||!s.getAttribute){Pe(1);break}void 0===s.player&&null!==s.getAttribute("data-setup")&&xe(s)}else ke||Pe(1)}};function Pe(e,t){t&&(xe=t),i.setTimeout(Ae,e)}D()&&"complete"===u.readyState?ke=!0:Ee(i,"load",(function(){ke=!0}));var Ie=function(e){var t=u.createElement("style");return t.className=e,t},Me=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},Le=function(e,t,r){t.guid||(t.guid=de());var n=function(){return t.apply(e,arguments)};return n.guid=r?r+"_"+t.guid:t.guid,n},De=function(e,t){var r=Date.now(),n=function(){var n=Date.now();n-r>=t&&(e.apply(void 0,arguments),r=n)};return n},Re=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i,o=void 0,s=function(){n.clearTimeout(o),o=null},a=function(){var i=this,s=arguments,a=function(){o=null,a=null,r||e.apply(i,s)};!o&&r&&e.apply(i,s),n.clearTimeout(o),o=n.setTimeout(a,t)};return a.cancel=s,a},Ne=function(){};Ne.prototype.allowedEvents_={},Ne.prototype.on=function(e,t){var r=this.addEventListener;this.addEventListener=function(){},we(this,e,t),this.addEventListener=r},Ne.prototype.addEventListener=Ne.prototype.on,Ne.prototype.off=function(e,t){Se(this,e,t)},Ne.prototype.removeEventListener=Ne.prototype.off,Ne.prototype.one=function(e,t){var r=this.addEventListener;this.addEventListener=function(){},Ee(this,e,t),this.addEventListener=r},Ne.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=be(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),Ce(this,e)},Ne.prototype.dispatchEvent=Ne.prototype.trigger;var je=void 0;Ne.prototype.queueTrigger=function(e){var t=this;je||(je=new Map);var r=e.type||e,n=je.get(this);n||(n=new Map,je.set(this,n));var o=n.get(r);n.delete(r),i.clearTimeout(o);var s=i.setTimeout((function(){0===n.size&&(n=null,je.delete(t)),t.trigger(e)}),0);n.set(r,s)};var Ue=function(e){return e instanceof Ne||!!e.eventBusEl_&&["on","one","off","trigger"].every((function(t){return"function"==typeof e[t]}))},Fe=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},$e=function(e){if(!e.nodeName&&!Ue(e))throw new Error("Invalid target; must be a DOM node or evented object.")},Be=function(e){if(!Fe(e))throw new Error("Invalid event type; must be a non-empty string or array.")},Ve=function(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")},qe=function(e,t){var r=t.length<3||t[0]===e||t[0]===e.eventBusEl_,n=void 0,i=void 0,o=void 0;return r?(n=e.eventBusEl_,t.length>=3&&t.shift(),i=t[0],o=t[1]):(n=t[0],i=t[1],o=t[2]),$e(n),Be(i),Ve(o),{isTargetingSelf:r,target:n,type:i,listener:o=Le(e,o)}},He=function(e,t,r,n){$e(e),e.nodeName?Oe[t](e,r,n):e[t](r,n)},We={on:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=qe(this,r),o=i.isTargetingSelf,s=i.target,a=i.type,c=i.listener;if(He(s,"on",a,c),!o){var u=function(){return e.off(s,a,c)};u.guid=c.guid;var l=function(){return e.off("dispose",u)};l.guid=c.guid,He(this,"on","dispose",u),He(s,"on","dispose",l)}},one:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=qe(this,r),o=i.isTargetingSelf,s=i.target,a=i.type,c=i.listener;if(o)He(s,"one",a,c);else{var u=function t(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];e.off(s,a,t),c.apply(null,n)};u.guid=c.guid,He(s,"one",a,u)}},off:function(e,t,r){if(!e||Fe(e))Se(this.eventBusEl_,e,t);else{var n=e,i=t;$e(n),Be(i),Ve(r),r=Le(this,r),this.off("dispose",r),n.nodeName?(Se(n,i,r),Se(n,"dispose",r)):Ue(n)&&(n.off(i,r),n.off("dispose",r))}},trigger:function(e,t){return Ce(this.eventBusEl_,e,t)}};function ze(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).eventBusKey;if(t){if(!e[t].nodeName)throw new Error('The eventBusKey "'+t+'" does not refer to an element.');e.eventBusEl_=e[t]}else e.eventBusEl_=U("span",{className:"vjs-event-bus"});return O(e,We),e.on("dispose",(function(){e.off(),i.setTimeout((function(){e.eventBusEl_=null}),0)})),e}var Ge={state:{},setState:function(e){var t=this;"function"==typeof e&&(e=e());var r=void 0;return C(e,(function(e,n){t.state[n]!==e&&((r=r||{})[n]={from:t.state[n],to:e}),t.state[n]=e})),r&&Ue(this)&&this.trigger({changes:r,type:"statechanged"}),r}};function Ke(e,t){return O(e,Ge),e.state=O({},e.state,t),"function"==typeof e.handleStateChanged&&Ue(e)&&e.on("statechanged",e.handleStateChanged),e}function Xe(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}function Ye(e,t){return Xe(e)===Xe(t)}function Qe(){for(var e={},t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach((function(t){t&&C(t,(function(t,r){x(t)?(x(e[r])||(e[r]={}),e[r]=Qe(e[r],t)):e[r]=t}))})),e}var Je=function(){function e(t,r,n){if(y(this,e),!t&&this.play?this.player_=t=this:this.player_=t,this.options_=Qe({},this.options_),r=this.options_=Qe(this.options_,r),this.id_=r.id||r.el&&r.el.id,!this.id_){var i=t&&t.id&&t.id()||"no_player";this.id_=i+"_component_"+de()}this.name_=r.name||null,r.el?this.el_=r.el:!1!==r.createEl&&(this.el_=this.createEl()),!1!==r.evented&&ze(this,{eventBusKey:this.el_?"el_":null}),Ke(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},!1!==r.initChildren&&this.initChildren(),this.ready(n),!1!==r.reportTouchActivity&&this.enableTouchActivity()}return e.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),ve(this.el_),this.el_=null),this.player_=null},e.prototype.player=function(){return this.player_},e.prototype.options=function(e){return f.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e?(this.options_=Qe(this.options_,e),this.options_):this.options_},e.prototype.el=function(){return this.el_},e.prototype.createEl=function(e,t,r){return U(e,t,r)},e.prototype.localize=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),o=i&&i[n],s=n&&n.split("-")[0],a=i&&i[s],c=r;return o&&o[e]?c=o[e]:a&&a[e]&&(c=a[e]),t&&(c=c.replace(/\{(\d+)\}/g,(function(e,r){var n=t[r-1],i=n;return void 0===n&&(i=e),i}))),c},e.prototype.contentEl=function(){return this.contentEl_||this.el_},e.prototype.id=function(){return this.id_},e.prototype.name=function(){return this.name_},e.prototype.children=function(){return this.children_},e.prototype.getChildById=function(e){return this.childIndex_[e]},e.prototype.getChild=function(e){if(e)return e=Xe(e),this.childNameIndex_[e]},e.prototype.addChild=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.children_.length,i=void 0,o=void 0;if("string"==typeof t){o=Xe(t);var s=r.componentClass||o;r.name=o;var a=e.getComponent(s);if(!a)throw new Error("Component "+s+" does not exist");if("function"!=typeof a)return null;i=new a(this.player_||this,r)}else i=t;if(this.children_.splice(n,0,i),"function"==typeof i.id&&(this.childIndex_[i.id()]=i),(o=o||i.name&&Xe(i.name()))&&(this.childNameIndex_[o]=i),"function"==typeof i.el&&i.el()){var c=this.contentEl().children[n]||null;this.contentEl().insertBefore(i.el(),c)}return i},e.prototype.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,r=this.children_.length-1;r>=0;r--)if(this.children_[r]===e){t=!0,this.children_.splice(r,1);break}if(t){this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null;var n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},e.prototype.initChildren=function(){var t=this,r=this.options_.children;if(r){var n=this.options_,i=function(e){var r=e.name,i=e.opts;if(void 0!==n[r]&&(i=n[r]),!1!==i){!0===i&&(i={}),i.playerOptions=t.options_.playerOptions;var o=t.addChild(r,i);o&&(t[r]=o)}},o=void 0,s=e.getComponent("Tech");(o=Array.isArray(r)?r:Object.keys(r)).concat(Object.keys(this.options_).filter((function(e){return!o.some((function(t){return"string"==typeof t?e===t:e===t.name}))}))).map((function(e){var n=void 0,i=void 0;return"string"==typeof e?i=r[n=e]||t.options_[n]||{}:(n=e.name,i=e),{name:n,opts:i}})).filter((function(t){var r=e.getComponent(t.opts.componentClass||Xe(t.name));return r&&!s.isTech(r)})).forEach(i)}},e.prototype.buildCSSClass=function(){return""},e.prototype.ready=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},e.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout((function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)},e.prototype.$=function(e,t){return ae(e,t||this.contentEl())},e.prototype.$$=function(e,t){return ce(e,t||this.contentEl())},e.prototype.hasClass=function(e){return B(this.el_,e)},e.prototype.addClass=function(e){V(this.el_,e)},e.prototype.removeClass=function(e){q(this.el_,e)},e.prototype.toggleClass=function(e,t){H(this.el_,e,t)},e.prototype.show=function(){this.removeClass("vjs-hidden")},e.prototype.hide=function(){this.addClass("vjs-hidden")},e.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")},e.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.prototype.getAttribute=function(e){return G(this.el_,e)},e.prototype.setAttribute=function(e,t){K(this.el_,e,t)},e.prototype.removeAttribute=function(e){X(this.el_,e)},e.prototype.width=function(e,t){return this.dimension("width",e,t)},e.prototype.height=function(e,t){return this.dimension("height",e,t)},e.prototype.dimensions=function(e,t){this.width(e,!0),this.height(t)},e.prototype.dimension=function(e,t,r){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(r||this.trigger("componentresize"));if(!this.el_)return 0;var n=this.el_.style[e],i=n.indexOf("px");return-1!==i?parseInt(n.slice(0,i),10):parseInt(this.el_["offset"+Xe(e)],10)},e.prototype.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if("function"==typeof i.getComputedStyle){var r=i.getComputedStyle(this.el_);t=r.getPropertyValue(e)||r[e]}if(0===(t=parseFloat(t))){var n="offset"+Xe(e);t=this.el_[n]}return t},e.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.prototype.currentWidth=function(){return this.currentDimension("width")},e.prototype.currentHeight=function(){return this.currentDimension("height")},e.prototype.focus=function(){this.el_.focus()},e.prototype.blur=function(){this.el_.blur()},e.prototype.emitTapEvents=function(){var e=0,t=null,r=10,n=200,i=void 0;this.on("touchstart",(function(r){1===r.touches.length&&(t={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},e=(new Date).getTime(),i=!0)})),this.on("touchmove",(function(e){if(e.touches.length>1)i=!1;else if(t){var n=e.touches[0].pageX-t.pageX,o=e.touches[0].pageY-t.pageY;Math.sqrt(n*n+o*o)>r&&(i=!1)}}));var o=function(){i=!1};this.on("touchleave",o),this.on("touchcancel",o),this.on("touchend",(function(r){t=null,!0===i&&(new Date).getTime()-e<n&&(r.preventDefault(),this.trigger("tap"))}))},e.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e=Le(this.player(),this.player().reportUserActivity),t=void 0;this.on("touchstart",(function(){e(),this.clearInterval(t),t=this.setInterval(e,250)}));var r=function(r){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",r),this.on("touchcancel",r)}},e.prototype.setTimeout=function(e,t){var r,n,o=this;return e=Le(this,e),r=i.setTimeout((function(){o.off("dispose",n),e()}),t),(n=function(){return o.clearTimeout(r)}).guid="vjs-timeout-"+r,this.on("dispose",n),r},e.prototype.clearTimeout=function(e){i.clearTimeout(e);var t=function(){};return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},e.prototype.setInterval=function(e,t){var r=this;e=Le(this,e);var n=i.setInterval(e,t),o=function(){return r.clearInterval(n)};return o.guid="vjs-interval-"+n,this.on("dispose",o),n},e.prototype.clearInterval=function(e){i.clearInterval(e);var t=function(){};return t.guid="vjs-interval-"+e,this.off("dispose",t),e},e.prototype.requestAnimationFrame=function(e){var t,r,n=this;return this.supportsRaf_?(e=Le(this,e),t=i.requestAnimationFrame((function(){n.off("dispose",r),e()})),(r=function(){return n.cancelAnimationFrame(t)}).guid="vjs-raf-"+t,this.on("dispose",r),t):this.setTimeout(e,1e3/60)},e.prototype.cancelAnimationFrame=function(e){if(this.supportsRaf_){i.cancelAnimationFrame(e);var t=function(){};return t.guid="vjs-raf-"+e,this.off("dispose",t),e}return this.clearTimeout(e)},e.registerComponent=function(t,r){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var n=e.getComponent("Tech"),i=n&&n.isTech(r),o=e===r||e.prototype.isPrototypeOf(r.prototype);if(i||!o){var s=void 0;throw s=i?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+t+'"; '+s+".")}t=Xe(t),e.components_||(e.components_={});var a=e.getComponent("Player");if("Player"===t&&a&&a.players){var c=a.players,u=Object.keys(c);if(c&&u.length>0&&u.map((function(e){return c[e]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=r,r},e.getComponent=function(t){if(t)return t=Xe(t),e.components_&&e.components_[t]?e.components_[t]:void 0},e}();Je.prototype.supportsRaf_="function"==typeof i.requestAnimationFrame&&"function"==typeof i.cancelAnimationFrame,Je.registerComponent("Component",Je);var Ze,et=i.navigator&&i.navigator.userAgent||"",tt=/AppleWebKit\/([\d.]+)/i.exec(et),rt=tt?parseFloat(tt.pop()):null,nt=/iPad/i.test(et),it=/iPhone/i.test(et)&&!nt,ot=/iPod/i.test(et),st=it||nt||ot,at=(Ze=et.match(/OS (\d+)_/i))&&Ze[1]?Ze[1]:null,ct=/Android/i.test(et),ut=function(){var e=et.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),r=e[2]&&parseFloat(e[2]);return t&&r?parseFloat(e[1]+"."+e[2]):t||null}(),lt=ct&&ut<5&&rt<537,dt=/Firefox/i.test(et),ht=/Edge/i.test(et),pt=!ht&&(/Chrome/i.test(et)||/CriOS/i.test(et)),ft=function(){var e=et.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),mt=function(){var e=/MSIE\s(\d+)\.\d/.exec(et),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(et)&&/rv:11.0/.test(et)&&(t=11),t}(),vt=/Safari/i.test(et)&&!pt&&!ct&&!ht,gt=(vt||st)&&!pt,yt=D()&&("ontouchstart"in i||i.navigator.maxTouchPoints||i.DocumentTouch&&i.document instanceof i.DocumentTouch),bt=Object.freeze({IS_IPAD:nt,IS_IPHONE:it,IS_IPOD:ot,IS_IOS:st,IOS_VERSION:at,IS_ANDROID:ct,ANDROID_VERSION:ut,IS_NATIVE_ANDROID:lt,IS_FIREFOX:dt,IS_EDGE:ht,IS_CHROME:pt,CHROME_VERSION:ft,IE_VERSION:mt,IS_SAFARI:vt,IS_ANY_SAFARI:gt,TOUCH_ENABLED:yt});function _t(e,t,r){if("number"!=typeof t||t<0||t>r)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+r+").")}function Tt(e,t,r,n){return _t(e,n,r.length-1),r[n][t]}function wt(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:Tt.bind(null,"start",0,e),end:Tt.bind(null,"end",1,e)}}function St(e,t){return Array.isArray(e)?wt(e):void 0===e||void 0===t?wt():wt([[e,t]])}function Ct(e,t){var r=0,n=void 0,i=void 0;if(!t)return 0;e&&e.length||(e=St(0,0));for(var o=0;o<e.length;o++)n=e.start(o),(i=e.end(o))>t&&(i=t),r+=i-n;return r/t}for(var Et={},Ot=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],kt=Ot[0],xt=void 0,At=0;At<Ot.length;At++)if(Ot[At][1]in u){xt=Ot[At];break}if(xt)for(var Pt=0;Pt<xt.length;Pt++)Et[kt[Pt]]=xt[Pt];function It(e){if(e instanceof It)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:k(e)&&("number"==typeof e.code&&(this.code=e.code),O(this,e)),this.message||(this.message=It.defaultMessages[this.code]||"")}It.prototype.code=0,It.prototype.message="",It.prototype.status=null,It.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],It.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Mt=0;Mt<It.errorTypes.length;Mt++)It[It.errorTypes[Mt]]=Mt,It.prototype[It.errorTypes[Mt]]=Mt;var Lt=Dt;function Dt(e,t){var r,n=null;try{r=JSON.parse(e,t)}catch(e){n=e}return[n,r]}function Rt(e){return null!=e&&"function"==typeof e.then}function Nt(e){Rt(e)&&e.then(null,(function(e){}))}var jt=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(t,r,n){return e[r]&&(t[r]=e[r]),t}),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))})},Ut=function(e){var t=e.$$("track"),r=Array.prototype.map.call(t,(function(e){return e.track}));return Array.prototype.map.call(t,(function(e){var t=jt(e.track);return e.src&&(t.src=e.src),t})).concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===r.indexOf(e)})).map(jt))},Ft=function(e,t){return e.forEach((function(e){var r=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((function(e){return r.addCue(e)}))})),t.textTracks()},$t={textTracksToJson:Ut,jsonToTextTracks:Ft,trackToJson_:jt},Bt="vjs-modal-dialog",Vt=27,qt=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=U("div",{className:Bt+"-content"},{role:"document"}),i.descEl_=U("p",{className:Bt+"-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),F(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.prototype.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},t.prototype.buildCSSClass=function(){return Bt+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},t.prototype.handleKeyPress=function(e){e.which===Vt&&this.closeable()&&this.close()},t.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")},t.prototype.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},t.prototype.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",Le(this,this.handleKeyPress)),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},t.prototype.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},t.prototype.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",Le(this,this.handleKeyPress)),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},t.prototype.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,r=this.getChild("closeButton");if(t&&!r){var n=this.contentEl_;this.contentEl_=this.el_,r=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(r,"close",this.close)}!t&&r&&(this.off(r,"close",this.close),this.removeChild(r),r.dispose())}return this.closeable_},t.prototype.fill=function(){this.fillWith(this.content())},t.prototype.fillWith=function(e){var t=this.contentEl(),r=t.parentNode,n=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,r.removeChild(t),this.empty(),oe(t,e),this.trigger("modalfill"),n?r.insertBefore(t,n):r.appendChild(t);var i=this.getChild("closeButton");i&&r.appendChild(i.el_)},t.prototype.empty=function(){this.trigger("beforemodalempty"),re(this.contentEl()),this.trigger("modalempty")},t.prototype.content=function(e){return void 0!==e&&(this.content_=e),this.content_},t.prototype.conditionalFocus_=function(){var e=u.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus(),this.on(u,"keydown",this.handleKeyDown))},t.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(u,"keydown",this.handleKeyDown)},t.prototype.handleKeyDown=function(e){if(9===e.which){for(var t=this.focusableEls_(),r=this.el_.querySelector(":focus"),n=void 0,i=0;i<t.length;i++)if(r===t[i]){n=i;break}u.activeElement===this.el_&&(n=0),e.shiftKey&&0===n?(t[t.length-1].focus(),e.preventDefault()):e.shiftKey||n!==t.length-1||(t[0].focus(),e.preventDefault())}},t.prototype.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,(function(e){return(e instanceof i.HTMLAnchorElement||e instanceof i.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof i.HTMLInputElement||e instanceof i.HTMLSelectElement||e instanceof i.HTMLTextAreaElement||e instanceof i.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof i.HTMLIFrameElement||e instanceof i.HTMLObjectElement||e instanceof i.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")}))},t}(Je);qt.prototype.options_={pauseOnOpen:!0,temporary:!0},Je.registerComponent("ModalDialog",qt);var Ht=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];y(this,t);var n=_(this,e.call(this));n.tracks_=[],Object.defineProperty(n,"length",{get:function(){return this.tracks_.length}});for(var i=0;i<r.length;i++)n.addTrack(r[i]);return n}return b(t,e),t.prototype.addTrack=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},t.prototype.removeTrack=function(e){for(var t=void 0,r=0,n=this.length;r<n;r++)if(this[r]===e){(t=this[r]).off&&t.off(),this.tracks_.splice(r,1);break}t&&this.trigger({track:t,type:"removetrack"})},t.prototype.getTrackById=function(e){for(var t=null,r=0,n=this.length;r<n;r++){var i=this[r];if(i.id===e){t=i;break}}return t},t}(Ne);for(var Wt in Ht.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},Ht.prototype.allowedEvents_)Ht.prototype["on"+Wt]=null;var zt=function(e,t){for(var r=0;r<e.length;r++)Object.keys(e[r]).length&&t.id!==e[r].id&&(e[r].enabled=!1)},Gt=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];y(this,t);for(var n=r.length-1;n>=0;n--)if(r[n].enabled){zt(r,r[n]);break}var i=_(this,e.call(this,r));return i.changing_=!1,i}return b(t,e),t.prototype.addTrack=function(t){var r=this;t.enabled&&zt(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&t.addEventListener("enabledchange",(function(){r.changing_||(r.changing_=!0,zt(r,t),r.changing_=!1,r.trigger("change"))}))},t}(Ht),Kt=function(e,t){for(var r=0;r<e.length;r++)Object.keys(e[r]).length&&t.id!==e[r].id&&(e[r].selected=!1)},Xt=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];y(this,t);for(var n=r.length-1;n>=0;n--)if(r[n].selected){Kt(r,r[n]);break}var i=_(this,e.call(this,r));return i.changing_=!1,Object.defineProperty(i,"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),i}return b(t,e),t.prototype.addTrack=function(t){var r=this;t.selected&&Kt(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&t.addEventListener("selectedchange",(function(){r.changing_||(r.changing_=!0,Kt(r,t),r.changing_=!1,r.trigger("change"))}))},t}(Ht),Yt=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.addTrack=function(t){e.prototype.addTrack.call(this,t),t.addEventListener("modechange",Le(this,(function(){this.queueTrigger("change")}))),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",Le(this,(function(){this.trigger("selectedlanguagechange")})))},t}(Ht),Qt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];y(this,e),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var r=0,n=t.length;r<n;r++)this.addTrackElement_(t[r])}return e.prototype.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},e.prototype.getTrackElementByTrack_=function(e){for(var t=void 0,r=0,n=this.trackElements_.length;r<n;r++)if(e===this.trackElements_[r].track){t=this.trackElements_[r];break}return t},e.prototype.removeTrackElement_=function(e){for(var t=0,r=this.trackElements_.length;t<r;t++)if(e===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},e}(),Jt=function(){function e(t){y(this,e),e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}return e.prototype.setCues_=function(e){var t=this.length||0,r=0,n=e.length;this.cues_=e,this.length_=e.length;var i=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<n)for(r=t;r<n;r++)i.call(this,r)},e.prototype.getCueById=function(e){for(var t=null,r=0,n=this.length;r<n;r++){var i=this[r];if(i.id===e){t=i;break}}return t},e}(),Zt={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},er={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},tr={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},rr={disabled:"disabled",hidden:"hidden",showing:"showing"},nr=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,t);var n=_(this,e.call(this)),i={id:r.id||"vjs_track_"+de(),kind:r.kind||"",label:r.label||"",language:r.language||""},o=function(e){Object.defineProperty(n,e,{get:function(){return i[e]},set:function(){}})};for(var s in i)o(s);return n}return b(t,e),t}(Ne),ir=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],r=u.createElement("a");r.href=e;var n=""===r.host&&"file:"!==r.protocol,o=void 0;n&&((o=u.createElement("div")).innerHTML='<a href="'+e+'"></a>',r=o.firstChild,o.setAttribute("style","display:none; position:absolute;"),u.body.appendChild(o));for(var s={},a=0;a<t.length;a++)s[t[a]]=r[t[a]];return"http:"===s.protocol&&(s.host=s.host.replace(/:80$/,"")),"https:"===s.protocol&&(s.host=s.host.replace(/:443$/,"")),s.protocol||(s.protocol=i.location.protocol),n&&u.body.removeChild(o),s},or=function(e){if(!e.match(/^https?:\/\//)){var t=u.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e},sr=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(e);if(t)return t.pop().toLowerCase()}return""},ar=function(e){var t=i.location,r=ir(e);return(":"===r.protocol?t.protocol:r.protocol)+r.host!==t.protocol+t.host},cr=Object.freeze({parseUrl:ir,getAbsoluteURL:or,getFileExtension:sr,isCrossOrigin:ar}),ur=dr,lr=Object.prototype.toString;function dr(e){var t=lr.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}var hr=r((function(e,t){function r(e){return e.replace(/^\s*|\s*$/g,"")}(t=e.exports=r).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}})),pr=(hr.left,hr.right,vr),fr=Object.prototype.toString,mr=Object.prototype.hasOwnProperty;function vr(e,t,r){if(!ur(t))throw new TypeError("iterator must be a function");arguments.length<3&&(r=this),"[object Array]"===fr.call(e)?gr(e,t,r):"string"==typeof e?yr(e,t,r):br(e,t,r)}function gr(e,t,r){for(var n=0,i=e.length;n<i;n++)mr.call(e,n)&&t.call(r,e[n],n,e)}function yr(e,t,r){for(var n=0,i=e.length;n<i;n++)t.call(r,e.charAt(n),n,e)}function br(e,t,r){for(var n in e)mr.call(e,n)&&t.call(r,e[n],n,e)}var _r=function(e){return"[object Array]"===Object.prototype.toString.call(e)},Tr=function(e){if(!e)return{};var t={};return pr(hr(e).split("\n"),(function(e){var r=e.indexOf(":"),n=hr(e.slice(0,r)).toLowerCase(),i=hr(e.slice(r+1));void 0===t[n]?t[n]=i:_r(t[n])?t[n].push(i):t[n]=[t[n],i]})),t},wr=Cr,Sr=Object.prototype.hasOwnProperty;function Cr(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)Sr.call(r,n)&&(e[n]=r[n])}return e}var Er=Ar;function Or(e,t){for(var r=0;r<e.length;r++)t(e[r])}function kr(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function xr(e,t,r){var n=e;return ur(t)?(r=t,"string"==typeof e&&(n={uri:e})):n=wr(t,{uri:e}),n.callback=r,n}function Ar(e,t,r){return Pr(t=xr(e,t,r))}function Pr(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,r=function(r,n,i){t||(t=!0,e.callback(r,n,i))};function n(){4===u.readyState&&setTimeout(s,0)}function i(){var e=void 0;if(e=u.response?u.response:u.responseText||Ir(u),v)try{e=JSON.parse(e)}catch(e){}return e}function o(e){return clearTimeout(l),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,r(e,g)}function s(){if(!c){var t;clearTimeout(l),t=e.useXDR&&void 0===u.status?200:1223===u.status?204:u.status;var n=g,o=null;return 0!==t?(n={body:i(),statusCode:t,method:h,headers:{},url:d,rawRequest:u},u.getAllResponseHeaders&&(n.headers=Tr(u.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),r(o,n,n.body)}}var a,c,u=e.xhr||null;u||(u=e.cors||e.useXDR?new Ar.XDomainRequest:new Ar.XMLHttpRequest);var l,d=u.url=e.uri||e.url,h=u.method=e.method||"GET",p=e.body||e.data,f=u.headers=e.headers||{},m=!!e.sync,v=!1,g={body:void 0,headers:{},statusCode:0,method:h,url:d,rawRequest:u};if("json"in e&&!1!==e.json&&(v=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),p=JSON.stringify(!0===e.json?p:e.json))),u.onreadystatechange=n,u.onload=s,u.onerror=o,u.onprogress=function(){},u.onabort=function(){c=!0},u.ontimeout=o,u.open(h,d,!m,e.username,e.password),m||(u.withCredentials=!!e.withCredentials),!m&&e.timeout>0&&(l=setTimeout((function(){if(!c){c=!0,u.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",o(e)}}),e.timeout)),u.setRequestHeader)for(a in f)f.hasOwnProperty(a)&&u.setRequestHeader(a,f[a]);else if(e.headers&&!kr(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(u.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(u),u.send(p||null),u}function Ir(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function Mr(){}Ar.XMLHttpRequest=i.XMLHttpRequest||Mr,Ar.XDomainRequest="withCredentials"in new Ar.XMLHttpRequest?Ar.XMLHttpRequest:i.XDomainRequest,Or(["get","put","post","patch","head","delete"],(function(e){Ar["delete"===e?"del":e]=function(t,r,n){return(r=xr(t,r,n)).method=e.toUpperCase(),Pr(r)}}));var Lr=function(e,t){var r=new i.WebVTT.Parser(i,i.vttjs,i.WebVTT.StringDecoder()),n=[];r.oncue=function(e){t.addCue(e)},r.onparsingerror=function(e){n.push(e)},r.onflush=function(){t.trigger({type:"loadeddata",target:t})},r.parse(e),n.length>0&&(i.console&&i.console.groupCollapsed&&i.console.groupCollapsed("Text Track parsing errors for "+t.src),n.forEach((function(e){return f.error(e)})),i.console&&i.console.groupEnd&&i.console.groupEnd()),r.flush()},Dr=function(e,t){var r={uri:e},n=ar(e);n&&(r.cors=n),Er(r,Le(this,(function(e,r,n){if(e)return f.error(e,r);if(t.loaded_=!0,"function"!=typeof i.WebVTT){if(t.tech_){var o=function(){return Lr(n,t)};t.tech_.on("vttjsloaded",o),t.tech_.on("vttjserror",(function(){f.error("vttjs failed to load, stopping trying to process "+t.src),t.tech_.off("vttjsloaded",o)}))}}else Lr(n,t)})))},Rr=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(y(this,t),!r.tech)throw new Error("A tech was not provided.");var n=Qe(r,{kind:tr[r.kind]||"subtitles",language:r.language||r.srclang||""}),i=rr[n.mode]||"disabled",o=n.default;"metadata"!==n.kind&&"chapters"!==n.kind||(i="hidden");var s=_(this,e.call(this,n));s.tech_=n.tech,s.cues_=[],s.activeCues_=[];var a=new Jt(s.cues_),c=new Jt(s.activeCues_),u=!1,l=Le(s,(function(){this.activeCues=this.activeCues,u&&(this.trigger("cuechange"),u=!1)}));return"disabled"!==i&&s.tech_.ready((function(){s.tech_.on("timeupdate",l)}),!0),Object.defineProperties(s,{default:{get:function(){return o},set:function(){}},mode:{get:function(){return i},set:function(e){var t=this;rr[e]&&("disabled"!==(i=e)?this.tech_.ready((function(){t.tech_.on("timeupdate",l)}),!0):this.tech_.off("timeupdate",l),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?a:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return c;for(var e=this.tech_.currentTime(),t=[],r=0,n=this.cues.length;r<n;r++){var i=this.cues[r];(i.startTime<=e&&i.endTime>=e||i.startTime===i.endTime&&i.startTime<=e&&i.startTime+.5>=e)&&t.push(i)}if(u=!1,t.length!==this.activeCues_.length)u=!0;else for(var o=0;o<t.length;o++)-1===this.activeCues_.indexOf(t[o])&&(u=!0);return this.activeCues_=t,c.setCues_(this.activeCues_),c},set:function(){}}}),n.src?(s.src=n.src,Dr(n.src,s)):s.loaded_=!0,s}return b(t,e),t.prototype.addCue=function(e){var t=e;if(i.vttjs&&!(e instanceof i.vttjs.VTTCue)){for(var r in t=new i.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)r in t||(t[r]=e[r]);t.id=e.id,t.originalCue_=e}for(var n=this.tech_.textTracks(),o=0;o<n.length;o++)n[o]!==this&&n[o].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},t.prototype.removeCue=function(e){for(var t=this.cues_.length;t--;){var r=this.cues_[t];if(r===e||r.originalCue_&&r.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(nr);Rr.prototype.allowedEvents_={cuechange:"cuechange"};var Nr=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,t);var n=Qe(r,{kind:er[r.kind]||""}),i=_(this,e.call(this,n)),o=!1;return Object.defineProperty(i,"enabled",{get:function(){return o},set:function(e){"boolean"==typeof e&&e!==o&&(o=e,this.trigger("enabledchange"))}}),n.enabled&&(i.enabled=n.enabled),i.loaded_=!0,i}return b(t,e),t}(nr),jr=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,t);var n=Qe(r,{kind:Zt[r.kind]||""}),i=_(this,e.call(this,n)),o=!1;return Object.defineProperty(i,"selected",{get:function(){return o},set:function(e){"boolean"==typeof e&&e!==o&&(o=e,this.trigger("selectedchange"))}}),n.selected&&(i.selected=n.selected),i}return b(t,e),t}(nr),Ur=0,Fr=1,$r=2,Br=3,Vr=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,t);var n=_(this,e.call(this)),i=void 0,o=new Rr(r);return n.kind=o.kind,n.src=o.src,n.srclang=o.language,n.label=o.label,n.default=o.default,Object.defineProperties(n,{readyState:{get:function(){return i}},track:{get:function(){return o}}}),i=Ur,o.addEventListener("loadeddata",(function(){i=$r,n.trigger({type:"load",target:n})})),n}return b(t,e),t}(Ne);Vr.prototype.allowedEvents_={load:"load"},Vr.NONE=Ur,Vr.LOADING=Fr,Vr.LOADED=$r,Vr.ERROR=Br;var qr={audio:{ListClass:Gt,TrackClass:Nr,capitalName:"Audio"},video:{ListClass:Xt,TrackClass:jr,capitalName:"Video"},text:{ListClass:Yt,TrackClass:Rr,capitalName:"Text"}};Object.keys(qr).forEach((function(e){qr[e].getterName=e+"Tracks",qr[e].privateName=e+"Tracks_"}));var Hr={remoteText:{ListClass:Yt,TrackClass:Rr,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Qt,TrackClass:Vr,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Wr=Qe(qr,Hr);Hr.names=Object.keys(Hr),qr.names=Object.keys(qr),Wr.names=[].concat(Hr.names).concat(qr.names);var zr=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function Gr(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function Kr(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}function Xr(){this.values=zr(null)}function Yr(e,t,r,n){var i=n?e.split(n):[e];for(var o in i)if("string"==typeof i[o]){var s=i[o].split(r);2===s.length&&t(s[0],s[1])}}function Qr(e,t,r){var n=e;function i(){var t=Kr(e);if(null===t)throw new Gr(Gr.Errors.BadTimeStamp,"Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function o(e,t){var n=new Xr;Yr(e,(function(e,t){switch(e){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),s=o[0];n.integer(e,s),n.percent(e,s)&&n.set("snapToLines",!1),n.alt(e,s,["auto"]),2===o.length&&n.alt("lineAlign",o[1],["start","middle","end"]);break;case"position":o=t.split(","),n.percent(e,o[0]),2===o.length&&n.alt("positionAlign",o[1],["start","middle","end"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start","middle","end","left","right"])}}),/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical",""),t.line=n.get("line","auto"),t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align","middle"),t.position=n.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align),t.positionAlign=n.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}function s(){e=e.replace(/^\s+/,"")}if(s(),t.startTime=i(),s(),"--\x3e"!==e.substr(0,3))throw new Gr(Gr.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.substr(3),s(),t.endTime=i(),s(),o(e,t)}Gr.prototype=zr(Error.prototype),Gr.prototype.constructor=Gr,Gr.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Xr.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var Jr={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},Zr={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},en={v:"title",lang:"lang"},tn={rt:"ruby"};function rn(e,t){function r(){if(!t)return null;function e(e){return t=t.substr(e.length),e}var r=t.match(/^([^<]*)(<[^>]*>?)?/);return e(r[1]?r[1]:r[2])}function n(e){return Jr[e]}function i(e){for(;p=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(p[0],n);return e}function o(e,t){return!tn[t.localName]||tn[t.localName]===e.localName}function s(t,r){var n=Zr[t];if(!n)return null;var i=e.document.createElement(n);i.localName=n;var o=en[t];return o&&r&&(i[o]=r.trim()),i}for(var a,c=e.document.createElement("div"),u=c,l=[];null!==(a=r());)if("<"!==a[0])u.appendChild(e.document.createTextNode(i(a)));else{if("/"===a[1]){l.length&&l[l.length-1]===a.substr(2).replace(">","")&&(l.pop(),u=u.parentNode);continue}var d,h=Kr(a.substr(1,a.length-2));if(h){d=e.document.createProcessingInstruction("timestamp",h),u.appendChild(d);continue}var p=a.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(!(d=s(p[1],p[3])))continue;if(!o(u,d))continue;p[2]&&(d.className=p[2].substr(1).replace("."," ")),l.push(p[1]),u.appendChild(d),u=d}return c}var nn=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function on(e){for(var t=0;t<nn.length;t++){var r=nn[t];if(e>=r[0]&&e<=r[1])return!0}return!1}function sn(e){var t=[],r="";if(!e||!e.childNodes)return"ltr";function n(e,t){for(var r=t.childNodes.length-1;r>=0;r--)e.push(t.childNodes[r])}function i(e){if(!e||!e.length)return null;var t=e.pop(),r=t.textContent||t.innerText;if(r){var o=r.match(/^.*(\n|\r)/);return o?(e.length=0,o[0]):r}return"ruby"===t.tagName?i(e):t.childNodes?(n(e,t),i(e)):void 0}for(n(t,e);r=i(t);)for(var o=0;o<r.length;o++)if(on(r.charCodeAt(o)))return"rtl";return"ltr"}function an(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,r=t.textTrackList,n=0,i=0;i<r.length&&r[i]!==t;i++)"showing"===r[i].mode&&n++;return-1*++n}function cn(){}function un(e,t,r){cn.call(this),this.cue=t,this.cueDiv=rn(e,t.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=e.document.createElement("div"),n={direction:sn(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:r.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var i=0;switch(t.positionAlign){case"start":i=t.position;break;case"middle":i=t.position-t.size/2;break;case"end":i=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function ln(e){var t,r,n,i;if(e.div){r=e.div.offsetHeight,n=e.div.offsetWidth,i=e.div.offsetTop;var o=(o=e.div.childNodes)&&(o=o[0])&&o.getClientRects&&o.getClientRects();e=e.div.getBoundingClientRect(),t=o?Math.max(o[0]&&o[0].height||0,e.height/o.length):0}this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||r,this.bottom=e.bottom||i+(e.height||r),this.width=e.width||n,this.lineHeight=void 0!==t?t:e.lineHeight}function dn(e,t,r,n){function i(e,t){for(var i,o=new ln(e),s=1,a=0;a<t.length;a++){for(;e.overlapsOppositeAxis(r,t[a])||e.within(r)&&e.overlapsAny(n);)e.move(t[a]);if(e.within(r))return e;var c=e.intersectPercentage(r);s>c&&(i=new ln(e),s=c),e=new ln(o)}return i||o}var o=new ln(t),s=t.cue,a=an(s),c=[];if(s.snapToLines){var u;switch(s.vertical){case"":c=["+y","-y"],u="height";break;case"rl":c=["+x","-x"],u="width";break;case"lr":c=["-x","+x"],u="width"}var l=o.lineHeight,d=l*Math.round(a),h=r[u]+l,p=c[0];Math.abs(d)>h&&(d=d<0?-1:1,d*=Math.ceil(h/l)*l),a<0&&(d+=""===s.vertical?r.height:r.width,c=c.reverse()),o.move(p,d)}else{var f=o.lineHeight/r.height*100;switch(s.lineAlign){case"middle":a-=f/2;break;case"end":a-=f}switch(s.vertical){case"":t.applyStyles({top:t.formatStyle(a,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(a,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(a,"%")})}c=["+y","-x","+x","-y"],o=new ln(t)}var m=i(o,c);t.move(m.toCSSCompatValues(r))}function hn(){}cn.prototype.applyStyles=function(e,t){for(var r in t=t||this.div,e)e.hasOwnProperty(r)&&(t.style[r]=e[r])},cn.prototype.formatStyle=function(e,t){return 0===e?0:e+t},un.prototype=zr(cn.prototype),un.prototype.constructor=un,ln.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},ln.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},ln.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},ln.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},ln.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},ln.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},ln.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},ln.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,r=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||r}},hn.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},hn.convertCueToDOMTree=function(e,t){return e&&t?rn(e,t):null};var pn=.05,fn="sans-serif",mn="1.5%";hn.processCues=function(e,t,r){if(!e||!t||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var n=e.document.createElement("div");function i(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}if(n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin=mn,r.appendChild(n),i(t)){var o=[],s=ln.getSimpleBoxPosition(n),a={font:Math.round(s.height*pn*100)/100+"px "+fn};!function(){for(var r,i,c=0;c<t.length;c++)i=t[c],r=new un(e,i,a),n.appendChild(r.div),dn(e,r,s,o),i.displayState=r.div,o.push(ln.getSimpleBoxPosition(r))}()}else for(var c=0;c<t.length;c++)n.appendChild(t[c].displayState)},hn.Parser=function(e,t,r){r||(r=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=r||new TextDecoder("utf8"),this.regionList=[]},hn.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof Gr))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function r(){for(var e=t.buffer,r=0;r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;var n=e.substr(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.substr(r),n}function n(e){var r=new Xr;if(Yr(e,(function(e,t){switch(e){case"id":r.set(e,t);break;case"width":r.percent(e,t);break;case"lines":r.integer(e,t);break;case"regionanchor":case"viewportanchor":var n=t.split(",");if(2!==n.length)break;var i=new Xr;if(i.percent("x",n[0]),i.percent("y",n[1]),!i.has("x")||!i.has("y"))break;r.set(e+"X",i.get("x")),r.set(e+"Y",i.get("y"));break;case"scroll":r.alt(e,t,["up"])}}),/=/,/\s/),r.has("id")){var n=new(t.vttjs.VTTRegion||t.window.VTTRegion);n.width=r.get("width",100),n.lines=r.get("lines",3),n.regionAnchorX=r.get("regionanchorX",0),n.regionAnchorY=r.get("regionanchorY",100),n.viewportAnchorX=r.get("viewportanchorX",0),n.viewportAnchorY=r.get("viewportanchorY",100),n.scroll=r.get("scroll",""),t.onregion&&t.onregion(n),t.regionList.push({id:r.get("id"),region:n})}}function i(e){var r=new Xr;Yr(e,(function(e,t){switch(e){case"MPEGT":r.integer(e+"S",t);break;case"LOCA":r.set(e+"L",Kr(t))}}),/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:r.get("MPEGTS"),LOCAL:r.get("LOCAL")})}function o(e){e.match(/X-TIMESTAMP-MAP/)?Yr(e,(function(e,t){"X-TIMESTAMP-MAP"===e&&i(t)}),/=/):Yr(e,(function(e,t){"Region"===e&&n(t)}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var s;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(s=r()).match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Gr(Gr.Errors.BadSignature);t.state="HEADER"}for(var c=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(c?c=!1:s=r(),t.state){case"HEADER":/:/.test(s)?o(s):s||(t.state="ID");continue;case"NOTE":s||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){t.state="NOTE";break}if(!s)continue;if(t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,""),t.state="CUE",-1===s.indexOf("--\x3e")){t.cue.id=s;continue}case"CUE":try{Qr(s,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var u=-1!==s.indexOf("--\x3e");if(!s||u&&(c=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=s;continue;case"BADCUE":s||(t.state="ID");continue}}}catch(e){t.reportOrThrowError(e),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Gr(Gr.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};var vn=hn,gn="auto",yn={"":1,lr:1,rl:1},bn={start:1,middle:1,end:1,left:1,right:1};function _n(e){return"string"==typeof e&&!!yn[e.toLowerCase()]&&e.toLowerCase()}function Tn(e){return"string"==typeof e&&!!bn[e.toLowerCase()]&&e.toLowerCase()}function wn(e,t,r){this.hasBeenReset=!1;var n="",i=!1,o=e,s=t,a=r,c=null,u="",l=!0,d="auto",h="start",p=50,f="middle",m=50,v="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(e){n=""+e}},pauseOnExit:{enumerable:!0,get:function(){return i},set:function(e){i=!!e}},startTime:{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");o=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");s=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return a},set:function(e){a=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return c},set:function(e){c=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){var t=_n(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");u=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return l},set:function(e){l=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&e!==gn)throw new SyntaxError("An invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){var t=Tn(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");h=t,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return p},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=Tn(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");f=t,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return v},set:function(e){var t=Tn(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}}}),this.displayState=void 0}wn.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Sn=wn,Cn={"":!0,up:!0};function En(e){return"string"==typeof e&&!!Cn[e.toLowerCase()]&&e.toLowerCase()}function On(e){return"number"==typeof e&&e>=0&&e<=100}function kn(){var e=100,t=3,r=0,n=100,i=0,o=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!On(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return n},set:function(e){if(!On(e))throw new Error("RegionAnchorX must be between 0 and 100.");n=e}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!On(e))throw new Error("RegionAnchorY must be between 0 and 100.");r=e}},viewportAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!On(e))throw new Error("ViewportAnchorY must be between 0 and 100.");o=e}},viewportAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!On(e))throw new Error("ViewportAnchorX must be between 0 and 100.");i=e}},scroll:{enumerable:!0,get:function(){return s},set:function(e){var t=En(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");s=t}}})}var xn=kn,An=r((function(e){var t=e.exports={WebVTT:vn,VTTCue:Sn,VTTRegion:xn};i.vttjs=t,i.WebVTT=t.WebVTT;var r=t.VTTCue,n=t.VTTRegion,o=i.VTTCue,s=i.VTTRegion;t.shim=function(){i.VTTCue=r,i.VTTRegion=n},t.restore=function(){i.VTTCue=o,i.VTTRegion=s},i.VTTCue||t.shim()}));function Pn(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=e.textTracks();i.kind=t,r&&(i.label=r),n&&(i.language=n),i.tech=e;var s=new Wr.text.TrackClass(i);return o.addTrack(s),s}An.WebVTT,An.VTTCue,An.VTTRegion;var In=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};y(this,t),r.reportTouchActivity=!1;var i=_(this,e.call(this,null,r,n));return i.hasStarted_=!1,i.on("playing",(function(){this.hasStarted_=!0})),i.on("loadstart",(function(){this.hasStarted_=!1})),Wr.names.forEach((function(e){var t=Wr[e];r&&r[t.getterName]&&(i[t.privateName]=r[t.getterName])})),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(e){!1===r["native"+e+"Tracks"]&&(i["featuresNative"+e+"Tracks"]=!1)})),!1===r.nativeCaptions||!1===r.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==r.nativeCaptions&&!0!==r.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.autoRemoteTextTracks_=new Wr.text.ListClass,i.initTrackListeners(),r.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}return b(t,e),t.prototype.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",(function(){return t.setTimeout((function(){return t.triggerSourceset(e)}),1)})),this.trigger({src:e,type:"sourceset"})},t.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},t.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},t.prototype.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Le(this,(function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()})),500)},t.prototype.onDurationChange=function(e){this.duration_=this.duration()},t.prototype.buffered=function(){return St(0,0)},t.prototype.bufferedPercent=function(){return Ct(this.buffered(),this.duration_)},t.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},t.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},t.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},t.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.prototype.dispose=function(){this.clearTracks(qr.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},t.prototype.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach((function(e){for(var r=t[e+"Tracks"]()||[],n=r.length;n--;){var i=r[n];"text"===e&&t.removeRemoteTextTrack(i),r.removeTrack(i)}}))},t.prototype.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var r=e[t];this.removeRemoteTextTrack(r)}},t.prototype.reset=function(){},t.prototype.error=function(e){return void 0!==e&&(this.error_=new It(e),this.trigger("error")),this.error_},t.prototype.played=function(){return this.hasStarted_?St(0,0):St()},t.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.prototype.initTrackListeners=function(){var e=this;qr.names.forEach((function(t){var r=qr[t],n=function(){e.trigger(t+"trackchange")},i=e[r.getterName]();i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),e.on("dispose",(function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)}))}))},t.prototype.addWebVttScript_=function(){var e=this;if(!i.WebVTT)if(u.body.contains(this.el())){if(!this.options_["vtt.js"]&&x(An)&&Object.keys(An).length>0)return void this.trigger("vttjsloaded");var t=u.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",(function(){t.onload=null,t.onerror=null})),i.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},t.prototype.emulateTextTracks=function(){var e=this,t=this.textTracks(),r=this.remoteTextTracks(),n=function(e){return t.addTrack(e.track)},i=function(e){return t.removeTrack(e.track)};r.on("addtrack",n),r.on("removetrack",i),this.addWebVttScript_();var o=function(){return e.trigger("texttrackchange")},s=function(){o();for(var e=0;e<t.length;e++){var r=t[e];r.removeEventListener("cuechange",o),"showing"===r.mode&&r.addEventListener("cuechange",o)}};s(),t.addEventListener("change",s),t.addEventListener("addtrack",s),t.addEventListener("removetrack",s),this.on("dispose",(function(){r.off("addtrack",n),r.off("removetrack",i),t.removeEventListener("change",s),t.removeEventListener("addtrack",s),t.removeEventListener("removetrack",s);for(var e=0;e<t.length;e++)t[e].removeEventListener("cuechange",o)}))},t.prototype.addTextTrack=function(e,t,r){if(!e)throw new Error("TextTrack kind is required but was not provided");return Pn(this,e,t,r)},t.prototype.createRemoteTextTrack=function(e){var t=Qe(e,{tech:this});return new Hr.remoteTextEl.TrackClass(t)},t.prototype.addRemoteTextTrack=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1],n=this.createRemoteTextTrack(t);return!0!==r&&!1!==r&&(f.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),r=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!0!==r&&this.ready((function(){return e.autoRemoteTextTracks_.addTrack(n.track)})),n},t.prototype.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},t.prototype.getVideoPlaybackQuality=function(){return{}},t.prototype.setPoster=function(){},t.prototype.playsinline=function(){},t.prototype.setPlaysinline=function(){},t.prototype.overrideNativeAudioTracks=function(){},t.prototype.overrideNativeVideoTracks=function(){},t.prototype.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,r){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,r){if(t.techs_||(t.techs_={}),!t.isTech(r))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Xe(e),t.techs_[e]=r,"Tech"!==e&&t.defaultTechOrder_.push(e),r},t.getTech=function(e){if(e)return e=Xe(e),t.techs_&&t.techs_[e]?t.techs_[e]:i&&i.videojs&&i.videojs[e]?(f.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),i.videojs[e]):void 0},t}(Je);Wr.names.forEach((function(e){var t=Wr[e];In.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),In.prototype.featuresVolumeControl=!0,In.prototype.featuresMuteControl=!0,In.prototype.featuresFullscreenResize=!1,In.prototype.featuresPlaybackRate=!1,In.prototype.featuresProgressEvents=!1,In.prototype.featuresSourceset=!1,In.prototype.featuresTimeupdateEvents=!1,In.prototype.featuresNativeTextTracks=!1,In.withSourceHandlers=function(e){e.registerSourceHandler=function(t,r){var n=e.sourceHandlers;n||(n=e.sourceHandlers=[]),void 0===r&&(r=n.length),n.splice(r,0,t)},e.canPlayType=function(t){for(var r=e.sourceHandlers||[],n=void 0,i=0;i<r.length;i++)if(n=r[i].canPlayType(t))return n;return""},e.selectSourceHandler=function(t,r){for(var n=e.sourceHandlers||[],i=0;i<n.length;i++)if(n[i].canHandleSource(t,r))return n[i];return null},e.canPlaySource=function(t,r){var n=e.selectSourceHandler(t,r);return n?n.canHandleSource(t,r):""},["seekable","seeking","duration"].forEach((function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){var r=e.selectSourceHandler(t,this.options_);r||(e.nativeSourceHandler?r=e.nativeSourceHandler:f.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),r!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=r.handleSource(t,this,this.options_),this.on("dispose",this.disposeSourceHandler)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Je.registerComponent("Tech",In),In.registerTech("Tech",In),In.defaultTechOrder_=[];var Mn={},Ln={},Dn={};function Rn(e,t){Mn[e]=Mn[e]||[],Mn[e].push(t)}function Nn(e,t,r){e.setTimeout((function(){return Kn(t,Mn[t.type],r,e)}),1)}function jn(e,t){e.forEach((function(e){return e.setTech&&e.setTech(t)}))}function Un(e,t,r){return e.reduceRight(Hn(r),t[r]())}function Fn(e,t,r,n){return t[r](e.reduce(Hn(r),n))}function $n(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i="call"+Xe(r),o=e.reduce(Hn(i),n),s=o===Dn,a=s?null:t[r](o);return Wn(e,r,a,s),a}var Bn={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},Vn={setCurrentTime:1},qn={play:1,pause:1};function Hn(e){return function(t,r){return t===Dn?Dn:r[e]?r[e](t):t}}function Wn(e,t,r,n){for(var i=e.length-1;i>=0;i--){var o=e[i];o[t]&&o[t](n,r)}}function zn(e){Ln[e.id()]=null}function Gn(e,t){var r=Ln[e.id()],n=null;if(null==r)return n=t(e),Ln[e.id()]=[[t,n]],n;for(var i=0;i<r.length;i++){var o=r[i],s=o[0],a=o[1];s===t&&(n=a)}return null===n&&(n=t(e),r.push([t,n])),n}function Kn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2],n=arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=t[0],a=t.slice(1);if("string"==typeof s)Kn(e,Mn[s],r,n,i,o);else if(s){var c=Gn(n,s);if(!c.setSource)return i.push(c),Kn(e,a,r,n,i,o);c.setSource(O({},e),(function(t,s){if(t)return Kn(e,a,r,n,i,o);i.push(c),Kn(s,e.type===s.type?a:Mn[s.type],r,n,i,o)}))}else a.length?Kn(e,a,r,n,i,o):o?r(e,i):Kn(e,Mn["*"],r,n,i,!0)}var Xn={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"},Yn=function(){var e=sr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"");return Xn[e.toLowerCase()]||""},Qn=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var r=e.cache_.sources.filter((function(e){return e.src===t}));if(r.length)return r[0].type;for(var n=e.$$("source"),i=0;i<n.length;i++){var o=n[i];if(o.type&&o.src&&o.src===t)return o.type}return Yn(t)},Jn=function e(t){if(Array.isArray(t)){var r=[];t.forEach((function(t){t=e(t),Array.isArray(t)?r=r.concat(t):k(t)&&r.push(t)})),t=r}else t="string"==typeof t&&t.trim()?[Zn({src:t})]:k(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[Zn(t)]:[];return t};function Zn(e){var t=Yn(e.src);return!e.type&&t&&(e.type=t),e}var ei=function(e){function t(r,n,i){y(this,t);var o=Qe({createEl:!1},n),s=_(this,e.call(this,r,o,i));if(n.playerOptions.sources&&0!==n.playerOptions.sources.length)r.src(n.playerOptions.sources);else for(var a=0,c=n.playerOptions.techOrder;a<c.length;a++){var u=Xe(c[a]),l=In.getTech(u);if(u||(l=Je.getComponent(u)),l&&l.isSupported()){r.loadTech_(u);break}}return s}return b(t,e),t}(Je);Je.registerComponent("MediaLoader",ei);var ti=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.emitTapEvents(),i.enable(),i}return b(t,e),t.prototype.createEl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r=O({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},r),"button"===t&&f.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),n=O({role:"button"},n),this.tabIndex_=r.tabIndex;var i=e.prototype.createEl.call(this,t,r,n);return this.createControlTextEl(i),i},t.prototype.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},t.prototype.createControlTextEl=function(e){return this.controlTextEl_=U("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},t.prototype.controlText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===e)return this.controlText_||"Need Text";var r=this.localize(e);this.controlText_=e,F(this.controlTextEl_,r),this.nonIconControl||t.setAttribute("title",r)},t.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},t.prototype.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},t.prototype.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},t.prototype.handleClick=function(e){},t.prototype.handleFocus=function(e){we(u,"keydown",Le(this,this.handleKeyPress))},t.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.trigger("click")):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},t.prototype.handleBlur=function(e){Se(u,"keydown",Le(this,this.handleKeyPress))},t}(Je);Je.registerComponent("ClickableComponent",ti);var ri=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.update(),r.on("posterchange",Le(i,i.update)),i}return b(t,e),t.prototype.dispose=function(){this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},t.prototype.createEl=function(){return U("div",{className:"vjs-poster",tabIndex:-1})},t.prototype.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},t.prototype.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},t.prototype.handleClick=function(e){this.player_.controls()&&(this.player_.paused()?Nt(this.player_.play()):this.player_.pause())},t}(ti);Je.registerComponent("PosterImage",ri);var ni="#222",ii="#ccc",oi={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function si(e,t){var r=void 0;if(4===e.length)r=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");r=e.slice(1)}return"rgba("+parseInt(r.slice(0,2),16)+","+parseInt(r.slice(2,4),16)+","+parseInt(r.slice(4,6),16)+","+t+")"}function ai(e,t,r){try{e.style[t]=r}catch(e){return}}var ci=function(e){function t(r,n,o){y(this,t);var s=_(this,e.call(this,r,n,o)),a=Le(s,s.updateDisplay);return r.on("loadstart",Le(s,s.toggleDisplay)),r.on("texttrackchange",a),r.on("loadstart",Le(s,s.preselectTrack)),r.ready(Le(s,(function(){if(r.tech_&&r.tech_.featuresNativeTextTracks)this.hide();else{r.on("fullscreenchange",a),r.on("playerresize",a),i.addEventListener("orientationchange",a),r.on("dispose",(function(){return i.removeEventListener("orientationchange",a)}));for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);this.preselectTrack()}}))),s}return b(t,e),t.prototype.preselectTrack=function(){for(var e={captions:1,subtitles:1},t=this.player_.textTracks(),r=this.player_.cache_.selectedLanguage,n=void 0,i=void 0,o=void 0,s=0;s<t.length;s++){var a=t[s];r&&r.enabled&&r.language===a.language?a.kind===r.kind?o=a:o||(o=a):r&&!r.enabled?(o=null,n=null,i=null):a.default&&("descriptions"!==a.kind||n?a.kind in e&&!i&&(i=a):n=a)}o?o.mode="showing":i?i.mode="showing":n&&(n.mode="showing")},t.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},t.prototype.clearDisplay=function(){"function"==typeof i.WebVTT&&i.WebVTT.processCues(i,[],this.el_)},t.prototype.updateDisplay=function(){var e=this.player_.textTracks();this.clearDisplay();for(var t=null,r=null,n=e.length;n--;){var i=e[n];"showing"===i.mode&&("descriptions"===i.kind?t=i:r=i)}r?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(r)):t&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(t))},t.prototype.updateForTrack=function(e){if("function"==typeof i.WebVTT&&e.activeCues){for(var t=[],r=0;r<e.activeCues.length;r++)t.push(e.activeCues[r]);if(i.WebVTT.processCues(i,t,this.el_),this.player_.textTrackSettings)for(var n=this.player_.textTrackSettings.getValues(),o=t.length;o--;){var s=t[o];if(s){var a=s.displayState;if(n.color&&(a.firstChild.style.color=n.color),n.textOpacity&&ai(a.firstChild,"color",si(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(a.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&ai(a.firstChild,"backgroundColor",si(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?ai(a,"backgroundColor",si(n.windowColor,n.windowOpacity)):a.style.backgroundColor=n.windowColor),n.edgeStyle&&("dropshadow"===n.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px "+ni+", 2px 2px 4px "+ni+", 2px 2px 5px "+ni:"raised"===n.edgeStyle?a.firstChild.style.textShadow="1px 1px "+ni+", 2px 2px "+ni+", 3px 3px "+ni:"depressed"===n.edgeStyle?a.firstChild.style.textShadow="1px 1px "+ii+", 0 1px "+ii+", -1px -1px "+ni+", 0 -1px "+ni:"uniform"===n.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px "+ni+", 0 0 4px "+ni+", 0 0 4px "+ni+", 0 0 4px "+ni)),n.fontPercent&&1!==n.fontPercent){var c=i.parseFloat(a.style.fontSize);a.style.fontSize=c*n.fontPercent+"px",a.style.height="auto",a.style.top="auto",a.style.bottom="2px"}n.fontFamily&&"default"!==n.fontFamily&&("small-caps"===n.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=oi[n.fontFamily])}}}},t}(Je);Je.registerComponent("TextTrackDisplay",ci);var ui=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),r=this.localize(t?"Audio Player":"Video Player"),n=U("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[r])}),i=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(n),i},t}(Je);Je.registerComponent("LoadingSpinner",ui);var li=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e="button",t=O({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),r=O({type:"button"},r);var n=Je.prototype.createEl.call(this,e,t,r);return this.createControlTextEl(n),n},t.prototype.addChild=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.constructor.name;return f.warn("Adding an actionable (user controllable) child to a Button ("+r+") is not supported; use a ClickableComponent instead."),Je.prototype.addChild.call(this,e,t)},t.prototype.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.prototype.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.prototype.handleKeyPress=function(t){32!==t.which&&13!==t.which&&e.prototype.handleKeyPress.call(this,t)},t}(ti);Je.registerComponent("Button",li);var di=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.mouseused_=!1,i.on("mousedown",i.handleMouseDown),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-big-play-button"},t.prototype.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)Nt(t);else{var r=this.player_.getChild("controlBar"),n=r&&r.getChild("playToggle");if(n){var i=function(){return n.focus()};Rt(t)?t.then(i,(function(){})):this.setTimeout(i,1)}else this.player_.focus()}},t.prototype.handleKeyPress=function(t){this.mouseused_=!1,e.prototype.handleKeyPress.call(this,t)},t.prototype.handleMouseDown=function(e){this.mouseused_=!0},t}(li);di.prototype.controlText_="Play Video",Je.registerComponent("BigPlayButton",di);var hi=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.controlText(n&&n.controlText||i.localize("Close")),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},t}(li);Je.registerComponent("CloseButton",hi);var pi=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.on(r,"play",i.handlePlay),i.on(r,"pause",i.handlePause),i.on(r,"ended",i.handleEnded),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},t.prototype.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.prototype.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.prototype.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},t}(li);pi.prototype.controlText_="Play",Je.registerComponent("PlayToggle",pi);var fi=function(e,t){e=e<0?0:e;var r=Math.floor(e%60),n=Math.floor(e/60%60),i=Math.floor(e/3600),o=Math.floor(t/60%60),s=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(i=n=r="-"),(i=i>0||s>0?i+":":"")+(n=((i||o>=10)&&n<10?"0"+n:n)+":")+(r=r<10?"0"+r:r)},mi=fi;function vi(e){mi=e}function gi(){mi=fi}function yi(e){return mi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e)}var bi=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.throttledUpdateContent=De(Le(i,i.updateContent),25),i.on(r,"timeupdate",i.throttledUpdateContent),i}return b(t,e),t.prototype.createEl=function(t){var r=this.buildCSSClass(),n=e.prototype.createEl.call(this,"div",{className:r+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=U("span",{className:r+"-display"},{"aria-live":"off"}),this.updateTextNode_(),n.appendChild(this.contentEl_),n},t.prototype.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},t.prototype.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=u.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},t.prototype.formatTime_=function(e){return yi(e)},t.prototype.updateFormattedTime_=function(e){var t=this.formatTime_(e);t!==this.formattedTime_&&(this.formattedTime_=t,this.requestAnimationFrame(this.updateTextNode_))},t.prototype.updateContent=function(e){},t}(Je);bi.prototype.labelText_="Time",bi.prototype.controlText_="Time",Je.registerComponent("TimeDisplay",bi);var _i=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.on(r,"ended",i.handleEnded),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-current-time"},t.prototype.updateContent=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(t)},t.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},t}(bi);_i.prototype.labelText_="Current Time",_i.prototype.controlText_="Current Time",Je.registerComponent("CurrentTimeDisplay",_i);var Ti=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.on(r,"durationchange",i.updateContent),i.on(r,"loadedmetadata",i.throttledUpdateContent),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-duration"},t.prototype.updateContent=function(e){var t=this.player_.duration();t&&this.duration_!==t&&(this.duration_=t,this.updateFormattedTime_(t))},t}(bi);Ti.prototype.labelText_="Duration",Ti.prototype.controlText_="Duration",Je.registerComponent("DurationDisplay",Ti);var wi=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},t}(Je);Je.registerComponent("TimeDivider",wi);var Si=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.on(r,"durationchange",i.throttledUpdateContent),i.on(r,"ended",i.handleEnded),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-remaining-time"},t.prototype.formatTime_=function(t){return"-"+e.prototype.formatTime_.call(this,t)},t.prototype.updateContent=function(e){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},t.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(0)},t}(bi);Si.prototype.labelText_="Remaining Time",Si.prototype.controlText_="Remaining Time",Je.registerComponent("RemainingTimeDisplay",Si);var Ci=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.updateShowing(),i.on(i.player(),"durationchange",i.updateShowing),i}return b(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=U("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},t.prototype.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(Je);Je.registerComponent("LiveDisplay",Ci);var Ei=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}return b(t,e),t.prototype.enabled=function(){return this.enabled_},t.prototype.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.prototype.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},t.prototype.createEl=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.className=r.className+" vjs-slider",r=O({tabIndex:0},r),n=O({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),e.prototype.createEl.call(this,t,r,n)},t.prototype.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||pt||e.preventDefault(),Y(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},t.prototype.handleMouseMove=function(e){},t.prototype.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;Q(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},t.prototype.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!=e||e<0||e===1/0)&&(e=0);var r=(100*e).toFixed(2)+"%",n=t.el().style;return this.vertical()?n.height=r:n.width=r,e}}},t.prototype.calculateDistance=function(e){var t=ee(this.el_,e);return this.vertical()?t.y:t.x},t.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())},t.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},t.prototype.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(Je);Je.registerComponent("Slider",Ei);var Oi=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.partEls_=[],i.on(r,"progress",i.update),i}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},t.prototype.dispose=function(){this.partEls_=null,e.prototype.dispose.call(this)},t.prototype.update=function(e){var t=this.player_.buffered(),r=this.player_.duration(),n=this.player_.bufferedEnd(),i=this.partEls_,o=function(e,t){var r=e/t||0;return 100*(r>=1?1:r)+"%"};this.el_.style.width=o(n,r);for(var s=0;s<t.length;s++){var a=t.start(s),c=t.end(s),u=i[s];u||(u=this.el_.appendChild(U()),i[s]=u),u.style.left=o(a,n),u.style.width=o(c-a,n)}for(var l=i.length;l>t.length;l--)this.el_.removeChild(i[l-1]);i.length=t.length},t}(Je);Je.registerComponent("LoadProgressBar",Oi);var ki=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})},t.prototype.update=function(e,t,r){var n=J(this.el_),i=J(this.player_.el()),o=e.width*t;if(i&&n){var s=e.left-i.left+o,a=e.width-o+(i.right-e.right),c=n.width/2;s<c?c+=c-s:a<c&&(c=a),c<0?c=0:c>n.width&&(c=n.width),this.el_.style.right="-"+c+"px",F(this.el_,r)}},t}(Je);Je.registerComponent("TimeTooltip",ki);var xi=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},t.prototype.update=function(e,t){var r=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame((function(){var n=yi(r.player_.scrubbing()?r.player_.getCache().currentTime:r.player_.currentTime(),r.player_.duration()),i=r.getChild("timeTooltip");i&&i.update(e,t,n)}))},t}(Je);xi.prototype.options_={children:[]},st||ct||xi.prototype.options_.children.push("timeTooltip"),Je.registerComponent("PlayProgressBar",xi);var Ai=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.update=De(Le(i,i.update),25),i}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.prototype.update=function(e,t){var r=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame((function(){var n=r.player_.duration(),i=yi(t*n,n);r.el_.style.left=e.width*t+"px",r.getChild("timeTooltip").update(e,t,i)}))},t}(Je);Ai.prototype.options_={children:["timeTooltip"]},Je.registerComponent("MouseTimeDisplay",Ai);var Pi=5,Ii=30,Mi=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.setEventHandlers_(),i}return b(t,e),t.prototype.setEventHandlers_=function(){var e=this;this.update=De(Le(this,this.update),Ii),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.updateInterval=null,this.on(this.player_,["playing"],(function(){e.clearInterval(e.updateInterval),e.updateInterval=e.setInterval((function(){e.requestAnimationFrame((function(){e.update()}))}),Ii)})),this.on(this.player_,["ended","pause","waiting"],(function(){e.clearInterval(e.updateInterval)})),this.on(this.player_,["timeupdate","ended"],this.update)},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.prototype.update_=function(e,t){var r=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[yi(e,r),yi(r,r)],"{1} of {2}")),this.bar.update(J(this.el_),t)},t.prototype.update=function(t){var r=e.prototype.update.call(this);return this.update_(this.getCurrentTime_(),r),r},t.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.prototype.handleEnded=function(e){this.update_(this.player_.duration(),1)},t.prototype.getPercent=function(){var e=this.getCurrentTime_()/this.player_.duration();return e>=1?1:e||0},t.prototype.handleMouseDown=function(t){se(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},t.prototype.handleMouseMove=function(e){if(se(e)){var t=this.calculateDistance(e)*this.player_.duration();t===this.player_.duration()&&(t-=.1),this.player_.currentTime(t)}},t.prototype.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},t.prototype.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},t.prototype.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&Nt(this.player_.play())},t.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+Pi)},t.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-Pi)},t.prototype.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.handleAction(t)):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},t}(Ei);Mi.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},st||ct||Mi.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Mi.prototype.playerEvent="timeupdate",Je.registerComponent("SeekBar",Mi);var Li=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.handleMouseMove=De(Le(i,i.handleMouseMove),25),i.throttledHandleMouseSeek=De(Le(i,i.handleMouseSeek),25),i.enable(),i}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.prototype.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var r=t.getChild("mouseTimeDisplay"),n=t.el(),i=J(n),o=ee(n,e).x;o>1?o=1:o<0&&(o=0),r&&r.update(i,o)}},t.prototype.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},t.prototype.enabled=function(){return this.enabled_},t.prototype.disable=function(){this.children().forEach((function(e){return e.disable&&e.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},t.prototype.enable=function(){this.children().forEach((function(e){return e.enable&&e.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.prototype.handleMouseDown=function(e){var t=this.el_.ownerDocument,r=this.getChild("seekBar");r&&r.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},t.prototype.handleMouseUp=function(e){var t=this.el_.ownerDocument,r=this.getChild("seekBar");r&&r.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t}(Je);Li.prototype.options_={children:["seekBar"]},Je.registerComponent("ProgressControl",Li);var Di=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.on(r,"fullscreenchange",i.handleFullscreenChange),!1===u[Et.fullscreenEnabled]&&i.disable(),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.prototype.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(li);Di.prototype.controlText_="Fullscreen",Je.registerComponent("FullscreenToggle",Di);var Ri=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))},Ni=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(Je);Je.registerComponent("VolumeLevel",Ni);var ji=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.on("slideractive",i.updateLastVolume_),i.on(r,"volumechange",i.updateARIAAttributes),r.ready((function(){return i.updateARIAAttributes()})),i}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.prototype.handleMouseDown=function(t){se(t)&&e.prototype.handleMouseDown.call(this,t)},t.prototype.handleMouseMove=function(e){se(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},t.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.prototype.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},t.prototype.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},t.prototype.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",(function(){0===e.player_.volume()&&e.player_.lastVolume_(t)}))},t}(Ei);ji.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},ji.prototype.playerEvent="volumechange",Je.registerComponent("VolumeBar",ji);var Ui=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(this,t),n.vertical=n.vertical||!1,(void 0===n.volumeBar||x(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical);var i=_(this,e.call(this,r,n));return Ri(i,r),i.throttledHandleMouseMove=De(Le(i,i.handleMouseMove),25),i.on("mousedown",i.handleMouseDown),i.on("touchstart",i.handleMouseDown),i.on(i.volumeBar,["focus","slideractive"],(function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")})),i.on(i.volumeBar,["blur","sliderinactive"],(function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")})),i}return b(t,e),t.prototype.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},t.prototype.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},t.prototype.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t.prototype.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(Je);Ui.prototype.options_={children:["volumeBar"]},Je.registerComponent("VolumeControl",Ui);var Fi=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))},$i=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return Fi(i,r),i.on(r,["loadstart","volumechange"],i.update),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){var t=this.player_.volume(),r=this.player_.lastVolume_();if(0===t){var n=r<.1?.1:r;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},t.prototype.update=function(e){this.updateIcon_(),this.updateControlText_()},t.prototype.updateIcon_=function(){var e=this.player_.volume(),t=3;st&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var r=0;r<4;r++)q(this.el_,"vjs-vol-"+r);V(this.el_,"vjs-vol-"+t)},t.prototype.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(li);$i.prototype.controlText_="Mute",Je.registerComponent("MuteToggle",$i);var Bi=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(this,t),void 0!==n.inline?n.inline=n.inline:n.inline=!0,(void 0===n.volumeControl||x(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline);var i=_(this,e.call(this,r,n));return i.on(r,["loadstart"],i.volumePanelState_),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}return b(t,e),t.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")},t.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.prototype.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.prototype.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},t}(Je);Bi.prototype.options_={children:["muteToggle","volumeControl"]},Je.registerComponent("VolumePanel",Bi);var Vi=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return n&&(i.menuButton_=n.menuButton),i.focusedChild_=-1,i.on("keydown",i.handleKeyPress),i}return b(t,e),t.prototype.addItem=function(e){this.addChild(e),e.on("click",Le(this,(function(t){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==e.name()&&this.menuButton_.focus())})))},t.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=U(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var r=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return r.appendChild(this.contentEl_),we(r,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),r},t.prototype.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepBack())},t.prototype.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},t.prototype.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},t.prototype.focus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(Je);Je.registerComponent("Menu",Vi);var qi=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(this,t);var i=_(this,e.call(this,r,n));i.menuButton_=new li(r,n),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true");var o=li.prototype.buildCSSClass();return i.menuButton_.el_.className=i.buildCSSClass()+" "+o,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0,i.on(i.menuButton_,"tap",i.handleClick),i.on(i.menuButton_,"click",i.handleClick),i.on(i.menuButton_,"focus",i.handleFocus),i.on(i.menuButton_,"blur",i.handleBlur),i.on("keydown",i.handleSubmenuKeyPress),i}return b(t,e),t.prototype.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},t.prototype.createMenu=function(){var e=new Vi(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=U("li",{className:"vjs-menu-title",innerHTML:Xe(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,e.children_.unshift(t),$(t,e.contentEl())}if(this.items=this.createItems(),this.items)for(var r=0;r<this.items.length;r++)e.addItem(this.items[r]);return e},t.prototype.createItems=function(){},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.prototype.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+li.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},t.prototype.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},t.prototype.controlText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(e,t)},t.prototype.handleClick=function(e){this.one(this.menu.contentEl(),"mouseleave",Le(this,(function(e){this.unpressButton(),this.el_.blur()}))),this.buttonPressed_?this.unpressButton():this.pressButton()},t.prototype.focus=function(){this.menuButton_.focus()},t.prototype.blur=function(){this.menuButton_.blur()},t.prototype.handleFocus=function(){we(u,"keydown",Le(this,this.handleKeyPress))},t.prototype.handleBlur=function(){Se(u,"keydown",Le(this,this.handleKeyPress))},t.prototype.handleKeyPress=function(e){27===e.which||9===e.which?(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus())):38!==e.which&&40!==e.which||this.buttonPressed_||(this.pressButton(),e.preventDefault())},t.prototype.handleSubmenuKeyPress=function(e){27!==e.which&&9!==e.which||(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus()))},t.prototype.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),st&&N())return;this.menu.focus()}},t.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.prototype.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.prototype.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(Je);Je.registerComponent("MenuButton",qi);var Hi=function(e){function t(r,n){y(this,t);var i=n.tracks,o=_(this,e.call(this,r,n));if(o.items.length<=1&&o.hide(),!i)return _(o);var s=Le(o,o.update);return i.addEventListener("removetrack",s),i.addEventListener("addtrack",s),o.player_.on("ready",s),o.player_.on("dispose",(function(){i.removeEventListener("removetrack",s),i.removeEventListener("addtrack",s)})),o}return b(t,e),t}(qi);Je.registerComponent("TrackButton",Hi);var Wi=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.selectable=n.selectable,i.isSelected_=n.selected||!1,i.multiSelectable=n.multiSelectable,i.selected(i.isSelected_),i.selectable?i.multiSelectable?i.el_.setAttribute("role","menuitemcheckbox"):i.el_.setAttribute("role","menuitemradio"):i.el_.setAttribute("role","menuitem"),i}return b(t,e),t.prototype.createEl=function(t,r,n){return this.nonIconControl=!0,e.prototype.createEl.call(this,"li",O({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},r),n)},t.prototype.handleClick=function(e){this.selected(!0)},t.prototype.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(ti);Je.registerComponent("MenuItem",Wi);var zi=function(e){function t(r,n){y(this,t);var o=n.track,s=r.textTracks();n.label=o.label||o.language||"Unknown",n.selected="showing"===o.mode;var a=_(this,e.call(this,r,n));a.track=o;var c=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];a.handleTracksChange.apply(a,t)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];a.handleSelectedLanguageChange.apply(a,t)};if(r.on(["loadstart","texttrackchange"],c),s.addEventListener("change",c),s.addEventListener("selectedlanguagechange",l),a.on("dispose",(function(){r.off(["loadstart","texttrackchange"],c),s.removeEventListener("change",c),s.removeEventListener("selectedlanguagechange",l)})),void 0===s.onchange){var d=void 0;a.on(["tap","click"],(function(){if("object"!==g(i.Event))try{d=new i.Event("change")}catch(e){}d||(d=u.createEvent("Event")).initEvent("change",!0,!0),s.dispatchEvent(d)}))}return a.handleTracksChange(),a}return b(t,e),t.prototype.handleClick=function(t){var r=this.track.kind,n=this.track.kinds,i=this.player_.textTracks();if(n||(n=[r]),e.prototype.handleClick.call(this,t),i)for(var o=0;o<i.length;o++){var s=i[o];s===this.track&&n.indexOf(s.kind)>-1?"showing"!==s.mode&&(s.mode="showing"):"disabled"!==s.mode&&(s.mode="disabled")}},t.prototype.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},t.prototype.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},t.prototype.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(Wi);Je.registerComponent("TextTrackMenuItem",zi);var Gi=function(e){function t(r,n){return y(this,t),n.track={player:r,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,_(this,e.call(this,r,n))}return b(t,e),t.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),r=!0,n=0,i=t.length;n<i;n++){var o=t[n];if(this.options_.kinds.indexOf(o.kind)>-1&&"showing"===o.mode){r=!1;break}}r!==this.isSelected_&&this.selected(r)},t.prototype.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),r=!0,n=0,i=t.length;n<i;n++){var o=t[n];if(["captions","descriptions","subtitles"].indexOf(o.kind)>-1&&"showing"===o.mode){r=!1;break}}r&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(zi);Je.registerComponent("OffTextTrackMenuItem",Gi);var Ki=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y(this,t),n.tracks=r.textTracks(),_(this,e.call(this,r,n))}return b(t,e),t.prototype.createItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zi,r=void 0;this.label_&&(r=this.label_+" off"),e.push(new Gi(this.player_,{kinds:this.kinds_,kind:this.kind_,label:r})),this.hideThreshold_+=1;var n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var i=0;i<n.length;i++){var o=n[i];if(this.kinds_.indexOf(o.kind)>-1){var s=new t(this.player_,{track:o,selectable:!0,multiSelectable:!1});s.addClass("vjs-"+o.kind+"-menu-item"),e.push(s)}}return e},t}(Hi);Je.registerComponent("TextTrackButton",Ki);var Xi=function(e){function t(r,n){y(this,t);var i=n.track,o=n.cue,s=r.currentTime();n.selectable=!0,n.multiSelectable=!1,n.label=o.text,n.selected=o.startTime<=s&&s<o.endTime;var a=_(this,e.call(this,r,n));return a.track=i,a.cue=o,i.addEventListener("cuechange",Le(a,a.update)),a}return b(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.prototype.update=function(e){var t=this.cue,r=this.player_.currentTime();this.selected(t.startTime<=r&&r<t.endTime)},t}(Wi);Je.registerComponent("ChaptersTrackMenuItem",Xi);var Yi=function(e){function t(r,n,i){return y(this,t),_(this,e.call(this,r,n,i))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},t.prototype.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var r=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);r&&r.addEventListener("load",this.updateHandler_)}}},t.prototype.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var r=e[t];if(r.kind===this.kind_)return r}},t.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Xe(this.kind_))},t.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},t.prototype.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var r=0,n=t.length;r<n;r++){var i=t[r],o=new Xi(this.player_,{track:this.track_,cue:i});e.push(o)}return e},t}(Ki);Yi.prototype.kind_="chapters",Yi.prototype.controlText_="Chapters",Je.registerComponent("ChaptersButton",Yi);var Qi=function(e){function t(r,n,i){y(this,t);var o=_(this,e.call(this,r,n,i)),s=r.textTracks(),a=Le(o,o.handleTracksChange);return s.addEventListener("change",a),o.on("dispose",(function(){s.removeEventListener("change",a)})),o}return b(t,e),t.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),r=!1,n=0,i=t.length;n<i;n++){var o=t[n];if(o.kind!==this.kind_&&"showing"===o.mode){r=!0;break}}r?this.disable():this.enable()},t.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Ki);Qi.prototype.kind_="descriptions",Qi.prototype.controlText_="Descriptions",Je.registerComponent("DescriptionsButton",Qi);var Ji=function(e){function t(r,n,i){return y(this,t),_(this,e.call(this,r,n,i))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Ki);Ji.prototype.kind_="subtitles",Ji.prototype.controlText_="Subtitles",Je.registerComponent("SubtitlesButton",Ji);var Zi=function(e){function t(r,n){y(this,t),n.track={player:r,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem";var i=_(this,e.call(this,r,n));return i.addClass("vjs-texttrack-settings"),i.controlText(", opens "+n.kind+" settings dialog"),i}return b(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(zi);Je.registerComponent("CaptionSettingsMenuItem",Zi);var eo=function(e){function t(r,n,i){return y(this,t),_(this,e.call(this,r,n,i))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Zi(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(Ki);eo.prototype.kind_="captions",eo.prototype.controlText_="Captions",Je.registerComponent("CaptionsButton",eo);var to=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(t,r,n){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),i+="</span>",e.prototype.createEl.call(this,t,O({innerHTML:i},r),n)},t}(zi);Je.registerComponent("SubsCapsMenuItem",to);var ro=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(this,t);var i=_(this,e.call(this,r,n));return i.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(i.player_.language_)>-1&&(i.label_="captions"),i.menuButton_.controlText(Xe(i.label_)),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Zi(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=e.prototype.createItems.call(this,t,to)},t}(Ki);ro.prototype.kinds_=["captions","subtitles"],ro.prototype.controlText_="Subtitles",Je.registerComponent("SubsCapsButton",ro);var no=function(e){function t(r,n){y(this,t);var i=n.track,o=r.audioTracks();n.label=i.label||i.language||"Unknown",n.selected=i.enabled;var s=_(this,e.call(this,r,n));s.track=i,s.addClass("vjs-"+i.kind+"-menu-item");var a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];s.handleTracksChange.apply(s,t)};return o.addEventListener("change",a),s.on("dispose",(function(){o.removeEventListener("change",a)})),s}return b(t,e),t.prototype.createEl=function(t,r,n){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),i+="</span>",e.prototype.createEl.call(this,t,O({innerHTML:i},r),n)},t.prototype.handleClick=function(t){var r=this.player_.audioTracks();e.prototype.handleClick.call(this,t);for(var n=0;n<r.length;n++){var i=r[n];i.enabled=i===this.track}},t.prototype.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(Wi);Je.registerComponent("AudioTrackMenuItem",no);var io=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y(this,t),n.tracks=r.audioTracks(),_(this,e.call(this,r,n))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.createItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;for(var t=this.player_.audioTracks(),r=0;r<t.length;r++){var n=t[r];e.push(new no(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return e},t}(Hi);io.prototype.controlText_="Audio Track",Je.registerComponent("AudioTrackButton",io);var oo=function(e){function t(r,n){y(this,t);var i=n.rate,o=parseFloat(i,10);n.label=i,n.selected=1===o,n.selectable=!0,n.multiSelectable=!1;var s=_(this,e.call(this,r,n));return s.label=i,s.rate=o,s.on(r,"ratechange",s.update),s}return b(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.prototype.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(Wi);oo.prototype.contentElType="button",Je.registerComponent("PlaybackRateMenuItem",oo);var so=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.updateVisibility(),i.updateLabel(),i.on(r,"loadstart",i.updateVisibility),i.on(r,"ratechange",i.updateLabel),i}return b(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=U("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),t.appendChild(this.labelEl_),t},t.prototype.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},t.prototype.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.createMenu=function(){var e=new Vi(this.player()),t=this.playbackRates();if(t)for(var r=t.length-1;r>=0;r--)e.addChild(new oo(this.player(),{rate:t[r]+"x"}));return e},t.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.prototype.handleClick=function(e){for(var t=this.player().playbackRate(),r=this.playbackRates(),n=r[0],i=0;i<r.length;i++)if(r[i]>t){n=r[i];break}this.player().playbackRate(n)},t.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},t.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.prototype.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.prototype.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(qi);so.prototype.controlText_="Playback Rate",Je.registerComponent("PlaybackRateMenuButton",so);var ao=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(Je);Je.registerComponent("Spacer",ao);var co=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML=" ",t},t}(ao);Je.registerComponent("CustomControlSpacer",co);var uo=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Je);uo.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},Je.registerComponent("ControlBar",uo);var lo=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n));return i.on(r,"error",i.open),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},t.prototype.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(qt);lo.prototype.options_=Qe(qt.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Je.registerComponent("ErrorDisplay",lo);var ho="vjs-text-track-settings",po=["#000","Black"],fo=["#00F","Blue"],mo=["#0FF","Cyan"],vo=["#0F0","Green"],go=["#F0F","Magenta"],yo=["#F00","Red"],bo=["#FFF","White"],_o=["#FF0","Yellow"],To=["1","Opaque"],wo=["0.5","Semi-Transparent"],So=["0","Transparent"],Co={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[po,bo,yo,vo,fo,_o,go,mo]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[To,wo,So]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[bo,po,yo,vo,fo,_o,go,mo]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[To,wo]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[So,wo,To]}};function Eo(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}function Oo(e,t){return Eo(e.options[e.options.selectedIndex].value,t)}function ko(e,t,r){if(t)for(var n=0;n<e.options.length;n++)if(Eo(e.options[n].value,r)===t){e.selectedIndex=n;break}}Co.windowColor.options=Co.backgroundColor.options;var xo=function(e){function t(r,n){y(this,t),n.temporary=!1;var i=_(this,e.call(this,r,n));return i.updateDisplay=Le(i,i.updateDisplay),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=U("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===n.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",(function(){i.saveSettings(),i.close()})),i.on(i.$(".vjs-default-button"),"click",(function(){i.setDefaults(),i.updateDisplay()})),C(Co,(function(e){i.on(i.$(e.selector),"change",i.updateDisplay)})),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}return b(t,e),t.prototype.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},t.prototype.createElSelect_=function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label",i=Co[e],o=i.id.replace("%s",this.id_),s=[r,o].join(" ").trim();return["<"+n+' id="'+o+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(i.label),"</"+n+">",'<select aria-labelledby="'+s+'">'].concat(i.options.map((function(e){var r=o+"-"+e[1].replace(/\W+/g,"");return['<option id="'+r+'" value="'+e[0]+'" ','aria-labelledby="'+s+" "+r+'">',t.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")},t.prototype.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},t.prototype.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},t.prototype.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},t.prototype.createElColors_=function(){return U("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.prototype.createElFont_=function(){return U("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.prototype.createElControls_=function(){var e=this.localize("restore all settings to the default values");return U("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.prototype.label=function(){return this.localize("Caption Settings Dialog")},t.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.prototype.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.prototype.getValues=function(){var e=this;return E(Co,(function(t,r,n){var i=Oo(e.$(r.selector),r.parser);return void 0!==i&&(t[n]=i),t}),{})},t.prototype.setValues=function(e){var t=this;C(Co,(function(r,n){ko(t.$(r.selector),e[n],r.parser)}))},t.prototype.setDefaults=function(){var e=this;C(Co,(function(t){var r=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=r}))},t.prototype.restoreSettings=function(){var e=void 0;try{e=JSON.parse(i.localStorage.getItem(ho))}catch(e){f.warn(e)}e&&this.setValues(e)},t.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?i.localStorage.setItem(ho,JSON.stringify(e)):i.localStorage.removeItem(ho)}catch(e){f.warn(e)}}},t.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(u,"keydown",this.handleKeyDown);var e=this.player_.controlBar,t=e&&e.subsCapsButton,r=e&&e.captionsButton;t?t.focus():r&&r.focus()},t}(qt);Je.registerComponent("TextTrackSettings",xo);var Ao=function(e){function t(r,n){y(this,t);var o=n.ResizeObserver||i.ResizeObserver;null===n.ResizeObserver&&(o=!1);var s=Qe({createEl:!o,reportTouchActivity:!1},n),a=_(this,e.call(this,r,s));return a.ResizeObserver=n.ResizeObserver||i.ResizeObserver,a.loadListener_=null,a.resizeObserver_=null,a.debouncedHandler_=Re((function(){a.resizeHandler()}),100,!1,a),o?(a.resizeObserver_=new a.ResizeObserver(a.debouncedHandler_),a.resizeObserver_.observe(r.el())):(a.loadListener_=function(){a.el_&&a.el_.contentWindow&&we(a.el_.contentWindow,"resize",a.debouncedHandler_)},a.one("load",a.loadListener_)),a}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})},t.prototype.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},t.prototype.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.el_&&this.el_.contentWindow&&Se(this.el_.contentWindow,"resize",this.debouncedHandler_),this.loadListener_&&this.off("load",this.loadListener_),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null},t}(Je);Je.registerComponent("ResizeManager",Ao);var Po=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var r=e.$$("source"),n=[],i="";if(!r.length)return!1;for(var o=0;o<r.length;o++){var s=r[o].src;s&&-1===n.indexOf(s)&&n.push(s)}return!!n.length&&(1===n.length&&(i=n[0]),e.triggerSourceset(i),!0)},Io=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=u.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var r=u.createDocumentFragment();t.childNodes.length;)r.appendChild(t.childNodes[0]);return this.innerText="",i.Element.prototype.appendChild.call(this,r),this.innerHTML}}),Mo=function(e,t){for(var r={},n=0;n<e.length&&!((r=Object.getOwnPropertyDescriptor(e[n],t))&&r.set&&r.get);n++);return r.enumerable=!0,r.configurable=!0,r},Lo=function(e){return Mo([e.el(),i.HTMLMediaElement.prototype,i.Element.prototype,Io],"innerHTML")},Do=function(e){var t=e.el();if(!t.resetSourceWatch_){var r={},n=Lo(e),i=function(r){return function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=r.apply(t,i);return Po(e),s}};["append","appendChild","insertAdjacentHTML"].forEach((function(e){t[e]&&(r[e]=t[e],t[e]=i(r[e]))})),Object.defineProperty(t,"innerHTML",Qe(n,{set:i(n.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(r).forEach((function(e){t[e]=r[e]})),Object.defineProperty(t,"innerHTML",n)},e.one("sourceset",t.resetSourceWatch_)}},Ro=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?or(i.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return i.Element.prototype.setAttribute.call(this,"src",e),e}}),No=function(e){return Mo([e.el(),i.HTMLMediaElement.prototype,Ro],"src")},jo=function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var r=No(e),n=t.setAttribute,i=t.load;Object.defineProperty(t,"src",Qe(r,{set:function(n){var i=r.set.call(t,n);return e.triggerSourceset(t.src),i}})),t.setAttribute=function(r,i){var o=n.call(t,r,i);return/src/i.test(r)&&e.triggerSourceset(t.src),o},t.load=function(){var r=i.call(t);return Po(e)||(e.triggerSourceset(""),Do(e)),r},t.currentSrc?e.triggerSourceset(t.currentSrc):Po(e)||Do(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=i,t.setAttribute=n,Object.defineProperty(t,"src",r),t.resetSourceWatch_&&t.resetSourceWatch_()}}}},Uo=T(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),Fo=function(e){function t(r,n){y(this,t);var i=_(this,e.call(this,r,n)),o=r.source,s=!1;if(o&&(i.el_.currentSrc!==o.src||r.tag&&3===r.tag.initNetworkState_)?i.setSource(o):i.handleLateInit_(i.el_),r.enableSourceset&&i.setupSourcesetHandling_(),i.el_.hasChildNodes()){for(var a=i.el_.childNodes,c=a.length,u=[];c--;){var l=a[c];"track"===l.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(l),i.remoteTextTracks().addTrack(l.track),i.textTracks().addTrack(l.track),s||i.el_.hasAttribute("crossorigin")||!ar(l.src)||(s=!0)):u.push(l))}for(var d=0;d<u.length;d++)i.el_.removeChild(u[d])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&s&&f.warn(v(Uo)),i.restoreMetadataTracksInIOSNativePlayer_(),(yt||it||lt)&&!0===r.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}return b(t,e),t.prototype.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},t.prototype.setupSourcesetHandling_=function(){jo(this)},t.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var e=this.textTracks(),t=void 0,r=function(){t=[];for(var r=0;r<e.length;r++){var n=e[r];"metadata"===n.kind&&t.push({track:n,storedMode:n.mode})}};r(),e.addEventListener("change",r),this.on("dispose",(function(){return e.removeEventListener("change",r)}));var n=function r(){for(var n=0;n<t.length;n++){var i=t[n];"disabled"===i.track.mode&&i.track.mode!==i.storedMode&&(i.track.mode=i.storedMode)}e.removeEventListener("change",r)};this.on("webkitbeginfullscreen",(function(){e.removeEventListener("change",r),e.removeEventListener("change",n),e.addEventListener("change",n)})),this.on("webkitendfullscreen",(function(){e.removeEventListener("change",r),e.addEventListener("change",r),e.removeEventListener("change",n)}))},t.prototype.overrideNative_=function(e,t){var r=this;if(t===this["featuresNative"+e+"Tracks"]){var n=e.toLowerCase();this[n+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach((function(e){r.el()[n+"Tracks"].removeEventListener(e,r[n+"TracksListeners_"][e])})),this["featuresNative"+e+"Tracks"]=!t,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n)}},t.prototype.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},t.prototype.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},t.prototype.proxyNativeTracksForType_=function(e){var t=this,r=qr[e],n=this.el()[r.getterName],i=this[r.getterName]();if(this["featuresNative"+r.capitalName+"Tracks"]&&n&&n.addEventListener){var o={change:function(e){i.trigger({type:"change",target:i,currentTarget:i,srcElement:i})},addtrack:function(e){i.addTrack(e.track)},removetrack:function(e){i.removeTrack(e.track)}},s=function(){for(var e=[],t=0;t<i.length;t++){for(var r=!1,o=0;o<n.length;o++)if(n[o]===i[t]){r=!0;break}r||e.push(i[t])}for(;e.length;)i.removeTrack(e.shift())};this[r.getterName+"Listeners_"]=o,Object.keys(o).forEach((function(e){var r=o[e];n.addEventListener(e,r),t.on("dispose",(function(t){return n.removeEventListener(e,r)}))})),this.on("loadstart",s),this.on("dispose",(function(e){return t.off("loadstart",s)}))}},t.prototype.proxyNativeTracks_=function(){var e=this;qr.names.forEach((function(t){e.proxyNativeTracksForType_(t)}))},t.prototype.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var r=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(r,e),t.disposeMediaElement(e),e=r}else{e=u.createElement("video");var n=Qe({},this.options_.tag&&z(this.options_.tag));yt&&!0===this.options_.nativeControlsForTouch||delete n.controls,W(e,O(n,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&K(e,"preload",this.options_.preload);for(var i=["loop","muted","playsinline","autoplay"],o=0;o<i.length;o++){var s=i[o],a=this.options_[s];void 0!==a&&(a?K(e,s,s):X(e,s),e[s]=a)}return e},t.prototype.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,r=function(){t=!0};this.on("loadstart",r);var n=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready((function(){this.off("loadstart",r),this.off("loadedmetadata",n),t||this.trigger("loadstart")}))}var i=["loadstart"];i.push("loadedmetadata"),e.readyState>=2&&i.push("loadeddata"),e.readyState>=3&&i.push("canplay"),e.readyState>=4&&i.push("canplaythrough"),this.ready((function(){i.forEach((function(e){this.trigger(e)}),this)}))}},t.prototype.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){f(e,"Video is not ready. (Video.js)")}},t.prototype.duration=function(){var e=this;if(this.el_.duration===1/0&&ct&&pt&&0===this.el_.currentTime){var t=function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))};return this.on("timeupdate",t),NaN}return this.el_.duration||NaN},t.prototype.width=function(){return this.el_.offsetWidth},t.prototype.height=function(){return this.el_.offsetHeight},t.prototype.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},r=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",r),this.on("dispose",(function(){e.off("webkitbeginfullscreen",r),e.off("webkitendfullscreen",t)}))}},t.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=i.navigator&&i.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},t.prototype.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout((function(){e.pause(),e.webkitEnterFullScreen()}),0)):e.webkitEnterFullScreen()},t.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},t.prototype.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},t.prototype.reset=function(){t.resetMediaElement(this.el_)},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.prototype.setControls=function(e){this.el_.controls=!!e},t.prototype.addTextTrack=function(t,r,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,r,n):e.prototype.addTextTrack.call(this,t,r,n)},t.prototype.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var r=u.createElement("track");return t.kind&&(r.kind=t.kind),t.label&&(r.label=t.label),(t.language||t.srclang)&&(r.srclang=t.language||t.srclang),t.default&&(r.default=t.default),t.id&&(r.id=t.id),t.src&&(r.src=t.src),r},t.prototype.addRemoteTextTrack=function(t,r){var n=e.prototype.addRemoteTextTrack.call(this,t,r);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},t.prototype.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var r=this.$$("track"),n=r.length;n--;)t!==r[n]&&t!==r[n].track||this.el().removeChild(r[n])},t.prototype.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),i.performance&&"function"==typeof i.performance.now?e.creationTime=i.performance.now():i.performance&&i.performance.timing&&"number"==typeof i.performance.timing.navigationStart&&(e.creationTime=i.Date.now()-i.performance.timing.navigationStart),e},t}(In);if(D()){Fo.TEST_VID=u.createElement("video");var $o=u.createElement("track");$o.kind="captions",$o.srclang="en",$o.label="English",Fo.TEST_VID.appendChild($o)}Fo.isSupported=function(){try{Fo.TEST_VID.volume=.5}catch(e){return!1}return!(!Fo.TEST_VID||!Fo.TEST_VID.canPlayType)},Fo.canPlayType=function(e){return Fo.TEST_VID.canPlayType(e)},Fo.canPlaySource=function(e,t){return Fo.canPlayType(e.type)},Fo.canControlVolume=function(){try{var e=Fo.TEST_VID.volume;return Fo.TEST_VID.volume=e/2+.1,e!==Fo.TEST_VID.volume}catch(e){return!1}},Fo.canMuteVolume=function(){try{var e=Fo.TEST_VID.muted;return Fo.TEST_VID.muted=!e,Fo.TEST_VID.muted?K(Fo.TEST_VID,"muted","muted"):X(Fo.TEST_VID,"muted","muted"),e!==Fo.TEST_VID.muted}catch(e){return!1}},Fo.canControlPlaybackRate=function(){if(ct&&pt&&ft<58)return!1;try{var e=Fo.TEST_VID.playbackRate;return Fo.TEST_VID.playbackRate=e/2+.1,e!==Fo.TEST_VID.playbackRate}catch(e){return!1}},Fo.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(u.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(u.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(u.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(u.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},Fo.supportsNativeTextTracks=function(){return gt||st&&pt},Fo.supportsNativeVideoTracks=function(){return!(!Fo.TEST_VID||!Fo.TEST_VID.videoTracks)},Fo.supportsNativeAudioTracks=function(){return!(!Fo.TEST_VID||!Fo.TEST_VID.audioTracks)},Fo.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],Fo.prototype.featuresVolumeControl=Fo.canControlVolume(),Fo.prototype.featuresMuteControl=Fo.canMuteVolume(),Fo.prototype.featuresPlaybackRate=Fo.canControlPlaybackRate(),Fo.prototype.featuresSourceset=Fo.canOverrideAttributes(),Fo.prototype.movingMediaElementInDOM=!st,Fo.prototype.featuresFullscreenResize=!0,Fo.prototype.featuresProgressEvents=!0,Fo.prototype.featuresTimeupdateEvents=!0,Fo.prototype.featuresNativeTextTracks=Fo.supportsNativeTextTracks(),Fo.prototype.featuresNativeVideoTracks=Fo.supportsNativeVideoTracks(),Fo.prototype.featuresNativeAudioTracks=Fo.supportsNativeAudioTracks();var Bo=Fo.TEST_VID&&Fo.TEST_VID.constructor.prototype.canPlayType,Vo=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;Fo.patchCanPlayType=function(){ut>=4&&!dt&&!pt&&(Fo.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&Vo.test(e)?"maybe":Bo.call(this,e)})},Fo.unpatchCanPlayType=function(){var e=Fo.TEST_VID.constructor.prototype.canPlayType;return Fo.TEST_VID.constructor.prototype.canPlayType=Bo,e},Fo.patchCanPlayType(),Fo.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},Fo.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),r=t.length;r--;)e.removeChild(t[r]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){Fo.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){Fo.prototype["set"+Xe(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach((function(e){Fo.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach((function(e){Fo.prototype["set"+Xe(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){Fo.prototype[e]=function(){return this.el_[e]()}})),In.withSourceHandlers(Fo),Fo.nativeSourceHandler={},Fo.nativeSourceHandler.canPlayType=function(e){try{return Fo.TEST_VID.canPlayType(e)}catch(e){return""}},Fo.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return Fo.nativeSourceHandler.canPlayType(e.type);if(e.src){var r=sr(e.src);return Fo.nativeSourceHandler.canPlayType("video/"+r)}return""},Fo.nativeSourceHandler.handleSource=function(e,t,r){t.setSrc(e.src)},Fo.nativeSourceHandler.dispose=function(){},Fo.registerSourceHandler(Fo.nativeSourceHandler),In.registerTech("Html5",Fo);var qo=T(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "],["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]),Ho=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Wo={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},zo=function(t){function r(n,i,o){if(y(this,r),n.id=n.id||i.id||"vjs_video_"+de(),(i=O(r.getTagSettings(n),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if("function"==typeof n.closest){var s=n.closest("[lang]");s&&s.getAttribute&&(i.language=s.getAttribute("lang"))}else for(var a=n;a&&1===a.nodeType;){if(z(a).hasOwnProperty("lang")){i.language=a.getAttribute("lang");break}a=a.parentNode}var c=_(this,t.call(this,null,i,o));if(c.isPosterFromTech_=!1,c.queuedCallbacks_=[],c.isReady_=!1,c.hasStarted_=!1,c.userActive_=!1,!c.options_||!c.options_.techOrder||!c.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(c.tag=n,c.tagAttributes=n&&z(n),c.language(c.options_.language),i.languages){var u={};Object.getOwnPropertyNames(i.languages).forEach((function(e){u[e.toLowerCase()]=i.languages[e]})),c.languages_=u}else c.languages_=r.prototype.options_.languages;c.cache_={},c.poster_=i.poster||"",c.controls_=!!i.controls,c.cache_.lastVolume=1,n.controls=!1,n.removeAttribute("controls"),n.hasAttribute("autoplay")?c.options_.autoplay=!0:c.autoplay(c.options_.autoplay),c.scrubbing_=!1,c.el_=c.createEl(),c.cache_.lastPlaybackRate=c.defaultPlaybackRate(),ze(c,{eventBusKey:"el_"});var l=Qe(c.options_);if(i.plugins){var d=i.plugins;Object.keys(d).forEach((function(e){if("function"!=typeof this[e])throw new Error('plugin "'+e+'" does not exist');this[e](d[e])}),c)}c.options_.playerOptions=l,c.middleware_=[],c.initChildren(),c.isAudio("audio"===n.nodeName.toLowerCase()),c.controls()?c.addClass("vjs-controls-enabled"):c.addClass("vjs-controls-disabled"),c.el_.setAttribute("role","region"),c.isAudio()?c.el_.setAttribute("aria-label",c.localize("Audio Player")):c.el_.setAttribute("aria-label",c.localize("Video Player")),c.isAudio()&&c.addClass("vjs-audio"),c.flexNotSupported_()&&c.addClass("vjs-no-flex"),st||c.addClass("vjs-workinghover"),r.players[c.id_]=c;var h=e.split(".")[0];return c.addClass("vjs-v"+h),c.userActive(!0),c.reportUserActivity(),c.one("play",c.listenForUserActivity_),c.on("fullscreenchange",c.handleFullscreenChange_),c.on("stageclick",c.handleStageClick_),c.changingSrc_=!1,c.playWaitingForReady_=!1,c.playOnLoadstart_=null,c}return b(r,t),r.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),r.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),zn(this),t.prototype.dispose.call(this)},r.prototype.createEl=function(){var e=this.tag,r=void 0,n=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),o="video-js"===this.tag.tagName.toLowerCase();n?r=this.el_=e.parentNode:o||(r=this.el_=t.prototype.createEl.call(this,"div"));var s=z(e);if(o){for(r=this.el_=e,e=this.tag=u.createElement("video");r.children.length;)e.appendChild(r.firstChild);B(r,"video-js")||V(r,"video-js"),r.appendChild(e),n=this.playerElIngest_=r,Object.keys(r).forEach((function(t){e[t]=r[t]}))}if(e.setAttribute("tabindex","-1"),s.tabindex="-1",mt&&(e.setAttribute("role","application"),s.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach((function(t){o&&"class"===t||r.setAttribute(t,s[t]),o&&e.setAttribute(t,s[t])})),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=r.player=this,this.addClass("vjs-paused"),!0!==i.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Ie("vjs-styles-dimensions");var a=ae(".vjs-styles-defaults"),c=ae("head");c.insertBefore(this.styleEl_,a?a.nextSibling:c.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var l=e.getElementsByTagName("a"),d=0;d<l.length;d++){var h=l.item(d);V(h,"vjs-hidden"),h.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!n&&e.parentNode.insertBefore(r,e),$(e,r),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_=r,r},r.prototype.width=function(e){return this.dimension("width",e)},r.prototype.height=function(e){return this.dimension("height",e)},r.prototype.dimension=function(e,t){var r=e+"_";if(void 0===t)return this[r]||0;if(""===t)return this[r]=void 0,void this.updateStyleEl_();var n=parseFloat(t);isNaN(n)?f.error('Improper value "'+t+'" supplied for for '+e):(this[r]=n,this.updateStyleEl_())},r.prototype.fluid=function(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,e?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid"),this.updateStyleEl_()},r.prototype.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},r.prototype.updateStyleEl_=function(){if(!0!==i.VIDEOJS_NO_DYNAMIC_STYLE){var e=void 0,t=void 0,r=void 0,n=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),o=n[1]/n[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/o:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*o,r=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(r),Me(this.styleEl_,"\n      ."+r+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+r+".vjs-fluid {\n        padding-top: "+100*o+"%;\n      }\n    ")}else{var s="number"==typeof this.width_?this.width_:this.options_.width,a="number"==typeof this.height_?this.height_:this.options_.height,c=this.tech_&&this.tech_.el();c&&(s>=0&&(c.width=s),a>=0&&(c.height=a))}},r.prototype.loadTech_=function(e,t){var r=this;this.tech_&&this.unloadTech_();var n=Xe(e),i=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==n&&this.tag&&(In.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;var o={source:t,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+i+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Wr.names.forEach((function(e){var t=Wr[e];o[t.getterName]=r[t.privateName]})),O(o,this.options_[n]),O(o,this.options_[i]),O(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);var s=In.getTech(e);if(!s)throw new Error("No Tech named '"+n+"' exists! '"+n+"' should be registered using videojs.registerTech()'");this.tech_=new s(o),this.tech_.ready(Le(this,this.handleTechReady_),!0),$t.jsonToTextTracks(this.textTracksJson_||[],this.tech_),Ho.forEach((function(e){r.on(r.tech_,e,r["handleTech"+Xe(e)+"_"])})),Object.keys(Wo).forEach((function(e){r.on(r.tech_,e,(function(t){0===r.tech_.playbackRate()&&r.tech_.seeking()?r.queuedCallbacks_.push({callback:r["handleTech"+Wo[e]+"_"].bind(r),event:t}):r["handleTech"+Wo[e]+"_"](t)}))})),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||$(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},r.prototype.unloadTech_=function(){var e=this;Wr.names.forEach((function(t){var r=Wr[t];e[r.privateName]=e[r.getterName]()})),this.textTracksJson_=$t.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},r.prototype.tech=function(e){return void 0===e&&f.warn(v(qo)),this.tech_},r.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},r.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},r.prototype.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},r.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},r.prototype.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var r=function(){var e=t.muted();t.muted(!0);var r=t.play();if(r&&r.then&&r.catch)return r.catch((function(r){t.muted(e)}))},n=void 0;if("any"===e?(n=this.play())&&n.then&&n.catch&&n.catch((function(){return r()})):n="muted"===e?r():this.play(),n&&n.then&&n.catch)return n.then((function(){t.trigger({type:"autoplay-success",autoplay:e})})).catch((function(r){t.trigger({type:"autoplay-failure",autoplay:e})}))}},r.prototype.updateSourceCaches_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e,r="";if("string"!=typeof t&&(t=e.src,r=e.type),!/^blob:/.test(t)){this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!r&&(r=Qn(this,t)),this.cache_.source=Qe({},e,{src:t,type:r});for(var n=this.cache_.sources.filter((function(e){return e.src&&e.src===t})),i=[],o=this.$$("source"),s=[],a=0;a<o.length;a++){var c=z(o[a]);i.push(c),c.src&&c.src===t&&s.push(c.src)}s.length&&!n.length?this.cache_.sources=i:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}},r.prototype.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_&&(this.updateSourceCaches_(e.src),!e.src)){var r=function e(r){"sourceset"!==r.type&&t.updateSourceCaches_(t.techGet_("currentSrc")),t.tech_.off(["sourceset","loadstart"],e)};this.tech_.one(["sourceset","loadstart"],r)}this.trigger({src:e.src,type:"sourceset"})},r.prototype.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},r.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},r.prototype.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(e){return e.callback(e.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},r.prototype.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",(function(){return e.removeClass("vjs-waiting")}))},r.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},r.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},r.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},r.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},r.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},r.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(f.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},r.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},r.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},r.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},r.prototype.handleTechClick_=function(e){se(e)&&this.controls_&&(this.paused()?Nt(this.play()):this.pause())},r.prototype.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(t){return t.contains(e.target)}))||(this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},r.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},r.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},r.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},r.prototype.handleTechTouchEnd_=function(e){e.preventDefault()},r.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},r.prototype.handleStageClick_=function(){this.reportUserActivity()},r.prototype.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},r.prototype.handleTechError_=function(){var e=this.tech_.error();this.error(e)},r.prototype.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},r.prototype.getCache=function(){return this.cache_},r.prototype.techCall_=function(e,t){this.ready((function(){if(e in Vn)return Fn(this.middleware_,this.tech_,e,t);if(e in qn)return $n(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw f(e),e}}),!0)},r.prototype.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Bn)return Un(this.middleware_,this.tech_,e);if(e in qn)return $n(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw f("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw f("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw f(t),t}}},r.prototype.play=function(){var e=this,t=this.options_.Promise||i.Promise;return t?new t((function(t){e.play_(t)})):this.play_()},r.prototype.play_=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt;if(this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return void t(this.techGet_("play"));this.playOnLoadstart_=function(){e.playOnLoadstart_=null,t(e.play())},this.one("loadstart",this.playOnLoadstart_)}else{if(this.playWaitingForReady_)return;this.playWaitingForReady_=!0,this.ready((function(){e.playWaitingForReady_=!1,t(e.play())}))}},r.prototype.pause=function(){this.techCall_("pause")},r.prototype.paused=function(){return!1!==this.techGet_("paused")},r.prototype.played=function(){return this.techGet_("played")||St(0,0)},r.prototype.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},r.prototype.currentTime=function(e){return void 0!==e?(e<0&&(e=0),void this.techCall_("setCurrentTime",e)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},r.prototype.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))},r.prototype.remainingTime=function(){return this.duration()-this.currentTime()},r.prototype.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},r.prototype.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=St(0,0)),e},r.prototype.bufferedPercent=function(){return Ct(this.buffered(),this.duration())},r.prototype.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),r=e.end(e.length-1);return r>t&&(r=t),r},r.prototype.volume=function(e){var t=void 0;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},r.prototype.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},r.prototype.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},r.prototype.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},r.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},r.prototype.isFullscreen=function(e){if(void 0===e)return!!this.isFullscreen_;this.isFullscreen_=!!e},r.prototype.requestFullscreen=function(){var e=Et;this.isFullscreen(!0),e.requestFullscreen?(we(u,e.fullscreenchange,Le(this,(function t(r){this.isFullscreen(u[e.fullscreenElement]),!1===this.isFullscreen()&&Se(u,e.fullscreenchange,t),this.trigger("fullscreenchange")}))),this.el_[e.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},r.prototype.exitFullscreen=function(){var e=Et;this.isFullscreen(!1),e.requestFullscreen?u[e.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},r.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=u.documentElement.style.overflow,we(u,"keydown",Le(this,this.fullWindowOnEscKey)),u.documentElement.style.overflow="hidden",V(u.body,"vjs-full-window"),this.trigger("enterFullWindow")},r.prototype.fullWindowOnEscKey=function(e){27===e.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},r.prototype.exitFullWindow=function(){this.isFullWindow=!1,Se(u,"keydown",this.fullWindowOnEscKey),u.documentElement.style.overflow=this.docOrigOverflow,q(u.body,"vjs-full-window"),this.trigger("exitFullWindow")},r.prototype.canPlayType=function(e){for(var t=void 0,r=0,n=this.options_.techOrder;r<n.length;r++){var i=n[r],o=In.getTech(i);if(o||(o=Je.getComponent(i)),o){if(o.isSupported()&&(t=o.canPlayType(e)))return t}else f.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},r.prototype.selectSource=function(e){var t=this,r=this.options_.techOrder.map((function(e){return[e,In.getTech(e)]})).filter((function(e){var t=e[0],r=e[1];return r?r.isSupported():(f.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)})),n=function(e,t,r){var n=void 0;return e.some((function(e){return t.some((function(t){if(n=r(e,t))return!0}))})),n},i=function(e){return function(t,r){return e(r,t)}},o=function(e,r){var n=e[0];if(e[1].canPlaySource(r,t.options_[n.toLowerCase()]))return{source:r,tech:n}};return(this.options_.sourceOrder?n(e,r,i(o)):n(r,e,o))||!1},r.prototype.src=function(e){var t=this;if(void 0===e)return this.cache_.src||"";var r=Jn(e);r.length?(this.changingSrc_=!0,this.cache_.sources=r,this.updateSourceCaches_(r[0]),Nn(this,r[0],(function(e,n){if(t.middleware_=n,t.cache_.sources=r,t.updateSourceCaches_(e),t.src_(e))return r.length>1?t.src(r.slice(1)):(t.changingSrc_=!1,t.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0),void t.triggerReady());jn(n,t.tech_)}))):this.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0)},r.prototype.src_=function(e){var t=this,r=this.selectSource([e]);return!r||(Ye(r.tech,this.techName_)?(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1):(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready((function(){t.changingSrc_=!1})),!1))},r.prototype.load=function(){this.techCall_("load")},r.prototype.reset=function(){this.tech_&&this.tech_.clearTracks("text"),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset")},r.prototype.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},r.prototype.currentSource=function(){return this.cache_.source||{}},r.prototype.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},r.prototype.currentType=function(){return this.currentSource()&&this.currentSource().type||""},r.prototype.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},r.prototype.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t=void 0;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t=t||this.options_.autoplay,this.tech_&&this.techCall_("setAutoplay",t)},r.prototype.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},r.prototype.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},r.prototype.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},r.prototype.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},r.prototype.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},r.prototype.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},r.prototype.error=function(e){return void 0===e?this.error_||null:null===e?(this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new It(e),this.addClass("vjs-error"),f.error("(CODE:"+this.error_.code+" "+It.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},r.prototype.reportUserActivity=function(e){this.userActivity_=!0},r.prototype.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},r.prototype.listenForUserActivity_=function(){var e=void 0,t=void 0,r=void 0,n=Le(this,this.reportUserActivity),i=function(e){e.screenX===t&&e.screenY===r||(t=e.screenX,r=e.screenY,n())},o=function(){n(),this.clearInterval(e),e=this.setInterval(n,250)},s=function(t){n(),this.clearInterval(e)};this.on("mousedown",o),this.on("mousemove",i),this.on("mouseup",s),this.on("keydown",n),this.on("keyup",n);var a=void 0;this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);var e=this.options_.inactivityTimeout;e<=0||(a=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}}),250)},r.prototype.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},r.prototype.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},r.prototype.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},r.prototype.addTextTrack=function(e,t,r){if(this.tech_)return this.tech_.addTextTrack(e,t,r)},r.prototype.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},r.prototype.removeRemoteTextTrack=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).track,t=void 0===e?arguments[0]:e;if(this.tech_)return this.tech_.removeRemoteTextTrack(t)},r.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},r.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},r.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},r.prototype.language=function(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()},r.prototype.languages=function(){return Qe(r.prototype.options_.languages,this.languages_)},r.prototype.toJSON=function(){var e=Qe(this.options_),t=e.tracks;e.tracks=[];for(var r=0;r<t.length;r++){var n=t[r];(n=Qe(n)).player=void 0,e.tracks[r]=n}return e},r.prototype.createModal=function(e,t){var r=this;(t=t||{}).content=e||"";var n=new qt(this,t);return this.addChild(n),n.on("dispose",(function(){r.removeChild(n)})),n.open(),n},r.getTagSettings=function(e){var t={sources:[],tracks:[]},r=z(e),n=r["data-setup"];if(B(e,"vjs-fluid")&&(r.fluid=!0),null!==n){var i=Lt(n||"{}"),o=i[0],s=i[1];o&&f.error(o),O(r,s)}if(O(t,r),e.hasChildNodes())for(var a=e.childNodes,c=0,u=a.length;c<u;c++){var l=a[c],d=l.nodeName.toLowerCase();"source"===d?t.sources.push(z(l)):"track"===d&&t.tracks.push(z(l))}return t},r.prototype.flexNotSupported_=function(){var e=u.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},r}(Je);Wr.names.forEach((function(e){var t=Wr[e];zo.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),zo.players={};var Go=i.navigator;zo.prototype.options_={techOrder:In.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Go&&(Go.languages&&Go.languages[0]||Go.userLanguage||Go.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){zo.prototype[e]=function(){return this.techGet_(e)}})),Ho.forEach((function(e){zo.prototype["handleTech"+Xe(e)+"_"]=function(){return this.trigger(e)}})),Je.registerComponent("Player",zo);var Ko="plugin",Xo="activePlugins_",Yo={},Qo=function(e){return Yo.hasOwnProperty(e)},Jo=function(e){return Qo(e)?Yo[e]:void 0},Zo=function(e,t){e[Xo]=e[Xo]||{},e[Xo][t]=!0},es=function(e,t,r){var n=(r?"before":"")+"pluginsetup";e.trigger(n,t),e.trigger(n+":"+t.name,t)},ts=function(e,t){var r=function(){es(this,{name:e,plugin:t,instance:null},!0);var r=t.apply(this,arguments);return Zo(this,e),es(this,{name:e,plugin:t,instance:r}),r};return Object.keys(t).forEach((function(e){r[e]=t[e]})),r},rs=function(e,t){return t.prototype.name=e,function(){es(this,{name:e,plugin:t,instance:null},!0);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=new(Function.prototype.bind.apply(t,[null].concat([this].concat(n))));return this[e]=function(){return o},es(this,o.getEventHash()),o}},ns=function(){function e(t){if(y(this,e),this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,ze(this),delete this.trigger,Ke(this,this.constructor.defaultState),Zo(t,this.name),this.dispose=Le(this,this.dispose),t.on("dispose",this.dispose)}return e.prototype.version=function(){return this.constructor.VERSION},e.prototype.getEventHash=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.name=this.name,e.plugin=this.constructor,e.instance=this,e},e.prototype.trigger=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce(this.eventBusEl_,e,this.getEventHash(t))},e.prototype.handleStateChanged=function(e){},e.prototype.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Xo][e]=!1,this.player=this.state=null,t[e]=rs(e,Yo[e])},e.isBasic=function(t){var r="string"==typeof t?Jo(t):t;return"function"==typeof r&&!e.prototype.isPrototypeOf(r.prototype)},e.registerPlugin=function(t,r){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+(void 0===t?"undefined":g(t))+".");if(Qo(t))f.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(zo.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof r)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+(void 0===r?"undefined":g(r))+".");return Yo[t]=r,t!==Ko&&(e.isBasic(r)?zo.prototype[t]=ts(t,r):zo.prototype[t]=rs(t,r)),r},e.deregisterPlugin=function(e){if(e===Ko)throw new Error("Cannot de-register base plugin.");Qo(e)&&(delete Yo[e],delete zo.prototype[e])},e.getPlugins=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(Yo),t=void 0;return e.forEach((function(e){var r=Jo(e);r&&((t=t||{})[e]=r)})),t},e.getPluginVersion=function(e){var t=Jo(e);return t&&t.VERSION||""},e}();ns.getPlugin=Jo,ns.BASE_PLUGIN_NAME=Ko,ns.registerPlugin(Ko,ns),zo.prototype.usingPlugin=function(e){return!!this[Xo]&&!0===this[Xo][e]},zo.prototype.hasPlugin=function(e){return!!Qo(e)};var is=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":g(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)},os=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(){e.apply(this,arguments)},n={};for(var i in"object"===(void 0===t?"undefined":g(t))?(t.constructor!==Object.prototype.constructor&&(r=t.constructor),n=t):"function"==typeof t&&(r=t),is(r,e),n)n.hasOwnProperty(i)&&(r.prototype[i]=n[i]);return r},ss=function(e){return 0===e.indexOf("#")?e.slice(1):e};function as(e,t,r){var n=as.getPlayer(e);if(n)return t&&f.warn('Player "'+e+'" is already initialised. Options will not be applied.'),r&&n.ready(r),n;var i="string"==typeof e?ae("#"+ss(e)):e;if(!R(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");u.body.contains(i)||f.warn("The element supplied is not included in the DOM"),t=t||{},as.hooks("beforesetup").forEach((function(e){var r=e(i,Qe(t));k(r)&&!Array.isArray(r)?t=Qe(t,r):f.error("please return an object in beforesetup hooks")}));var o=Je.getComponent("Player");return n=new o(i,t,r),as.hooks("setup").forEach((function(e){return e(n)})),n}if(as.hooks_={},as.hooks=function(e,t){return as.hooks_[e]=as.hooks_[e]||[],t&&(as.hooks_[e]=as.hooks_[e].concat(t)),as.hooks_[e]},as.hook=function(e,t){as.hooks(e,t)},as.hookOnce=function(e,t){as.hooks(e,[].concat(t).map((function(t){var r=function r(){return as.removeHook(e,r),t.apply(void 0,arguments)};return r})))},as.removeHook=function(e,t){var r=as.hooks(e).indexOf(t);return!(r<=-1||(as.hooks_[e]=as.hooks_[e].slice(),as.hooks_[e].splice(r,1),0))},!0!==i.VIDEOJS_NO_DYNAMIC_STYLE&&D()){var cs=ae(".vjs-styles-defaults");if(!cs){cs=Ie("vjs-styles-defaults");var us=ae("head");us&&us.insertBefore(cs,us.firstChild),Me(cs,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}return Pe(1,as),as.VERSION=e,as.options=zo.prototype.options_,as.getPlayers=function(){return zo.players},as.getPlayer=function(e){var t=zo.players,r=void 0;if("string"==typeof e){var n=ss(e),i=t[n];if(i)return i;r=ae("#"+n)}else r=e;if(R(r)){var o=r,s=o.player,a=o.playerId;if(s||t[a])return s||t[a]}},as.getAllPlayers=function(){return Object.keys(zo.players).map((function(e){return zo.players[e]})).filter(Boolean)},as.players=zo.players,as.getComponent=Je.getComponent,as.registerComponent=function(e,t){In.isTech(t)&&f.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Je.registerComponent.call(Je,e,t)},as.getTech=In.getTech,as.registerTech=In.registerTech,as.use=Rn,Object.defineProperty(as,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(as.middleware,"TERMINATOR",{value:Dn,writeable:!1,enumerable:!0}),as.browser=bt,as.TOUCH_ENABLED=yt,as.extend=os,as.mergeOptions=Qe,as.bind=Le,as.registerPlugin=ns.registerPlugin,as.deregisterPlugin=ns.deregisterPlugin,as.plugin=function(e,t){return f.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),ns.registerPlugin(e,t)},as.getPlugins=ns.getPlugins,as.getPlugin=ns.getPlugin,as.getPluginVersion=ns.getPluginVersion,as.addLanguage=function(e,t){var r;return e=(""+e).toLowerCase(),as.options.languages=Qe(as.options.languages,((r={})[e]=t,r)),as.options.languages[e]},as.log=f,as.createTimeRange=as.createTimeRanges=St,as.formatTime=yi,as.setFormatTime=vi,as.resetFormatTime=gi,as.parseUrl=ir,as.isCrossOrigin=ar,as.EventTarget=Ne,as.on=we,as.one=Ee,as.off=Se,as.trigger=Ce,as.xhr=Er,as.TextTrack=Rr,as.AudioTrack=Nr,as.VideoTrack=jr,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(e){as[e]=function(){return f.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),ue[e].apply(null,arguments)}})),as.computedStyle=A,as.dom=ue,as.url=cr,as}()},6150:(e,t,r)=>{function n(e){this.options=e||{locator:{}}}function i(){this.cdata=!1}function o(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function s(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function a(e,t,r){return"string"==typeof e?e.substr(t,r):e.length>=t+r||t?new java.lang.String(e,t,r)+"":e}function c(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}n.prototype.parseFromString=function(e,t){var r=this.options,n=new u,o=r.domBuilder||new i,a=r.errorHandler,c=r.locator,l=r.xmlns||{},d={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return c&&o.setDocumentLocator(c),n.errorHandler=function(e,t,r){if(!e){if(t instanceof i)return t;e=t}var n={},o=e instanceof Function;function a(t){var i=e[t];!i&&o&&(i=2==e.length?function(r){e(t,r)}:e),n[t]=i&&function(e){i("[xmldom "+t+"]\t"+e+s(r))}||function(){}}return r=r||{},a("warning"),a("error"),a("fatalError"),n}(a,o,c),n.domBuilder=r.domBuilder||o,/\/x?html?$/.test(t)&&(d.nbsp=" ",d.copy="©",l[""]="http://www.w3.org/1999/xhtml"),l.xml=l.xml||"http://www.w3.org/XML/1998/namespace",e?n.parse(e,l,d):n.errorHandler.error("invalid doc source"),o.doc},i.prototype={startDocument:function(){this.doc=(new l).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,r,n){var i=this.doc,s=i.createElementNS(e,r||t),a=n.length;c(this,s),this.currentElement=s,this.locator&&o(this.locator,s);for(var u=0;u<a;u++){e=n.getURI(u);var l=n.getValue(u),d=(r=n.getQName(u),i.createAttributeNS(e,r));this.locator&&o(n.getLocator(u),d),d.value=d.nodeValue=l,s.setAttributeNode(d)}},endElement:function(e,t,r){var n=this.currentElement;n.tagName;this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var r=this.doc.createProcessingInstruction(e,t);this.locator&&o(this.locator,r),c(this,r)},ignorableWhitespace:function(e,t,r){},characters:function(e,t,r){if(e=a.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(e);else n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&o(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,r){e=a.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&o(this.locator,n),c(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(e,t,r);this.locator&&o(this.locator,i),c(this,i)}},warning:function(e){console.warn("[xmldom warning]\t"+e,s(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,s(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,s(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){i.prototype[e]=function(){return null}}));var u=r(6147).G,l=r(9541).DOMImplementation;r(9541),t.a=n},9541:(e,t)=>{function r(e,t){for(var r in e)t[r]=e[r]}function n(e,t){var n=e.prototype;if(Object.create){var i=Object.create(t.prototype);n.__proto__=i}if(!(n instanceof t)){function o(){}o.prototype=t.prototype,r(n,o=new o),e.prototype=n=o}n.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),n.constructor=e)}var i={},o=i.ELEMENT_NODE=1,s=i.ATTRIBUTE_NODE=2,a=i.TEXT_NODE=3,c=i.CDATA_SECTION_NODE=4,u=i.ENTITY_REFERENCE_NODE=5,l=i.ENTITY_NODE=6,d=i.PROCESSING_INSTRUCTION_NODE=7,h=i.COMMENT_NODE=8,p=i.DOCUMENT_NODE=9,f=i.DOCUMENT_TYPE_NODE=10,m=i.DOCUMENT_FRAGMENT_NODE=11,v=i.NOTATION_NODE=12,g={},y={},b=(g.INDEX_SIZE_ERR=(y[1]="Index size error",1),g.DOMSTRING_SIZE_ERR=(y[2]="DOMString size error",2),g.HIERARCHY_REQUEST_ERR=(y[3]="Hierarchy request error",3)),_=(g.WRONG_DOCUMENT_ERR=(y[4]="Wrong document",4),g.INVALID_CHARACTER_ERR=(y[5]="Invalid character",5),g.NO_DATA_ALLOWED_ERR=(y[6]="No data allowed",6),g.NO_MODIFICATION_ALLOWED_ERR=(y[7]="No modification allowed",7),g.NOT_FOUND_ERR=(y[8]="Not found",8)),T=(g.NOT_SUPPORTED_ERR=(y[9]="Not supported",9),g.INUSE_ATTRIBUTE_ERR=(y[10]="Attribute in use",10));g.INVALID_STATE_ERR=(y[11]="Invalid state",11),g.SYNTAX_ERR=(y[12]="Syntax error",12),g.INVALID_MODIFICATION_ERR=(y[13]="Invalid modification",13),g.NAMESPACE_ERR=(y[14]="Invalid namespace",14),g.INVALID_ACCESS_ERR=(y[15]="Invalid access",15);function w(e,t){if(t instanceof Error)var r=t;else r=this,Error.call(this,y[e]),this.message=y[e],Error.captureStackTrace&&Error.captureStackTrace(this,w);return r.code=e,t&&(this.message=this.message+": "+t),r}function S(){}function C(e,t){this._node=e,this._refresh=t,E(this)}function E(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);ne(e,"length",n.length),r(n,e),e._inc=t}}function O(){}function k(e,t){for(var r=e.length;r--;)if(e[r]===t)return r}function x(e,t,r,n){if(n?t[k(t,n)]=r:t[t.length++]=r,e){r.ownerElement=e;var i=e.ownerDocument;i&&(n&&R(i,e,n),function(e,t,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&(t._nsMap[r.prefix?r.localName:""]=r.value)}(i,e,r))}}function A(e,t,r){var n=k(t,r);if(!(n>=0))throw w(_,new Error(e.tagName+"@"+r));for(var i=t.length-1;n<i;)t[n]=t[++n];if(t.length=i,e){var o=e.ownerDocument;o&&(R(o,e,r),r.ownerElement=null)}}function P(e){if(this._features={},e)for(var t in e)this._features=e[t]}function I(){}function M(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function L(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(L(e,t))return!0}while(e=e.nextSibling)}function D(){}function R(e,t,r,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&delete t._nsMap[r.prefix?r.localName:""]}function N(e,t,r){if(e&&e._inc){e._inc++;var n=t.childNodes;if(r)n[n.length++]=r;else{for(var i=t.firstChild,o=0;i;)n[o++]=i,i=i.nextSibling;n.length=o}}}function j(e,t){var r=t.previousSibling,n=t.nextSibling;return r?r.nextSibling=n:e.firstChild=n,n?n.previousSibling=r:e.lastChild=r,N(e.ownerDocument,e),t}function U(e,t,r){var n=t.parentNode;if(n&&n.removeChild(t),t.nodeType===m){var i=t.firstChild;if(null==i)return t;var o=t.lastChild}else i=o=t;var s=r?r.previousSibling:e.lastChild;i.previousSibling=s,o.nextSibling=r,s?s.nextSibling=i:e.firstChild=i,null==r?e.lastChild=o:r.previousSibling=o;do{i.parentNode=e}while(i!==o&&(i=i.nextSibling));return N(e.ownerDocument||e,e),t.nodeType==m&&(t.firstChild=t.lastChild=null),t}function F(){this._nsMap={}}function $(){}function B(){}function V(){}function q(){}function H(){}function W(){}function z(){}function G(){}function K(){}function X(){}function Y(){}function Q(){}function J(e,t){var r=[],n=9==this.nodeType?this.documentElement:this,i=n.prefix,o=n.namespaceURI;if(o&&null==i&&null==(i=n.lookupPrefix(o)))var s=[{namespace:o,prefix:null}];return ee(this,r,e,t,s),r.join("")}function Z(e,t,r){var n=e.prefix||"",i=e.namespaceURI;if(!n&&!i)return!1;if("xml"===n&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var o=r.length;o--;){var s=r[o];if(s.prefix==n)return s.namespace!=i}return!0}function ee(e,t,r,n,i){if(n){if(!(e=n(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case o:i||(i=[]);i.length;var l=e.attributes,v=l.length,g=e.firstChild,y=e.tagName;r="http://www.w3.org/1999/xhtml"===e.namespaceURI||r,t.push("<",y);for(var b=0;b<v;b++){"xmlns"==(_=l.item(b)).prefix?i.push({prefix:_.localName,namespace:_.value}):"xmlns"==_.nodeName&&i.push({prefix:"",namespace:_.value})}for(b=0;b<v;b++){var _;if(Z(_=l.item(b),0,i)){var T=_.prefix||"",w=_.namespaceURI,S=T?" xmlns:"+T:" xmlns";t.push(S,'="',w,'"'),i.push({prefix:T,namespace:w})}ee(_,t,r,n,i)}if(Z(e,0,i)){T=e.prefix||"",w=e.namespaceURI,S=T?" xmlns:"+T:" xmlns";t.push(S,'="',w,'"'),i.push({prefix:T,namespace:w})}if(g||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(y)){if(t.push(">"),r&&/^script$/i.test(y))for(;g;)g.data?t.push(g.data):ee(g,t,r,n,i),g=g.nextSibling;else for(;g;)ee(g,t,r,n,i),g=g.nextSibling;t.push("</",y,">")}else t.push("/>");return;case p:case m:for(g=e.firstChild;g;)ee(g,t,r,n,i),g=g.nextSibling;return;case s:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,M),'"');case a:return t.push(e.data.replace(/[<&]/g,M));case c:return t.push("<![CDATA[",e.data,"]]>");case h:return t.push("\x3c!--",e.data,"--\x3e");case f:var C=e.publicId,E=e.systemId;if(t.push("<!DOCTYPE ",e.name),C)t.push(' PUBLIC "',C),E&&"."!=E&&t.push('" "',E),t.push('">');else if(E&&"."!=E)t.push(' SYSTEM "',E,'">');else{var O=e.internalSubset;O&&t.push(" [",O,"]"),t.push(">")}return;case d:return t.push("<?",e.target," ",e.data,"?>");case u:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function te(e,t,r){var n;switch(t.nodeType){case o:(n=t.cloneNode(!1)).ownerDocument=e;case m:break;case s:r=!0}if(n||(n=t.cloneNode(!1)),n.ownerDocument=e,n.parentNode=null,r)for(var i=t.firstChild;i;)n.appendChild(te(e,i,r)),i=i.nextSibling;return n}function re(e,t,r){var n=new t.constructor;for(var i in t){var a=t[i];"object"!=typeof a&&a!=n[i]&&(n[i]=a)}switch(t.childNodes&&(n.childNodes=new S),n.ownerDocument=e,n.nodeType){case o:var c=t.attributes,u=n.attributes=new O,l=c.length;u._ownerElement=n;for(var d=0;d<l;d++)n.setAttributeNode(re(e,c.item(d),!0));break;case s:r=!0}if(r)for(var h=t.firstChild;h;)n.appendChild(re(e,h,r)),h=h.nextSibling;return n}function ne(e,t,r){e[t]=r}w.prototype=Error.prototype,r(g,w),S.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var r=[],n=0;n<this.length;n++)ee(this[n],r,e,t);return r.join("")}},C.prototype.item=function(e){return E(this),this[e]},n(C,S),O.prototype={length:0,item:S.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var r=this[t];if(r.nodeName==e)return r}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new w(T);var r=this.getNamedItem(e.nodeName);return x(this._ownerElement,this,e,r),r},setNamedItemNS:function(e){var t,r=e.ownerElement;if(r&&r!=this._ownerElement)throw new w(T);return t=this.getNamedItemNS(e.namespaceURI,e.localName),x(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return A(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var r=this.getNamedItemNS(e,t);return A(this._ownerElement,this,r),r},getNamedItemNS:function(e,t){for(var r=this.length;r--;){var n=this[r];if(n.localName==t&&n.namespaceURI==e)return n}return null}},P.prototype={hasFeature:function(e,t){var r=this._features[e.toLowerCase()];return!(!r||t&&!(t in r))},createDocument:function(e,t,r){var n=new D;if(n.implementation=this,n.childNodes=new S,n.doctype=r,r&&n.appendChild(r),t){var i=n.createElementNS(e,t);n.appendChild(i)}return n},createDocumentType:function(e,t,r){var n=new W;return n.name=e,n.nodeName=e,n.publicId=t,n.systemId=r,n}},I.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return U(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return j(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return re(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==a&&e.nodeType==a?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var r=t._nsMap;if(r)for(var n in r)if(r[n]==e)return n;t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var r=t._nsMap;if(r&&e in r)return r[e];t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},r(i,I),r(i,I.prototype),D.prototype={nodeName:"#document",nodeType:p,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==m){for(var r=e.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,t),r=n}return e}return null==this.documentElement&&e.nodeType==o&&(this.documentElement=e),U(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),j(this,e)},importNode:function(e,t){return te(this,e,t)},getElementById:function(e){var t=null;return L(this.documentElement,(function(r){if(r.nodeType==o&&r.getAttribute("id")==e)return t=r,!0})),t},createElement:function(e){var t=new F;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new S,(t.attributes=new O)._ownerElement=t,t},createDocumentFragment:function(){var e=new X;return e.ownerDocument=this,e.childNodes=new S,e},createTextNode:function(e){var t=new V;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new q;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new H;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var r=new Y;return r.ownerDocument=this,r.tagName=r.target=e,r.nodeValue=r.data=t,r},createAttribute:function(e){var t=new $;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new K;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var r=new F,n=t.split(":"),i=r.attributes=new O;return r.childNodes=new S,r.ownerDocument=this,r.nodeName=t,r.tagName=t,r.namespaceURI=e,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,i._ownerElement=r,r},createAttributeNS:function(e,t){var r=new $,n=t.split(":");return r.ownerDocument=this,r.nodeName=t,r.name=t,r.namespaceURI=e,r.specified=!0,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,r}},n(D,I),F.prototype={nodeType:o,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var r=this.ownerDocument.createAttribute(e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===m?this.insertBefore(e,null):function(e,t){var r=t.parentNode;if(r){var n=e.lastChild;r.removeChild(t),n=e.lastChild}return n=e.lastChild,t.parentNode=e,t.previousSibling=n,t.nextSibling=null,n?n.nextSibling=t:e.firstChild=t,e.lastChild=t,N(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);r&&this.removeAttributeNode(r)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);return r&&r.value||""},setAttributeNS:function(e,t,r){var n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new C(this,(function(t){var r=[];return L(t,(function(n){n===t||n.nodeType!=o||"*"!==e&&n.tagName!=e||r.push(n)})),r}))},getElementsByTagNameNS:function(e,t){return new C(this,(function(r){var n=[];return L(r,(function(i){i===r||i.nodeType!==o||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||n.push(i)})),n}))}},D.prototype.getElementsByTagName=F.prototype.getElementsByTagName,D.prototype.getElementsByTagNameNS=F.prototype.getElementsByTagNameNS,n(F,I),$.prototype.nodeType=s,n($,I),B.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(y[b])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,r){r=this.data.substring(0,e)+r+this.data.substring(e+t),this.nodeValue=this.data=r,this.length=r.length}},n(B,I),V.prototype={nodeName:"#text",nodeType:a,splitText:function(e){var t=this.data,r=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},n(V,B),q.prototype={nodeName:"#comment",nodeType:h},n(q,B),H.prototype={nodeName:"#cdata-section",nodeType:c},n(H,B),W.prototype.nodeType=f,n(W,I),z.prototype.nodeType=v,n(z,I),G.prototype.nodeType=l,n(G,I),K.prototype.nodeType=u,n(K,I),X.prototype.nodeName="#document-fragment",X.prototype.nodeType=m,n(X,I),Y.prototype.nodeType=d,n(Y,I),Q.prototype.serializeToString=function(e,t,r){return J.call(e,t,r)},I.prototype.toString=J;try{if(Object.defineProperty){function ie(e){switch(e.nodeType){case o:case m:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(ie(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(C.prototype,"length",{get:function(){return E(this),this.$$length}}),Object.defineProperty(I.prototype,"textContent",{get:function(){return ie(this)},set:function(e){switch(this.nodeType){case o:case m:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ne=function(e,t,r){e["$$"+t]=r}}}catch(oe){}t.DOMImplementation=P},6147:(e,t)=>{var r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,n=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+r.source+n.source+"*(?::"+r.source+n.source+"*)?$");function o(){}function s(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function a(e,t,r,n,i,o){for(var s,a=++t,c=0;;){var u=e.charAt(a);switch(u){case"=":if(1===c)s=e.slice(t,a),c=3;else{if(2!==c)throw new Error("attribute equal must after attrName");c=3}break;case"'":case'"':if(3===c||1===c){if(1===c&&(o.warning('attribute value must after "="'),s=e.slice(t,a)),t=a+1,!((a=e.indexOf(u,t))>0))throw new Error("attribute value no end '"+u+"' match");l=e.slice(t,a).replace(/&#?\w+;/g,i),r.add(s,l,t-1),c=5}else{if(4!=c)throw new Error('attribute value must after "="');l=e.slice(t,a).replace(/&#?\w+;/g,i),r.add(s,l,t),o.warning('attribute "'+s+'" missed start quot('+u+")!!"),t=a+1,c=5}break;case"/":switch(c){case 0:r.setTagName(e.slice(t,a));case 5:case 6:case 7:c=7,r.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),0==c&&r.setTagName(e.slice(t,a)),a;case">":switch(c){case 0:r.setTagName(e.slice(t,a));case 5:case 6:case 7:break;case 4:case 1:"/"===(l=e.slice(t,a)).slice(-1)&&(r.closed=!0,l=l.slice(0,-1));case 2:2===c&&(l=s),4==c?(o.warning('attribute "'+l+'" missed quot(")!!'),r.add(s,l.replace(/&#?\w+;/g,i),t)):("http://www.w3.org/1999/xhtml"===n[""]&&l.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),r.add(l,l,t));break;case 3:throw new Error("attribute value missed!!")}return a;case"":u=" ";default:if(u<=" ")switch(c){case 0:r.setTagName(e.slice(t,a)),c=6;break;case 1:s=e.slice(t,a),c=2;break;case 4:var l=e.slice(t,a).replace(/&#?\w+;/g,i);o.warning('attribute "'+l+'" missed quot(")!!'),r.add(s,l,t);case 5:c=6}else switch(c){case 2:r.tagName;"http://www.w3.org/1999/xhtml"===n[""]&&s.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),r.add(s,s,t),t=a,c=1;break;case 5:o.warning('attribute space is required"'+s+'"!!');case 6:c=1,t=a;break;case 3:c=4,t=a;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}a++}}function c(e,t,r){for(var n=e.tagName,i=null,o=e.length;o--;){var s=e[o],a=s.qName,c=s.value;if((p=a.indexOf(":"))>0)var u=s.prefix=a.slice(0,p),l=a.slice(p+1),h="xmlns"===u&&l;else l=a,u=null,h="xmlns"===a&&"";s.localName=l,!1!==h&&(null==i&&(i={},d(r,r={})),r[h]=i[h]=c,s.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(h,c))}for(o=e.length;o--;){(u=(s=e[o]).prefix)&&("xml"===u&&(s.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(s.uri=r[u||""]))}var p;(p=n.indexOf(":"))>0?(u=e.prefix=n.slice(0,p),l=e.localName=n.slice(p+1)):(u=null,l=e.localName=n);var f=e.uri=r[u||""];if(t.startElement(f,l,n,e),!e.closed)return e.currentNSMap=r,e.localNSMap=i,!0;if(t.endElement(f,l,n),i)for(u in i)t.endPrefixMapping(u)}function u(e,t,r,n,i){if(/^(?:script|textarea)$/i.test(r)){var o=e.indexOf("</"+r+">",t),s=e.substring(t+1,o);if(/[&<]/.test(s))return/^script$/i.test(r)?(i.characters(s,0,s.length),o):(s=s.replace(/&#?\w+;/g,n),i.characters(s,0,s.length),o)}return t+1}function l(e,t,r,n){var i=n[r];return null==i&&((i=e.lastIndexOf("</"+r+">"))<t&&(i=e.lastIndexOf("</"+r)),n[r]=i),i<t}function d(e,t){for(var r in e)t[r]=e[r]}function h(e,t,r,n){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(i=e.indexOf("--\x3e",t+4))>t?(r.comment(e,t+4,i-t-4),i+3):(n.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return r.startCDATA(),r.characters(e,t+9,i-t-9),r.endCDATA(),i+3}var o=function(e,t){var r,n=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;i.lastIndex=t,i.exec(e);for(;r=i.exec(e);)if(n.push(r),r[1])return n}(e,t),s=o.length;if(s>1&&/!doctype/i.test(o[0][0])){var a=o[1][0],c=s>3&&/^public$/i.test(o[2][0])&&o[3][0],u=s>4&&o[4][0],l=o[s-1];return r.startDTD(a,c&&c.replace(/^(['"])(.*?)\1$/,"$2"),u&&u.replace(/^(['"])(.*?)\1$/,"$2")),r.endDTD(),l.index+l[0].length}return-1}function p(e,t,r){var n=e.indexOf("?>",t);if(n){var i=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){i[0].length;return r.processingInstruction(i[1],i[2]),n+2}return-1}return-1}function f(e){}function m(e,t){return e.__proto__=t,e}o.prototype={parse:function(e,t,r){var n=this.domBuilder;n.startDocument(),d(t,t={}),function(e,t,r,n,i){function o(e){if(e>65535){var t=55296+((e-=65536)>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}function d(e){var t=e.slice(1,-1);return t in r?r[t]:"#"===t.charAt(0)?o(parseInt(t.substr(1).replace("x","0x"))):(i.error("entity not found:"+e),e)}function m(t){if(t>S){var r=e.substring(S,t).replace(/&#?\w+;/g,d);_&&v(S),n.characters(r,0,t-S),S=t}}function v(t,r){for(;t>=y&&(r=b.exec(e));)g=r.index,y=g+r[0].length,_.lineNumber++;_.columnNumber=t-g+1}var g=0,y=0,b=/.*(?:\r\n?|\n)|.*$/g,_=n.locator,T=[{currentNSMap:t}],w={},S=0;for(;;){try{var C=e.indexOf("<",S);if(C<0){if(!e.substr(S).match(/^\s*$/)){var E=n.doc,O=E.createTextNode(e.substr(S));E.appendChild(O),n.currentElement=O}return}switch(C>S&&m(C),e.charAt(C+1)){case"/":var k=e.indexOf(">",C+3),x=e.substring(C+2,k),A=T.pop();k<0?(x=e.substring(C+2).replace(/[\s<].*/,""),i.error("end tag name: "+x+" is not complete:"+A.tagName),k=C+1+x.length):x.match(/\s</)&&(x=x.replace(/[\s<].*/,""),i.error("end tag name: "+x+" maybe not complete"),k=C+1+x.length);var P=A.localNSMap,I=A.tagName==x;if(I||A.tagName&&A.tagName.toLowerCase()==x.toLowerCase()){if(n.endElement(A.uri,A.localName,x),P)for(var M in P)n.endPrefixMapping(M);I||i.fatalError("end tag name: "+x+" is not match the current start tagName:"+A.tagName)}else T.push(A);k++;break;case"?":_&&v(C),k=p(e,C,n);break;case"!":_&&v(C),k=h(e,C,n,i);break;default:_&&v(C);var L=new f,D=T[T.length-1].currentNSMap,R=(k=a(e,C,L,D,d,i),L.length);if(!L.closed&&l(e,k,L.tagName,w)&&(L.closed=!0,r.nbsp||i.warning("unclosed xml attribute")),_&&R){for(var N=s(_,{}),j=0;j<R;j++){var U=L[j];v(U.offset),U.locator=s(_,{})}n.locator=N,c(L,n,D)&&T.push(L),n.locator=_}else c(L,n,D)&&T.push(L);"http://www.w3.org/1999/xhtml"!==L.uri||L.closed?k++:k=u(e,k,L.tagName,d,n)}}catch(e){i.error("element parse error: "+e),k=-1}k>S?S=k:m(Math.max(C,S)+1)}}(e,t,r,n,this.errorHandler),n.endDocument()}},f.prototype={setTagName:function(e){if(!i.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,r){if(!i.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},m({},m.prototype)instanceof m||(m=function(e,t){function r(){}for(t in r.prototype=t,r=new r,e)r[t]=e[t];return r}),t.G=o},5893:()=>{}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r(7878),r(7657),r(9074),r(2298),r(4244),r(8938);r(8236)})();